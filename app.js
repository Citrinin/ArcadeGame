!function o(a,s,c){function u(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(h)return h(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var r=s[t]={exports:{}};a[t][0].call(r.exports,function(e){return u(a[t][1][e]||e)},r,r.exports,o,a,s,c)}return s[t].exports}for(var h="function"==typeof require&&require,e=0;e<c.length;e++)u(c[e]);return u}({1:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r,o=e("./enemy"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,"goblin"));return t.width=36,t.height=48,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.default),n}();n.default=s},{"./enemy":2}],2:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var i,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=e("./person"),s=(i=a)&&i.__esModule?i:{default:i};var c=function(e){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t));return n.width=0,n.height=0,n.generatePosition(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,s.default),o(i,[{key:"generatePosition",value:function(){for(;this.position={x:Math.abs(this.width-this.game.width*Math.random()),y:this.game.height/2*Math.random()},this.getDistanceToHero()<200;);}},{key:"getDistanceToHero",value:function(){var e=this.game.hero;return Math.sqrt(Math.pow(e.position.x-this.position.x,2)+Math.pow(e.position.y-this.position.y,2))}}]),i}();n.default=c},{"./person":6}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var r=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=30,this.height=30,this.game=e,this.position={x:Math.abs(this.width-this.game.width*Math.random()),y:this.game.height/2*Math.random()},this.sprite=this.generateSptite()}return i(t,[{key:"getNextSprite",value:function(){return this.sprite}},{key:"generateSptite",value:function(){var e=document.querySelectorAll(".fruit-img");return e[Math.round(Math.random()*(e.length-1))]}},{key:"personState",get:function(){return{x:this.position.x,y:this.position.y}},set:function(e){this.position.x=e.x,this.position.y=e.y}}]),t}();n.default=r},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=u(e("./hero")),o=u(e("./dummyEnemy")),a=u(e("./smartEnemy")),s=u(e("../utils/firebase")),c=u(e("./fruit"));function u(e){return e&&e.__esModule?e:{default:e}}var h=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.gameOnScreen=!1,this.width=1e3<=window.innerWidth?1e3:window.innerWidth,this.height=(document.documentElement.clientHeight||document.body.clientHeight)-160,this.containter=e,this.setUpHero()}return i(t,[{key:"setUpGame",value:function(){var e=this;this.setUpCanvas(),this.hero=new r.default(this),this.replayData=[],this.characters=new Array(2).fill(0).map(function(){return new o.default(e)}),this.characters.push(new a.default(this)),this.fruits=[],this.level=1,this.baseSpeed=0,this.gamePlays=!1,this.gameTimer=0,this.timerHandler=setInterval(function(){return e.gameStep()},100)}},{key:"gameStep",value:function(){var t=this;this.context.clearRect(0,0,this.width,this.height),this.context.font="20px Segoe UI",this.context.fillText("Scores "+(this.gameTimer?this.getScore():0),this.width-150,30),this.context.fillText("Level "+this.level,this.width-150,55);var n=[];this.drawCharacter(this.hero),this.characters.forEach(function(e){t.drawCharacter(e),n.push({character:e,state:e.personState})}),this.fruits.forEach(function(e){t.drawCharacter(e),n.push({character:e,state:e.personState})}),this.fruits=this.fruits.filter(function(e){return!t.checkCharactersIntersection(t.hero,e)||(t.hero.enableRage(),!1)}),n.push({character:this.hero,state:this.hero.personState}),this.gamePlays&&this.replayData.push(n),this.hero.rageMode?this.characters=this.characters.filter(function(e){return!t.checkCharactersIntersection(t.hero,e)}):this.characters.some(function(e){return t.checkCharactersIntersection(t.hero,e)})&&this.loseGame()}},{key:"drawCharacter",value:function(e){this.context.drawImage(e.getNextSprite(),e.position.x,e.position.y,e.width,e.height)}},{key:"getScore",value:function(){return Math.round(((new Date).getTime()-this.gameTimer)/100)/10}},{key:"checkCharactersIntersection",value:function(e,t){if(e.position.x+20<=t.position.x+t.width&&e.position.x+e.width>=t.position.x+20&&e.position.y+20<=t.position.y+t.height&&e.position.y+e.height>=t.position.y+20)return!0}},{key:"runGame",value:function(){this.gameTimer=(new Date).getTime(),this.gamePlays=!0,this.baseSpeed=5,this.setLevel()}},{key:"loseGame",value:function(){var n=this;setTimeout(function(){n.endGame();var e=n.getScore(),t=prompt("Your score is "+e+" seconds.\n Enter your name","I'm Batman");t&&s.default.saveScore({name:t,score:e}),n.addEndGameButtons()},0)}},{key:"endGame",value:function(){clearInterval(this.timerHandler),clearInterval(this.levelTimer),this.gamePlays=!1,this.baseSpeed=0,this.gameOnScreen=!1}},{key:"setLevel",value:function(){var t=this;this.levelTimer=setInterval(function(){t.level+=1,t.characters.push(new o.default(t)),t.level%2==1&&t.characters.push(new a.default(t)),1<=t.level&&t.fruits.push(new c.default(t));var e=document.createElement("div");e.classList.add("level-up"),e.innerHTML="Level Up! Current level - "+t.level,t.containter.appendChild(e),setTimeout(function(){t.containter.removeChild(e)},1e3)},1e4)}},{key:"addEndGameButtons",value:function(){var e=document.createElement("div");e.classList.add("end-buttons");var t=document.createElement("button");t.innerHTML="Watch replay",t.addEventListener("click",function(){window.location.hash="watchreplay"});var n=document.createElement("button");n.innerHTML="Start new game",n.addEventListener("click",function(){window.location.hash="newgame"}),e.appendChild(t),e.appendChild(n),this.containter.appendChild(e)}},{key:"setUpHero",value:function(){var t=this;document.addEventListener("keydown",function(e){if(t.gameOnScreen){switch(e.keyCode){case 37:t.hero.directionAngle=Math.PI;break;case 38:t.hero.directionAngle=Math.PI/2;break;case 39:t.hero.directionAngle=0;break;case 40:t.hero.directionAngle=Math.PI/2*3;break;default:return}t.gamePlays||t.runGame()}})}},{key:"setUpCanvas",value:function(){this.gameOnScreen=!0,this.canvas=document.createElement("canvas"),this.containter.innerHTML="",this.containter.appendChild(this.canvas),this.canvas.width=this.width,this.canvas.height=this.height,this.context=this.canvas.getContext("2d")}},{key:"replayGame",value:function(){var t=this;clearInterval(this.replayTimer);var e=0;this.replayTimer=setInterval(function(){e>=(t.replayData||[]).length?clearInterval(t.replayTimer):(t.context.clearRect(0,0,t.width,t.height),t.replayData[e].forEach(function(e){e.character.personState=e.state,t.drawCharacter(e.character)}),e++)},20)}}]),t}();n.default=h},{"../utils/firebase":12,"./dummyEnemy":1,"./fruit":3,"./hero":5,"./smartEnemy":7}],5:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=e("./person"),s=(r=a)&&r.__esModule?r:{default:r};var c=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,"knight"));return t.width=55,t.height=75,t.position={x:(t.game.width-t.width)/2,y:t.game.height-t.height},t.rageMode=!1,t.sprites=t.spritesCollection.down,t.directionAngle=Math.PI/2,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.default),o(n,[{key:"getSpeed",value:function(){this.speed=this.game.baseSpeed*this.game.level}},{key:"enableRage",value:function(){var e=this;this.rageMode=!0,this.selectSpritesCollection(),this.game.canvas.classList.add("rage-canvas"),setTimeout(function(){return e.game.canvas.classList.remove("rage-canvas")},3e3),setTimeout(function(){e.rageMode=!1,e.selectSpritesCollection()},3500)}},{key:"selectSpritesCollection",value:function(){!0===this.rageMode?(this.width=75,this.spritesCollection=this.furySpritesCollection):(this.width=55,this.spritesCollection=this.normalSpritesColletcion),this.selectSprites()}},{key:"getAllSprites",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getAllSprites",this).call(this),this.normalSpritesColletcion=this.spritesCollection;var e="knight-kills";this.furySpritesCollection={left:this.getSprites("."+e+"-left-img"),right:this.getSprites("."+e+"-right-img"),up:this.getSprites("."+e+"-up-img"),down:this.getSprites("."+e+"-down-img")}}},{key:"personState",get:function(){return{x:this.position.x,y:this.position.y,directionAngle:this.directionAngle,rageMode:this.rageMode}},set:function(e){this.directionAngle=e.directionAngle,this.position.x=e.x,this.position.y=e.y,this.rageMode!==e.rageMode&&(this.rageMode=e.rageMode,this.spritesCollection=this.rageMode?this.furySpritesCollection:this.normalSpritesColletcion,this.selectSprites())}}]),n}();n.default=c},{"./person":6}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var r=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.selector=t,this.getAllSprites(),this.game=e,this.directionAngle=2*Math.PI*Math.random(),this.speed=e.level*e.baseSpeed/2,this.currentImg=0}return i(n,[{key:"selectSprites",value:function(){this.directionAngle>=5*Math.PI/4&&this.directionAngle<=7*Math.PI/4?this.sprites=this.spritesCollection.down:this.directionAngle>=Math.PI/4&&this.directionAngle<=3*Math.PI/4?this.sprites=this.spritesCollection.up:this.directionAngle>=3*Math.PI/4&&this.directionAngle<=5*Math.PI/4?this.sprites=this.spritesCollection.left:this.sprites=this.spritesCollection.right}},{key:"getAllSprites",value:function(){this.spritesCollection={left:this.getSprites("."+this.selector+"-left-img"),right:this.getSprites("."+this.selector+"-right-img"),up:this.getSprites("."+this.selector+"-up-img"),down:this.getSprites("."+this.selector+"-down-img")}}},{key:"getSprites",value:function(e){return[].slice.call(document.querySelectorAll(e))}},{key:"getNextSprite",value:function(){return this.step(),this.currentImg>=this.sprites.length&&(this.currentImg=0),this.sprites[this.currentImg++]}},{key:"step",value:function(){this.getSpeed(),this.position.x+=Math.cos(this.directionAngle)*this.speed,this.position.x+this.width/2>this.game.width&&(this.position.x=-this.width/2),this.position.x+this.width/2<0&&(this.position.x=this.game.width-this.width/2),this.position.y-=Math.sin(this.directionAngle)*this.speed,this.position.y+this.height/2>this.game.height&&(this.position.y=-this.height/2),this.position.y+this.height/2<0&&(this.position.y=this.game.height-this.height/2)}},{key:"getSpeed",value:function(){this.speed=this.game.baseSpeed*this.game.level/2}},{key:"directionAngle",get:function(){return this._directionAngle},set:function(e){this._directionAngle=e,this.selectSprites()}},{key:"personState",get:function(){return{x:this.position.x,y:this.position.y,directionAngle:this.directionAngle}},set:function(e){this.directionAngle=e.directionAngle,this.position.x=e.x,this.position.y=e.y}}]),n}();n.default=r},{}],7:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var i,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=e("./enemy"),s=(i=a)&&i.__esModule?i:{default:i};var c=function(e){function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,"rogue"));return t.range=300,t.width=40,t.height=45,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,s.default),o(i,[{key:"step",value:function(){var e=this.game.hero.position,t=this.position;if(this.getDistanceToHero()<=this.range&&e.x!==t.x){var n=Math.atan((e.y-t.y)/(e.x-t.x));e.x>t.x&&e.y<t.y||e.x>t.x&&e.y>t.y?this.directionAngle=2*Math.PI-n:this.directionAngle=Math.PI-n}(function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0})(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"step",this).call(this)}}]),i}();n.default=c},{"./enemy":2}],8:[function(e,t,n){"use strict";var i=o(e("./utils/router")),r=o(e("./routes"));function o(e){return e&&e.__esModule?e:{default:e}}(0,o(e("./utils/addButtonsForMobile")).default)(),new i.default(r.default)},{"./routes":9,"./utils/addButtonsForMobile":10,"./utils/router":13}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=o(e("./gameObjects/gameState")),r=o(e("./utils/firebase"));function o(e){return e&&e.__esModule?e:{default:e}}var a=document.querySelector(".content"),s=new i.default(a),c=[{match:"",onEnter:function(){window.location.hash="game"}},{match:"about",onEnter:function(){u("about"),a.innerHTML='<h1><span>Super arcade game</span></h1><div class="w-100"/><div><h2>Author <a href="https://github.com/citrinin">Kate Kuzkina</a></h2></div>'}},{match:"game",onEnter:function(){u("game"),s.setUpGame()},onLeave:function(){s.endGame()}},{match:"scores",onEnter:function(){u("scores"),r.default.getScores().then(function(e){a.innerHTML='<h1 class="about"><span>Scores</span></h1>';var n=document.createElement("ol");e.forEach(function(e){var t=document.createElement("li");t.innerHTML=e.name+" - "+e.score,n.appendChild(t)});var t=document.createElement("div");t.classList.add("w-100"),a.appendChild(t);var i=document.createElement("div");i.appendChild(n),a.appendChild(i)})}},{match:"replay",onEnter:function(){0!==(s.replayData||[]).length?s.replayGame():window.location.hash="game"}},{match:"watchreplay",onEnter:function(){window.location.hash="replay"}},{match:"newgame",onEnter:function(){window.location.hash="game"}}];function u(e){document.querySelector(".active").className="",document.querySelector('[href="#'+e+'"]').parentElement.className="active"}n.default=c},{"./gameObjects/gameState":4,"./utils/firebase":12}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){if((0,o.default)()){var e=document.createElement("div");e.classList.add("buttons");var t=document.createElement("button");t.innerHTML="<",t.classList.add("left");var n=document.createElement("button");n.innerHTML="^",n.classList.add("up");var i=document.createElement("button");i.innerHTML=">",i.classList.add("right");var r=document.createElement("button");r.innerHTML="v",r.classList.add("down"),e.appendChild(t),e.appendChild(n),e.appendChild(i),e.appendChild(r),e.addEventListener("click",function(e){if(e.target.matches(".right")){var t=new Event("keydown");return t.keyCode=39,void document.dispatchEvent(t)}if(e.target.matches(".left")){var n=new Event("keydown");return n.keyCode=37,void document.dispatchEvent(n)}if(e.target.matches(".up")){var i=new Event("keydown");return i.keyCode=38,void document.dispatchEvent(i)}if(e.target.matches(".down")){var r=new Event("keydown");return r.keyCode=40,void document.dispatchEvent(r)}}),document.body.appendChild(e)}};var i,r=e("./detectMobile"),o=(i=r)&&i.__esModule?i:{default:i}},{"./detectMobile":11}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))}},{}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var r="https://kate-arcade-game.firebaseio.com/.json",o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"getScores",value:function(){return fetch(r).then(function(e){return e.json()})}},{key:"saveScore",value:function(n){this.getScores().then(function(e){var t=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e||[]),[n]);t.sort(function(e,t){return e.score>t.score?-1:e.score<t.score?1:0}),t.splice(10),fetch(r,{method:"PUT",body:JSON.stringify(t)})})}}]),e}();n.default=o},{}],13:[function(e,t,n){"use strict";function i(e){var t=this;this.routes=e||[],this.currentRoute,this.previousRoute,this.currentParams,this.previousParams,window.addEventListener("hashchange",function(){t.handler(window.location.hash)}),this.handler(window.location.hash)}Object.defineProperty(n,"__esModule",{value:!0}),(n.default=i).prototype={handler:function(e){this.previousRoute=this.currentRoute,this.previousParams=this.currentParams,this.currentRoute=this.findNewRoute(e),this.launchHandlers()},findNewRoute:function(e){e=e.slice(1);for(var t=0;t<this.routes.length;t++){var n=this.routes[t];if("string"==typeof n.match&&n.match===e)return this.currentParams="",n;if("function"==typeof n.match&&n.match(e))return this.currentParams="",n;if(n.match instanceof RegExp&&n.match.test(e))return this.currentParams=e.match(n.match)||[],this.currentParams.splice(0,1),n}},launchHandlers:function(){var e=this;Promise.resolve().then(function(){e.previousRoute&&e.previousRoute.onLeave&&e.previousRoute.onLeave(e.previousParams)}).then(function(){e.currentRoute&&e.currentRoute.onBeforeEnter&&e.currentRoute.onBeforeEnter(e.currentParams)}).then(function(){e.currentRoute&&e.currentRoute.onEnter&&e.currentRoute.onEnter(e.currentParams)})}}},{}]},{},[8]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvZ2FtZU9iamVjdHMvZHVtbXlFbmVteS5qcyIsInNyYy9qcy9nYW1lT2JqZWN0cy9lbmVteS5qcyIsInNyYy9qcy9nYW1lT2JqZWN0cy9mcnVpdC5qcyIsInNyYy9qcy9nYW1lT2JqZWN0cy9nYW1lU3RhdGUuanMiLCJzcmMvanMvZ2FtZU9iamVjdHMvaGVyby5qcyIsInNyYy9qcy9nYW1lT2JqZWN0cy9wZXJzb24uanMiLCJzcmMvanMvZ2FtZU9iamVjdHMvc21hcnRFbmVteS5qcyIsInNyYy9qcy9tYWluLmpzIiwic3JjL2pzL3JvdXRlcy5qcyIsInNyYy9qcy91dGlscy9hZGRCdXR0b25zRm9yTW9iaWxlLmpzIiwic3JjL2pzL3V0aWxzL2RldGVjdE1vYmlsZS5qcyIsInNyYy9qcy91dGlscy9maXJlYmFzZS5qcyIsInNyYy9qcy91dGlscy9yb3V0ZXIuanMiXSwibmFtZXMiOlsiciIsImUiLCJuIiwidCIsIm8iLCJpIiwiZiIsImMiLCJyZXF1aXJlIiwidSIsImEiLCJFcnJvciIsImNvZGUiLCJwIiwiZXhwb3J0cyIsImNhbGwiLCJsZW5ndGgiLCIxIiwibW9kdWxlIiwiX2VuZW15IiwiRHVtbXlFbmVteSIsImdhbWVTdGF0ZSIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfdGhpcyIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwiX19wcm90b19fIiwiT2JqZWN0IiwiZ2V0UHJvdG90eXBlT2YiLCJ3aWR0aCIsImhlaWdodCIsIl9lbmVteTIiLCJkZWZhdWx0IiwiX3BlcnNvbiIsIkVuZW15Iiwic2VsZWN0b3IiLCJnZW5lcmF0ZVBvc2l0aW9uIiwiX3BlcnNvbjIiLCJwb3NpdGlvbiIsIngiLCJNYXRoIiwiYWJzIiwiZ2FtZSIsInJhbmRvbSIsInkiLCJnZXREaXN0YW5jZVRvSGVybyIsImhlcm8iLCJzcXJ0IiwicG93IiwiRnJ1aXQiLCJzcHJpdGUiLCJnZW5lcmF0ZVNwdGl0ZSIsInNwcml0ZXMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJyb3VuZCIsIm5ld1Bvc2l0aW9uIiwiR2FtZVN0YXRlIiwiZWxlbWVudFRvRHJhdyIsImdhbWVPblNjcmVlbiIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJkb2N1bWVudEVsZW1lbnQiLCJjbGllbnRIZWlnaHQiLCJib2R5IiwiY29udGFpbnRlciIsInNldFVwSGVybyIsInNldFVwQ2FudmFzIiwiX2hlcm8yIiwicmVwbGF5RGF0YSIsImNoYXJhY3RlcnMiLCJBcnJheSIsImZpbGwiLCJtYXAiLCJfZHVtbXlFbmVteTIiLCJwdXNoIiwiX3NtYXJ0RW5lbXkyIiwiZnJ1aXRzIiwibGV2ZWwiLCJiYXNlU3BlZWQiLCJnYW1lUGxheXMiLCJnYW1lVGltZXIiLCJ0aW1lckhhbmRsZXIiLCJzZXRJbnRlcnZhbCIsImdhbWVTdGVwIiwiX3RoaXMyIiwiY29udGV4dCIsImNsZWFyUmVjdCIsImZvbnQiLCJmaWxsVGV4dCIsImdldFNjb3JlIiwic3RlcERhdGEiLCJkcmF3Q2hhcmFjdGVyIiwiZm9yRWFjaCIsImNoYXJhY3RlciIsInN0YXRlIiwicGVyc29uU3RhdGUiLCJmcnVpdCIsImZpbHRlciIsImNoZWNrQ2hhcmFjdGVyc0ludGVyc2VjdGlvbiIsImVuYWJsZVJhZ2UiLCJyYWdlTW9kZSIsInNvbWUiLCJsb3NlR2FtZSIsImRyYXdJbWFnZSIsImdldE5leHRTcHJpdGUiLCJEYXRlIiwiZ2V0VGltZSIsImVuZW15Iiwic2V0TGV2ZWwiLCJfdGhpczMiLCJzZXRUaW1lb3V0IiwiZW5kR2FtZSIsInNjb3JlIiwibmFtZSIsInByb21wdCIsIl9maXJlYmFzZTIiLCJzYXZlU2NvcmUiLCJhZGRFbmRHYW1lQnV0dG9ucyIsImNsZWFySW50ZXJ2YWwiLCJsZXZlbFRpbWVyIiwiX3RoaXM0IiwiX2ZydWl0MiIsIm1lc3NhZ2UiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJyZW1vdmVDaGlsZCIsImRpdkZvckJ1dHRvbnMiLCJyZXBsYXlCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwibG9jYXRpb24iLCJoYXNoIiwic3RhcnROZXdHYW1lQnV0dG9uIiwiX3RoaXM1IiwiZXZlbnQiLCJrZXlDb2RlIiwiZGlyZWN0aW9uQW5nbGUiLCJQSSIsInJ1bkdhbWUiLCJjYW52YXMiLCJnZXRDb250ZXh0IiwiX3RoaXM2IiwicmVwbGF5VGltZXIiLCJjdXJyZW50U3RhdGUiLCJkYXRhIiwiSGVybyIsInNwcml0ZXNDb2xsZWN0aW9uIiwiZG93biIsInNwZWVkIiwic2VsZWN0U3ByaXRlc0NvbGxlY3Rpb24iLCJyZW1vdmUiLCJmdXJ5U3ByaXRlc0NvbGxlY3Rpb24iLCJub3JtYWxTcHJpdGVzQ29sbGV0Y2lvbiIsInNlbGVjdFNwcml0ZXMiLCJfZ2V0IiwicHJvdG90eXBlIiwibGVmdCIsImdldFNwcml0ZXMiLCJyaWdodCIsInVwIiwiUGVyc29uIiwiZ2V0QWxsU3ByaXRlcyIsImN1cnJlbnRJbWciLCJzbGljZSIsInN0ZXAiLCJnZXRTcGVlZCIsImNvcyIsInNpbiIsIl9kaXJlY3Rpb25BbmdsZSIsIm5ld1ZhbHVlIiwiU21hcnRFbmVteSIsInJhbmdlIiwiaGVyb1Bvc2l0aW9uIiwiZW5lbXlQb3NpdGlvbiIsImF0YW4iLCJfcm91dGVyMiIsIl9yb3V0ZXMyIiwiY29udGVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfZ2FtZVN0YXRlMiIsInJvdXRlcyIsIm1hdGNoIiwib25FbnRlciIsImNoYW5nZUFjdGl2ZVBhZ2UiLCJzZXRVcEdhbWUiLCJvbkxlYXZlIiwiZ2V0U2NvcmVzIiwidGhlbiIsInJlc3VsdCIsIm9sIiwiaXRlbSIsImxpIiwiZGl2Rm9yRGl2aXNpb24iLCJkaXYiLCJyZXBsYXlHYW1lIiwibmV3UGFnZSIsImNsYXNzTmFtZSIsInBhcmVudEVsZW1lbnQiLCJfZGV0ZWN0TW9iaWxlMiIsImJ1dHRvbkxlZnQiLCJidXR0b25VcCIsImJ1dHRvblJpZ2h0IiwiYnV0dG9uRG93biIsInRhcmdldCIsIm1hdGNoZXMiLCJFdmVudCIsImRpc3BhdGNoRXZlbnQiLCJfZSIsIl9lMiIsIl9lMyIsIl9kZXRlY3RNb2JpbGUiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ1cmwiLCJGaXJlU3RvcmUiLCJmZXRjaCIsInJlc3BvbnNlIiwianNvbiIsImluZm9Ub1NhdmUiLCJzY29yZXMiLCJuZXdTY29yZXMiLCJjb25jYXQiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJzb3J0IiwiaXRlbTEiLCJpdGVtMiIsInNwbGljZSIsIm1ldGhvZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJSb3V0ZXIiLCJyb3V0ZVBhcmFtcyIsImN1cnJlbnRSb3V0ZSIsInByZXZpb3VzUm91dGUiLCJjdXJyZW50UGFyYW1zIiwicHJldmlvdXNQYXJhbXMiLCJoYW5kbGVyIiwiZmluZE5ld1JvdXRlIiwibGF1bmNoSGFuZGxlcnMiLCJlbGVtZW50IiwiUmVnRXhwIiwidGVzdCIsIlByb21pc2UiLCJyZXNvbHZlIiwib25CZWZvcmVFbnRlciJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsRUFBQUMsRUFBQUMsR0FBQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUFBLElBQUFKLEVBQUFHLEdBQUEsQ0FBQSxJQUFBSixFQUFBSSxHQUFBLENBQUEsSUFBQUUsRUFBQSxtQkFBQUMsU0FBQUEsUUFBQSxJQUFBRixHQUFBQyxFQUFBLE9BQUFBLEVBQUFGLEdBQUEsR0FBQSxHQUFBSSxFQUFBLE9BQUFBLEVBQUFKLEdBQUEsR0FBQSxJQUFBSyxFQUFBLElBQUFDLE1BQUEsdUJBQUFOLEVBQUEsS0FBQSxNQUFBSyxFQUFBRSxLQUFBLG1CQUFBRixFQUFBLElBQUFHLEVBQUFYLEVBQUFHLEdBQUEsQ0FBQVMsUUFBQSxJQUFBYixFQUFBSSxHQUFBLEdBQUFVLEtBQUFGLEVBQUFDLFFBQUEsU0FBQWQsR0FBQSxPQUFBSSxFQUFBSCxFQUFBSSxHQUFBLEdBQUFMLElBQUFBLElBQUFhLEVBQUFBLEVBQUFDLFFBQUFk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SUFBNkMsQ0FDekMsSUFBSTZPLEVBQVUzTixLQUFBZ0ssT0FBZGxMLEdBQ0EsR0FBSSxpQkFBUTZPLEVBQVIxRCxPQUFzQzBELEVBQUExRCxRQUExQ2xELEVBRUksT0FEQS9HLEtBQUFzTixjQUFBLEdBQ0FLLEVBRUosR0FBSSxtQkFBUUEsRUFBUjFELE9BQXdDMEQsRUFBQTFELE1BQTVDbEQsR0FFSSxPQURBL0csS0FBQXNOLGNBQUEsR0FDQUssRUFFSixHQUFLQSxFQUFBMUQsaUJBQUQyRCxRQUFxQ0QsRUFBQTFELE1BQUE0RCxLQUF6QzlHLEdBR0ksT0FGQS9HLEtBQUFzTixjQUFxQnZHLEVBQUFrRCxNQUFXMEQsRUFBWDFELFFBQXJCLEdBQ0FqSyxLQUFBc04sY0FBQVIsT0FBQSxFQUFBLEdBQ0FhLElBdkJHRCxlQUFBLFdBMkJFLElBQUE1SixFQUFBOUQsS0FDYjhOLFFBQUFDLFVBQUF4RCxLQUNVLFdBQVF6RyxFQUFBdUosZUFBc0J2SixFQUFBdUosY0FBdEJoRCxTQUFvRHZHLEVBQUF1SixjQUFBaEQsUUFBMkJ2RyxFQUEvRXlKLGtCQURsQmhELEtBRVUsV0FBUXpHLEVBQUFzSixjQUFxQnRKLEVBQUFzSixhQUFyQlksZUFBd0RsSyxFQUFBc0osYUFBQVksY0FBZ0NsSyxFQUF4RndKLGlCQUZsQi9DLEtBR1UsV0FBUXpHLEVBQUFzSixjQUFxQnRKLEVBQUFzSixhQUFyQmxELFNBQWtEcEcsRUFBQXNKLGFBQUFsRCxRQUEwQnBHLEVBQTVFd0oiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImltcG9ydCBFbmVteSBmcm9tICcuL2VuZW15JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIER1bW15RW5lbXkgZXh0ZW5kcyBFbmVteSB7XHJcbiAgICBjb25zdHJ1Y3RvcihnYW1lU3RhdGUpIHtcclxuICAgICAgICBzdXBlcihnYW1lU3RhdGUsICdnb2JsaW4nKTtcclxuICAgICAgICB0aGlzLndpZHRoID0gMzY7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSA0ODtcclxuICAgIH1cclxufSIsImltcG9ydCBQZXJzb24gZnJvbSAnLi9wZXJzb24nO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW5lbXkgZXh0ZW5kcyBQZXJzb24ge1xyXG4gICAgY29uc3RydWN0b3IoZ2FtZVN0YXRlLCBzZWxlY3Rvcikge1xyXG4gICAgICAgIHN1cGVyKGdhbWVTdGF0ZSwgc2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMud2lkdGggPSAwO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMDtcclxuICAgICAgICB0aGlzLmdlbmVyYXRlUG9zaXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZVBvc2l0aW9uKCkge1xyXG4gICAgICAgIGRvIHtcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgIHg6IE1hdGguYWJzKHRoaXMud2lkdGggLSB0aGlzLmdhbWUud2lkdGggKiBNYXRoLnJhbmRvbSgpKSxcclxuICAgICAgICAgICAgICAgIHk6IHRoaXMuZ2FtZS5oZWlnaHQgLyAyICogTWF0aC5yYW5kb20oKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gd2hpbGUgKHRoaXMuZ2V0RGlzdGFuY2VUb0hlcm8oKSA8IDIwMCk7XHJcbiAgICB9XHJcbiAgICBnZXREaXN0YW5jZVRvSGVybygpIHtcclxuICAgICAgICBsZXQgaGVybyA9IHRoaXMuZ2FtZS5oZXJvO1xyXG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQoTWF0aC5wb3coaGVyby5wb3NpdGlvbi54IC0gdGhpcy5wb3NpdGlvbi54LCAyKSArIE1hdGgucG93KGhlcm8ucG9zaXRpb24ueSAtIHRoaXMucG9zaXRpb24ueSwgMikpO1xyXG4gICAgfVxyXG5cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZydWl0IHtcclxuICAgIGNvbnN0cnVjdG9yKGdhbWVTdGF0ZSkge1xyXG4gICAgICAgIHRoaXMud2lkdGggPSAzMDtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IDMwO1xyXG4gICAgICAgIHRoaXMuZ2FtZSA9IGdhbWVTdGF0ZTtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICB4OiBNYXRoLmFicyh0aGlzLndpZHRoIC0gdGhpcy5nYW1lLndpZHRoICogTWF0aC5yYW5kb20oKSksXHJcbiAgICAgICAgICAgIHk6IHRoaXMuZ2FtZS5oZWlnaHQgLyAyICogTWF0aC5yYW5kb20oKVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuc3ByaXRlID0gdGhpcy5nZW5lcmF0ZVNwdGl0ZSgpO1xyXG4gICAgfVxyXG4gICAgZ2V0TmV4dFNwcml0ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zcHJpdGU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHBlcnNvblN0YXRlKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHg6IHRoaXMucG9zaXRpb24ueCxcclxuICAgICAgICAgICAgeTogdGhpcy5wb3NpdGlvbi55LFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHBlcnNvblN0YXRlKG5ld1Bvc2l0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi54ID0gbmV3UG9zaXRpb24ueDtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uLnkgPSBuZXdQb3NpdGlvbi55O1xyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlU3B0aXRlKCkge1xyXG4gICAgICAgIGxldCBzcHJpdGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZydWl0LWltZycpO1xyXG4gICAgICAgIGxldCBmcnVpdE51bWJlciA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIChzcHJpdGVzLmxlbmd0aCAtIDEpKTtcclxuICAgICAgICByZXR1cm4gc3ByaXRlc1tmcnVpdE51bWJlcl07XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgSGVybyBmcm9tICcuL2hlcm8nO1xyXG5pbXBvcnQgRHVtbXlFbmVteSBmcm9tICcuL2R1bW15RW5lbXknO1xyXG5pbXBvcnQgU21hcnRFbmVteSBmcm9tICcuL3NtYXJ0RW5lbXknO1xyXG5pbXBvcnQgRmlyZVN0b3JlIGZyb20gJy4uL3V0aWxzL2ZpcmViYXNlJztcclxuaW1wb3J0IEZydWl0IGZyb20gJy4vZnJ1aXQnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZVN0YXRlIHtcclxuXHRjb25zdHJ1Y3RvcihlbGVtZW50VG9EcmF3KSB7XHJcblx0XHR0aGlzLmdhbWVPblNjcmVlbiA9IGZhbHNlO1xyXG5cdFx0dGhpcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoID49IDEwMDAgPyAxMDAwIDogd2luZG93LmlubmVyV2lkdGg7XHJcblxyXG5cdFx0dGhpcy5oZWlnaHQgPSAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodFxyXG5cdFx0XHR8fCBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCkgLSAxNjA7XHJcblxyXG5cdFx0dGhpcy5jb250YWludGVyID0gZWxlbWVudFRvRHJhdztcclxuXHRcdHRoaXMuc2V0VXBIZXJvKCk7XHJcblx0fVxyXG5cclxuXHRzZXRVcEdhbWUoKSB7XHJcblx0XHR0aGlzLnNldFVwQ2FudmFzKCk7XHJcblxyXG5cdFx0dGhpcy5oZXJvID0gbmV3IEhlcm8odGhpcyk7XHJcblxyXG5cdFx0dGhpcy5yZXBsYXlEYXRhID0gW107XHJcblx0XHR0aGlzLmNoYXJhY3RlcnMgPSBuZXcgQXJyYXkoMikuZmlsbCgwKS5tYXAoKCkgPT4gbmV3IER1bW15RW5lbXkodGhpcykpO1xyXG5cdFx0dGhpcy5jaGFyYWN0ZXJzLnB1c2gobmV3IFNtYXJ0RW5lbXkodGhpcykpO1xyXG5cdFx0dGhpcy5mcnVpdHMgPSBbXTtcclxuXHJcblx0XHR0aGlzLmxldmVsID0gMTtcclxuXHRcdHRoaXMuYmFzZVNwZWVkID0gMDtcclxuXHRcdHRoaXMuZ2FtZVBsYXlzID0gZmFsc2U7XHJcblx0XHR0aGlzLmdhbWVUaW1lciA9IDA7XHJcblxyXG5cdFx0dGhpcy50aW1lckhhbmRsZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB0aGlzLmdhbWVTdGVwKCksIDEwMCk7XHJcblx0fVxyXG5cclxuXHRnYW1lU3RlcCgpIHtcclxuXHRcdHRoaXMuY29udGV4dC5jbGVhclJlY3QoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xyXG5cclxuXHRcdHRoaXMuY29udGV4dC5mb250ID0gJzIwcHggU2Vnb2UgVUknO1xyXG5cdFx0dGhpcy5jb250ZXh0LmZpbGxUZXh0KGBTY29yZXMgJHt0aGlzLmdhbWVUaW1lciA/IHRoaXMuZ2V0U2NvcmUoKSA6IDB9YCwgdGhpcy53aWR0aCAtIDE1MCwgMzApO1xyXG5cdFx0dGhpcy5jb250ZXh0LmZpbGxUZXh0KGBMZXZlbCAke3RoaXMubGV2ZWx9YCwgdGhpcy53aWR0aCAtIDE1MCwgNTUpO1xyXG5cclxuXHRcdGxldCBzdGVwRGF0YSA9IFtdO1xyXG5cdFx0dGhpcy5kcmF3Q2hhcmFjdGVyKHRoaXMuaGVybyk7XHJcblxyXG5cdFx0dGhpcy5jaGFyYWN0ZXJzLmZvckVhY2goY2hhcmFjdGVyID0+IHtcclxuXHRcdFx0dGhpcy5kcmF3Q2hhcmFjdGVyKGNoYXJhY3Rlcik7XHJcblx0XHRcdHN0ZXBEYXRhLnB1c2goe1xyXG5cdFx0XHRcdGNoYXJhY3RlcjogY2hhcmFjdGVyLFxyXG5cdFx0XHRcdHN0YXRlOiBjaGFyYWN0ZXIucGVyc29uU3RhdGVcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLmZydWl0cy5mb3JFYWNoKGZydWl0ID0+IHtcclxuXHRcdFx0dGhpcy5kcmF3Q2hhcmFjdGVyKGZydWl0KTtcclxuXHRcdFx0c3RlcERhdGEucHVzaCh7XHJcblx0XHRcdFx0Y2hhcmFjdGVyOiBmcnVpdCxcclxuXHRcdFx0XHRzdGF0ZTogZnJ1aXQucGVyc29uU3RhdGVcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHRcdHRoaXMuZnJ1aXRzID0gdGhpcy5mcnVpdHMuZmlsdGVyKGZydWl0ID0+IHtcclxuXHRcdFx0dmFyIHJlc3VsdCA9IHRoaXMuY2hlY2tDaGFyYWN0ZXJzSW50ZXJzZWN0aW9uKHRoaXMuaGVybywgZnJ1aXQpO1xyXG5cdFx0XHRpZiAocmVzdWx0KSB7XHJcblx0XHRcdFx0dGhpcy5oZXJvLmVuYWJsZVJhZ2UoKTtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9KTtcclxuXHJcblxyXG5cdFx0c3RlcERhdGEucHVzaCh7XHJcblx0XHRcdGNoYXJhY3RlcjogdGhpcy5oZXJvLFxyXG5cdFx0XHRzdGF0ZTogdGhpcy5oZXJvLnBlcnNvblN0YXRlXHJcblx0XHR9KTtcclxuXHJcblxyXG5cdFx0dGhpcy5nYW1lUGxheXMgJiYgdGhpcy5yZXBsYXlEYXRhLnB1c2goc3RlcERhdGEpO1xyXG5cclxuXHRcdGlmICh0aGlzLmhlcm8ucmFnZU1vZGUpIHtcclxuXHRcdFx0dGhpcy5jaGFyYWN0ZXJzID0gdGhpcy5jaGFyYWN0ZXJzLmZpbHRlcihjaGFyYWN0ZXIgPT4gIXRoaXMuY2hlY2tDaGFyYWN0ZXJzSW50ZXJzZWN0aW9uKHRoaXMuaGVybywgY2hhcmFjdGVyKSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRpZiAodGhpcy5jaGFyYWN0ZXJzLnNvbWUoY2hhcmFjdGVyID0+IHRoaXMuY2hlY2tDaGFyYWN0ZXJzSW50ZXJzZWN0aW9uKHRoaXMuaGVybywgY2hhcmFjdGVyKSkpIHtcclxuXHRcdFx0XHR0aGlzLmxvc2VHYW1lKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0fVxyXG5cclxuXHRkcmF3Q2hhcmFjdGVyKGNoYXJhY3Rlcikge1xyXG5cdFx0dGhpcy5jb250ZXh0LmRyYXdJbWFnZShjaGFyYWN0ZXIuZ2V0TmV4dFNwcml0ZSgpLCBjaGFyYWN0ZXIucG9zaXRpb24ueCwgY2hhcmFjdGVyLnBvc2l0aW9uLnksIGNoYXJhY3Rlci53aWR0aCwgY2hhcmFjdGVyLmhlaWdodCk7XHJcblx0fVxyXG5cclxuXHRnZXRTY29yZSgpIHtcclxuXHRcdHJldHVybiBNYXRoLnJvdW5kKChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHRoaXMuZ2FtZVRpbWVyKSAvIDEwMCkgLyAxMDtcclxuXHR9XHJcblxyXG5cdGNoZWNrQ2hhcmFjdGVyc0ludGVyc2VjdGlvbihoZXJvLCBlbmVteSkge1xyXG5cdFx0bGV0IGRlbHRhWCA9IDIwO1xyXG5cdFx0bGV0IGRlbHRhWSA9IDIwO1xyXG5cdFx0aWYgKCgoaGVyby5wb3NpdGlvbi54ICsgZGVsdGFYIDw9IChlbmVteS5wb3NpdGlvbi54ICsgZW5lbXkud2lkdGgpKSAmJiAoKGhlcm8ucG9zaXRpb24ueCArIGhlcm8ud2lkdGgpID49IGVuZW15LnBvc2l0aW9uLnggKyBkZWx0YVgpKSAmJlxyXG5cdFx0XHQoKGhlcm8ucG9zaXRpb24ueSArIGRlbHRhWSA8PSAoZW5lbXkucG9zaXRpb24ueSArIGVuZW15LmhlaWdodCkpICYmICgoaGVyby5wb3NpdGlvbi55ICsgaGVyby5oZWlnaHQpID49IGVuZW15LnBvc2l0aW9uLnkgKyBkZWx0YVkpKSkge1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJ1bkdhbWUoKSB7XHJcblx0XHR0aGlzLmdhbWVUaW1lciA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG5cdFx0dGhpcy5nYW1lUGxheXMgPSB0cnVlO1xyXG5cdFx0dGhpcy5iYXNlU3BlZWQgPSA1O1xyXG5cdFx0dGhpcy5zZXRMZXZlbCgpO1xyXG5cdH1cclxuXHJcblx0bG9zZUdhbWUoKSB7XHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0dGhpcy5lbmRHYW1lKCk7XHJcblx0XHRcdGxldCBzY29yZSA9IHRoaXMuZ2V0U2NvcmUoKTtcclxuXHRcdFx0bGV0IG5hbWUgPSBwcm9tcHQoYFlvdXIgc2NvcmUgaXMgJHtzY29yZX0gc2Vjb25kcy5cXG4gRW50ZXIgeW91ciBuYW1lYCwgJ0lcXCdtIEJhdG1hbicpO1xyXG5cdFx0XHRuYW1lICYmIEZpcmVTdG9yZS5zYXZlU2NvcmUoe1xyXG5cdFx0XHRcdG5hbWUsIHNjb3JlXHJcblx0XHRcdH0pO1xyXG5cdFx0XHR0aGlzLmFkZEVuZEdhbWVCdXR0b25zKCk7XHJcblx0XHR9LCAwKTtcclxuXHR9XHJcblxyXG5cdGVuZEdhbWUoKSB7XHJcblx0XHRjbGVhckludGVydmFsKHRoaXMudGltZXJIYW5kbGVyKTtcclxuXHRcdGNsZWFySW50ZXJ2YWwodGhpcy5sZXZlbFRpbWVyKTtcclxuXHRcdHRoaXMuZ2FtZVBsYXlzID0gZmFsc2U7XHJcblx0XHR0aGlzLmJhc2VTcGVlZCA9IDA7XHJcblx0XHR0aGlzLmdhbWVPblNjcmVlbiA9IGZhbHNlO1xyXG5cdH1cclxuXHJcblx0c2V0TGV2ZWwoKSB7XHJcblx0XHR0aGlzLmxldmVsVGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcblx0XHRcdHRoaXMubGV2ZWwgKz0gMTtcclxuXHJcblx0XHRcdHRoaXMuY2hhcmFjdGVycy5wdXNoKG5ldyBEdW1teUVuZW15KHRoaXMpKTtcclxuXHRcdFx0aWYgKHRoaXMubGV2ZWwgJSAyID09PSAxKSB7XHJcblx0XHRcdFx0dGhpcy5jaGFyYWN0ZXJzLnB1c2gobmV3IFNtYXJ0RW5lbXkodGhpcykpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICh0aGlzLmxldmVsID49IDEpIHtcclxuXHRcdFx0XHR0aGlzLmZydWl0cy5wdXNoKG5ldyBGcnVpdCh0aGlzKSk7XHJcblx0XHRcdH1cclxuXHRcdFx0bGV0IG1lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0bWVzc2FnZS5jbGFzc0xpc3QuYWRkKCdsZXZlbC11cCcpO1xyXG5cdFx0XHRtZXNzYWdlLmlubmVySFRNTCA9IGBMZXZlbCBVcCEgQ3VycmVudCBsZXZlbCAtICR7dGhpcy5sZXZlbH1gO1xyXG5cclxuXHRcdFx0dGhpcy5jb250YWludGVyLmFwcGVuZENoaWxkKG1lc3NhZ2UpO1xyXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHR0aGlzLmNvbnRhaW50ZXIucmVtb3ZlQ2hpbGQobWVzc2FnZSk7XHJcblx0XHRcdH0sIDEwMDApO1xyXG5cdFx0fSwgMTAwMDApO1xyXG5cdH1cclxuXHJcblx0YWRkRW5kR2FtZUJ1dHRvbnMoKSB7XHJcblx0XHRsZXQgZGl2Rm9yQnV0dG9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0ZGl2Rm9yQnV0dG9ucy5jbGFzc0xpc3QuYWRkKCdlbmQtYnV0dG9ucycpO1xyXG5cclxuXHRcdGxldCByZXBsYXlCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuXHRcdHJlcGxheUJ1dHRvbi5pbm5lckhUTUwgPSAnV2F0Y2ggcmVwbGF5JztcclxuXHRcdHJlcGxheUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRcdFx0d2luZG93LmxvY2F0aW9uLmhhc2ggPSAnd2F0Y2hyZXBsYXknO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0bGV0IHN0YXJ0TmV3R2FtZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG5cdFx0c3RhcnROZXdHYW1lQnV0dG9uLmlubmVySFRNTCA9ICdTdGFydCBuZXcgZ2FtZSc7XHJcblx0XHRzdGFydE5ld0dhbWVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJ25ld2dhbWUnO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0ZGl2Rm9yQnV0dG9ucy5hcHBlbmRDaGlsZChyZXBsYXlCdXR0b24pO1xyXG5cdFx0ZGl2Rm9yQnV0dG9ucy5hcHBlbmRDaGlsZChzdGFydE5ld0dhbWVCdXR0b24pO1xyXG5cclxuXHRcdHRoaXMuY29udGFpbnRlci5hcHBlbmRDaGlsZChkaXZGb3JCdXR0b25zKTtcclxuXHR9XHJcblx0c2V0VXBIZXJvKCkge1xyXG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldmVudCkgPT4ge1xyXG5cdFx0XHRpZiAodGhpcy5nYW1lT25TY3JlZW4pIHtcclxuXHRcdFx0XHRzd2l0Y2ggKGV2ZW50LmtleUNvZGUpIHtcclxuXHRcdFx0XHRcdGNhc2UgMzc6IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5oZXJvLmRpcmVjdGlvbkFuZ2xlID0gTWF0aC5QSTtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRjYXNlIDM4OiB7XHJcblx0XHRcdFx0XHRcdHRoaXMuaGVyby5kaXJlY3Rpb25BbmdsZSA9IE1hdGguUEkgLyAyO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGNhc2UgMzk6IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5oZXJvLmRpcmVjdGlvbkFuZ2xlID0gMDtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRjYXNlIDQwOiB7XHJcblx0XHRcdFx0XHRcdHRoaXMuaGVyby5kaXJlY3Rpb25BbmdsZSA9IE1hdGguUEkgLyAyICogMztcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRkZWZhdWx0OiB7XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCF0aGlzLmdhbWVQbGF5cykge1xyXG5cdFx0XHRcdFx0dGhpcy5ydW5HYW1lKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHNldFVwQ2FudmFzKCkge1xyXG5cdFx0dGhpcy5nYW1lT25TY3JlZW4gPSB0cnVlO1xyXG5cdFx0dGhpcy5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuXHRcdHRoaXMuY29udGFpbnRlci5pbm5lckhUTUwgPSAnJztcclxuXHRcdHRoaXMuY29udGFpbnRlci5hcHBlbmRDaGlsZCh0aGlzLmNhbnZhcyk7XHJcblx0XHR0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMud2lkdGg7XHJcblx0XHR0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLmhlaWdodDtcclxuXHRcdHRoaXMuY29udGV4dCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcblx0fVxyXG5cclxuXHRyZXBsYXlHYW1lKCkge1xyXG5cdFx0Y2xlYXJJbnRlcnZhbCh0aGlzLnJlcGxheVRpbWVyKTtcclxuXHRcdGxldCBjdXJyZW50U3RhdGUgPSAwO1xyXG5cdFx0dGhpcy5yZXBsYXlUaW1lciA9IHNldEludGVydmFsKCgpID0+IHtcclxuXHRcdFx0aWYgKGN1cnJlbnRTdGF0ZSA+PSAodGhpcy5yZXBsYXlEYXRhIHx8IFtdKS5sZW5ndGgpIHtcclxuXHRcdFx0XHRjbGVhckludGVydmFsKHRoaXMucmVwbGF5VGltZXIpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLmNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcclxuXHJcblx0XHRcdGxldCBzdGF0ZSA9IHRoaXMucmVwbGF5RGF0YVtjdXJyZW50U3RhdGVdO1xyXG5cdFx0XHRzdGF0ZS5mb3JFYWNoKGRhdGEgPT4ge1xyXG5cdFx0XHRcdGRhdGEuY2hhcmFjdGVyLnBlcnNvblN0YXRlID0gZGF0YS5zdGF0ZTtcclxuXHRcdFx0XHR0aGlzLmRyYXdDaGFyYWN0ZXIoZGF0YS5jaGFyYWN0ZXIpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0Y3VycmVudFN0YXRlKys7XHJcblx0XHR9LCAyMCk7XHJcblx0fVxyXG59XHJcbiIsImltcG9ydCBQZXJzb24gZnJvbSAnLi9wZXJzb24nO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSGVybyBleHRlbmRzIFBlcnNvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihnYW1lU3RhdGUpIHtcclxuICAgICAgICBzdXBlcihnYW1lU3RhdGUsICdrbmlnaHQnKTtcclxuICAgICAgICB0aGlzLndpZHRoID0gNTU7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSA3NTtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICB4OiAodGhpcy5nYW1lLndpZHRoIC0gdGhpcy53aWR0aCkgLyAyLFxyXG4gICAgICAgICAgICB5OiB0aGlzLmdhbWUuaGVpZ2h0IC0gdGhpcy5oZWlnaHRcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMucmFnZU1vZGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNwcml0ZXMgPSB0aGlzLnNwcml0ZXNDb2xsZWN0aW9uLmRvd247XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb25BbmdsZSA9IE1hdGguUEkgLyAyO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBnZXRTcGVlZCgpIHtcclxuICAgICAgICB0aGlzLnNwZWVkID0gdGhpcy5nYW1lLmJhc2VTcGVlZCAqIHRoaXMuZ2FtZS5sZXZlbDtcclxuICAgIH1cclxuICAgIGVuYWJsZVJhZ2UoKSB7XHJcbiAgICAgICAgdGhpcy5yYWdlTW9kZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RTcHJpdGVzQ29sbGVjdGlvbigpO1xyXG4gICAgICAgIHRoaXMuZ2FtZS5jYW52YXMuY2xhc3NMaXN0LmFkZCgncmFnZS1jYW52YXMnKTtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuZ2FtZS5jYW52YXMuY2xhc3NMaXN0LnJlbW92ZSgncmFnZS1jYW52YXMnKSwgMzAwMCk7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmFnZU1vZGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RTcHJpdGVzQ29sbGVjdGlvbigpO1xyXG4gICAgICAgIH0sIDM1MDApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBwZXJzb25TdGF0ZSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB4OiB0aGlzLnBvc2l0aW9uLngsXHJcbiAgICAgICAgICAgIHk6IHRoaXMucG9zaXRpb24ueSxcclxuICAgICAgICAgICAgZGlyZWN0aW9uQW5nbGU6IHRoaXMuZGlyZWN0aW9uQW5nbGUsXHJcbiAgICAgICAgICAgIHJhZ2VNb2RlOiB0aGlzLnJhZ2VNb2RlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgcGVyc29uU3RhdGUobmV3UG9zaXRpb24pIHtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbkFuZ2xlID0gbmV3UG9zaXRpb24uZGlyZWN0aW9uQW5nbGU7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi54ID0gbmV3UG9zaXRpb24ueDtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uLnkgPSBuZXdQb3NpdGlvbi55O1xyXG4gICAgICAgIGlmICh0aGlzLnJhZ2VNb2RlICE9PSBuZXdQb3NpdGlvbi5yYWdlTW9kZSkge1xyXG4gICAgICAgICAgICB0aGlzLnJhZ2VNb2RlID0gbmV3UG9zaXRpb24ucmFnZU1vZGU7XHJcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlc0NvbGxlY3Rpb24gPSB0aGlzLnJhZ2VNb2RlID8gdGhpcy5mdXJ5U3ByaXRlc0NvbGxlY3Rpb24gOiB0aGlzLm5vcm1hbFNwcml0ZXNDb2xsZXRjaW9uO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFNwcml0ZXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2VsZWN0U3ByaXRlc0NvbGxlY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmFnZU1vZGUgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgdGhpcy53aWR0aCA9IDc1O1xyXG4gICAgICAgICAgICB0aGlzLnNwcml0ZXNDb2xsZWN0aW9uID0gdGhpcy5mdXJ5U3ByaXRlc0NvbGxlY3Rpb247XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy53aWR0aCA9IDU1O1xyXG4gICAgICAgICAgICB0aGlzLnNwcml0ZXNDb2xsZWN0aW9uID0gdGhpcy5ub3JtYWxTcHJpdGVzQ29sbGV0Y2lvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZWxlY3RTcHJpdGVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWxsU3ByaXRlcygpIHtcclxuICAgICAgICBzdXBlci5nZXRBbGxTcHJpdGVzKCk7XHJcbiAgICAgICAgdGhpcy5ub3JtYWxTcHJpdGVzQ29sbGV0Y2lvbiA9IHRoaXMuc3ByaXRlc0NvbGxlY3Rpb247XHJcbiAgICAgICAgdmFyIHNlbGVjdG9yID0gJ2tuaWdodC1raWxscyc7XHJcbiAgICAgICAgdGhpcy5mdXJ5U3ByaXRlc0NvbGxlY3Rpb24gPSB7XHJcbiAgICAgICAgICAgIGxlZnQ6IHRoaXMuZ2V0U3ByaXRlcyhgLiR7c2VsZWN0b3J9LWxlZnQtaW1nYCksXHJcbiAgICAgICAgICAgIHJpZ2h0OiB0aGlzLmdldFNwcml0ZXMoYC4ke3NlbGVjdG9yfS1yaWdodC1pbWdgKSxcclxuICAgICAgICAgICAgdXA6IHRoaXMuZ2V0U3ByaXRlcyhgLiR7c2VsZWN0b3J9LXVwLWltZ2ApLFxyXG4gICAgICAgICAgICBkb3duOiB0aGlzLmdldFNwcml0ZXMoYC4ke3NlbGVjdG9yfS1kb3duLWltZ2ApXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcblxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBlcnNvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihnYW1lU3RhdGUsIHNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuZ2V0QWxsU3ByaXRlcygpO1xyXG4gICAgICAgIHRoaXMuZ2FtZSA9IGdhbWVTdGF0ZTtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbkFuZ2xlID0gMiAqIE1hdGguUEkgKiBNYXRoLnJhbmRvbSgpO1xyXG4gICAgICAgIHRoaXMuc3BlZWQgPSBnYW1lU3RhdGUubGV2ZWwgKiBnYW1lU3RhdGUuYmFzZVNwZWVkIC8gMjtcclxuICAgICAgICB0aGlzLmN1cnJlbnRJbWcgPSAwO1xyXG4gICAgfVxyXG4gICAgc2VsZWN0U3ByaXRlcygpIHtcclxuICAgICAgICBpZiAoKHRoaXMuZGlyZWN0aW9uQW5nbGUgPj0gTWF0aC5QSSAqIDUgLyA0KSAmJiAodGhpcy5kaXJlY3Rpb25BbmdsZSA8PSBNYXRoLlBJICogNyAvIDQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlcyA9IHRoaXMuc3ByaXRlc0NvbGxlY3Rpb24uZG93bjtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKHRoaXMuZGlyZWN0aW9uQW5nbGUgPj0gTWF0aC5QSSAvIDQpICYmICh0aGlzLmRpcmVjdGlvbkFuZ2xlIDw9IE1hdGguUEkgKiAzIC8gNCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zcHJpdGVzID0gdGhpcy5zcHJpdGVzQ29sbGVjdGlvbi51cDtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKHRoaXMuZGlyZWN0aW9uQW5nbGUgPj0gTWF0aC5QSSAqIDMgLyA0KSAmJiAodGhpcy5kaXJlY3Rpb25BbmdsZSA8PSBNYXRoLlBJICogNSAvIDQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlcyA9IHRoaXMuc3ByaXRlc0NvbGxlY3Rpb24ubGVmdDtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNwcml0ZXMgPSB0aGlzLnNwcml0ZXNDb2xsZWN0aW9uLnJpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBkaXJlY3Rpb25BbmdsZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGlyZWN0aW9uQW5nbGU7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGRpcmVjdGlvbkFuZ2xlKG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5fZGlyZWN0aW9uQW5nbGUgPSBuZXdWYWx1ZTtcclxuICAgICAgICB0aGlzLnNlbGVjdFNwcml0ZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcGVyc29uU3RhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgeDogdGhpcy5wb3NpdGlvbi54LFxyXG4gICAgICAgICAgICB5OiB0aGlzLnBvc2l0aW9uLnksXHJcbiAgICAgICAgICAgIGRpcmVjdGlvbkFuZ2xlOiB0aGlzLmRpcmVjdGlvbkFuZ2xlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgcGVyc29uU3RhdGUobmV3UG9zaXRpb24pIHtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbkFuZ2xlID0gbmV3UG9zaXRpb24uZGlyZWN0aW9uQW5nbGU7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi54ID0gbmV3UG9zaXRpb24ueDtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uLnkgPSBuZXdQb3NpdGlvbi55O1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFsbFNwcml0ZXMoKSB7XHJcbiAgICAgICAgdGhpcy5zcHJpdGVzQ29sbGVjdGlvbiA9IHtcclxuICAgICAgICAgICAgbGVmdDogdGhpcy5nZXRTcHJpdGVzKGAuJHt0aGlzLnNlbGVjdG9yfS1sZWZ0LWltZ2ApLFxyXG4gICAgICAgICAgICByaWdodDogdGhpcy5nZXRTcHJpdGVzKGAuJHt0aGlzLnNlbGVjdG9yfS1yaWdodC1pbWdgKSxcclxuICAgICAgICAgICAgdXA6IHRoaXMuZ2V0U3ByaXRlcyhgLiR7dGhpcy5zZWxlY3Rvcn0tdXAtaW1nYCksXHJcbiAgICAgICAgICAgIGRvd246IHRoaXMuZ2V0U3ByaXRlcyhgLiR7dGhpcy5zZWxlY3Rvcn0tZG93bi1pbWdgKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3ByaXRlcyhzZWxlY3Rvcikge1xyXG4gICAgICAgIHJldHVybiBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKTtcclxuICAgIH1cclxuICAgIGdldE5leHRTcHJpdGUoKSB7XHJcbiAgICAgICAgdGhpcy5zdGVwKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEltZyA+PSB0aGlzLnNwcml0ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEltZyA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnNwcml0ZXNbdGhpcy5jdXJyZW50SW1nKytdO1xyXG4gICAgfVxyXG5cclxuICAgIHN0ZXAoKSB7XHJcbiAgICAgICAgdGhpcy5nZXRTcGVlZCgpO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24ueCArPSBNYXRoLmNvcyh0aGlzLmRpcmVjdGlvbkFuZ2xlKSAqIHRoaXMuc3BlZWQ7XHJcbiAgICAgICAgaWYgKHRoaXMucG9zaXRpb24ueCArIHRoaXMud2lkdGggLyAyID4gdGhpcy5nYW1lLndpZHRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueCA9IC10aGlzLndpZHRoIC8gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucG9zaXRpb24ueCArIHRoaXMud2lkdGggLyAyIDwgMCkge1xyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uLnggPSB0aGlzLmdhbWUud2lkdGggLSB0aGlzLndpZHRoIC8gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi55IC09IE1hdGguc2luKHRoaXMuZGlyZWN0aW9uQW5nbGUpICogdGhpcy5zcGVlZDtcclxuICAgICAgICBpZiAodGhpcy5wb3NpdGlvbi55ICsgdGhpcy5oZWlnaHQgLyAyID4gdGhpcy5nYW1lLmhlaWdodCkge1xyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uLnkgPSAtdGhpcy5oZWlnaHQgLyAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5wb3NpdGlvbi55ICsgdGhpcy5oZWlnaHQgLyAyIDwgMCkge1xyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uLnkgPSB0aGlzLmdhbWUuaGVpZ2h0IC0gdGhpcy5oZWlnaHQgLyAyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldFNwZWVkKCkge1xyXG4gICAgICAgIHRoaXMuc3BlZWQgPSB0aGlzLmdhbWUuYmFzZVNwZWVkICogdGhpcy5nYW1lLmxldmVsIC8gMjtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgRW5lbXkgZnJvbSAnLi9lbmVteSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTbWFydEVuZW15IGV4dGVuZHMgRW5lbXkge1xyXG4gICAgY29uc3RydWN0b3IoZ2FtZVN0YXRlKSB7XHJcbiAgICAgICAgc3VwZXIoZ2FtZVN0YXRlLCAncm9ndWUnKTtcclxuICAgICAgICB0aGlzLnJhbmdlID0gMzAwO1xyXG4gICAgICAgIHRoaXMud2lkdGggPSA0MDtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IDQ1O1xyXG4gICAgfVxyXG4gICAgc3RlcCgpIHtcclxuICAgICAgICBsZXQgaGVyb1Bvc2l0aW9uID0gdGhpcy5nYW1lLmhlcm8ucG9zaXRpb247XHJcbiAgICAgICAgbGV0IGVuZW15UG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uO1xyXG4gICAgICAgIGlmICh0aGlzLmdldERpc3RhbmNlVG9IZXJvKCkgPD0gdGhpcy5yYW5nZSAmJiAoaGVyb1Bvc2l0aW9uLnggIT09IGVuZW15UG9zaXRpb24ueCkpIHtcclxuICAgICAgICAgICAgbGV0IGF0YW4gPSBNYXRoLmF0YW4oKGhlcm9Qb3NpdGlvbi55IC0gZW5lbXlQb3NpdGlvbi55KSAvIChoZXJvUG9zaXRpb24ueCAtIGVuZW15UG9zaXRpb24ueCkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCgoaGVyb1Bvc2l0aW9uLnggPiBlbmVteVBvc2l0aW9uLngpICYmIChoZXJvUG9zaXRpb24ueSA8IGVuZW15UG9zaXRpb24ueSkpIHx8XHJcbiAgICAgICAgICAgICAgICAoKGhlcm9Qb3NpdGlvbi54ID4gZW5lbXlQb3NpdGlvbi54KSAmJiAoaGVyb1Bvc2l0aW9uLnkgPiBlbmVteVBvc2l0aW9uLnkpKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb25BbmdsZSA9IDIgKiBNYXRoLlBJIC0gYXRhbjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uQW5nbGUgPSBNYXRoLlBJIC0gYXRhbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBzdXBlci5zdGVwKCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgUm91dGVyIGZyb20gJy4vdXRpbHMvcm91dGVyJztcclxuaW1wb3J0IHJvdXRlcyBmcm9tICcuL3JvdXRlcyc7XHJcbmltcG9ydCBhZGRCdXR0b25zRm9yTW9iaWxlIGZyb20gJy4vdXRpbHMvYWRkQnV0dG9uc0Zvck1vYmlsZSc7XHJcblxyXG5hZGRCdXR0b25zRm9yTW9iaWxlKCk7XHJcbm5ldyBSb3V0ZXIocm91dGVzKTsiLCJpbXBvcnQgR2FtZVN0YXRlIGZyb20gJy4vZ2FtZU9iamVjdHMvZ2FtZVN0YXRlJztcclxuaW1wb3J0IEZpcmVTdG9yZSBmcm9tICcuL3V0aWxzL2ZpcmViYXNlJztcclxuXHJcbmxldCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQnKTtcclxubGV0IGdhbWUgPSBuZXcgR2FtZVN0YXRlKGNvbnRlbnQpO1xyXG5cclxuY29uc3Qgcm91dGVzID0gW1xyXG4gICAge1xyXG4gICAgICAgIG1hdGNoOiAnJyxcclxuICAgICAgICBvbkVudGVyOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJ2dhbWUnO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbWF0Y2g6ICdhYm91dCcsXHJcbiAgICAgICAgb25FbnRlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICBjaGFuZ2VBY3RpdmVQYWdlKCdhYm91dCcpO1xyXG4gICAgICAgICAgICBjb250ZW50LmlubmVySFRNTCA9ICc8aDE+PHNwYW4+U3VwZXIgYXJjYWRlIGdhbWU8L3NwYW4+PC9oMT48ZGl2IGNsYXNzPVwidy0xMDBcIi8+PGRpdj48aDI+QXV0aG9yIDxhIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20vY2l0cmluaW5cIj5LYXRlIEt1emtpbmE8L2E+PC9oMj48L2Rpdj4nO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbWF0Y2g6ICdnYW1lJyxcclxuICAgICAgICBvbkVudGVyOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNoYW5nZUFjdGl2ZVBhZ2UoJ2dhbWUnKTtcclxuICAgICAgICAgICAgZ2FtZS5zZXRVcEdhbWUoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uTGVhdmU6ICgpID0+IHtcclxuICAgICAgICAgICAgZ2FtZS5lbmRHYW1lKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBtYXRjaDogJ3Njb3JlcycsXHJcbiAgICAgICAgb25FbnRlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICBjaGFuZ2VBY3RpdmVQYWdlKCdzY29yZXMnKTtcclxuXHJcbiAgICAgICAgICAgIEZpcmVTdG9yZS5nZXRTY29yZXMoKS50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50LmlubmVySFRNTCA9ICc8aDEgY2xhc3M9XCJhYm91dFwiPjxzcGFuPlNjb3Jlczwvc3Bhbj48L2gxPic7XHJcbiAgICAgICAgICAgICAgICBsZXQgb2wgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvbCcpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuICAgICAgICAgICAgICAgICAgICBsaS5pbm5lckhUTUwgPSBgJHtpdGVtLm5hbWV9IC0gJHtpdGVtLnNjb3JlfWA7XHJcbiAgICAgICAgICAgICAgICAgICAgb2wuYXBwZW5kQ2hpbGQobGkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGRpdkZvckRpdmlzaW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBkaXZGb3JEaXZpc2lvbi5jbGFzc0xpc3QuYWRkKCd3LTEwMCcpO1xyXG4gICAgICAgICAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChkaXZGb3JEaXZpc2lvbik7XHJcbiAgICAgICAgICAgICAgICBsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQob2wpO1xyXG4gICAgICAgICAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChkaXYpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG1hdGNoOiAncmVwbGF5JyxcclxuICAgICAgICBvbkVudGVyOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICgoZ2FtZS5yZXBsYXlEYXRhIHx8IFtdKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJ2dhbWUnO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGdhbWUucmVwbGF5R2FtZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG1hdGNoOiAnd2F0Y2hyZXBsYXknLFxyXG4gICAgICAgIG9uRW50ZXI6ICgpID0+IHtcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAncmVwbGF5JztcclxuICAgICAgICB9XHJcblxyXG4gICAgfSwge1xyXG4gICAgICAgIG1hdGNoOiAnbmV3Z2FtZScsXHJcbiAgICAgICAgb25FbnRlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICdnYW1lJztcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5dO1xyXG5cclxuZnVuY3Rpb24gY2hhbmdlQWN0aXZlUGFnZShuZXdQYWdlKSB7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWN0aXZlJykuY2xhc3NOYW1lID0gJyc7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbaHJlZj1cIiMke25ld1BhZ2V9XCJdYCkucGFyZW50RWxlbWVudC5jbGFzc05hbWUgPSAnYWN0aXZlJztcclxufVxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcztcclxuIiwiaW1wb3J0IGRldGVjdE1vYmlsZSBmcm9tICcuL2RldGVjdE1vYmlsZSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBhZGRCdXR0b25zRm9yTW9iaWxlKCkge1xyXG4gICAgaWYgKGRldGVjdE1vYmlsZSgpKSB7XHJcblxyXG4gICAgICAgIHZhciBkaXZGb3JCdXR0b25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgZGl2Rm9yQnV0dG9ucy5jbGFzc0xpc3QuYWRkKCdidXR0b25zJyk7XHJcblxyXG4gICAgICAgIHZhciBidXR0b25MZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgYnV0dG9uTGVmdC5pbm5lckhUTUwgPSAnPCc7XHJcbiAgICAgICAgYnV0dG9uTGVmdC5jbGFzc0xpc3QuYWRkKCdsZWZ0Jyk7XHJcblxyXG4gICAgICAgIHZhciBidXR0b25VcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgIGJ1dHRvblVwLmlubmVySFRNTCA9ICdeJztcclxuICAgICAgICBidXR0b25VcC5jbGFzc0xpc3QuYWRkKCd1cCcpO1xyXG5cclxuICAgICAgICB2YXIgYnV0dG9uUmlnaHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICBidXR0b25SaWdodC5pbm5lckhUTUwgPSAnPic7XHJcbiAgICAgICAgYnV0dG9uUmlnaHQuY2xhc3NMaXN0LmFkZCgncmlnaHQnKTtcclxuXHJcbiAgICAgICAgdmFyIGJ1dHRvbkRvd24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICBidXR0b25Eb3duLmlubmVySFRNTCA9ICd2JztcclxuICAgICAgICBidXR0b25Eb3duLmNsYXNzTGlzdC5hZGQoJ2Rvd24nKTtcclxuXHJcblxyXG5cclxuICAgICAgICBkaXZGb3JCdXR0b25zLmFwcGVuZENoaWxkKGJ1dHRvbkxlZnQpO1xyXG4gICAgICAgIGRpdkZvckJ1dHRvbnMuYXBwZW5kQ2hpbGQoYnV0dG9uVXApO1xyXG4gICAgICAgIGRpdkZvckJ1dHRvbnMuYXBwZW5kQ2hpbGQoYnV0dG9uUmlnaHQpO1xyXG4gICAgICAgIGRpdkZvckJ1dHRvbnMuYXBwZW5kQ2hpbGQoYnV0dG9uRG93bik7XHJcblxyXG4gICAgICAgIGRpdkZvckJ1dHRvbnMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5tYXRjaGVzKCcucmlnaHQnKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGUgPSBuZXcgRXZlbnQoJ2tleWRvd24nKTtcclxuICAgICAgICAgICAgICAgIGUua2V5Q29kZSA9IDM5O1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0Lm1hdGNoZXMoJy5sZWZ0JykpIHtcclxuICAgICAgICAgICAgICAgIGxldCBlID0gbmV3IEV2ZW50KCdrZXlkb3duJyk7XHJcbiAgICAgICAgICAgICAgICBlLmtleUNvZGUgPSAzNztcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5tYXRjaGVzKCcudXAnKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGUgPSBuZXcgRXZlbnQoJ2tleWRvd24nKTtcclxuICAgICAgICAgICAgICAgIGUua2V5Q29kZSA9IDM4O1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0Lm1hdGNoZXMoJy5kb3duJykpIHtcclxuICAgICAgICAgICAgICAgIGxldCBlID0gbmV3IEV2ZW50KCdrZXlkb3duJyk7XHJcbiAgICAgICAgICAgICAgICBlLmtleUNvZGUgPSA0MDtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXZGb3JCdXR0b25zKTtcclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkZXRlY3Rtb2JpbGUoKSB7XHJcbiAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQW5kcm9pZC9pKVxyXG4gICAgICAgIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL3dlYk9TL2kpXHJcbiAgICAgICAgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBob25lL2kpXHJcbiAgICAgICAgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBhZC9pKVxyXG4gICAgICAgIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQb2QvaSlcclxuICAgICAgICB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9CbGFja0JlcnJ5L2kpXHJcbiAgICAgICAgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvV2luZG93cyBQaG9uZS9pKVxyXG4gICAgKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn0iLCJsZXQgdXJsID0gJ2h0dHBzOi8va2F0ZS1hcmNhZGUtZ2FtZS5maXJlYmFzZWlvLmNvbS8uanNvbic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGaXJlU3RvcmUge1xyXG4gICAgc3RhdGljIGdldFNjb3JlcygpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2godXJsKS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgc2F2ZVNjb3JlKGluZm9Ub1NhdmUpIHtcclxuXHJcbiAgICAgICAgdGhpcy5nZXRTY29yZXMoKS50aGVuKHNjb3JlcyA9PiB7XHJcbiAgICAgICAgICAgIGxldCBuZXdTY29yZXMgPSBbLi4uc2NvcmVzIHx8IFtdLCBpbmZvVG9TYXZlXTtcclxuICAgICAgICAgICAgbmV3U2NvcmVzLnNvcnQoKGl0ZW0xLCBpdGVtMikgPT4gaXRlbTEuc2NvcmUgPiBpdGVtMi5zY29yZSA/IC0xIDogaXRlbTEuc2NvcmUgPCBpdGVtMi5zY29yZSA/IDEgOiAwKTtcclxuICAgICAgICAgICAgbmV3U2NvcmVzLnNwbGljZSgxMCk7XHJcbiAgICAgICAgICAgIGZldGNoKHVybCwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG5ld1Njb3JlcylcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCIvKipcclxuICog0KTRg9C90LrRhtC40Y8g0LTQu9GPINC00L7QsdCw0LLQu9C10L3QuNGPINC4INC+0LHRgNCw0LHQvtGC0LrQuCDRgNC+0YPRgtC+0LIg0L3QsCDRgdGC0YDQsNC90LjRhtC1XHJcbiAqIEBwYXJhbSB7Kn0gcm91dGVQYXJhbXMg0LzQsNGB0YHQuNCyINC/0LDRgNCw0LzQtdGC0YDQvtCyINC00LvRjyDQvtCx0YDQsNCx0L7RgtC60Lgg0YDQvtGD0YLQvtCyXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBSb3V0ZXIocm91dGVQYXJhbXMpIHtcclxuICAgIHRoaXMucm91dGVzID0gcm91dGVQYXJhbXMgfHwgW107XHJcbiAgICB0aGlzLmN1cnJlbnRSb3V0ZTtcclxuICAgIHRoaXMucHJldmlvdXNSb3V0ZTtcclxuICAgIHRoaXMuY3VycmVudFBhcmFtcztcclxuICAgIHRoaXMucHJldmlvdXNQYXJhbXM7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsICgpID0+IHtcclxuICAgICAgICB0aGlzLmhhbmRsZXIod2luZG93LmxvY2F0aW9uLmhhc2gpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLmhhbmRsZXIod2luZG93LmxvY2F0aW9uLmhhc2gpO1xyXG59XHJcblxyXG5Sb3V0ZXIucHJvdG90eXBlID0ge1xyXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gKGhhc2gpIHtcclxuICAgICAgICB0aGlzLnByZXZpb3VzUm91dGUgPSB0aGlzLmN1cnJlbnRSb3V0ZTtcclxuICAgICAgICB0aGlzLnByZXZpb3VzUGFyYW1zID0gdGhpcy5jdXJyZW50UGFyYW1zO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFJvdXRlID0gdGhpcy5maW5kTmV3Um91dGUoaGFzaCk7XHJcbiAgICAgICAgdGhpcy5sYXVuY2hIYW5kbGVycygpO1xyXG4gICAgfSxcclxuICAgIGZpbmROZXdSb3V0ZTogZnVuY3Rpb24gKGhhc2gpIHtcclxuICAgICAgICBoYXNoID0gaGFzaC5zbGljZSgxKTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnJvdXRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXMucm91dGVzW2ldO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIChlbGVtZW50Lm1hdGNoKSA9PSAnc3RyaW5nJyAmJiBlbGVtZW50Lm1hdGNoID09PSBoYXNoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYXJhbXMgPSAnJztcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgKGVsZW1lbnQubWF0Y2gpID09ICdmdW5jdGlvbicgJiYgZWxlbWVudC5tYXRjaChoYXNoKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFyYW1zID0gJyc7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoKGVsZW1lbnQubWF0Y2ggaW5zdGFuY2VvZiBSZWdFeHApICYmIGVsZW1lbnQubWF0Y2gudGVzdChoYXNoKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFyYW1zID0gaGFzaC5tYXRjaChlbGVtZW50Lm1hdGNoKSB8fCBbXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhcmFtcy5zcGxpY2UoMCwgMSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBsYXVuY2hIYW5kbGVycygpIHtcclxuICAgICAgICBQcm9taXNlLnJlc29sdmUoKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7IHRoaXMucHJldmlvdXNSb3V0ZSAmJiB0aGlzLnByZXZpb3VzUm91dGUub25MZWF2ZSAmJiB0aGlzLnByZXZpb3VzUm91dGUub25MZWF2ZSh0aGlzLnByZXZpb3VzUGFyYW1zKTsgfSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4geyB0aGlzLmN1cnJlbnRSb3V0ZSAmJiB0aGlzLmN1cnJlbnRSb3V0ZS5vbkJlZm9yZUVudGVyICYmIHRoaXMuY3VycmVudFJvdXRlLm9uQmVmb3JlRW50ZXIodGhpcy5jdXJyZW50UGFyYW1zKTsgfSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4geyB0aGlzLmN1cnJlbnRSb3V0ZSAmJiB0aGlzLmN1cnJlbnRSb3V0ZS5vbkVudGVyICYmIHRoaXMuY3VycmVudFJvdXRlLm9uRW50ZXIodGhpcy5jdXJyZW50UGFyYW1zKTsgfSk7XHJcbiAgICB9XHJcbn07Il19
