!function o(a,s,u){function c(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(h)return h(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var r=s[t]={exports:{}};a[t][0].call(r.exports,function(e){return c(a[t][1][e]||e)},r,r.exports,o,a,s,u)}return s[t].exports}for(var h="function"==typeof require&&require,e=0;e<u.length;e++)c(u[e]);return c}({1:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r,o=e("./person"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,".dummy-enemy-img"));return t.width=100,t.height=126,t.position={x:Math.abs(t.width-t.game.width*Math.random()),y:t.game.height/2*Math.random()},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.default),n}();n.default=s},{"./person":4}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=s(e("./hero")),o=s(e("./dummyEnemy")),a=s(e("../utils/firebase"));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=1e3<=window.innerWidth?1e3:window.innerWidth,this.height=(document.documentElement.clientHeight||document.body.clientHeight)-160,this.containter=e,window.gamestate=[]}return i(t,[{key:"setUpGame",value:function(){var t=this;this.level=1,this.baseSpeed=0,this.canvas=document.createElement("canvas"),this.containter.innerHTML="",this.containter.appendChild(this.canvas),this.canvas.width=this.width,this.canvas.height=this.height,this.context=this.canvas.getContext("2d"),this.characters=new Array(2).fill(0).map(function(){return new o.default(t)}),this.hero=new r.default(this),this.gamePlays=!1,this.timerHandler=0,this.gameTimer=0,this.timerHandler=setInterval(function(){t.context.clearRect(0,0,t.width,t.height),t.characters.forEach(function(e){return t.checkCharactersIntersection(t.hero,e)}),t.drawCharacter(t.hero),t.characters.forEach(function(e){return t.drawCharacter(e)})},30),window.gamestate.push(this.timerHandler)}},{key:"drawCharacter",value:function(e){e.imageOrientation()?(this.context.save(),this.context.scale(-1,1),this.context.drawImage(e.getNextSprite(),-1*e.position.x,e.position.y,-1*e.width,e.height),this.context.restore()):this.context.drawImage(e.getNextSprite(),e.position.x,e.position.y,e.width,e.height)}},{key:"runGame",value:function(){this.gameTimer=(new Date).getTime(),this.gamePlays=!0,this.baseSpeed=5}},{key:"endGame",value:function(){var t=this;clearInterval(this.timerHandler),window.gamestate=window.gamestate.filter(function(e){return e!==t.timerHandler}),this.gamePlays=!1,this.baseSpeed=0}},{key:"loseGame",value:function(){this.endGame();var e=((new Date).getTime()-this.gameTimer)/1e3,t=prompt("Your score is "+e+" seconds.\n Enter your name","Ninja");t&&a.default.saveScore({name:t,score:e})}},{key:"checkCharactersIntersection",value:function(e,t){e.position.x+30<=t.position.x+t.width&&e.position.x+e.width>=t.position.x+30&&e.position.y+5<=t.position.y+t.height&&e.position.y+e.height>=t.position.y+5&&(e.die(),this.loseGame())}}]),t}();n.default=u},{"../utils/firebase":8,"./dummyEnemy":1,"./hero":3}],3:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=e("./person"),s=(r=a)&&r.__esModule?r:{default:r};var u=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,".cat-img"));return t.setUpHero(),t.width=115,t.height=100,t.position={x:(t.game.width-t.width)/2,y:t.game.height-t.height},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.default),o(n,[{key:"setUpHero",value:function(){var t=this;document.addEventListener("keydown",function(e){e.keyCode<37||40<e.keyCode||(t.game.gamePlays||(t.game.runGame(),t.speed=t.game.baseSpeed*t.game.level),37===e.keyCode&&(t.directionAngle=Math.PI),38===e.keyCode&&(t.directionAngle=Math.PI/2*3),39===e.keyCode&&(t.directionAngle=0),40===e.keyCode&&(t.directionAngle=Math.PI/2))})}},{key:"die",value:function(){this.sprites=[].slice.call(document.querySelectorAll(".cat-dead-img"))}}]),n}();n.default=u},{"./person":4}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var r=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.game=e,this.directionAngle=2*Math.PI*Math.random(),this.position={x:0,y:0},this.sprites=[].slice.call(document.querySelectorAll(t)),this.speed=e.level*e.baseSpeed,this.currentImg=0}return i(n,[{key:"getNextSprite",value:function(){return this.step(),this.currentImg>=this.sprites.length&&(this.currentImg=0),this.sprites[this.currentImg++]}},{key:"step",value:function(){this.speed=this.game.baseSpeed*this.game.level,this.position.x+=Math.cos(this.directionAngle)*this.speed,this.position.x+this.width/2>this.game.width&&(this.position.x=-this.width/2),this.position.x+this.width/2<0&&(this.position.x=this.game.width-this.width/2),this.position.y+=Math.sin(this.directionAngle)*this.speed,this.position.y+this.height/2>this.game.height&&(this.position.y=-this.height/2),this.position.y+this.height/2<0&&(this.position.y=this.game.height-this.height/2)}},{key:"imageOrientation",value:function(){return this.directionAngle>=Math.PI/2&&this.directionAngle<=3*Math.PI/2}}]),n}();n.default=r},{}],5:[function(e,t,n){"use strict";var i=o(e("./utils/router")),r=o(e("./routes"));function o(e){return e&&e.__esModule?e:{default:e}}new i.default(r.default)},{"./routes":6,"./utils/router":9}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=a(e("./gameObjects/gameState")),o=a(e("./utils/detectMobile")),r=a(e("./utils/firebase"));function a(e){return e&&e.__esModule?e:{default:e}}var s=document.querySelector(".content"),u=new i.default(s);!function(){if((0,o.default)()){var e=document.createElement("div");e.classList.add("buttons");var t=document.createElement("button");t.innerHTML="<",t.classList.add("left");var n=document.createElement("button");n.innerHTML="^",n.classList.add("up");var i=document.createElement("button");i.innerHTML=">",i.classList.add("right");var r=document.createElement("button");r.innerHTML="v",r.classList.add("down"),e.appendChild(t),e.appendChild(n),e.appendChild(i),e.appendChild(r),e.addEventListener("click",function(e){if(e.target.matches(".right")){var t=new Event("keydown");return t.keyCode=39,void document.dispatchEvent(t)}if(e.target.matches(".left")){var n=new Event("keydown");return n.keyCode=37,void document.dispatchEvent(n)}if(e.target.matches(".up")){var i=new Event("keydown");return i.keyCode=38,void document.dispatchEvent(i)}if(e.target.matches(".down")){var r=new Event("keydown");return r.keyCode=40,void document.dispatchEvent(r)}}),document.body.appendChild(e)}}();var c=[{match:"",onEnter:function(){window.location.hash="game"}},{match:"about",onEnter:function(){h("about"),s.innerHTML='<h1 class="about"><span>Super game Cat vs Ninjas</span><h1>'}},{match:"game",onEnter:function(){h("game");var e=document.createElement("canvas");s.innerHTML="",s.appendChild(e),u.setUpGame()},onLeave:function(){u.endGame()}},{match:"scores",onEnter:function(){h("scores"),r.default.getScores().then(function(e){s.innerHTML='<h1 class="about"><span>Scores</span></h1>';var n=document.createElement("ol");e.forEach(function(e){var t=document.createElement("li");t.innerHTML=e.name+" - "+e.score,n.appendChild(t)});var t=document.createElement("div");t.classList.add("w-100"),s.appendChild(t);var i=document.createElement("div");i.appendChild(n),s.appendChild(i)})}}];function h(e){document.querySelector(".active").className="",document.querySelector('[href="#'+e+'"]').parentElement.className="active"}n.default=c},{"./gameObjects/gameState":2,"./utils/detectMobile":7,"./utils/firebase":8}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))}},{}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var r="https://kate-arcade-game.firebaseio.com/.json",o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"getScores",value:function(){return fetch(r).then(function(e){return e.json()})}},{key:"saveScore",value:function(n){this.getScores().then(function(e){var t=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e||[]),[n]);t.sort(function(e,t){return e.score>t.score?-1:e.score<t.score?1:0}),t.splice(10),fetch(r,{method:"PUT",body:JSON.stringify(t)})})}}]),e}();n.default=o},{}],9:[function(e,t,n){"use strict";function i(e){var t=this;this.routes=e||[],this.currentRoute,this.previousRoute,this.currentParams,this.previousParams,window.addEventListener("hashchange",function(){t.handler(window.location.hash)}),this.handler(window.location.hash)}Object.defineProperty(n,"__esModule",{value:!0}),(n.default=i).prototype={handler:function(e){this.previousRoute=this.currentRoute,this.previousParams=this.currentParams,this.currentRoute=this.findNewRoute(e),this.launchHandlers()},findNewRoute:function(e){e=e.slice(1);for(var t=0;t<this.routes.length;t++){var n=this.routes[t];if("string"==typeof n.match&&n.match===e)return this.currentParams="",n;if("function"==typeof n.match&&n.match(e))return this.currentParams="",n;if(n.match instanceof RegExp&&n.match.test(e))return this.currentParams=e.match(n.match)||[],this.currentParams.splice(0,1),n}},launchHandlers:function(){var e=this;Promise.resolve().then(function(){e.previousRoute&&e.previousRoute.onLeave&&e.previousRoute.onLeave(e.previousParams)}).then(function(){e.currentRoute&&e.currentRoute.onBeforeEnter&&e.currentRoute.onBeforeEnter(e.currentParams)}).then(function(){e.currentRoute&&e.currentRoute.onEnter&&e.currentRoute.onEnter(e.currentParams)})}}},{}]},{},[5]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvZ2FtZU9iamVjdHMvZHVtbXlFbmVteS5qcyIsInNyYy9qcy9nYW1lT2JqZWN0cy9nYW1lU3RhdGUuanMiLCJzcmMvanMvZ2FtZU9iamVjdHMvaGVyby5qcyIsInNyYy9qcy9nYW1lT2JqZWN0cy9wZXJzb24uanMiLCJzcmMvanMvbWFpbi5qcyIsInNyYy9qcy9yb3V0ZXMuanMiLCJzcmMvanMvdXRpbHMvZGV0ZWN0TW9iaWxlLmpzIiwic3JjL2pzL3V0aWxzL2ZpcmViYXNlLmpzIiwic3JjL2pzL3V0aWxzL3JvdXRlci5qcyJdLCJuYW1lcyI6WyJyIiwiZSIsIm4iLCJ0IiwibyIsImkiLCJmIiwiYyIsInJlcXVpcmUiLCJ1IiwiYSIsIkVycm9yIiwiY29kZSIsInAiLCJleHBvcnRzIiwiY2FsbCIsImxlbmd0aCIsIjEiLCJtb2R1bGUiLCJfcGVyc29uIiwiRHVtbXlFbmVteSIsImdhbWVTdGF0ZSIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfdGhpcyIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwiX19wcm90b19fIiwiT2JqZWN0IiwiZ2V0UHJvdG90eXBlT2YiLCJ3aWR0aCIsImhlaWdodCIsInBvc2l0aW9uIiwieCIsIk1hdGgiLCJhYnMiLCJnYW1lIiwicmFuZG9tIiwieSIsIl9wZXJzb24yIiwiZGVmYXVsdCIsIkdhbWVTdGF0ZSIsImVsZW1lbnRUb0RyYXciLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiZG9jdW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJjbGllbnRIZWlnaHQiLCJib2R5IiwiY29udGFpbnRlciIsImdhbWVzdGF0ZSIsImxldmVsIiwiYmFzZVNwZWVkIiwiY2FudmFzIiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsImFwcGVuZENoaWxkIiwiY29udGV4dCIsImdldENvbnRleHQiLCJjaGFyYWN0ZXJzIiwiQXJyYXkiLCJmaWxsIiwibWFwIiwiX2R1bW15RW5lbXkyIiwiaGVybyIsIl9oZXJvMiIsImdhbWVQbGF5cyIsInRpbWVySGFuZGxlciIsImdhbWVUaW1lciIsInNldEludGVydmFsIiwiY2xlYXJSZWN0IiwiZm9yRWFjaCIsImNoYXJhY3RlciIsImNoZWNrQ2hhcmFjdGVyc0ludGVyc2VjdGlvbiIsImRyYXdDaGFyYWN0ZXIiLCJwdXNoIiwiaW1hZ2VPcmllbnRhdGlvbiIsInNhdmUiLCJzY2FsZSIsImRyYXdJbWFnZSIsImdldE5leHRTcHJpdGUiLCJyZXN0b3JlIiwiRGF0ZSIsImdldFRpbWUiLCJfdGhpczIiLCJjbGVhckludGVydmFsIiwiZmlsdGVyIiwiaXRlbSIsImVuZEdhbWUiLCJzY29yZSIsIm5hbWUiLCJwcm9tcHQiLCJfZmlyZWJhc2UyIiwic2F2ZVNjb3JlIiwiZW5lbXkiLCJkaWUiLCJsb3NlR2FtZSIsIkhlcm8iLCJzZXRVcEhlcm8iLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJrZXlDb2RlIiwicnVuR2FtZSIsInNwZWVkIiwiZGlyZWN0aW9uQW5nbGUiLCJQSSIsInNwcml0ZXMiLCJzbGljZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJQZXJzb24iLCJzZWxlY3RvciIsImN1cnJlbnRJbWciLCJzdGVwIiwiY29zIiwic2luIiwiX3JvdXRlcjIiLCJfcm91dGVzMiIsImNvbnRlbnQiLCJxdWVyeVNlbGVjdG9yIiwiX2dhbWVTdGF0ZTIiLCJfZGV0ZWN0TW9iaWxlMiIsImRpdkZvckJ1dHRvbnMiLCJjbGFzc0xpc3QiLCJhZGQiLCJidXR0b25MZWZ0IiwiYnV0dG9uVXAiLCJidXR0b25SaWdodCIsImJ1dHRvbkRvd24iLCJ0YXJnZXQiLCJtYXRjaGVzIiwiRXZlbnQiLCJkaXNwYXRjaEV2ZW50IiwiX2UiLCJfZTIiLCJfZTMiLCJhZGRCdXR0b25zRm9yTW9iaWxlIiwicm91dGVzIiwibWF0Y2giLCJvbkVudGVyIiwibG9jYXRpb24iLCJoYXNoIiwiY2hhbmdlQWN0aXZlUGFnZSIsInNldFVwR2FtZSIsIm9uTGVhdmUiLCJnZXRTY29yZXMiLCJ0aGVuIiwicmVzdWx0Iiwib2wiLCJsaSIsImRpdkZvckRpdmlzaW9uIiwiZGl2IiwibmV3UGFnZSIsImNsYXNzTmFtZSIsInBhcmVudEVsZW1lbnQiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ1cmwiLCJGaXJlU3RvcmUiLCJmZXRjaCIsInJlc3BvbnNlIiwianNvbiIsImluZm9Ub1NhdmUiLCJzY29yZXMiLCJuZXdTY29yZXMiLCJjb25jYXQiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJzb3J0IiwiaXRlbTEiLCJpdGVtMiIsInNwbGljZSIsIm1ldGhvZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJSb3V0ZXIiLCJyb3V0ZVBhcmFtcyIsImN1cnJlbnRSb3V0ZSIsInByZXZpb3VzUm91dGUiLCJjdXJyZW50UGFyYW1zIiwicHJldmlvdXNQYXJhbXMiLCJoYW5kbGVyIiwicHJvdG90eXBlIiwiZmluZE5ld1JvdXRlIiwibGF1bmNoSGFuZGxlcnMiLCJlbGVtZW50IiwiUmVnRXhwIiwidGVzdCIsIlByb21pc2UiLCJyZXNvbHZlIiwib25CZWZvcmVFbnRlciJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsRUFBQUMsRUFBQUMsR0FBQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUFBLElBQUFKLEVBQUFHLEdBQUEsQ0FBQSxJQUFBSixFQUFBSSxHQUFBLENBQUEsSUFBQUUsRUFBQSxtQkFBQUMsU0FBQUEsUUFBQSxJQUFBRixHQUFBQyxFQUFBLE9BQUFBLEVBQUFGLEdBQUEsR0FBQSxHQUFBSSxFQUFBLE9BQUFBLEVBQUFKLEdBQUEsR0FBQSxJQUFBSyxFQUFBLElBQUFDLE1BQUEsdUJBQUFOLEVBQUEsS0FBQSxNQUFBSyxFQUFBRSxLQUFBLG1CQUFBRixFQUFBLElBQUFHLEVBQUFYLEVBQUFHLEdBQUEsQ0FBQVMsUUFBQSxJQUFBYixFQUFBSSxHQUFBLEdBQUFVLEtBQUFGLEVBQUFDLFFBQUEsU0FBQWQsR0FBQSxPQUFBSSxFQUFBSCxFQUFBSSxHQUFBLEdBQUFMLElB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QVQsRUFBZ0JBLEVBQUlrQixLQUFBZ0gsT0FBcEJ2SCxPQUFBWCxJQUE2QyxDQUN6QyxJQUFJaUwsRUFBVS9KLEtBQUFnSCxPQUFkbEksR0FDQSxHQUFJLGlCQUFRaUwsRUFBUjlDLE9BQXNDOEMsRUFBQTlDLFFBQTFDRyxFQUVJLE9BREFwSCxLQUFBeUosY0FBQSxHQUNBTSxFQUVKLEdBQUksbUJBQVFBLEVBQVI5QyxPQUF3QzhDLEVBQUE5QyxNQUE1Q0csR0FFSSxPQURBcEgsS0FBQXlKLGNBQUEsR0FDQU0sRUFFSixHQUFLQSxFQUFBOUMsaUJBQUQrQyxRQUFxQ0QsRUFBQTlDLE1BQUFnRCxLQUF6QzdDLEdBR0ksT0FGQXBILEtBQUF5SixjQUFxQnJDLEVBQUFILE1BQVc4QyxFQUFYOUMsUUFBckIsR0FDQWpILEtBQUF5SixjQUFBUixPQUFBLEVBQUEsR0FDQWMsSUF2QkdELGVBQUEsV0EyQkUsSUFBQWxHLEVBQUE1RCxLQUNia0ssUUFBQUMsVUFBQTFDLEtBQ1UsV0FBUTdELEVBQUE0RixlQUFzQjVGLEVBQUE0RixjQUF0QmpDLFNBQW9EM0QsRUFBQTRGLGNBQUFqQyxRQUEyQjNELEVBQS9FOEYsa0JBRGxCakMsS0FFVSxXQUFRN0QsRUFBQTJGLGNBQXFCM0YsRUFBQTJGLGFBQXJCYSxlQUF3RHhHLEVBQUEyRixhQUFBYSxjQUFnQ3hHLEVBQXhGNkYsaUJBRmxCaEMsS0FHVSxXQUFRN0QsRUFBQTJGLGNBQXFCM0YsRUFBQTJGLGFBQXJCckMsU0FBa0R0RCxFQUFBMkYsYUFBQXJDLFFBQTBCdEQsRUFBNUU2RiIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiaW1wb3J0IFBlcnNvbiBmcm9tICcuL3BlcnNvbic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEdW1teUVuZW15IGV4dGVuZHMgUGVyc29uIHtcclxuICAgIGNvbnN0cnVjdG9yKGdhbWVTdGF0ZSkge1xyXG4gICAgICAgIHN1cGVyKGdhbWVTdGF0ZSwgJy5kdW1teS1lbmVteS1pbWcnKTtcclxuICAgICAgICB0aGlzLndpZHRoID0gMTAwO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMTI2O1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSB7XHJcbiAgICAgICAgICAgIHg6IE1hdGguYWJzKHRoaXMud2lkdGggLSB0aGlzLmdhbWUud2lkdGggKiBNYXRoLnJhbmRvbSgpKSxcclxuICAgICAgICAgICAgeTogdGhpcy5nYW1lLmhlaWdodCAvIDIgKiBNYXRoLnJhbmRvbSgpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSIsImltcG9ydCBIZXJvIGZyb20gJy4vaGVybyc7XHJcbmltcG9ydCBEdW1teUVuZW15IGZyb20gJy4vZHVtbXlFbmVteSc7XHJcbmltcG9ydCBGaXJlU3RvcmUgZnJvbSAnLi4vdXRpbHMvZmlyZWJhc2UnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZVN0YXRlIHtcclxuXHRjb25zdHJ1Y3RvcihlbGVtZW50VG9EcmF3KSB7XHJcblx0XHQvLyB0aGlzLndpZHRoID0gODAwO1xyXG5cdFx0Ly8gdGhpcy5oZWlnaHQgPSA4MDA7XHJcblxyXG5cdFx0dGhpcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoID49IDEwMDAgPyAxMDAwIDogd2luZG93LmlubmVyV2lkdGg7XHJcblxyXG5cdFx0dGhpcy5oZWlnaHQgPSAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodFxyXG5cdFx0XHR8fCBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCkgLSAxNjA7XHJcblxyXG5cdFx0dGhpcy5jb250YWludGVyID0gZWxlbWVudFRvRHJhdztcclxuXHRcdHdpbmRvdy5nYW1lc3RhdGUgPSBbXTtcclxuXHR9XHJcblxyXG5cdHNldFVwR2FtZSgpIHtcclxuXHRcdHRoaXMubGV2ZWwgPSAxO1xyXG5cdFx0dGhpcy5iYXNlU3BlZWQgPSAwO1xyXG5cdFx0dGhpcy5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuXHRcdHRoaXMuY29udGFpbnRlci5pbm5lckhUTUwgPSAnJztcclxuXHRcdHRoaXMuY29udGFpbnRlci5hcHBlbmRDaGlsZCh0aGlzLmNhbnZhcyk7XHJcblx0XHR0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMud2lkdGg7XHJcblx0XHR0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLmhlaWdodDtcclxuXHJcblx0XHR0aGlzLmNvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG5cclxuXHRcdHRoaXMuY2hhcmFjdGVycyA9IG5ldyBBcnJheSgyKS5maWxsKDApLm1hcCgoKSA9PiBuZXcgRHVtbXlFbmVteSh0aGlzKSk7XHJcblx0XHR0aGlzLmhlcm8gPSBuZXcgSGVybyh0aGlzKTtcclxuXHJcblx0XHR0aGlzLmdhbWVQbGF5cyA9IGZhbHNlO1xyXG5cdFx0dGhpcy50aW1lckhhbmRsZXIgPSAwO1xyXG5cdFx0dGhpcy5nYW1lVGltZXIgPSAwO1xyXG5cclxuXHJcblx0XHR0aGlzLnRpbWVySGFuZGxlciA9IHNldEludGVydmFsKCgpID0+IHtcclxuXHRcdFx0dGhpcy5jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XHJcblxyXG5cdFx0XHR0aGlzLmNoYXJhY3RlcnMuZm9yRWFjaChjaGFyYWN0ZXIgPT4gdGhpcy5jaGVja0NoYXJhY3RlcnNJbnRlcnNlY3Rpb24odGhpcy5oZXJvLCBjaGFyYWN0ZXIpKTtcclxuXHJcblx0XHRcdHRoaXMuZHJhd0NoYXJhY3Rlcih0aGlzLmhlcm8pO1xyXG5cdFx0XHR0aGlzLmNoYXJhY3RlcnMuZm9yRWFjaChjaGFyYWN0ZXIgPT4gdGhpcy5kcmF3Q2hhcmFjdGVyKGNoYXJhY3RlcikpO1xyXG5cdFx0fSwgMzApO1xyXG5cdFx0d2luZG93LmdhbWVzdGF0ZS5wdXNoKHRoaXMudGltZXJIYW5kbGVyKTtcclxuXHR9XHJcblxyXG5cdGRyYXdDaGFyYWN0ZXIoY2hhcmFjdGVyKSB7XHJcblx0XHRpZiAoY2hhcmFjdGVyLmltYWdlT3JpZW50YXRpb24oKSkge1xyXG5cdFx0XHR0aGlzLmNvbnRleHQuc2F2ZSgpO1xyXG5cdFx0XHR0aGlzLmNvbnRleHQuc2NhbGUoLTEsIDEpO1xyXG5cdFx0XHR0aGlzLmNvbnRleHQuZHJhd0ltYWdlKGNoYXJhY3Rlci5nZXROZXh0U3ByaXRlKCksIGNoYXJhY3Rlci5wb3NpdGlvbi54ICogLTEsIGNoYXJhY3Rlci5wb3NpdGlvbi55LCBjaGFyYWN0ZXIud2lkdGggKiAtMSwgY2hhcmFjdGVyLmhlaWdodCk7XHJcblx0XHRcdHRoaXMuY29udGV4dC5yZXN0b3JlKCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmNvbnRleHQuZHJhd0ltYWdlKGNoYXJhY3Rlci5nZXROZXh0U3ByaXRlKCksIGNoYXJhY3Rlci5wb3NpdGlvbi54LCBjaGFyYWN0ZXIucG9zaXRpb24ueSwgY2hhcmFjdGVyLndpZHRoLCBjaGFyYWN0ZXIuaGVpZ2h0KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJ1bkdhbWUoKSB7XHJcblx0XHR0aGlzLmdhbWVUaW1lciA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG5cdFx0dGhpcy5nYW1lUGxheXMgPSB0cnVlO1xyXG5cdFx0dGhpcy5iYXNlU3BlZWQgPSA1O1xyXG5cdH1cclxuXHJcblx0ZW5kR2FtZSgpIHtcclxuXHRcdGNsZWFySW50ZXJ2YWwodGhpcy50aW1lckhhbmRsZXIpO1xyXG5cdFx0d2luZG93LmdhbWVzdGF0ZSA9IHdpbmRvdy5nYW1lc3RhdGUuZmlsdGVyKGl0ZW0gPT4gaXRlbSAhPT0gdGhpcy50aW1lckhhbmRsZXIpO1xyXG5cdFx0dGhpcy5nYW1lUGxheXMgPSBmYWxzZTtcclxuXHRcdHRoaXMuYmFzZVNwZWVkID0gMDtcclxuXHJcblx0fVxyXG5cdGxvc2VHYW1lKCkge1xyXG5cdFx0dGhpcy5lbmRHYW1lKCk7XHJcblx0XHRsZXQgc2NvcmUgPSAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSB0aGlzLmdhbWVUaW1lcikgLyAxMDAwO1xyXG5cdFx0bGV0IG5hbWUgPSBwcm9tcHQoYFlvdXIgc2NvcmUgaXMgJHtzY29yZX0gc2Vjb25kcy5cXG4gRW50ZXIgeW91ciBuYW1lYCwgJ05pbmphJyk7XHJcblx0XHRuYW1lICYmIEZpcmVTdG9yZS5zYXZlU2NvcmUoe1xyXG5cdFx0XHRuYW1lLCBzY29yZVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cdGNoZWNrQ2hhcmFjdGVyc0ludGVyc2VjdGlvbihoZXJvLCBlbmVteSkge1xyXG5cdFx0bGV0IGRlbHRhWCA9IDMwO1xyXG5cdFx0bGV0IGRlbHRhWSA9IDU7XHJcblx0XHRpZiAoKChoZXJvLnBvc2l0aW9uLnggKyBkZWx0YVggPD0gKGVuZW15LnBvc2l0aW9uLnggKyBlbmVteS53aWR0aCkpICYmICgoaGVyby5wb3NpdGlvbi54ICsgaGVyby53aWR0aCkgPj0gZW5lbXkucG9zaXRpb24ueCArIGRlbHRhWCkpICYmXHJcblx0XHRcdCgoaGVyby5wb3NpdGlvbi55ICsgZGVsdGFZIDw9IChlbmVteS5wb3NpdGlvbi55ICsgZW5lbXkuaGVpZ2h0KSkgJiYgKChoZXJvLnBvc2l0aW9uLnkgKyBoZXJvLmhlaWdodCkgPj0gZW5lbXkucG9zaXRpb24ueSArIGRlbHRhWSkpKSB7XHJcblx0XHRcdGhlcm8uZGllKCk7XHJcblx0XHRcdHRoaXMubG9zZUdhbWUoKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwiaW1wb3J0IFBlcnNvbiBmcm9tICcuL3BlcnNvbic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIZXJvIGV4dGVuZHMgUGVyc29uIHtcclxuICAgIGNvbnN0cnVjdG9yKGdhbWVTdGF0ZSkge1xyXG4gICAgICAgIHN1cGVyKGdhbWVTdGF0ZSwgJy5jYXQtaW1nJyk7XHJcbiAgICAgICAgdGhpcy5zZXRVcEhlcm8oKTtcclxuICAgICAgICB0aGlzLndpZHRoID0gMTE1O1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMTAwO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSB7XHJcbiAgICAgICAgICAgIHg6ICh0aGlzLmdhbWUud2lkdGggLSB0aGlzLndpZHRoKSAvIDIsXHJcbiAgICAgICAgICAgIHk6IHRoaXMuZ2FtZS5oZWlnaHQgLSB0aGlzLmhlaWdodFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHNldFVwSGVybygpIHtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlIDwgMzcgfHwgZXZlbnQua2V5Q29kZSA+IDQwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmdhbWUuZ2FtZVBsYXlzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWUucnVuR2FtZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zcGVlZCA9IHRoaXMuZ2FtZS5iYXNlU3BlZWQgKiB0aGlzLmdhbWUubGV2ZWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDM3KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpcmVjdGlvbkFuZ2xlID0gTWF0aC5QSTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMzgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uQW5nbGUgPSBNYXRoLlBJIC8gMiAqIDM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDM5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpcmVjdGlvbkFuZ2xlID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gNDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uQW5nbGUgPSBNYXRoLlBJIC8gMjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZGllKCkge1xyXG4gICAgICAgIHRoaXMuc3ByaXRlcyA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhdC1kZWFkLWltZycpKTtcclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQZXJzb24ge1xyXG4gICAgY29uc3RydWN0b3IoZ2FtZVN0YXRlLCBzZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuZ2FtZSA9IGdhbWVTdGF0ZTtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbkFuZ2xlID0gMiAqIE1hdGguUEkgKiBNYXRoLnJhbmRvbSgpO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSB7XHJcbiAgICAgICAgICAgIHg6IDAsXHJcbiAgICAgICAgICAgIHk6IDBcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc3ByaXRlcyA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpO1xyXG4gICAgICAgIHRoaXMuc3BlZWQgPSBnYW1lU3RhdGUubGV2ZWwgKiBnYW1lU3RhdGUuYmFzZVNwZWVkO1xyXG4gICAgICAgIHRoaXMuY3VycmVudEltZyA9IDA7XHJcbiAgICB9XHJcbiAgICBnZXROZXh0U3ByaXRlKCkge1xyXG4gICAgICAgIHRoaXMuc3RlcCgpO1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRJbWcgPj0gdGhpcy5zcHJpdGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbWcgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5zcHJpdGVzW3RoaXMuY3VycmVudEltZysrXTtcclxuICAgIH1cclxuICAgIHN0ZXAoKSB7XHJcbiAgICAgICAgdGhpcy5zcGVlZCA9IHRoaXMuZ2FtZS5iYXNlU3BlZWQgKiB0aGlzLmdhbWUubGV2ZWw7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi54ICs9IE1hdGguY29zKHRoaXMuZGlyZWN0aW9uQW5nbGUpICogdGhpcy5zcGVlZDtcclxuICAgICAgICBpZiAodGhpcy5wb3NpdGlvbi54ICsgdGhpcy53aWR0aCAvIDIgPiB0aGlzLmdhbWUud2lkdGgpIHtcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi54ID0gLXRoaXMud2lkdGggLyAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5wb3NpdGlvbi54ICsgdGhpcy53aWR0aCAvIDIgPCAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueCA9IHRoaXMuZ2FtZS53aWR0aCAtIHRoaXMud2lkdGggLyAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBvc2l0aW9uLnkgKz0gTWF0aC5zaW4odGhpcy5kaXJlY3Rpb25BbmdsZSkgKiB0aGlzLnNwZWVkO1xyXG4gICAgICAgIGlmICh0aGlzLnBvc2l0aW9uLnkgKyB0aGlzLmhlaWdodCAvIDIgPiB0aGlzLmdhbWUuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueSA9IC10aGlzLmhlaWdodCAvIDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnBvc2l0aW9uLnkgKyB0aGlzLmhlaWdodCAvIDIgPCAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueSA9IHRoaXMuZ2FtZS5oZWlnaHQgLSB0aGlzLmhlaWdodCAvIDI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaW1hZ2VPcmllbnRhdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3Rpb25BbmdsZSA+PSBNYXRoLlBJIC8gMiAmJiB0aGlzLmRpcmVjdGlvbkFuZ2xlIDw9IE1hdGguUEkgKiAzIC8gMjtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgUm91dGVyIGZyb20gJy4vdXRpbHMvcm91dGVyJztcclxuaW1wb3J0IHJvdXRlcyBmcm9tICcuL3JvdXRlcyc7XHJcblxyXG5uZXcgUm91dGVyKHJvdXRlcyk7IiwiaW1wb3J0IEdhbWVTdGF0ZSBmcm9tICcuL2dhbWVPYmplY3RzL2dhbWVTdGF0ZSc7XHJcbmltcG9ydCBkZXRlY3RNb2JpbGUgZnJvbSAnLi91dGlscy9kZXRlY3RNb2JpbGUnO1xyXG5pbXBvcnQgRmlyZVN0b3JlIGZyb20gJy4vdXRpbHMvZmlyZWJhc2UnO1xyXG5cclxubGV0IGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpO1xyXG5sZXQgZ2FtZSA9IG5ldyBHYW1lU3RhdGUoY29udGVudCk7XHJcblxyXG5hZGRCdXR0b25zRm9yTW9iaWxlKCk7XHJcblxyXG5jb25zdCByb3V0ZXMgPSBbXHJcbiAgICB7XHJcbiAgICAgICAgbWF0Y2g6ICcnLFxyXG4gICAgICAgIG9uRW50ZXI6ICgpID0+IHtcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAnZ2FtZSc7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBtYXRjaDogJ2Fib3V0JyxcclxuICAgICAgICBvbkVudGVyOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNoYW5nZUFjdGl2ZVBhZ2UoJ2Fib3V0Jyk7XHJcbiAgICAgICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MID0gJzxoMSBjbGFzcz1cImFib3V0XCI+PHNwYW4+U3VwZXIgZ2FtZSBDYXQgdnMgTmluamFzPC9zcGFuPjxoMT4nO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbWF0Y2g6ICdnYW1lJyxcclxuICAgICAgICBvbkVudGVyOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNoYW5nZUFjdGl2ZVBhZ2UoJ2dhbWUnKTtcclxuICAgICAgICAgICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgICAgICAgICBjb250ZW50LmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKGNhbnZhcyk7XHJcbiAgICAgICAgICAgIGdhbWUuc2V0VXBHYW1lKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbkxlYXZlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGdhbWUuZW5kR2FtZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbWF0Y2g6ICdzY29yZXMnLFxyXG4gICAgICAgIG9uRW50ZXI6ICgpID0+IHtcclxuICAgICAgICAgICAgY2hhbmdlQWN0aXZlUGFnZSgnc2NvcmVzJyk7XHJcblxyXG4gICAgICAgICAgICBGaXJlU3RvcmUuZ2V0U2NvcmVzKCkudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSAnPGgxIGNsYXNzPVwiYWJvdXRcIj48c3Bhbj5TY29yZXM8L3NwYW4+PC9oMT4nO1xyXG4gICAgICAgICAgICAgICAgbGV0IG9sID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb2wnKTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGkuaW5uZXJIVE1MID0gYCR7aXRlbS5uYW1lfSAtICR7aXRlbS5zY29yZX1gO1xyXG4gICAgICAgICAgICAgICAgICAgIG9sLmFwcGVuZENoaWxkKGxpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBkaXZGb3JEaXZpc2lvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgZGl2Rm9yRGl2aXNpb24uY2xhc3NMaXN0LmFkZCgndy0xMDAnKTtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZGl2Rm9yRGl2aXNpb24pO1xyXG4gICAgICAgICAgICAgICAgbGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKG9sKTtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZGl2KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXTtcclxuXHJcbmZ1bmN0aW9uIGNoYW5nZUFjdGl2ZVBhZ2UobmV3UGFnZSkge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGl2ZScpLmNsYXNzTmFtZSA9ICcnO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2hyZWY9XCIjJHtuZXdQYWdlfVwiXWApLnBhcmVudEVsZW1lbnQuY2xhc3NOYW1lID0gJ2FjdGl2ZSc7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZEJ1dHRvbnNGb3JNb2JpbGUoKSB7XHJcbiAgICBpZiAoZGV0ZWN0TW9iaWxlKCkpIHtcclxuXHJcbiAgICAgICAgdmFyIGRpdkZvckJ1dHRvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBkaXZGb3JCdXR0b25zLmNsYXNzTGlzdC5hZGQoJ2J1dHRvbnMnKTtcclxuXHJcbiAgICAgICAgdmFyIGJ1dHRvbkxlZnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICBidXR0b25MZWZ0LmlubmVySFRNTCA9ICc8JztcclxuICAgICAgICBidXR0b25MZWZ0LmNsYXNzTGlzdC5hZGQoJ2xlZnQnKTtcclxuXHJcbiAgICAgICAgdmFyIGJ1dHRvblVwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgYnV0dG9uVXAuaW5uZXJIVE1MID0gJ14nO1xyXG4gICAgICAgIGJ1dHRvblVwLmNsYXNzTGlzdC5hZGQoJ3VwJyk7XHJcblxyXG4gICAgICAgIHZhciBidXR0b25SaWdodCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgIGJ1dHRvblJpZ2h0LmlubmVySFRNTCA9ICc+JztcclxuICAgICAgICBidXR0b25SaWdodC5jbGFzc0xpc3QuYWRkKCdyaWdodCcpO1xyXG5cclxuICAgICAgICB2YXIgYnV0dG9uRG93biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgIGJ1dHRvbkRvd24uaW5uZXJIVE1MID0gJ3YnO1xyXG4gICAgICAgIGJ1dHRvbkRvd24uY2xhc3NMaXN0LmFkZCgnZG93bicpO1xyXG5cclxuXHJcblxyXG4gICAgICAgIGRpdkZvckJ1dHRvbnMuYXBwZW5kQ2hpbGQoYnV0dG9uTGVmdCk7XHJcbiAgICAgICAgZGl2Rm9yQnV0dG9ucy5hcHBlbmRDaGlsZChidXR0b25VcCk7XHJcbiAgICAgICAgZGl2Rm9yQnV0dG9ucy5hcHBlbmRDaGlsZChidXR0b25SaWdodCk7XHJcbiAgICAgICAgZGl2Rm9yQnV0dG9ucy5hcHBlbmRDaGlsZChidXR0b25Eb3duKTtcclxuXHJcbiAgICAgICAgZGl2Rm9yQnV0dG9ucy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0Lm1hdGNoZXMoJy5yaWdodCcpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZSA9IG5ldyBFdmVudCgna2V5ZG93bicpO1xyXG4gICAgICAgICAgICAgICAgZS5rZXlDb2RlID0gMzk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQubWF0Y2hlcygnLmxlZnQnKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGUgPSBuZXcgRXZlbnQoJ2tleWRvd24nKTtcclxuICAgICAgICAgICAgICAgIGUua2V5Q29kZSA9IDM3O1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0Lm1hdGNoZXMoJy51cCcpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZSA9IG5ldyBFdmVudCgna2V5ZG93bicpO1xyXG4gICAgICAgICAgICAgICAgZS5rZXlDb2RlID0gMzg7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQubWF0Y2hlcygnLmRvd24nKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGUgPSBuZXcgRXZlbnQoJ2tleWRvd24nKTtcclxuICAgICAgICAgICAgICAgIGUua2V5Q29kZSA9IDQwO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpdkZvckJ1dHRvbnMpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCByb3V0ZXM7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRldGVjdG1vYmlsZSgpIHtcclxuICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9BbmRyb2lkL2kpXHJcbiAgICAgICAgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvd2ViT1MvaSlcclxuICAgICAgICB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUGhvbmUvaSlcclxuICAgICAgICB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUGFkL2kpXHJcbiAgICAgICAgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBvZC9pKVxyXG4gICAgICAgIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0JsYWNrQmVycnkvaSlcclxuICAgICAgICB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9XaW5kb3dzIFBob25lL2kpXHJcbiAgICApIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufSIsImxldCB1cmwgPSAnaHR0cHM6Ly9rYXRlLWFyY2FkZS1nYW1lLmZpcmViYXNlaW8uY29tLy5qc29uJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZpcmVTdG9yZSB7XHJcbiAgICBzdGF0aWMgZ2V0U2NvcmVzKCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh1cmwpLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBzYXZlU2NvcmUoaW5mb1RvU2F2ZSkge1xyXG5cclxuICAgICAgICB0aGlzLmdldFNjb3JlcygpLnRoZW4oc2NvcmVzID0+IHtcclxuICAgICAgICAgICAgbGV0IG5ld1Njb3JlcyA9IFsuLi5zY29yZXMgfHwgW10sIGluZm9Ub1NhdmVdO1xyXG4gICAgICAgICAgICBuZXdTY29yZXMuc29ydCgoaXRlbTEsIGl0ZW0yKSA9PiBpdGVtMS5zY29yZSA+IGl0ZW0yLnNjb3JlID8gLTEgOiBpdGVtMS5zY29yZSA8IGl0ZW0yLnNjb3JlID8gMSA6IDApO1xyXG4gICAgICAgICAgICBuZXdTY29yZXMuc3BsaWNlKDEwKTtcclxuICAgICAgICAgICAgZmV0Y2godXJsLCB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkobmV3U2NvcmVzKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsIi8qKlxyXG4gKiDQpNGD0L3QutGG0LjRjyDQtNC70Y8g0LTQvtCx0LDQstC70LXQvdC40Y8g0Lgg0L7QsdGA0LDQsdC+0YLQutC4INGA0L7Rg9GC0L7QsiDQvdCwINGB0YLRgNCw0L3QuNGG0LVcclxuICogQHBhcmFtIHsqfSByb3V0ZVBhcmFtcyDQvNCw0YHRgdC40LIg0L/QsNGA0LDQvNC10YLRgNC+0LIg0LTQu9GPINC+0LHRgNCw0LHQvtGC0LrQuCDRgNC+0YPRgtC+0LJcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJvdXRlcihyb3V0ZVBhcmFtcykge1xyXG4gICAgdGhpcy5yb3V0ZXMgPSByb3V0ZVBhcmFtcyB8fCBbXTtcclxuICAgIHRoaXMuY3VycmVudFJvdXRlO1xyXG4gICAgdGhpcy5wcmV2aW91c1JvdXRlO1xyXG4gICAgdGhpcy5jdXJyZW50UGFyYW1zO1xyXG4gICAgdGhpcy5wcmV2aW91c1BhcmFtcztcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlcih3aW5kb3cubG9jYXRpb24uaGFzaCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuaGFuZGxlcih3aW5kb3cubG9jYXRpb24uaGFzaCk7XHJcbn1cclxuXHJcblJvdXRlci5wcm90b3R5cGUgPSB7XHJcbiAgICBoYW5kbGVyOiBmdW5jdGlvbiAoaGFzaCkge1xyXG4gICAgICAgIHRoaXMucHJldmlvdXNSb3V0ZSA9IHRoaXMuY3VycmVudFJvdXRlO1xyXG4gICAgICAgIHRoaXMucHJldmlvdXNQYXJhbXMgPSB0aGlzLmN1cnJlbnRQYXJhbXM7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50Um91dGUgPSB0aGlzLmZpbmROZXdSb3V0ZShoYXNoKTtcclxuICAgICAgICB0aGlzLmxhdW5jaEhhbmRsZXJzKCk7XHJcbiAgICB9LFxyXG4gICAgZmluZE5ld1JvdXRlOiBmdW5jdGlvbiAoaGFzaCkge1xyXG4gICAgICAgIGhhc2ggPSBoYXNoLnNsaWNlKDEpO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucm91dGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5yb3V0ZXNbaV07XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgKGVsZW1lbnQubWF0Y2gpID09ICdzdHJpbmcnICYmIGVsZW1lbnQubWF0Y2ggPT09IGhhc2gpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhcmFtcyA9ICcnO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiAoZWxlbWVudC5tYXRjaCkgPT0gJ2Z1bmN0aW9uJyAmJiBlbGVtZW50Lm1hdGNoKGhhc2gpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYXJhbXMgPSAnJztcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgoZWxlbWVudC5tYXRjaCBpbnN0YW5jZW9mIFJlZ0V4cCkgJiYgZWxlbWVudC5tYXRjaC50ZXN0KGhhc2gpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYXJhbXMgPSBoYXNoLm1hdGNoKGVsZW1lbnQubWF0Y2gpIHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFyYW1zLnNwbGljZSgwLCAxKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGxhdW5jaEhhbmRsZXJzKCkge1xyXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHsgdGhpcy5wcmV2aW91c1JvdXRlICYmIHRoaXMucHJldmlvdXNSb3V0ZS5vbkxlYXZlICYmIHRoaXMucHJldmlvdXNSb3V0ZS5vbkxlYXZlKHRoaXMucHJldmlvdXNQYXJhbXMpOyB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7IHRoaXMuY3VycmVudFJvdXRlICYmIHRoaXMuY3VycmVudFJvdXRlLm9uQmVmb3JlRW50ZXIgJiYgdGhpcy5jdXJyZW50Um91dGUub25CZWZvcmVFbnRlcih0aGlzLmN1cnJlbnRQYXJhbXMpOyB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7IHRoaXMuY3VycmVudFJvdXRlICYmIHRoaXMuY3VycmVudFJvdXRlLm9uRW50ZXIgJiYgdGhpcy5jdXJyZW50Um91dGUub25FbnRlcih0aGlzLmN1cnJlbnRQYXJhbXMpOyB9KTtcclxuICAgIH1cclxufTsiXX0=
