!function o(a,s,c){function u(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(h)return h(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var r=s[t]={exports:{}};a[t][0].call(r.exports,function(e){return u(a[t][1][e]||e)},r,r.exports,o,a,s,c)}return s[t].exports}for(var h="function"==typeof require&&require,e=0;e<c.length;e++)u(c[e]);return u}({1:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r,o=e("./enemy"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,"goblin"));return t.width=36,t.height=48,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.default),n}();n.default=s},{"./enemy":2}],2:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var i,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=e("./person"),s=(i=a)&&i.__esModule?i:{default:i};var c=function(e){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t));return n.width=0,n.height=0,n.generatePosition(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,s.default),o(i,[{key:"generatePosition",value:function(){for(;this.position={x:Math.abs(this.width-this.game.width*Math.random()),y:this.game.height/2*Math.random()},this.getDistanceToHero()<200;);}},{key:"getDistanceToHero",value:function(){var e=this.game.hero;return Math.sqrt(Math.pow(e.position.x-this.position.x,2)+Math.pow(e.position.y-this.position.y,2))}}]),i}();n.default=c},{"./person":6}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var r=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=30,this.height=30,this.game=e,this.position={x:Math.abs(this.width-this.game.width*Math.random()),y:this.game.height/2*Math.random()},this.sprite=this.generateSptite()}return i(t,[{key:"getNextSprite",value:function(){return this.sprite}},{key:"generateSptite",value:function(){var e=document.querySelectorAll(".fruit-img");return e[Math.round(Math.random()*(e.length-1))]}},{key:"personState",get:function(){return{x:this.position.x,y:this.position.y}},set:function(e){this.position.x=e.x,this.position.y=e.y}}]),t}();n.default=r},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=u(e("./hero")),o=u(e("./dummyEnemy")),a=u(e("./smartEnemy")),s=u(e("../utils/firebase")),c=u(e("./fruit"));function u(e){return e&&e.__esModule?e:{default:e}}var h=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.gameOnScreen=!1,this.width=1e3<=window.innerWidth?1e3:window.innerWidth,this.height=(document.documentElement.clientHeight||document.body.clientHeight)-160,this.containter=e,this.setUpHero()}return i(t,[{key:"setUpGame",value:function(){var e=this;this.setUpCanvas(),this.hero=new r.default(this),this.replayData=[],this.characters=new Array(2).fill(0).map(function(){return new o.default(e)}),this.characters.push(new a.default(this)),this.fruits=[],this.level=1,this.baseSpeed=0,this.gamePlays=!1,this.gameTimer=0,this.timerHandler=setInterval(function(){return e.gameStep()},100)}},{key:"gameStep",value:function(){var t=this;this.context.clearRect(0,0,this.width,this.height),this.context.font="20px Segoe UI",this.context.fillText("Scores "+(this.gameTimer?this.getScore():0),this.width-150,30),this.context.fillText("Level "+this.level,this.width-150,55);var n=[];this.drawCharacter(this.hero),this.characters.forEach(function(e){t.drawCharacter(e),n.push({character:e,state:e.personState})}),this.fruits.forEach(function(e){t.drawCharacter(e),n.push({character:e,state:e.personState})}),this.fruits=this.fruits.filter(function(e){return!t.checkCharactersIntersection(t.hero,e)||(t.hero.enableRage(),!1)}),n.push({character:this.hero,state:this.hero.personState}),this.gamePlays&&this.replayData.push(n),this.hero.rageMode?this.characters=this.characters.filter(function(e){return!t.checkCharactersIntersection(t.hero,e)}):this.characters.some(function(e){return t.checkCharactersIntersection(t.hero,e)})&&this.loseGame()}},{key:"drawCharacter",value:function(e){this.context.drawImage(e.getNextSprite(),e.position.x,e.position.y,e.width,e.height)}},{key:"getScore",value:function(){return Math.round(((new Date).getTime()-this.gameTimer)/100)/10}},{key:"checkCharactersIntersection",value:function(e,t){if(e.position.x+20<=t.position.x+t.width&&e.position.x+e.width>=t.position.x+20&&e.position.y+20<=t.position.y+t.height&&e.position.y+e.height>=t.position.y+20)return!0}},{key:"runGame",value:function(){this.gameTimer=(new Date).getTime(),this.gamePlays=!0,this.baseSpeed=5,this.setLevel()}},{key:"loseGame",value:function(){var n=this;setTimeout(function(){n.endGame();var e=n.getScore(),t=prompt("Your score is "+e+" seconds.\n Enter your name","I'm Batman");t&&s.default.saveScore({name:t,score:e}),n.addEndGameButtons()},0)}},{key:"endGame",value:function(){clearInterval(this.timerHandler),clearInterval(this.levelTimer),this.gamePlays=!1,this.baseSpeed=0,this.gameOnScreen=!1}},{key:"setLevel",value:function(){var t=this;this.levelTimer=setInterval(function(){t.level+=1,t.characters.push(new o.default(t)),t.level%2==1&&t.characters.push(new a.default(t)),1<=t.level&&t.fruits.push(new c.default(t));var e=document.createElement("div");e.classList.add("level-up"),e.innerHTML="Level Up! Current level - "+t.level,t.containter.appendChild(e),setTimeout(function(){t.containter.removeChild(e)},1e3)},1e4)}},{key:"addEndGameButtons",value:function(){var e=document.createElement("div");e.classList.add("end-buttons");var t=document.createElement("button");t.innerHTML="Watch replay",t.addEventListener("click",function(){window.location.hash="watchreplay"});var n=document.createElement("button");n.innerHTML="Start new game",n.addEventListener("click",function(){window.location.hash="newgame"}),e.appendChild(t),e.appendChild(n),this.containter.appendChild(e)}},{key:"setUpHero",value:function(){var t=this;document.addEventListener("keydown",function(e){if(t.gameOnScreen){switch(e.keyCode){case 37:t.hero.directionAngle=Math.PI;break;case 38:t.hero.directionAngle=Math.PI/2;break;case 39:t.hero.directionAngle=0;break;case 40:t.hero.directionAngle=Math.PI/2*3;break;default:return}t.gamePlays||t.runGame()}})}},{key:"setUpCanvas",value:function(){this.gameOnScreen=!0,this.canvas=document.createElement("canvas"),this.containter.innerHTML="",this.containter.appendChild(this.canvas),this.canvas.width=this.width,this.canvas.height=this.height,this.context=this.canvas.getContext("2d")}},{key:"replayGame",value:function(){var t=this;clearInterval(this.replayTimer);var e=0;this.replayTimer=setInterval(function(){e>=(t.replayData||[]).length?clearInterval(t.replayTimer):(t.context.clearRect(0,0,t.width,t.height),t.replayData[e].forEach(function(e){e.character.personState=e.state,t.drawCharacter(e.character)}),e++)},20)}}]),t}();n.default=h},{"../utils/firebase":12,"./dummyEnemy":1,"./fruit":3,"./hero":5,"./smartEnemy":7}],5:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=e("./person"),s=(r=a)&&r.__esModule?r:{default:r};var c=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,"knight"));return t.width=55,t.height=75,t.position={x:(t.game.width-t.width)/2,y:t.game.height-t.height},t.rageMode=!1,t.sprites=t.spritesCollection.down,t.directionAngle=Math.PI/2,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.default),o(n,[{key:"getSpeed",value:function(){this.speed=this.game.baseSpeed*this.game.level}},{key:"enableRage",value:function(){var e=this;this.rageMode=!0,this.selectSpritesCollection(),this.game.canvas.classList.add("rage-canvas"),setTimeout(function(){return e.game.canvas.classList.remove("rage-canvas")},3e3),setTimeout(function(){e.rageMode=!1,e.selectSpritesCollection()},3500)}},{key:"selectSpritesCollection",value:function(){!0===this.rageMode?(this.width=75,this.spritesCollection=this.furySpritesCollection):(this.width=55,this.spritesCollection=this.normalSpritesColletcion),this.selectSprites()}},{key:"getAllSprites",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getAllSprites",this).call(this),this.normalSpritesColletcion=this.spritesCollection;var e="knight-kills";this.furySpritesCollection={left:this.getSprites("."+e+"-left-img"),right:this.getSprites("."+e+"-right-img"),up:this.getSprites("."+e+"-up-img"),down:this.getSprites("."+e+"-down-img")}}},{key:"personState",get:function(){return{x:this.position.x,y:this.position.y,directionAngle:this.directionAngle,rageMode:this.rageMode}},set:function(e){this.directionAngle=e.directionAngle,this.position.x=e.x,this.position.y=e.y,this.rageMode!==e.rageMode&&(this.rageMode=e.rageMode,this.spritesCollection=this.rageMode?this.furySpritesCollection:this.normalSpritesColletcion,this.selectSprites())}}]),n}();n.default=c},{"./person":6}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var r=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.selector=t,this.getAllSprites(),this.game=e,this.directionAngle=2*Math.PI*Math.random(),this.speed=e.level*e.baseSpeed/2,this.currentImg=0}return i(n,[{key:"selectSprites",value:function(){this.directionAngle>=5*Math.PI/4&&this.directionAngle<=7*Math.PI/4?this.sprites=this.spritesCollection.down:this.directionAngle>=Math.PI/4&&this.directionAngle<=3*Math.PI/4?this.sprites=this.spritesCollection.up:this.directionAngle>=3*Math.PI/4&&this.directionAngle<=5*Math.PI/4?this.sprites=this.spritesCollection.left:this.sprites=this.spritesCollection.right}},{key:"getAllSprites",value:function(){this.spritesCollection={left:this.getSprites("."+this.selector+"-left-img"),right:this.getSprites("."+this.selector+"-right-img"),up:this.getSprites("."+this.selector+"-up-img"),down:this.getSprites("."+this.selector+"-down-img")}}},{key:"getSprites",value:function(e){return[].slice.call(document.querySelectorAll(e))}},{key:"getNextSprite",value:function(){return this.step(),this.currentImg>=this.sprites.length&&(this.currentImg=0),this.sprites[this.currentImg++]}},{key:"step",value:function(){this.getSpeed(),this.position.x+=Math.cos(this.directionAngle)*this.speed,this.position.x+this.width/2>this.game.width&&(this.position.x=-this.width/2),this.position.x+this.width/2<0&&(this.position.x=this.game.width-this.width/2),this.position.y-=Math.sin(this.directionAngle)*this.speed,this.position.y+this.height/2>this.game.height&&(this.position.y=-this.height/2),this.position.y+this.height/2<0&&(this.position.y=this.game.height-this.height/2)}},{key:"getSpeed",value:function(){this.speed=this.game.baseSpeed*this.game.level/2}},{key:"directionAngle",get:function(){return this._directionAngle},set:function(e){this._directionAngle=e,this.selectSprites()}},{key:"personState",get:function(){return{x:this.position.x,y:this.position.y,directionAngle:this.directionAngle}},set:function(e){this.directionAngle=e.directionAngle,this.position.x=e.x,this.position.y=e.y}}]),n}();n.default=r},{}],7:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var i,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=e("./enemy"),s=(i=a)&&i.__esModule?i:{default:i};var c=function(e){function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,"rogue"));return t.range=300,t.width=40,t.height=45,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,s.default),o(i,[{key:"step",value:function(){var e=this.game.hero.position,t=this.position;if(this.getDistanceToHero()<=this.range&&e.x!==t.x){var n=Math.atan((e.y-t.y)/(e.x-t.x));e.x>t.x&&e.y<t.y||e.x>t.x&&e.y>t.y?this.directionAngle=2*Math.PI-n:this.directionAngle=Math.PI-n}(function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0})(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"step",this).call(this)}}]),i}();n.default=c},{"./enemy":2}],8:[function(e,t,n){"use strict";var i=o(e("./utils/router")),r=o(e("./routes"));function o(e){return e&&e.__esModule?e:{default:e}}(0,o(e("./utils/addButtonsForMobile")).default)(),new i.default(r.default)},{"./routes":9,"./utils/addButtonsForMobile":10,"./utils/router":13}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=o(e("./gameObjects/gameState")),r=o(e("./utils/firebase"));function o(e){return e&&e.__esModule?e:{default:e}}var a=document.querySelector(".content"),s=new i.default(a),c=[{match:"",onEnter:function(){window.location.hash="game"}},{match:"about",onEnter:function(){u("about"),a.innerHTML='<h1>\n             <span>Super arcade game</span>\n         </h1>\n         <div class="w-100"></div>\n         <div>\n             <h2>Author\n                 <a href="https://github.com/citrinin">Kate Kuzkina</a>\n             </h2>\n         </div>\n         <div class="about">\n\n             <span>\n             This is an arcade game where You will play as knight.\n             </span>\n             <img src="knight/knight_run_down_000.png" /> <br/>\n             <span>You can control knight with arrow keys or if you play on mobile phone with buttons on screen.</span>\n             <br/> \n             <span>Your goal is to stay alive as long as possible despite the enemies that want to kill You. </span>\n             <br/>\n             <span>This is Goblin – dummy enemy. <img src="goblin/goblin_run_down_000.png" width="35" /> \n             He will run in random direction all the time. </span>\n             <br/>\n             <span>This is Rogue – smart enemy.  <img src="rogue/rogue_run_down_000.png" width="40" />He will also run in random direction\n             but if he will see You around – he will chase you till you ran away.</span>\n             <br/>\n             <span> Sometimes on the screen can appear fruits.\n              <img src="food/Apple.png">\n              <img src="food/Avocado.png">\n              <img src="food/Cherry.png">\n              <img src="food/Lemon.png">\n              <img src="food/MelonWater.png">\n              <img src="food/Peach.png">\n              <img src="food/Strawberry.png">\n              They will give you power to fight with enemies, but only for 3 seconds.<span><br/>\n              <span>Good luck!</span>\n         </div>'}},{match:"game",onEnter:function(){u("game"),s.setUpGame()},onLeave:function(){s.endGame()}},{match:"scores",onEnter:function(){u("scores"),r.default.getScores().then(function(e){a.innerHTML='<h1 class="about"><span>Scores</span></h1>';var n=document.createElement("ol");e.forEach(function(e){var t=document.createElement("li");t.innerHTML=e.name+" - "+e.score,n.appendChild(t)});var t=document.createElement("div");t.classList.add("w-100"),a.appendChild(t);var i=document.createElement("div");i.appendChild(n),a.appendChild(i)})}},{match:"replay",onEnter:function(){0!==(s.replayData||[]).length?s.replayGame():window.location.hash="game"}},{match:"watchreplay",onEnter:function(){window.location.hash="replay"}},{match:"newgame",onEnter:function(){window.location.hash="game"}}];function u(e){document.querySelector(".active").className="",document.querySelector('[href="#'+e+'"]').parentElement.className="active"}n.default=c},{"./gameObjects/gameState":4,"./utils/firebase":12}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){if((0,o.default)()){var e=document.createElement("div");e.classList.add("buttons");var t=document.createElement("button");t.innerHTML="<",t.classList.add("left");var n=document.createElement("button");n.innerHTML="^",n.classList.add("up");var i=document.createElement("button");i.innerHTML=">",i.classList.add("right");var r=document.createElement("button");r.innerHTML="v",r.classList.add("down"),e.appendChild(t),e.appendChild(n),e.appendChild(i),e.appendChild(r),e.addEventListener("click",function(e){if(e.target.matches(".right")){var t=new Event("keydown");return t.keyCode=39,void document.dispatchEvent(t)}if(e.target.matches(".left")){var n=new Event("keydown");return n.keyCode=37,void document.dispatchEvent(n)}if(e.target.matches(".up")){var i=new Event("keydown");return i.keyCode=38,void document.dispatchEvent(i)}if(e.target.matches(".down")){var r=new Event("keydown");return r.keyCode=40,void document.dispatchEvent(r)}}),document.body.appendChild(e)}};var i,r=e("./detectMobile"),o=(i=r)&&i.__esModule?i:{default:i}},{"./detectMobile":11}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))}},{}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var r="https://kate-arcade-game.firebaseio.com/.json",o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"getScores",value:function(){return fetch(r).then(function(e){return e.json()})}},{key:"saveScore",value:function(n){this.getScores().then(function(e){var t=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e||[]),[n]);t.sort(function(e,t){return e.score>t.score?-1:e.score<t.score?1:0}),t.splice(10),fetch(r,{method:"PUT",body:JSON.stringify(t)})})}}]),e}();n.default=o},{}],13:[function(e,t,n){"use strict";function i(e){var t=this;this.routes=e||[],this.currentRoute,this.previousRoute,this.currentParams,this.previousParams,window.addEventListener("hashchange",function(){t.handler(window.location.hash)}),this.handler(window.location.hash)}Object.defineProperty(n,"__esModule",{value:!0}),(n.default=i).prototype={handler:function(e){this.previousRoute=this.currentRoute,this.previousParams=this.currentParams,this.currentRoute=this.findNewRoute(e),this.launchHandlers()},findNewRoute:function(e){e=e.slice(1);for(var t=0;t<this.routes.length;t++){var n=this.routes[t];if("string"==typeof n.match&&n.match===e)return this.currentParams="",n;if("function"==typeof n.match&&n.match(e))return this.currentParams="",n;if(n.match instanceof RegExp&&n.match.test(e))return this.currentParams=e.match(n.match)||[],this.currentParams.splice(0,1),n}},launchHandlers:function(){var e=this;Promise.resolve().then(function(){e.previousRoute&&e.previousRoute.onLeave&&e.previousRoute.onLeave(e.previousParams)}).then(function(){e.currentRoute&&e.currentRoute.onBeforeEnter&&e.currentRoute.onBeforeEnter(e.currentParams)}).then(function(){e.currentRoute&&e.currentRoute.onEnter&&e.currentRoute.onEnter(e.currentParams)})}}},{}]},{},[8]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvZ2FtZU9iamVjdHMvZHVtbXlFbmVteS5qcyIsInNyYy9qcy9nYW1lT2JqZWN0cy9lbmVteS5qcyIsInNyYy9qcy9nYW1lT2JqZWN0cy9mcnVpdC5qcyIsInNyYy9qcy9nYW1lT2JqZWN0cy9nYW1lU3RhdGUuanMiLCJzcmMvanMvZ2FtZU9iamVjdHMvaGVyby5qcyIsInNyYy9qcy9nYW1lT2JqZWN0cy9wZXJzb24uanMiLCJzcmMvanMvZ2FtZU9iamVjdHMvc21hcnRFbmVteS5qcyIsInNyYy9qcy9tYWluLmpzIiwic3JjL2pzL3JvdXRlcy5qcyIsInNyYy9qcy91dGlscy9hZGRCdXR0b25zRm9yTW9iaWxlLmpzIiwic3JjL2pzL3V0aWxzL2RldGVjdE1vYmlsZS5qcyIsInNyYy9qcy91dGlscy9maXJlYmFzZS5qcyIsInNyYy9qcy91dGlscy9yb3V0ZXIuanMiXSwibmFtZXMiOlsiciIsImUiLCJuIiwidCIsIm8iLCJpIiwiZiIsImMiLCJyZXF1aXJlIiwidSIsImEiLCJFcnJvciIsImNvZGUiLCJwIiwiZXhwb3J0cyIsImNhbGwiLCJsZW5ndGgiLCIxIiwibW9kdWxlIiwiX2VuZW15IiwiRHVtbXlFbmVteSIsImdhbWVTdGF0ZSIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfdGhpcyIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwiX19wcm90b19fIiwiT2JqZWN0IiwiZ2V0UHJvdG90eXBlT2YiLCJ3aWR0aCIsImhlaWdodCIsIl9lbmVteTIiLCJkZWZhdWx0IiwiX3BlcnNvbiIsIkVuZW15Iiwic2VsZWN0b3IiLCJnZW5lcmF0ZVBvc2l0aW9uIiwiX3BlcnNvbjIiLCJwb3NpdGlvbiIsIngiLCJNYXRoIiwiYWJzIiwiZ2FtZSIsInJhbmRvbSIsInkiLCJnZXREaXN0YW5jZVRvSGVybyIsImhlcm8iLCJzcXJ0IiwicG93IiwiRnJ1aXQiLCJzcHJpdGUiLCJnZW5lcmF0ZVNwdGl0ZSIsInNwcml0ZXMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJyb3VuZCIsIm5ld1Bvc2l0aW9uIiwiR2FtZVN0YXRlIiwiZWxlbWVudFRvRHJhdyIsImdhbWVPblNjcmVlbiIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJkb2N1bWVudEVsZW1lbnQiLCJjbGllbnRIZWlnaHQiLCJib2R5IiwiY29udGFpbnRlciIsInNldFVwSGVybyIsInNldFVwQ2FudmFzIiwiX2hlcm8yIiwicmVwbGF5RGF0YSIsImNoYXJhY3RlcnMiLCJBcnJheSIsImZpbGwiLCJtYXAiLCJfZHVtbXlFbmVteTIiLCJwdXNoIiwiX3NtYXJ0RW5lbXkyIiwiZnJ1aXRzIiwibGV2ZWwiLCJiYXNlU3BlZWQiLCJnYW1lUGxheXMiLCJnYW1lVGltZXIiLCJ0aW1lckhhbmRsZXIiLCJzZXRJbnRlcnZhbCIsImdhbWVTdGVwIiwiX3RoaXMyIiwiY29udGV4dCIsImNsZWFyUmVjdCIsImZvbnQiLCJmaWxsVGV4dCIsImdldFNjb3JlIiwic3RlcERhdGEiLCJkcmF3Q2hhcmFjdGVyIiwiZm9yRWFjaCIsImNoYXJhY3RlciIsInN0YXRlIiwicGVyc29uU3RhdGUiLCJmcnVpdCIsImZpbHRlciIsImNoZWNrQ2hhcmFjdGVyc0ludGVyc2VjdGlvbiIsImVuYWJsZVJhZ2UiLCJyYWdlTW9kZSIsInNvbWUiLCJsb3NlR2FtZSIsImRyYXdJbWFnZSIsImdldE5leHRTcHJpdGUiLCJEYXRlIiwiZ2V0VGltZSIsImVuZW15Iiwic2V0TGV2ZWwiLCJfdGhpczMiLCJzZXRUaW1lb3V0IiwiZW5kR2FtZSIsInNjb3JlIiwibmFtZSIsInByb21wdCIsIl9maXJlYmFzZTIiLCJzYXZlU2NvcmUiLCJhZGRFbmRHYW1lQnV0dG9ucyIsImNsZWFySW50ZXJ2YWwiLCJsZXZlbFRpbWVyIiwiX3RoaXM0IiwiX2ZydWl0MiIsIm1lc3NhZ2UiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJyZW1vdmVDaGlsZCIsImRpdkZvckJ1dHRvbnMiLCJyZXBsYXlCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwibG9jYXRpb24iLCJoYXNoIiwic3RhcnROZXdHYW1lQnV0dG9uIiwiX3RoaXM1IiwiZXZlbnQiLCJrZXlDb2RlIiwiZGlyZWN0aW9uQW5nbGUiLCJQSSIsInJ1bkdhbWUiLCJjYW52YXMiLCJnZXRDb250ZXh0IiwiX3RoaXM2IiwicmVwbGF5VGltZXIiLCJjdXJyZW50U3RhdGUiLCJkYXRhIiwiSGVybyIsInNwcml0ZXNDb2xsZWN0aW9uIiwiZG93biIsInNwZWVkIiwic2VsZWN0U3ByaXRlc0NvbGxlY3Rpb24iLCJyZW1vdmUiLCJmdXJ5U3ByaXRlc0NvbGxlY3Rpb24iLCJub3JtYWxTcHJpdGVzQ29sbGV0Y2lvbiIsInNlbGVjdFNwcml0ZXMiLCJfZ2V0IiwicHJvdG90eXBlIiwibGVmdCIsImdldFNwcml0ZXMiLCJyaWdodCIsInVwIiwiUGVyc29uIiwiZ2V0QWxsU3ByaXRlcyIsImN1cnJlbnRJbWciLCJzbGljZSIsInN0ZXAiLCJnZXRTcGVlZCIsImNvcyIsInNpbiIsIl9kaXJlY3Rpb25BbmdsZSIsIm5ld1ZhbHVlIiwiU21hcnRFbmVteSIsInJhbmdlIiwiaGVyb1Bvc2l0aW9uIiwiZW5lbXlQb3NpdGlvbiIsImF0YW4iLCJfcm91dGVyMiIsIl9yb3V0ZXMyIiwiY29udGVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfZ2FtZVN0YXRlMiIsInJvdXRlcyIsIm1hdGNoIiwib25FbnRlciIsImNoYW5nZUFjdGl2ZVBhZ2UiLCJzZXRVcEdhbWUiLCJvbkxlYXZlIiwiZ2V0U2NvcmVzIiwidGhlbiIsInJlc3VsdCIsIm9sIiwiaXRlbSIsImxpIiwiZGl2Rm9yRGl2aXNpb24iLCJkaXYiLCJyZXBsYXlHYW1lIiwibmV3UGFnZSIsImNsYXNzTmFtZSIsInBhcmVudEVsZW1lbnQiLCJfZGV0ZWN0TW9iaWxlMiIsImJ1dHRvbkxlZnQiLCJidXR0b25VcCIsImJ1dHRvblJpZ2h0IiwiYnV0dG9uRG93biIsInRhcmdldCIsIm1hdGNoZXMiLCJFdmVudCIsImRpc3BhdGNoRXZlbnQiLCJfZSIsIl9lMiIsIl9lMyIsIl9kZXRlY3RNb2JpbGUiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ1cmwiLCJGaXJlU3RvcmUiLCJmZXRjaCIsInJlc3BvbnNlIiwianNvbiIsImluZm9Ub1NhdmUiLCJzY29yZXMiLCJuZXdTY29yZXMiLCJjb25jYXQiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJzb3J0IiwiaXRlbTEiLCJpdGVtMiIsInNwbGljZSIsIm1ldGhvZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJSb3V0ZXIiLCJyb3V0ZVBhcmFtcyIsImN1cnJlbnRSb3V0ZSIsInByZXZpb3VzUm91dGUiLCJjdXJyZW50UGFyYW1zIiwicHJldmlvdXNQYXJhbXMiLCJoYW5kbGVyIiwiZmluZE5ld1JvdXRlIiwibGF1bmNoSGFuZGxlcnMiLCJlbGVtZW50IiwiUmVnRXhwIiwidGVzdCIsIlByb21pc2UiLCJyZXNvbHZlIiwib25CZWZvcmVFbnRlciJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsRUFBQUMsRUFBQUMsR0FBQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUFBLElBQUFKLEVBQUFHLEdBQUEsQ0FBQSxJQUFBSixFQUFBSSxHQUFBLENBQUEsSUFBQUUsRUFBQSxtQkFBQUMsU0FBQUEsUUFBQSxJQUFBRixHQUFBQyxFQUFBLE9BQUFBLEVBQUFGLEdBQUEsR0FBQSxHQUFBSSxFQUFBLE9BQUFBLEVBQUFKLEdBQUEsR0FBQSxJQUFBSyxFQUFBLElBQUFDLE1BQUEsdUJBQUFOLEVBQUEsS0FBQSxNQUFBSyxFQUFBRSxLQUFBLG1CQUFBRixFQUFBLElBQUFHLEVBQUFYLEVBQUFHLEdBQUEsQ0FBQVMsUUFBQSxJQUFBYixFQUFBSSxHQUFBLEdBQUFVLEtBQUFGLEVBQUFDLFFBQUEsU0FBQWQsR0FBQSxPQUFBSSxFQUFBSCxFQUFBSSxHQUFBLEdBQUFMLElBQUFBLElBQUFhLEVBQUFBLEVBQUFDLFFBQUFkLEVBQUFDLEVBQUFDLEVBQUFDLEdBQUEsT0FBQUQsRUFBQUcsR0FBQVMsUUFBQSxJQUFBLElBQUFMLEVBQUEsbUJBQUFELFNBQUFBLFFBQUFILEVBQUEsRUFBQUEsRUFBQUYsRUFBQWEsT0FBQVgsSUFBQUQsRUFBQUQsRUFBQUUsSUFBQSxPQUFBRCxFQUFBLENBQUEsQ0FBQWEsRUFBQSxDQUFBLFNBQUFULEVBQUFVLEVBQUFKLGlSQ0FBLE1BQUFLLEVBQUFYLEVBQUEsbURBRXFCWSxjQUNqQixTQUFBQSxFQUFBQyxnR0FBdUJDLENBQUFDLEtBQUFILEdBQUEsSUFBQUkseUxBQUFDLENBQUFGLE1BQUFILEVBQUFNLFdBQUFDLE9BQUFDLGVBQUFSLElBQUFMLEtBQUFRLEtBQUFGLEVBQUEsV0FBQSxPQUVuQkcsRUFBQUssTUFBQSxHQUNBTCxFQUFBTSxPQUFBLEdBSG1CTiwwVkFEYU8sRUFBQUMsd0JBQW5CWiw4aUJDRnJCYSxFQUFBekIsRUFBQSxvREFFcUIwQixjQUNqQixTQUFBQSxFQUFBYixFQUFBYyxnR0FBaUNiLENBQUFDLEtBQUFXLEdBQUEsSUFBQVYseUxBQUFDLENBQUFGLE1BQUFXLEVBQUFSLFdBQUFDLE9BQUFDLGVBQUFNLElBQUFuQixLQUFBUSxLQUFBRixFQUFBYyxJQUFBLE9BRTdCWCxFQUFBSyxNQUFBLEVBQ0FMLEVBQUFNLE9BQUEsRUFDQU4sRUFBQVksbUJBSjZCWiwwVkFERmEsRUFBQUwsdURBUzNCLEtBQ0lULEtBQUFlLFNBQWdCLENBQ1pDLEVBQUdDLEtBQUFDLElBQVNsQixLQUFBTSxNQUFhTixLQUFBbUIsS0FBQWIsTUFBa0JXLEtBRC9CRyxVQUVaQyxFQUFHckIsS0FBQW1CLEtBQUFaLE9BQUEsRUFBdUJVLEtBQUFHLFVBRXpCcEIsS0FBQXNCLG9CQUxULG1EQVFBLElBQUlDLEVBQU92QixLQUFBbUIsS0FBWEksS0FDQSxPQUFPTixLQUFBTyxLQUFVUCxLQUFBUSxJQUFTRixFQUFBUixTQUFBQyxFQUFrQmhCLEtBQUFlLFNBQTNCQyxFQUFBLEdBQWlEQyxLQUFBUSxJQUFTRixFQUFBUixTQUFBTSxFQUFrQnJCLEtBQUFlLFNBQTNCTSxFQUFsRSx1QkFsQmFWLGlXQ0ZBZSxhQUNqQixTQUFBQSxFQUFBNUIsZ0dBQXVCQyxDQUFBQyxLQUFBMEIsR0FDbkIxQixLQUFBTSxNQUFBLEdBQ0FOLEtBQUFPLE9BQUEsR0FDQVAsS0FBQW1CLEtBQUFyQixFQUNBRSxLQUFBZSxTQUFnQixDQUNaQyxFQUFHQyxLQUFBQyxJQUFTbEIsS0FBQU0sTUFBYU4sS0FBQW1CLEtBQUFiLE1BQWtCVyxLQUQvQkcsVUFFWkMsRUFBR3JCLEtBQUFtQixLQUFBWixPQUFBLEVBQXVCVSxLQUFBRyxVQUc5QnBCLEtBQUEyQixPQUFjM0IsS0FBZDRCLG1FQUdBLE9BQU81QixLQUFQMkIsZ0RBZ0JBLElBQUlFLEVBQVVDLFNBQUFDLGlCQUFkLGNBRUEsT0FBT0YsRUFEV1osS0FBQWUsTUFBV2YsS0FBQUcsVUFBaUJTLEVBQUFwQyxPQUE5Qyx5Q0FiQSxNQUFPLENBQ0h1QixFQUFHaEIsS0FBQWUsU0FEQUMsRUFFSEssRUFBR3JCLEtBQUFlLFNBQWNNLGlCQUlUWSxHQUNaakMsS0FBQWUsU0FBQUMsRUFBa0JpQixFQUFsQmpCLEVBQ0FoQixLQUFBZSxTQUFBTSxFQUFrQlksRUFBbEJaLHFCQXpCYUsscVZDQXJCekMsRUFBQSxlQUNBQSxFQUFBLHFCQUNBQSxFQUFBLHFCQUNBQSxFQUFBLDBCQUNBQSxFQUFBLG1FQUVxQmlELGFBQ3BCLFNBQUFBLEVBQUFDLGdHQUEyQnBDLENBQUFDLEtBQUFrQyxHQUMxQmxDLEtBQUFvQyxjQUFBLEVBQ0FwQyxLQUFBTSxNQUFhLEtBQUErQixPQUFBQyxXQUFBLElBQW1DRCxPQUFoREMsV0FFQXRDLEtBQUFPLFFBQWV1QixTQUFBUyxnQkFBQUMsY0FDWFYsU0FBQVcsS0FEVUQsY0FBZCxJQUdBeEMsS0FBQTBDLFdBQUFQLEVBQ0FuQyxLQUFBMkMsMERBR1csSUFBQTFDLEVBQUFELEtBQ1hBLEtBQUE0QyxjQUVBNUMsS0FBQXVCLEtBQVksSUFBSXNCLEVBQUpwQyxRQUFaVCxNQUVBQSxLQUFBOEMsV0FBQSxHQUNBOUMsS0FBQStDLFdBQWtCLElBQUFDLE1BQUEsR0FBQUMsS0FBQSxHQUFBQyxJQUF5QixXQUFBLE9BQU0sSUFBSUMsRUFBSjFDLFFBQU5SLEtBQzNDRCxLQUFBK0MsV0FBQUssS0FBcUIsSUFBSUMsRUFBSjVDLFFBQXJCVCxPQUNBQSxLQUFBc0QsT0FBQSxHQUVBdEQsS0FBQXVELE1BQUEsRUFDQXZELEtBQUF3RCxVQUFBLEVBQ0F4RCxLQUFBeUQsV0FBQSxFQUNBekQsS0FBQTBELFVBQUEsRUFFQTFELEtBQUEyRCxhQUFvQkMsWUFBWSxXQUFBLE9BQU0zRCxFQUFONEQsWUFBaEMsd0NBR1UsSUFBQUMsRUFBQTlELEtBQ1ZBLEtBQUErRCxRQUFBQyxVQUFBLEVBQUEsRUFBNkJoRSxLQUE3Qk0sTUFBeUNOLEtBQXpDTyxRQUVBUCxLQUFBK0QsUUFBQUUsS0FBQSxnQkFDQWpFLEtBQUErRCxRQUFBRyxTQUFBLFdBQWdDbEUsS0FBQTBELFVBQWlCMUQsS0FBakJtRSxXQUFoQyxHQUF3RW5FLEtBQUFNLE1BQXhFLElBQUEsSUFDQU4sS0FBQStELFFBQUFHLFNBQUEsU0FBK0JsRSxLQUEvQnVELE1BQTZDdkQsS0FBQU0sTUFBN0MsSUFBQSxJQUVBLElBQUk4RCxFQUFKLEdBQ0FwRSxLQUFBcUUsY0FBbUJyRSxLQUFuQnVCLE1BRUF2QixLQUFBK0MsV0FBQXVCLFFBQXdCLFNBQUFDLEdBQ3ZCVCxFQUFBTyxjQUFBRSxHQUNBSCxFQUFBaEIsS0FBYyxDQUNibUIsVUFEYUEsRUFFYkMsTUFBT0QsRUFBVUUsZ0JBSW5CekUsS0FBQXNELE9BQUFnQixRQUFvQixTQUFBSSxHQUNuQlosRUFBQU8sY0FBQUssR0FDQU4sRUFBQWhCLEtBQWMsQ0FDYm1CLFVBRGFHLEVBRWJGLE1BQU9FLEVBQU1ELGdCQUdmekUsS0FBQXNELE9BQWN0RCxLQUFBc0QsT0FBQXFCLE9BQW1CLFNBQUFELEdBRWhDLE9BRGFaLEVBQUFjLDRCQUFpQ2QsRUFBakN2QyxLQUFibUQsS0FFQ1osRUFBQXZDLEtBQUFzRCxjQUNBLEtBTUZULEVBQUFoQixLQUFjLENBQ2JtQixVQUFXdkUsS0FERXVCLEtBRWJpRCxNQUFPeEUsS0FBQXVCLEtBQVVrRCxjQUlsQnpFLEtBQUF5RCxXQUFrQnpELEtBQUE4QyxXQUFBTSxLQUFsQmdCLEdBRUlwRSxLQUFBdUIsS0FBSnVELFNBQ0M5RSxLQUFBK0MsV0FBa0IvQyxLQUFBK0MsV0FBQTRCLE9BQXVCLFNBQUFKLEdBQUEsT0FBY1QsRUFBQWMsNEJBQWlDZCxFQUFqQ3ZDLEtBQWRnRCxLQUVyQ3ZFLEtBQUErQyxXQUFBZ0MsS0FBcUIsU0FBQVIsR0FBQSxPQUFhVCxFQUFBYyw0QkFBaUNkLEVBQWpDdkMsS0FBYmdELE1BQ3hCdkUsS0FBQWdGLGlEQU1XVCxHQUNidkUsS0FBQStELFFBQUFrQixVQUF1QlYsRUFBdkJXLGdCQUFrRFgsRUFBQXhELFNBQWxEQyxFQUF3RXVELEVBQUF4RCxTQUF4RU0sRUFBOEZrRCxFQUE5RmpFLE1BQStHaUUsRUFBL0doRSwyQ0FJQSxPQUFPVSxLQUFBZSxRQUFZLElBQUFtRCxNQUFBQyxVQUF1QnBGLEtBQXhCMEQsV0FBWCxLQUFQLHVEQUcyQm5DLEVBQU04RCxHQUdqQyxHQUFNOUQsRUFBQVIsU0FBQUMsRUFGTixJQUVtQ3FFLEVBQUF0RSxTQUFBQyxFQUFtQnFFLEVBQWpEL0UsT0FBb0VpQixFQUFBUixTQUFBQyxFQUFrQk8sRUFBbkJqQixPQUFrQytFLEVBQUF0RSxTQUFBQyxFQUYxRyxJQUdHTyxFQUFBUixTQUFBTSxFQUZILElBRWdDZ0UsRUFBQXRFLFNBQUFNLEVBQW1CZ0UsRUFBakQ5RSxRQUFxRWdCLEVBQUFSLFNBQUFNLEVBQWtCRSxFQUFuQmhCLFFBQW1DOEUsRUFBQXRFLFNBQUFNLEVBRnpHLEdBR0MsT0FBQSxvQ0FLRHJCLEtBQUEwRCxXQUFpQixJQUFBeUIsTUFBakJDLFVBQ0FwRixLQUFBeUQsV0FBQSxFQUNBekQsS0FBQXdELFVBQUEsRUFDQXhELEtBQUFzRiw4Q0FHVSxJQUFBQyxFQUFBdkYsS0FDVndGLFdBQVcsV0FDVkQsRUFBQUUsVUFDQSxJQUFJQyxFQUFRSCxFQUFacEIsV0FDSXdCLEVBQU9DLE9BQUEsaUJBQUFGLEVBQUEsOEJBQVgsY0FDQUMsR0FBUUUsRUFBQXBGLFFBQUFxRixVQUFvQixDQUMzQkgsS0FEMkJBLEVBQ3JCRCxNQUFBQSxJQUVQSCxFQUFBUSxxQkFQRCxxQ0FZQUMsY0FBY2hHLEtBQWQyRCxjQUNBcUMsY0FBY2hHLEtBQWRpRyxZQUNBakcsS0FBQXlELFdBQUEsRUFDQXpELEtBQUF3RCxVQUFBLEVBQ0F4RCxLQUFBb0MsY0FBQSxxQ0FHVSxJQUFBOEQsRUFBQWxHLEtBQ1ZBLEtBQUFpRyxXQUFrQnJDLFlBQVksV0FDN0JzQyxFQUFBM0MsT0FBQSxFQUVBMkMsRUFBQW5ELFdBQUFLLEtBQXFCLElBQUlELEVBQUoxQyxRQUFyQnlGLElBQ0lBLEVBQUEzQyxNQUFBLEdBQUosR0FDQzJDLEVBQUFuRCxXQUFBSyxLQUFxQixJQUFJQyxFQUFKNUMsUUFBckJ5RixJQUVELEdBQUlBLEVBQUEzQyxPQUNIMkMsRUFBQTVDLE9BQUFGLEtBQWlCLElBQUkrQyxFQUFKMUYsUUFBakJ5RixJQUVELElBQUlFLEVBQVV0RSxTQUFBdUUsY0FBZCxPQUNBRCxFQUFBRSxVQUFBQyxJQUFBLFlBQ0FILEVBQUFJLFVBQUEsNkJBQWlETixFQUFqRDNDLE1BRUEyQyxFQUFBeEQsV0FBQStELFlBQUFMLEdBQ0FaLFdBQVcsV0FDVlUsRUFBQXhELFdBQUFnRSxZQUFBTixJQURELE1BZkQsaURBc0JBLElBQUlPLEVBQWdCN0UsU0FBQXVFLGNBQXBCLE9BQ0FNLEVBQUFMLFVBQUFDLElBQUEsZUFFQSxJQUFJSyxFQUFlOUUsU0FBQXVFLGNBQW5CLFVBQ0FPLEVBQUFKLFVBQUEsZUFDQUksRUFBQUMsaUJBQUEsUUFBdUMsV0FDdEN4RSxPQUFBeUUsU0FBQUMsS0FBQSxnQkFHRCxJQUFJQyxFQUFxQmxGLFNBQUF1RSxjQUF6QixVQUNBVyxFQUFBUixVQUFBLGlCQUNBUSxFQUFBSCxpQkFBQSxRQUE2QyxXQUM1Q3hFLE9BQUF5RSxTQUFBQyxLQUFBLFlBR0RKLEVBQUFGLFlBQUFHLEdBQ0FELEVBQUFGLFlBQUFPLEdBRUFoSCxLQUFBMEMsV0FBQStELFlBQUFFLHVDQUVXLElBQUFNLEVBQUFqSCxLQUNYOEIsU0FBQStFLGlCQUFBLFVBQXFDLFNBQUFLLEdBQ3BDLEdBQUlELEVBQUo3RSxhQUF1QixDQUN0QixPQUFROEUsRUFBUkMsU0FDQyxLQUFBLEdBQ0NGLEVBQUExRixLQUFBNkYsZUFBMkJuRyxLQUEzQm9HLEdBQ0EsTUFFRCxLQUFBLEdBQ0NKLEVBQUExRixLQUFBNkYsZUFBMkJuRyxLQUFBb0csR0FBM0IsRUFDQSxNQUVELEtBQUEsR0FDQ0osRUFBQTFGLEtBQUE2RixlQUFBLEVBQ0EsTUFFRCxLQUFBLEdBQ0NILEVBQUExRixLQUFBNkYsZUFBMkJuRyxLQUFBb0csR0FBQSxFQUEzQixFQUNBLE1BRUQsUUFDQyxPQUdHSixFQUFMeEQsV0FDQ3dELEVBQUFLLG1EQU9IdEgsS0FBQW9DLGNBQUEsRUFDQXBDLEtBQUF1SCxPQUFjekYsU0FBQXVFLGNBQWQsVUFDQXJHLEtBQUEwQyxXQUFBOEQsVUFBQSxHQUNBeEcsS0FBQTBDLFdBQUErRCxZQUE0QnpHLEtBQTVCdUgsUUFDQXZILEtBQUF1SCxPQUFBakgsTUFBb0JOLEtBQXBCTSxNQUNBTixLQUFBdUgsT0FBQWhILE9BQXFCUCxLQUFyQk8sT0FDQVAsS0FBQStELFFBQWUvRCxLQUFBdUgsT0FBQUMsV0FBZiwyQ0FHWSxJQUFBQyxFQUFBekgsS0FDWmdHLGNBQWNoRyxLQUFkMEgsYUFDQSxJQUFJQyxFQUFKLEVBQ0EzSCxLQUFBMEgsWUFBbUI5RCxZQUFZLFdBQzFCK0QsSUFBaUJGLEVBQUEzRSxZQUFELElBQXBCckQsT0FDQ3VHLGNBQWN5QixFQUFkQyxjQUdERCxFQUFBMUQsUUFBQUMsVUFBQSxFQUFBLEVBQTZCeUQsRUFBN0JuSCxNQUF5Q21ILEVBQXpDbEgsUUFFWWtILEVBQUEzRSxXQUFaNkUsR0FDQXJELFFBQWMsU0FBQXNELEdBQ2JBLEVBQUFyRCxVQUFBRSxZQUE2Qm1ELEVBQTdCcEQsTUFDQWlELEVBQUFwRCxjQUFtQnVELEVBQW5CckQsYUFFRG9ELE1BWkQsdUJBdE5tQnpGLGtuQkNOckJ4QixFQUFBekIsRUFBQSxvREFFcUI0SSxjQUNqQixTQUFBQSxFQUFBL0gsZ0dBQXVCQyxDQUFBQyxLQUFBNkgsR0FBQSxJQUFBNUgseUxBQUFDLENBQUFGLE1BQUE2SCxFQUFBMUgsV0FBQUMsT0FBQUMsZUFBQXdILElBQUFySSxLQUFBUSxLQUFBRixFQUFBLFdBQUEsT0FFbkJHLEVBQUFLLE1BQUEsR0FDQUwsRUFBQU0sT0FBQSxHQUNBTixFQUFBYyxTQUFnQixDQUNaQyxHQUFJZixFQUFBa0IsS0FBQWIsTUFBa0JMLEVBQW5CSyxPQURTLEVBRVplLEVBQUdwQixFQUFBa0IsS0FBQVosT0FBbUJOLEVBQUtNLFFBRS9CTixFQUFBNkUsVUFBQSxFQUNBN0UsRUFBQTRCLFFBQWU1QixFQUFBNkgsa0JBQWZDLEtBQ0E5SCxFQUFBbUgsZUFBc0JuRyxLQUFBb0csR0FBdEIsRUFWbUJwSCwwVkFET2EsRUFBQUwsK0NBZ0IxQlQsS0FBQWdJLE1BQWFoSSxLQUFBbUIsS0FBQXFDLFVBQXNCeEQsS0FBQW1CLEtBQW5Db0MsMkNBRVMsSUFBQU8sRUFBQTlELEtBQ1RBLEtBQUE4RSxVQUFBLEVBQ0E5RSxLQUFBaUksMEJBQ0FqSSxLQUFBbUIsS0FBQW9HLE9BQUFqQixVQUFBQyxJQUFBLGVBQ0FmLFdBQVcsV0FBQSxPQUFNMUIsRUFBQTNDLEtBQUFvRyxPQUFBakIsVUFBQTRCLE9BQU4sZ0JBQVgsS0FDQTFDLFdBQVcsV0FDUDFCLEVBQUFnQixVQUFBLEVBQ0FoQixFQUFBbUUsMkJBRkoseURBMkJBLElBQUlqSSxLQUFBOEUsVUFDQTlFLEtBQUFNLE1BQUEsR0FDQU4sS0FBQThILGtCQUF5QjlILEtBQXpCbUksd0JBRUFuSSxLQUFBTSxNQUFBLEdBQ0FOLEtBQUE4SCxrQkFBeUI5SCxLQUF6Qm9JLHlCQUVKcEksS0FBQXFJLG1UQUlBQyxDQUFBVCxFQUFBVSxVQUFBcEksV0FBQUMsT0FBQUMsZUFBQXdILEVBQUFVLFdBQUEsZ0JBQUF2SSxNQUFBUixLQUFBUSxNQUNBQSxLQUFBb0ksd0JBQStCcEksS0FBL0I4SCxrQkFDQSxJQUFJbEgsRUFBSixlQUNBWixLQUFBbUksc0JBQTZCLENBQ3pCSyxLQUFNeEksS0FBQXlJLFdBQUEsSUFBQTdILEVBRG1CLGFBRXpCOEgsTUFBTzFJLEtBQUF5SSxXQUFBLElBQUE3SCxFQUZrQixjQUd6QitILEdBQUkzSSxLQUFBeUksV0FBQSxJQUFBN0gsRUFIcUIsV0FJekJtSCxLQUFNL0gsS0FBQXlJLFdBQUEsSUFBQTdILEVBQUEsa0RBdENWLE1BQU8sQ0FDSEksRUFBR2hCLEtBQUFlLFNBREFDLEVBRUhLLEVBQUdyQixLQUFBZSxTQUZBTSxFQUdIK0YsZUFBZ0JwSCxLQUhib0gsZUFJSHRDLFNBQVU5RSxLQUFLOEUsd0JBSVA3QyxHQUNaakMsS0FBQW9ILGVBQXNCbkYsRUFBdEJtRixlQUNBcEgsS0FBQWUsU0FBQUMsRUFBa0JpQixFQUFsQmpCLEVBQ0FoQixLQUFBZSxTQUFBTSxFQUFrQlksRUFBbEJaLEVBQ0lyQixLQUFBOEUsV0FBa0I3QyxFQUF0QjZDLFdBQ0k5RSxLQUFBOEUsU0FBZ0I3QyxFQUFoQjZDLFNBQ0E5RSxLQUFBOEgsa0JBQXlCOUgsS0FBQThFLFNBQWdCOUUsS0FBaEJtSSxzQkFBNkNuSSxLQUF0RW9JLHdCQUNBcEksS0FBQXFJLG9DQTdDU1IsaVdDRkFlLGFBQ2pCLFNBQUFBLEVBQUE5SSxFQUFBYyxnR0FBaUNiLENBQUFDLEtBQUE0SSxHQUM3QjVJLEtBQUFZLFNBQUFBLEVBQ0FaLEtBQUE2SSxnQkFDQTdJLEtBQUFtQixLQUFBckIsRUFDQUUsS0FBQW9ILGVBQXNCLEVBQUluRyxLQUFKb0csR0FBY3BHLEtBQXBDRyxTQUNBcEIsS0FBQWdJLE1BQWFsSSxFQUFBeUQsTUFBa0J6RCxFQUFsQjBELFVBQWIsRUFDQXhELEtBQUE4SSxXQUFBLG9EQUdLOUksS0FBQW9ILGdCQUF1QixFQUFBbkcsS0FBQW9HLEdBQXhCLEdBQTZDckgsS0FBQW9ILGdCQUF1QixFQUFBbkcsS0FBQW9HLEdBQXhFLEVBQ0lySCxLQUFBNkIsUUFBZTdCLEtBQUE4SCxrQkFBZkMsS0FHQy9ILEtBQUFvSCxnQkFBdUJuRyxLQUFBb0csR0FBeEIsR0FBeUNySCxLQUFBb0gsZ0JBQXVCLEVBQUFuRyxLQUFBb0csR0FBcEUsRUFDSXJILEtBQUE2QixRQUFlN0IsS0FBQThILGtCQUFmYSxHQUdDM0ksS0FBQW9ILGdCQUF1QixFQUFBbkcsS0FBQW9HLEdBQXhCLEdBQTZDckgsS0FBQW9ILGdCQUF1QixFQUFBbkcsS0FBQW9HLEdBQXhFLEVBQ0lySCxLQUFBNkIsUUFBZTdCLEtBQUE4SCxrQkFBZlUsS0FHSnhJLEtBQUE2QixRQUFlN0IsS0FBQThILGtCQUFmWSw4Q0EyQkExSSxLQUFBOEgsa0JBQXlCLENBQ3JCVSxLQUFNeEksS0FBQXlJLFdBQUEsSUFBb0J6SSxLQUFwQlksU0FEZSxhQUVyQjhILE1BQU8xSSxLQUFBeUksV0FBQSxJQUFvQnpJLEtBQXBCWSxTQUZjLGNBR3JCK0gsR0FBSTNJLEtBQUF5SSxXQUFBLElBQW9CekksS0FBcEJZLFNBSGlCLFdBSXJCbUgsS0FBTS9ILEtBQUF5SSxXQUFBLElBQW9CekksS0FBcEJZLFNBQUEsaURBSUhBLEdBQ1AsTUFBTyxHQUFBbUksTUFBQXZKLEtBQWNzQyxTQUFBQyxpQkFBckJuQiw0Q0FPQSxPQUpBWixLQUFBZ0osT0FDSWhKLEtBQUE4SSxZQUFtQjlJLEtBQUE2QixRQUF2QnBDLFNBQ0lPLEtBQUE4SSxXQUFBLEdBRUc5SSxLQUFBNkIsUUFBYTdCLEtBQXBCOEksNkNBSUE5SSxLQUFBaUosV0FDQWpKLEtBQUFlLFNBQUFDLEdBQW1CQyxLQUFBaUksSUFBU2xKLEtBQVRvSCxnQkFBZ0NwSCxLQUFuRGdJLE1BQ0loSSxLQUFBZSxTQUFBQyxFQUFrQmhCLEtBQUFNLE1BQWxCLEVBQW1DTixLQUFBbUIsS0FBdkNiLFFBQ0lOLEtBQUFlLFNBQUFDLEdBQW1CaEIsS0FBRE0sTUFBbEIsR0FFQU4sS0FBQWUsU0FBQUMsRUFBa0JoQixLQUFBTSxNQUFsQixFQUFKLElBQ0lOLEtBQUFlLFNBQUFDLEVBQWtCaEIsS0FBQW1CLEtBQUFiLE1BQWtCTixLQUFBTSxNQUFwQyxHQUVKTixLQUFBZSxTQUFBTSxHQUFtQkosS0FBQWtJLElBQVNuSixLQUFUb0gsZ0JBQWdDcEgsS0FBbkRnSSxNQUNJaEksS0FBQWUsU0FBQU0sRUFBa0JyQixLQUFBTyxPQUFsQixFQUFvQ1AsS0FBQW1CLEtBQXhDWixTQUNJUCxLQUFBZSxTQUFBTSxHQUFtQnJCLEtBQURPLE9BQWxCLEdBRUFQLEtBQUFlLFNBQUFNLEVBQWtCckIsS0FBQU8sT0FBbEIsRUFBSixJQUNJUCxLQUFBZSxTQUFBTSxFQUFrQnJCLEtBQUFtQixLQUFBWixPQUFtQlAsS0FBQU8sT0FBckMsc0NBSUpQLEtBQUFnSSxNQUFhaEksS0FBQW1CLEtBQUFxQyxVQUFzQnhELEtBQUFtQixLQUF0Qm9DLE1BQWIseUNBNURBLE9BQU92RCxLQUFQb0osOEJBR2VDLEdBQ2ZySixLQUFBb0osZ0JBQUFDLEVBQ0FySixLQUFBcUksb0RBSUEsTUFBTyxDQUNIckgsRUFBR2hCLEtBQUFlLFNBREFDLEVBRUhLLEVBQUdyQixLQUFBZSxTQUZBTSxFQUdIK0YsZUFBZ0JwSCxLQUFLb0gsOEJBSWJuRixHQUNaakMsS0FBQW9ILGVBQXNCbkYsRUFBdEJtRixlQUNBcEgsS0FBQWUsU0FBQUMsRUFBa0JpQixFQUFsQmpCLEVBQ0FoQixLQUFBZSxTQUFBTSxFQUFrQlksRUFBbEJaLHFCQTdDYXVILG1pQkNBckJoSixFQUFBWCxFQUFBLG1EQUVxQnFLLGNBQ2pCLFNBQUFBLEVBQUF4SixnR0FBdUJDLENBQUFDLEtBQUFzSixHQUFBLElBQUFySix5TEFBQUMsQ0FBQUYsTUFBQXNKLEVBQUFuSixXQUFBQyxPQUFBQyxlQUFBaUosSUFBQTlKLEtBQUFRLEtBQUFGLEVBQUEsVUFBQSxPQUVuQkcsRUFBQXNKLE1BQUEsSUFDQXRKLEVBQUFLLE1BQUEsR0FDQUwsRUFBQU0sT0FBQSxHQUptQk4sMFZBRGFPLEVBQUFDLDJDQVFoQyxJQUFJK0ksRUFBZXhKLEtBQUFtQixLQUFBSSxLQUFuQlIsU0FDSTBJLEVBQWdCekosS0FBcEJlLFNBQ0EsR0FBSWYsS0FBQXNCLHFCQUE0QnRCLEtBQTVCdUosT0FBMkNDLEVBQUF4SSxJQUFtQnlJLEVBQWxFekksRUFBb0YsQ0FDaEYsSUFBSTBJLEVBQU96SSxLQUFBeUksTUFBV0YsRUFBQW5JLEVBQWlCb0ksRUFBbEJwSSxJQUFzQ21JLEVBQUF4SSxFQUFpQnlJLEVBQTVFekksSUFFTXdJLEVBQUF4SSxFQUFpQnlJLEVBQWxCekksR0FBdUN3SSxFQUFBbkksRUFBaUJvSSxFQUF6RHBJLEdBQ0VtSSxFQUFBeEksRUFBaUJ5SSxFQUFsQnpJLEdBQXVDd0ksRUFBQW5JLEVBQWlCb0ksRUFEN0RwSSxFQUVJckIsS0FBQW9ILGVBQXNCLEVBQUluRyxLQUFKb0csR0FBdEJxQyxFQUVBMUosS0FBQW9ILGVBQXNCbkcsS0FBQW9HLEdBQXRCcUMsNlBBR1JwQixDQUFBZ0IsRUFBQWYsVUFBQXBJLFdBQUFDLE9BQUFDLGVBQUFpSixFQUFBZixXQUFBLE9BQUF2SSxNQUFBUixLQUFBUSx5QkFwQmFzSixrRENGckIsUUFBQXJLLEVBQUEsdUJBQ0FBLEVBQUEsaUVBR0EsSUFGQUEsRUFBQSxnQ0FFQXdCLFdBQ0EsSUFBSWtKLEVBQUpsSixRQUFXbUosRUFBWG5KLGdLQ0xBLFFBQUF4QixFQUFBLGdDQUNBQSxFQUFBLHdFQUVBLElBQUk0SyxFQUFVL0gsU0FBQWdJLGNBQWQsWUFDSTNJLEVBQU8sSUFBSTRJLEVBQUp0SixRQUFYb0osR0FFTUcsRUFBUyxDQUNYLENBQ0lDLE1BREosR0FFSUMsUUFBUyxXQUNMN0gsT0FBQXlFLFNBQUFDLEtBQUEsU0FHUixDQUNJa0QsTUFESixRQUVJQyxRQUFTLFdBQ0xDLEVBQUEsU0FDQU4sRUFBQXJELFVBQUEsbXJEQXVDUixDQUNJeUQsTUFESixPQUVJQyxRQUFTLFdBQ0xDLEVBQUEsUUFDQWhKLEVBQUFpSixhQUVKQyxRQUFTLFdBQ0xsSixFQUFBc0UsWUFHUixDQUNJd0UsTUFESixTQUVJQyxRQUFTLFdBQ0xDLEVBQUEsVUFFQXRFLEVBQUFwRixRQUFBNkosWUFBQUMsS0FBMkIsU0FBQUMsR0FDdkJYLEVBQUFyRCxVQUFBLDZDQUNBLElBQUlpRSxFQUFLM0ksU0FBQXVFLGNBQVQsTUFDQW1FLEVBQUFsRyxRQUFlLFNBQUFvRyxHQUNYLElBQUlDLEVBQUs3SSxTQUFBdUUsY0FBVCxNQUNBc0UsRUFBQW5FLFVBQWtCa0UsRUFBbEIvRSxLQUFBLE1BQWlDK0UsRUFBakNoRixNQUNBK0UsRUFBQWhFLFlBQUFrRSxLQUdKLElBQUlDLEVBQWlCOUksU0FBQXVFLGNBQXJCLE9BQ0F1RSxFQUFBdEUsVUFBQUMsSUFBQSxTQUNBc0QsRUFBQXBELFlBQUFtRSxHQUNBLElBQUlDLEVBQU0vSSxTQUFBdUUsY0FBVixPQUNBd0UsRUFBQXBFLFlBQUFnRSxHQUNBWixFQUFBcEQsWUFBQW9FLE9BSVosQ0FDSVosTUFESixTQUVJQyxRQUFTLFdBQ0wsS0FBSy9JLEVBQUEyQixZQUFELElBQUFyRCxPQUlKMEIsRUFBQTJKLGFBSEl6SSxPQUFBeUUsU0FBQUMsS0FBQSxTQU9aLENBQ0lrRCxNQURKLGNBRUlDLFFBQVMsV0FDTDdILE9BQUF5RSxTQUFBQyxLQUFBLFdBR0wsQ0FDQ2tELE1BREQsVUFFQ0MsUUFBUyxXQUNMN0gsT0FBQXlFLFNBQUFDLEtBQUEsVUFNWixTQUFBb0QsRUFBQVksR0FDSWpKLFNBQUFnSSxjQUFBLFdBQUFrQixVQUFBLEdBQ0FsSixTQUFBZ0ksY0FBQSxXQUFBaUIsRUFBQSxNQUFBRSxjQUFBRCxVQUFBLG1CQUlXaEIsb0pDdkhBLFdBQ1gsSUFBSSxFQUFBa0IsRUFBSnpLLFdBQW9CLENBRWhCLElBQUlrRyxFQUFnQjdFLFNBQUF1RSxjQUFwQixPQUNBTSxFQUFBTCxVQUFBQyxJQUFBLFdBRUEsSUFBSTRFLEVBQWFySixTQUFBdUUsY0FBakIsVUFDQThFLEVBQUEzRSxVQUFBLElBQ0EyRSxFQUFBN0UsVUFBQUMsSUFBQSxRQUVBLElBQUk2RSxFQUFXdEosU0FBQXVFLGNBQWYsVUFDQStFLEVBQUE1RSxVQUFBLElBQ0E0RSxFQUFBOUUsVUFBQUMsSUFBQSxNQUVBLElBQUk4RSxFQUFjdkosU0FBQXVFLGNBQWxCLFVBQ0FnRixFQUFBN0UsVUFBQSxJQUNBNkUsRUFBQS9FLFVBQUFDLElBQUEsU0FFQSxJQUFJK0UsRUFBYXhKLFNBQUF1RSxjQUFqQixVQUNBaUYsRUFBQTlFLFVBQUEsSUFDQThFLEVBQUFoRixVQUFBQyxJQUFBLFFBSUFJLEVBQUFGLFlBQUEwRSxHQUNBeEUsRUFBQUYsWUFBQTJFLEdBQ0F6RSxFQUFBRixZQUFBNEUsR0FDQTFFLEVBQUFGLFlBQUE2RSxHQUVBM0UsRUFBQUUsaUJBQUEsUUFBd0MsU0FBQUssR0FDcEMsR0FBSUEsRUFBQXFFLE9BQUFDLFFBQUosVUFBb0MsQ0FDaEMsSUFBSTlNLEVBQUksSUFBQStNLE1BQVIsV0FHQSxPQUZBL00sRUFBQXlJLFFBQUEsUUFDQXJGLFNBQUE0SixjQUFBaE4sR0FHSixHQUFJd0ksRUFBQXFFLE9BQUFDLFFBQUosU0FBbUMsQ0FDL0IsSUFBSUcsRUFBSSxJQUFBRixNQUFSLFdBR0EsT0FGQUUsRUFBQXhFLFFBQUEsUUFDQXJGLFNBQUE0SixjQUFBQyxHQUdKLEdBQUl6RSxFQUFBcUUsT0FBQUMsUUFBSixPQUFpQyxDQUM3QixJQUFJSSxFQUFJLElBQUFILE1BQVIsV0FHQSxPQUZBRyxFQUFBekUsUUFBQSxRQUNBckYsU0FBQTRKLGNBQUFFLEdBR0osR0FBSTFFLEVBQUFxRSxPQUFBQyxRQUFKLFNBQW1DLENBQy9CLElBQUlLLEVBQUksSUFBQUosTUFBUixXQUdBLE9BRkFJLEVBQUExRSxRQUFBLFFBQ0FyRixTQUFBNEosY0FBQUcsTUFLUi9KLFNBQUFXLEtBQUFnRSxZQUFBRSxLQTFEUixNQUFBbUYsRUFBQTdNLEVBQUEsMEtDQWUsV0FDWCxTQUFJOE0sVUFBQUMsVUFBQS9CLE1BQUEsYUFDRzhCLFVBQUFDLFVBQUEvQixNQURILFdBRUc4QixVQUFBQyxVQUFBL0IsTUFGSCxZQUdHOEIsVUFBQUMsVUFBQS9CLE1BSEgsVUFJRzhCLFVBQUFDLFVBQUEvQixNQUpILFVBS0c4QixVQUFBQyxVQUFBL0IsTUFMSCxnQkFNRzhCLFVBQUFDLFVBQUEvQixNQU5QLG9XQ0RKLElBQUlnQyxFQUFKLGdEQUVxQkMsbUxBRWIsT0FBT0MsTUFBQUYsR0FBQTFCLEtBQWdCLFNBQUE2QixHQUFBLE9BQVlBLEVBQVpDLDJDQUVWQyxHQUVidE0sS0FBQXNLLFlBQUFDLEtBQXNCLFNBQUFnQyxHQUNsQixJQUFJQyxFQUFBLEdBQUFDLDZIQUFBQyxDQUFnQkgsR0FBaEIsSUFBQSxDQUFKRCxJQUNBRSxFQUFBRyxLQUFlLFNBQUFDLEVBQUFDLEdBQUEsT0FBa0JELEVBQUFsSCxNQUFjbUgsRUFBZG5ILE9BQUEsRUFBaUNrSCxFQUFBbEgsTUFBY21ILEVBQWRuSCxNQUFBLEVBQW5ELElBQ2Y4RyxFQUFBTSxPQUFBLElBQ0FYLE1BQUFGLEVBQVcsQ0FDUGMsT0FETyxNQUVQdEssS0FBTXVLLEtBQUFDLFVBQUFULDBCQVpETix3Q0NFTixTQUFBZ0IsRUFBQUMsR0FBNkIsSUFBQWxOLEVBQUFELEtBQ3hDQSxLQUFBZ0ssT0FBY21ELEdBQWQsR0FDQW5OLEtBQUFvTixhQUNBcE4sS0FBQXFOLGNBQ0FyTixLQUFBc04sY0FDQXROLEtBQUF1TixlQUNBbEwsT0FBQXdFLGlCQUFBLGFBQXNDLFdBQ2xDNUcsRUFBQXVOLFFBQWFuTCxPQUFBeUUsU0FBYkMsUUFFSi9HLEtBQUF3TixRQUFhbkwsT0FBQXlFLFNBQWJDLGtFQVRvQm1HLEdBWXhCM0UsVUFBbUIsQ0FDZmlGLFFBQVMsU0FBQXpHLEdBQ0wvRyxLQUFBcU4sY0FBcUJyTixLQUFyQm9OLGFBQ0FwTixLQUFBdU4sZUFBc0J2TixLQUF0QnNOLGNBQ0F0TixLQUFBb04sYUFBb0JwTixLQUFBeU4sYUFBcEIxRyxHQUNBL0csS0FBQTBOLGtCQUVKRCxhQUFjLFNBQUExRyxHQUNWQSxFQUFPQSxFQUFBZ0MsTUFBUCxHQUVBLElBQUssSUFBSWpLLEVBQVQsRUFBZ0JBLEVBQUlrQixLQUFBZ0ssT0FBcEJ2SyxPQUFBWCxJQUE2QyxDQUN6QyxJQUFJNk8sRUFBVTNOLEtBQUFnSyxPQUFkbEwsR0FDQSxHQUFJLGlCQUFRNk8sRUFBUjFELE9BQXNDMEQsRUFBQTFELFFBQTFDbEQsRUFFSSxPQURBL0csS0FBQXNOLGNBQUEsR0FDQUssRUFFSixHQUFJLG1CQUFRQSxFQUFSMUQsT0FBd0MwRCxFQUFBMUQsTUFBNUNsRCxHQUVJLE9BREEvRyxLQUFBc04sY0FBQSxHQUNBSyxFQUVKLEdBQUtBLEVBQUExRCxpQkFBRDJELFFBQXFDRCxFQUFBMUQsTUFBQTRELEtBQXpDOUcsR0FHSSxPQUZBL0csS0FBQXNOLGNBQXFCdkcsRUFBQWtELE1BQVcwRCxFQUFYMUQsUUFBckIsR0FDQWpLLEtBQUFzTixjQUFBUixPQUFBLEVBQUEsR0FDQWEsSUF2QkdELGVBQUEsV0EyQkUsSUFBQTVKLEVBQUE5RCxLQUNiOE4sUUFBQUMsVUFBQXhELEtBQ1UsV0FBUXpHLEVBQUF1SixlQUFzQnZKLEVBQUF1SixjQUF0QmhELFNBQW9EdkcsRUFBQXVKLGNBQUFoRCxRQUEyQnZHLEVBQS9FeUosa0JBRGxCaEQsS0FFVSxXQUFRekcsRUFBQXNKLGNBQXFCdEosRUFBQXNKLGFBQXJCWSxlQUF3RGxLLEVBQUFzSixhQUFBWSxjQUFnQ2xLLEVBQXhGd0osaUJBRmxCL0MsS0FHVSxXQUFRekcsRUFBQXNKLGNBQXFCdEosRUFBQXNKLGFBQXJCbEQsU0FBa0RwRyxFQUFBc0osYUFBQWxELFFBQTBCcEcsRUFBNUV3SiIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiaW1wb3J0IEVuZW15IGZyb20gJy4vZW5lbXknO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHVtbXlFbmVteSBleHRlbmRzIEVuZW15IHtcclxuICAgIGNvbnN0cnVjdG9yKGdhbWVTdGF0ZSkge1xyXG4gICAgICAgIHN1cGVyKGdhbWVTdGF0ZSwgJ2dvYmxpbicpO1xyXG4gICAgICAgIHRoaXMud2lkdGggPSAzNjtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IDQ4O1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFBlcnNvbiBmcm9tICcuL3BlcnNvbic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbmVteSBleHRlbmRzIFBlcnNvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihnYW1lU3RhdGUsIHNlbGVjdG9yKSB7XHJcbiAgICAgICAgc3VwZXIoZ2FtZVN0YXRlLCBzZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IDA7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSAwO1xyXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVQb3NpdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlUG9zaXRpb24oKSB7XHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgeDogTWF0aC5hYnModGhpcy53aWR0aCAtIHRoaXMuZ2FtZS53aWR0aCAqIE1hdGgucmFuZG9tKCkpLFxyXG4gICAgICAgICAgICAgICAgeTogdGhpcy5nYW1lLmhlaWdodCAvIDIgKiBNYXRoLnJhbmRvbSgpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSB3aGlsZSAodGhpcy5nZXREaXN0YW5jZVRvSGVybygpIDwgMjAwKTtcclxuICAgIH1cclxuICAgIGdldERpc3RhbmNlVG9IZXJvKCkge1xyXG4gICAgICAgIGxldCBoZXJvID0gdGhpcy5nYW1lLmhlcm87XHJcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyhoZXJvLnBvc2l0aW9uLnggLSB0aGlzLnBvc2l0aW9uLngsIDIpICsgTWF0aC5wb3coaGVyby5wb3NpdGlvbi55IC0gdGhpcy5wb3NpdGlvbi55LCAyKSk7XHJcbiAgICB9XHJcblxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRnJ1aXQge1xyXG4gICAgY29uc3RydWN0b3IoZ2FtZVN0YXRlKSB7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IDMwO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMzA7XHJcbiAgICAgICAgdGhpcy5nYW1lID0gZ2FtZVN0YXRlO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSB7XHJcbiAgICAgICAgICAgIHg6IE1hdGguYWJzKHRoaXMud2lkdGggLSB0aGlzLmdhbWUud2lkdGggKiBNYXRoLnJhbmRvbSgpKSxcclxuICAgICAgICAgICAgeTogdGhpcy5nYW1lLmhlaWdodCAvIDIgKiBNYXRoLnJhbmRvbSgpXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5zcHJpdGUgPSB0aGlzLmdlbmVyYXRlU3B0aXRlKCk7XHJcbiAgICB9XHJcbiAgICBnZXROZXh0U3ByaXRlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNwcml0ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcGVyc29uU3RhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgeDogdGhpcy5wb3NpdGlvbi54LFxyXG4gICAgICAgICAgICB5OiB0aGlzLnBvc2l0aW9uLnksXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgcGVyc29uU3RhdGUobmV3UG9zaXRpb24pIHtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uLnggPSBuZXdQb3NpdGlvbi54O1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24ueSA9IG5ld1Bvc2l0aW9uLnk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2VuZXJhdGVTcHRpdGUoKSB7XHJcbiAgICAgICAgbGV0IHNwcml0ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZnJ1aXQtaW1nJyk7XHJcbiAgICAgICAgbGV0IGZydWl0TnVtYmVyID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogKHNwcml0ZXMubGVuZ3RoIC0gMSkpO1xyXG4gICAgICAgIHJldHVybiBzcHJpdGVzW2ZydWl0TnVtYmVyXTtcclxuICAgIH1cclxufSIsImltcG9ydCBIZXJvIGZyb20gJy4vaGVybyc7XHJcbmltcG9ydCBEdW1teUVuZW15IGZyb20gJy4vZHVtbXlFbmVteSc7XHJcbmltcG9ydCBTbWFydEVuZW15IGZyb20gJy4vc21hcnRFbmVteSc7XHJcbmltcG9ydCBGaXJlU3RvcmUgZnJvbSAnLi4vdXRpbHMvZmlyZWJhc2UnO1xyXG5pbXBvcnQgRnJ1aXQgZnJvbSAnLi9mcnVpdCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lU3RhdGUge1xyXG5cdGNvbnN0cnVjdG9yKGVsZW1lbnRUb0RyYXcpIHtcclxuXHRcdHRoaXMuZ2FtZU9uU2NyZWVuID0gZmFsc2U7XHJcblx0XHR0aGlzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGggPj0gMTAwMCA/IDEwMDAgOiB3aW5kb3cuaW5uZXJXaWR0aDtcclxuXHJcblx0XHR0aGlzLmhlaWdodCA9IChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0XHJcblx0XHRcdHx8IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0KSAtIDE2MDtcclxuXHJcblx0XHR0aGlzLmNvbnRhaW50ZXIgPSBlbGVtZW50VG9EcmF3O1xyXG5cdFx0dGhpcy5zZXRVcEhlcm8oKTtcclxuXHR9XHJcblxyXG5cdHNldFVwR2FtZSgpIHtcclxuXHRcdHRoaXMuc2V0VXBDYW52YXMoKTtcclxuXHJcblx0XHR0aGlzLmhlcm8gPSBuZXcgSGVybyh0aGlzKTtcclxuXHJcblx0XHR0aGlzLnJlcGxheURhdGEgPSBbXTtcclxuXHRcdHRoaXMuY2hhcmFjdGVycyA9IG5ldyBBcnJheSgyKS5maWxsKDApLm1hcCgoKSA9PiBuZXcgRHVtbXlFbmVteSh0aGlzKSk7XHJcblx0XHR0aGlzLmNoYXJhY3RlcnMucHVzaChuZXcgU21hcnRFbmVteSh0aGlzKSk7XHJcblx0XHR0aGlzLmZydWl0cyA9IFtdO1xyXG5cclxuXHRcdHRoaXMubGV2ZWwgPSAxO1xyXG5cdFx0dGhpcy5iYXNlU3BlZWQgPSAwO1xyXG5cdFx0dGhpcy5nYW1lUGxheXMgPSBmYWxzZTtcclxuXHRcdHRoaXMuZ2FtZVRpbWVyID0gMDtcclxuXHJcblx0XHR0aGlzLnRpbWVySGFuZGxlciA9IHNldEludGVydmFsKCgpID0+IHRoaXMuZ2FtZVN0ZXAoKSwgMTAwKTtcclxuXHR9XHJcblxyXG5cdGdhbWVTdGVwKCkge1xyXG5cdFx0dGhpcy5jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XHJcblxyXG5cdFx0dGhpcy5jb250ZXh0LmZvbnQgPSAnMjBweCBTZWdvZSBVSSc7XHJcblx0XHR0aGlzLmNvbnRleHQuZmlsbFRleHQoYFNjb3JlcyAke3RoaXMuZ2FtZVRpbWVyID8gdGhpcy5nZXRTY29yZSgpIDogMH1gLCB0aGlzLndpZHRoIC0gMTUwLCAzMCk7XHJcblx0XHR0aGlzLmNvbnRleHQuZmlsbFRleHQoYExldmVsICR7dGhpcy5sZXZlbH1gLCB0aGlzLndpZHRoIC0gMTUwLCA1NSk7XHJcblxyXG5cdFx0bGV0IHN0ZXBEYXRhID0gW107XHJcblx0XHR0aGlzLmRyYXdDaGFyYWN0ZXIodGhpcy5oZXJvKTtcclxuXHJcblx0XHR0aGlzLmNoYXJhY3RlcnMuZm9yRWFjaChjaGFyYWN0ZXIgPT4ge1xyXG5cdFx0XHR0aGlzLmRyYXdDaGFyYWN0ZXIoY2hhcmFjdGVyKTtcclxuXHRcdFx0c3RlcERhdGEucHVzaCh7XHJcblx0XHRcdFx0Y2hhcmFjdGVyOiBjaGFyYWN0ZXIsXHJcblx0XHRcdFx0c3RhdGU6IGNoYXJhY3Rlci5wZXJzb25TdGF0ZVxyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuZnJ1aXRzLmZvckVhY2goZnJ1aXQgPT4ge1xyXG5cdFx0XHR0aGlzLmRyYXdDaGFyYWN0ZXIoZnJ1aXQpO1xyXG5cdFx0XHRzdGVwRGF0YS5wdXNoKHtcclxuXHRcdFx0XHRjaGFyYWN0ZXI6IGZydWl0LFxyXG5cdFx0XHRcdHN0YXRlOiBmcnVpdC5wZXJzb25TdGF0ZVxyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5mcnVpdHMgPSB0aGlzLmZydWl0cy5maWx0ZXIoZnJ1aXQgPT4ge1xyXG5cdFx0XHR2YXIgcmVzdWx0ID0gdGhpcy5jaGVja0NoYXJhY3RlcnNJbnRlcnNlY3Rpb24odGhpcy5oZXJvLCBmcnVpdCk7XHJcblx0XHRcdGlmIChyZXN1bHQpIHtcclxuXHRcdFx0XHR0aGlzLmhlcm8uZW5hYmxlUmFnZSgpO1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH0pO1xyXG5cclxuXHJcblx0XHRzdGVwRGF0YS5wdXNoKHtcclxuXHRcdFx0Y2hhcmFjdGVyOiB0aGlzLmhlcm8sXHJcblx0XHRcdHN0YXRlOiB0aGlzLmhlcm8ucGVyc29uU3RhdGVcclxuXHRcdH0pO1xyXG5cclxuXHJcblx0XHR0aGlzLmdhbWVQbGF5cyAmJiB0aGlzLnJlcGxheURhdGEucHVzaChzdGVwRGF0YSk7XHJcblxyXG5cdFx0aWYgKHRoaXMuaGVyby5yYWdlTW9kZSkge1xyXG5cdFx0XHR0aGlzLmNoYXJhY3RlcnMgPSB0aGlzLmNoYXJhY3RlcnMuZmlsdGVyKGNoYXJhY3RlciA9PiAhdGhpcy5jaGVja0NoYXJhY3RlcnNJbnRlcnNlY3Rpb24odGhpcy5oZXJvLCBjaGFyYWN0ZXIpKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGlmICh0aGlzLmNoYXJhY3RlcnMuc29tZShjaGFyYWN0ZXIgPT4gdGhpcy5jaGVja0NoYXJhY3RlcnNJbnRlcnNlY3Rpb24odGhpcy5oZXJvLCBjaGFyYWN0ZXIpKSkge1xyXG5cdFx0XHRcdHRoaXMubG9zZUdhbWUoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHR9XHJcblxyXG5cdGRyYXdDaGFyYWN0ZXIoY2hhcmFjdGVyKSB7XHJcblx0XHR0aGlzLmNvbnRleHQuZHJhd0ltYWdlKGNoYXJhY3Rlci5nZXROZXh0U3ByaXRlKCksIGNoYXJhY3Rlci5wb3NpdGlvbi54LCBjaGFyYWN0ZXIucG9zaXRpb24ueSwgY2hhcmFjdGVyLndpZHRoLCBjaGFyYWN0ZXIuaGVpZ2h0KTtcclxuXHR9XHJcblxyXG5cdGdldFNjb3JlKCkge1xyXG5cdFx0cmV0dXJuIE1hdGgucm91bmQoKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gdGhpcy5nYW1lVGltZXIpIC8gMTAwKSAvIDEwO1xyXG5cdH1cclxuXHJcblx0Y2hlY2tDaGFyYWN0ZXJzSW50ZXJzZWN0aW9uKGhlcm8sIGVuZW15KSB7XHJcblx0XHRsZXQgZGVsdGFYID0gMjA7XHJcblx0XHRsZXQgZGVsdGFZID0gMjA7XHJcblx0XHRpZiAoKChoZXJvLnBvc2l0aW9uLnggKyBkZWx0YVggPD0gKGVuZW15LnBvc2l0aW9uLnggKyBlbmVteS53aWR0aCkpICYmICgoaGVyby5wb3NpdGlvbi54ICsgaGVyby53aWR0aCkgPj0gZW5lbXkucG9zaXRpb24ueCArIGRlbHRhWCkpICYmXHJcblx0XHRcdCgoaGVyby5wb3NpdGlvbi55ICsgZGVsdGFZIDw9IChlbmVteS5wb3NpdGlvbi55ICsgZW5lbXkuaGVpZ2h0KSkgJiYgKChoZXJvLnBvc2l0aW9uLnkgKyBoZXJvLmhlaWdodCkgPj0gZW5lbXkucG9zaXRpb24ueSArIGRlbHRhWSkpKSB7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cnVuR2FtZSgpIHtcclxuXHRcdHRoaXMuZ2FtZVRpbWVyID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcblx0XHR0aGlzLmdhbWVQbGF5cyA9IHRydWU7XHJcblx0XHR0aGlzLmJhc2VTcGVlZCA9IDU7XHJcblx0XHR0aGlzLnNldExldmVsKCk7XHJcblx0fVxyXG5cclxuXHRsb3NlR2FtZSgpIHtcclxuXHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHR0aGlzLmVuZEdhbWUoKTtcclxuXHRcdFx0bGV0IHNjb3JlID0gdGhpcy5nZXRTY29yZSgpO1xyXG5cdFx0XHRsZXQgbmFtZSA9IHByb21wdChgWW91ciBzY29yZSBpcyAke3Njb3JlfSBzZWNvbmRzLlxcbiBFbnRlciB5b3VyIG5hbWVgLCAnSVxcJ20gQmF0bWFuJyk7XHJcblx0XHRcdG5hbWUgJiYgRmlyZVN0b3JlLnNhdmVTY29yZSh7XHJcblx0XHRcdFx0bmFtZSwgc2NvcmVcclxuXHRcdFx0fSk7XHJcblx0XHRcdHRoaXMuYWRkRW5kR2FtZUJ1dHRvbnMoKTtcclxuXHRcdH0sIDApO1xyXG5cdH1cclxuXHJcblx0ZW5kR2FtZSgpIHtcclxuXHRcdGNsZWFySW50ZXJ2YWwodGhpcy50aW1lckhhbmRsZXIpO1xyXG5cdFx0Y2xlYXJJbnRlcnZhbCh0aGlzLmxldmVsVGltZXIpO1xyXG5cdFx0dGhpcy5nYW1lUGxheXMgPSBmYWxzZTtcclxuXHRcdHRoaXMuYmFzZVNwZWVkID0gMDtcclxuXHRcdHRoaXMuZ2FtZU9uU2NyZWVuID0gZmFsc2U7XHJcblx0fVxyXG5cclxuXHRzZXRMZXZlbCgpIHtcclxuXHRcdHRoaXMubGV2ZWxUaW1lciA9IHNldEludGVydmFsKCgpID0+IHtcclxuXHRcdFx0dGhpcy5sZXZlbCArPSAxO1xyXG5cclxuXHRcdFx0dGhpcy5jaGFyYWN0ZXJzLnB1c2gobmV3IER1bW15RW5lbXkodGhpcykpO1xyXG5cdFx0XHRpZiAodGhpcy5sZXZlbCAlIDIgPT09IDEpIHtcclxuXHRcdFx0XHR0aGlzLmNoYXJhY3RlcnMucHVzaChuZXcgU21hcnRFbmVteSh0aGlzKSk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHRoaXMubGV2ZWwgPj0gMSkge1xyXG5cdFx0XHRcdHRoaXMuZnJ1aXRzLnB1c2gobmV3IEZydWl0KHRoaXMpKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRsZXQgbWVzc2FnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0XHRtZXNzYWdlLmNsYXNzTGlzdC5hZGQoJ2xldmVsLXVwJyk7XHJcblx0XHRcdG1lc3NhZ2UuaW5uZXJIVE1MID0gYExldmVsIFVwISBDdXJyZW50IGxldmVsIC0gJHt0aGlzLmxldmVsfWA7XHJcblxyXG5cdFx0XHR0aGlzLmNvbnRhaW50ZXIuYXBwZW5kQ2hpbGQobWVzc2FnZSk7XHJcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMuY29udGFpbnRlci5yZW1vdmVDaGlsZChtZXNzYWdlKTtcclxuXHRcdFx0fSwgMTAwMCk7XHJcblx0XHR9LCAxMDAwMCk7XHJcblx0fVxyXG5cclxuXHRhZGRFbmRHYW1lQnV0dG9ucygpIHtcclxuXHRcdGxldCBkaXZGb3JCdXR0b25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRkaXZGb3JCdXR0b25zLmNsYXNzTGlzdC5hZGQoJ2VuZC1idXR0b25zJyk7XHJcblxyXG5cdFx0bGV0IHJlcGxheUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG5cdFx0cmVwbGF5QnV0dG9uLmlubmVySFRNTCA9ICdXYXRjaCByZXBsYXknO1xyXG5cdFx0cmVwbGF5QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHR3aW5kb3cubG9jYXRpb24uaGFzaCA9ICd3YXRjaHJlcGxheSc7XHJcblx0XHR9KTtcclxuXHJcblx0XHRsZXQgc3RhcnROZXdHYW1lQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcblx0XHRzdGFydE5ld0dhbWVCdXR0b24uaW5uZXJIVE1MID0gJ1N0YXJ0IG5ldyBnYW1lJztcclxuXHRcdHN0YXJ0TmV3R2FtZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRcdFx0d2luZG93LmxvY2F0aW9uLmhhc2ggPSAnbmV3Z2FtZSc7XHJcblx0XHR9KTtcclxuXHJcblx0XHRkaXZGb3JCdXR0b25zLmFwcGVuZENoaWxkKHJlcGxheUJ1dHRvbik7XHJcblx0XHRkaXZGb3JCdXR0b25zLmFwcGVuZENoaWxkKHN0YXJ0TmV3R2FtZUJ1dHRvbik7XHJcblxyXG5cdFx0dGhpcy5jb250YWludGVyLmFwcGVuZENoaWxkKGRpdkZvckJ1dHRvbnMpO1xyXG5cdH1cclxuXHRzZXRVcEhlcm8oKSB7XHJcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2ZW50KSA9PiB7XHJcblx0XHRcdGlmICh0aGlzLmdhbWVPblNjcmVlbikge1xyXG5cdFx0XHRcdHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xyXG5cdFx0XHRcdFx0Y2FzZSAzNzoge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmhlcm8uZGlyZWN0aW9uQW5nbGUgPSBNYXRoLlBJO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGNhc2UgMzg6IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5oZXJvLmRpcmVjdGlvbkFuZ2xlID0gTWF0aC5QSSAvIDI7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Y2FzZSAzOToge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmhlcm8uZGlyZWN0aW9uQW5nbGUgPSAwO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGNhc2UgNDA6IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5oZXJvLmRpcmVjdGlvbkFuZ2xlID0gTWF0aC5QSSAvIDIgKiAzO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGRlZmF1bHQ6IHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoIXRoaXMuZ2FtZVBsYXlzKSB7XHJcblx0XHRcdFx0XHR0aGlzLnJ1bkdhbWUoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0c2V0VXBDYW52YXMoKSB7XHJcblx0XHR0aGlzLmdhbWVPblNjcmVlbiA9IHRydWU7XHJcblx0XHR0aGlzLmNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG5cdFx0dGhpcy5jb250YWludGVyLmlubmVySFRNTCA9ICcnO1xyXG5cdFx0dGhpcy5jb250YWludGVyLmFwcGVuZENoaWxkKHRoaXMuY2FudmFzKTtcclxuXHRcdHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy53aWR0aDtcclxuXHRcdHRoaXMuY2FudmFzLmhlaWdodCA9IHRoaXMuaGVpZ2h0O1xyXG5cdFx0dGhpcy5jb250ZXh0ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuXHR9XHJcblxyXG5cdHJlcGxheUdhbWUoKSB7XHJcblx0XHRjbGVhckludGVydmFsKHRoaXMucmVwbGF5VGltZXIpO1xyXG5cdFx0bGV0IGN1cnJlbnRTdGF0ZSA9IDA7XHJcblx0XHR0aGlzLnJlcGxheVRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG5cdFx0XHRpZiAoY3VycmVudFN0YXRlID49ICh0aGlzLnJlcGxheURhdGEgfHwgW10pLmxlbmd0aCkge1xyXG5cdFx0XHRcdGNsZWFySW50ZXJ2YWwodGhpcy5yZXBsYXlUaW1lcik7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuY29udGV4dC5jbGVhclJlY3QoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xyXG5cclxuXHRcdFx0bGV0IHN0YXRlID0gdGhpcy5yZXBsYXlEYXRhW2N1cnJlbnRTdGF0ZV07XHJcblx0XHRcdHN0YXRlLmZvckVhY2goZGF0YSA9PiB7XHJcblx0XHRcdFx0ZGF0YS5jaGFyYWN0ZXIucGVyc29uU3RhdGUgPSBkYXRhLnN0YXRlO1xyXG5cdFx0XHRcdHRoaXMuZHJhd0NoYXJhY3RlcihkYXRhLmNoYXJhY3Rlcik7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRjdXJyZW50U3RhdGUrKztcclxuXHRcdH0sIDIwKTtcclxuXHR9XHJcbn1cclxuIiwiaW1wb3J0IFBlcnNvbiBmcm9tICcuL3BlcnNvbic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIZXJvIGV4dGVuZHMgUGVyc29uIHtcclxuICAgIGNvbnN0cnVjdG9yKGdhbWVTdGF0ZSkge1xyXG4gICAgICAgIHN1cGVyKGdhbWVTdGF0ZSwgJ2tuaWdodCcpO1xyXG4gICAgICAgIHRoaXMud2lkdGggPSA1NTtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IDc1O1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSB7XHJcbiAgICAgICAgICAgIHg6ICh0aGlzLmdhbWUud2lkdGggLSB0aGlzLndpZHRoKSAvIDIsXHJcbiAgICAgICAgICAgIHk6IHRoaXMuZ2FtZS5oZWlnaHQgLSB0aGlzLmhlaWdodFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5yYWdlTW9kZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc3ByaXRlcyA9IHRoaXMuc3ByaXRlc0NvbGxlY3Rpb24uZG93bjtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbkFuZ2xlID0gTWF0aC5QSSAvIDI7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGdldFNwZWVkKCkge1xyXG4gICAgICAgIHRoaXMuc3BlZWQgPSB0aGlzLmdhbWUuYmFzZVNwZWVkICogdGhpcy5nYW1lLmxldmVsO1xyXG4gICAgfVxyXG4gICAgZW5hYmxlUmFnZSgpIHtcclxuICAgICAgICB0aGlzLnJhZ2VNb2RlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnNlbGVjdFNwcml0ZXNDb2xsZWN0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5nYW1lLmNhbnZhcy5jbGFzc0xpc3QuYWRkKCdyYWdlLWNhbnZhcycpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5nYW1lLmNhbnZhcy5jbGFzc0xpc3QucmVtb3ZlKCdyYWdlLWNhbnZhcycpLCAzMDAwKTtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yYWdlTW9kZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFNwcml0ZXNDb2xsZWN0aW9uKCk7XHJcbiAgICAgICAgfSwgMzUwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHBlcnNvblN0YXRlKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHg6IHRoaXMucG9zaXRpb24ueCxcclxuICAgICAgICAgICAgeTogdGhpcy5wb3NpdGlvbi55LFxyXG4gICAgICAgICAgICBkaXJlY3Rpb25BbmdsZTogdGhpcy5kaXJlY3Rpb25BbmdsZSxcclxuICAgICAgICAgICAgcmFnZU1vZGU6IHRoaXMucmFnZU1vZGVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBwZXJzb25TdGF0ZShuZXdQb3NpdGlvbikge1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uQW5nbGUgPSBuZXdQb3NpdGlvbi5kaXJlY3Rpb25BbmdsZTtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uLnggPSBuZXdQb3NpdGlvbi54O1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24ueSA9IG5ld1Bvc2l0aW9uLnk7XHJcbiAgICAgICAgaWYgKHRoaXMucmFnZU1vZGUgIT09IG5ld1Bvc2l0aW9uLnJhZ2VNb2RlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmFnZU1vZGUgPSBuZXdQb3NpdGlvbi5yYWdlTW9kZTtcclxuICAgICAgICAgICAgdGhpcy5zcHJpdGVzQ29sbGVjdGlvbiA9IHRoaXMucmFnZU1vZGUgPyB0aGlzLmZ1cnlTcHJpdGVzQ29sbGVjdGlvbiA6IHRoaXMubm9ybWFsU3ByaXRlc0NvbGxldGNpb247XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0U3ByaXRlcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZWxlY3RTcHJpdGVzQ29sbGVjdGlvbigpIHtcclxuICAgICAgICBpZiAodGhpcy5yYWdlTW9kZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLndpZHRoID0gNzU7XHJcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlc0NvbGxlY3Rpb24gPSB0aGlzLmZ1cnlTcHJpdGVzQ29sbGVjdGlvbjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLndpZHRoID0gNTU7XHJcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlc0NvbGxlY3Rpb24gPSB0aGlzLm5vcm1hbFNwcml0ZXNDb2xsZXRjaW9uO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNlbGVjdFNwcml0ZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBbGxTcHJpdGVzKCkge1xyXG4gICAgICAgIHN1cGVyLmdldEFsbFNwcml0ZXMoKTtcclxuICAgICAgICB0aGlzLm5vcm1hbFNwcml0ZXNDb2xsZXRjaW9uID0gdGhpcy5zcHJpdGVzQ29sbGVjdGlvbjtcclxuICAgICAgICB2YXIgc2VsZWN0b3IgPSAna25pZ2h0LWtpbGxzJztcclxuICAgICAgICB0aGlzLmZ1cnlTcHJpdGVzQ29sbGVjdGlvbiA9IHtcclxuICAgICAgICAgICAgbGVmdDogdGhpcy5nZXRTcHJpdGVzKGAuJHtzZWxlY3Rvcn0tbGVmdC1pbWdgKSxcclxuICAgICAgICAgICAgcmlnaHQ6IHRoaXMuZ2V0U3ByaXRlcyhgLiR7c2VsZWN0b3J9LXJpZ2h0LWltZ2ApLFxyXG4gICAgICAgICAgICB1cDogdGhpcy5nZXRTcHJpdGVzKGAuJHtzZWxlY3Rvcn0tdXAtaW1nYCksXHJcbiAgICAgICAgICAgIGRvd246IHRoaXMuZ2V0U3ByaXRlcyhgLiR7c2VsZWN0b3J9LWRvd24taW1nYClcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuXHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGVyc29uIHtcclxuICAgIGNvbnN0cnVjdG9yKGdhbWVTdGF0ZSwgc2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5nZXRBbGxTcHJpdGVzKCk7XHJcbiAgICAgICAgdGhpcy5nYW1lID0gZ2FtZVN0YXRlO1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uQW5nbGUgPSAyICogTWF0aC5QSSAqIE1hdGgucmFuZG9tKCk7XHJcbiAgICAgICAgdGhpcy5zcGVlZCA9IGdhbWVTdGF0ZS5sZXZlbCAqIGdhbWVTdGF0ZS5iYXNlU3BlZWQgLyAyO1xyXG4gICAgICAgIHRoaXMuY3VycmVudEltZyA9IDA7XHJcbiAgICB9XHJcbiAgICBzZWxlY3RTcHJpdGVzKCkge1xyXG4gICAgICAgIGlmICgodGhpcy5kaXJlY3Rpb25BbmdsZSA+PSBNYXRoLlBJICogNSAvIDQpICYmICh0aGlzLmRpcmVjdGlvbkFuZ2xlIDw9IE1hdGguUEkgKiA3IC8gNCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zcHJpdGVzID0gdGhpcy5zcHJpdGVzQ29sbGVjdGlvbi5kb3duO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgodGhpcy5kaXJlY3Rpb25BbmdsZSA+PSBNYXRoLlBJIC8gNCkgJiYgKHRoaXMuZGlyZWN0aW9uQW5nbGUgPD0gTWF0aC5QSSAqIDMgLyA0KSkge1xyXG4gICAgICAgICAgICB0aGlzLnNwcml0ZXMgPSB0aGlzLnNwcml0ZXNDb2xsZWN0aW9uLnVwO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgodGhpcy5kaXJlY3Rpb25BbmdsZSA+PSBNYXRoLlBJICogMyAvIDQpICYmICh0aGlzLmRpcmVjdGlvbkFuZ2xlIDw9IE1hdGguUEkgKiA1IC8gNCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zcHJpdGVzID0gdGhpcy5zcHJpdGVzQ29sbGVjdGlvbi5sZWZ0O1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc3ByaXRlcyA9IHRoaXMuc3ByaXRlc0NvbGxlY3Rpb24ucmlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGRpcmVjdGlvbkFuZ2xlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kaXJlY3Rpb25BbmdsZTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgZGlyZWN0aW9uQW5nbGUobmV3VmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9kaXJlY3Rpb25BbmdsZSA9IG5ld1ZhbHVlO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0U3ByaXRlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBwZXJzb25TdGF0ZSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB4OiB0aGlzLnBvc2l0aW9uLngsXHJcbiAgICAgICAgICAgIHk6IHRoaXMucG9zaXRpb24ueSxcclxuICAgICAgICAgICAgZGlyZWN0aW9uQW5nbGU6IHRoaXMuZGlyZWN0aW9uQW5nbGVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBwZXJzb25TdGF0ZShuZXdQb3NpdGlvbikge1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uQW5nbGUgPSBuZXdQb3NpdGlvbi5kaXJlY3Rpb25BbmdsZTtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uLnggPSBuZXdQb3NpdGlvbi54O1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24ueSA9IG5ld1Bvc2l0aW9uLnk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWxsU3ByaXRlcygpIHtcclxuICAgICAgICB0aGlzLnNwcml0ZXNDb2xsZWN0aW9uID0ge1xyXG4gICAgICAgICAgICBsZWZ0OiB0aGlzLmdldFNwcml0ZXMoYC4ke3RoaXMuc2VsZWN0b3J9LWxlZnQtaW1nYCksXHJcbiAgICAgICAgICAgIHJpZ2h0OiB0aGlzLmdldFNwcml0ZXMoYC4ke3RoaXMuc2VsZWN0b3J9LXJpZ2h0LWltZ2ApLFxyXG4gICAgICAgICAgICB1cDogdGhpcy5nZXRTcHJpdGVzKGAuJHt0aGlzLnNlbGVjdG9yfS11cC1pbWdgKSxcclxuICAgICAgICAgICAgZG93bjogdGhpcy5nZXRTcHJpdGVzKGAuJHt0aGlzLnNlbGVjdG9yfS1kb3duLWltZ2ApXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTcHJpdGVzKHNlbGVjdG9yKSB7XHJcbiAgICAgICAgcmV0dXJuIFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpO1xyXG4gICAgfVxyXG4gICAgZ2V0TmV4dFNwcml0ZSgpIHtcclxuICAgICAgICB0aGlzLnN0ZXAoKTtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50SW1nID49IHRoaXMuc3ByaXRlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW1nID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ByaXRlc1t0aGlzLmN1cnJlbnRJbWcrK107XHJcbiAgICB9XHJcblxyXG4gICAgc3RlcCgpIHtcclxuICAgICAgICB0aGlzLmdldFNwZWVkKCk7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi54ICs9IE1hdGguY29zKHRoaXMuZGlyZWN0aW9uQW5nbGUpICogdGhpcy5zcGVlZDtcclxuICAgICAgICBpZiAodGhpcy5wb3NpdGlvbi54ICsgdGhpcy53aWR0aCAvIDIgPiB0aGlzLmdhbWUud2lkdGgpIHtcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi54ID0gLXRoaXMud2lkdGggLyAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5wb3NpdGlvbi54ICsgdGhpcy53aWR0aCAvIDIgPCAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueCA9IHRoaXMuZ2FtZS53aWR0aCAtIHRoaXMud2lkdGggLyAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBvc2l0aW9uLnkgLT0gTWF0aC5zaW4odGhpcy5kaXJlY3Rpb25BbmdsZSkgKiB0aGlzLnNwZWVkO1xyXG4gICAgICAgIGlmICh0aGlzLnBvc2l0aW9uLnkgKyB0aGlzLmhlaWdodCAvIDIgPiB0aGlzLmdhbWUuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueSA9IC10aGlzLmhlaWdodCAvIDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnBvc2l0aW9uLnkgKyB0aGlzLmhlaWdodCAvIDIgPCAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueSA9IHRoaXMuZ2FtZS5oZWlnaHQgLSB0aGlzLmhlaWdodCAvIDI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0U3BlZWQoKSB7XHJcbiAgICAgICAgdGhpcy5zcGVlZCA9IHRoaXMuZ2FtZS5iYXNlU3BlZWQgKiB0aGlzLmdhbWUubGV2ZWwgLyAyO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBFbmVteSBmcm9tICcuL2VuZW15JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNtYXJ0RW5lbXkgZXh0ZW5kcyBFbmVteSB7XHJcbiAgICBjb25zdHJ1Y3RvcihnYW1lU3RhdGUpIHtcclxuICAgICAgICBzdXBlcihnYW1lU3RhdGUsICdyb2d1ZScpO1xyXG4gICAgICAgIHRoaXMucmFuZ2UgPSAzMDA7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IDQwO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gNDU7XHJcbiAgICB9XHJcbiAgICBzdGVwKCkge1xyXG4gICAgICAgIGxldCBoZXJvUG9zaXRpb24gPSB0aGlzLmdhbWUuaGVyby5wb3NpdGlvbjtcclxuICAgICAgICBsZXQgZW5lbXlQb3NpdGlvbiA9IHRoaXMucG9zaXRpb247XHJcbiAgICAgICAgaWYgKHRoaXMuZ2V0RGlzdGFuY2VUb0hlcm8oKSA8PSB0aGlzLnJhbmdlICYmIChoZXJvUG9zaXRpb24ueCAhPT0gZW5lbXlQb3NpdGlvbi54KSkge1xyXG4gICAgICAgICAgICBsZXQgYXRhbiA9IE1hdGguYXRhbigoaGVyb1Bvc2l0aW9uLnkgLSBlbmVteVBvc2l0aW9uLnkpIC8gKGhlcm9Qb3NpdGlvbi54IC0gZW5lbXlQb3NpdGlvbi54KSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoKChoZXJvUG9zaXRpb24ueCA+IGVuZW15UG9zaXRpb24ueCkgJiYgKGhlcm9Qb3NpdGlvbi55IDwgZW5lbXlQb3NpdGlvbi55KSkgfHxcclxuICAgICAgICAgICAgICAgICgoaGVyb1Bvc2l0aW9uLnggPiBlbmVteVBvc2l0aW9uLngpICYmIChoZXJvUG9zaXRpb24ueSA+IGVuZW15UG9zaXRpb24ueSkpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpcmVjdGlvbkFuZ2xlID0gMiAqIE1hdGguUEkgLSBhdGFuO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb25BbmdsZSA9IE1hdGguUEkgLSBhdGFuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN1cGVyLnN0ZXAoKTtcclxuICAgIH1cclxufSIsImltcG9ydCBSb3V0ZXIgZnJvbSAnLi91dGlscy9yb3V0ZXInO1xyXG5pbXBvcnQgcm91dGVzIGZyb20gJy4vcm91dGVzJztcclxuaW1wb3J0IGFkZEJ1dHRvbnNGb3JNb2JpbGUgZnJvbSAnLi91dGlscy9hZGRCdXR0b25zRm9yTW9iaWxlJztcclxuXHJcbmFkZEJ1dHRvbnNGb3JNb2JpbGUoKTtcclxubmV3IFJvdXRlcihyb3V0ZXMpOyIsImltcG9ydCBHYW1lU3RhdGUgZnJvbSAnLi9nYW1lT2JqZWN0cy9nYW1lU3RhdGUnO1xyXG5pbXBvcnQgRmlyZVN0b3JlIGZyb20gJy4vdXRpbHMvZmlyZWJhc2UnO1xyXG5cclxubGV0IGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpO1xyXG5sZXQgZ2FtZSA9IG5ldyBHYW1lU3RhdGUoY29udGVudCk7XHJcblxyXG5jb25zdCByb3V0ZXMgPSBbXHJcbiAgICB7XHJcbiAgICAgICAgbWF0Y2g6ICcnLFxyXG4gICAgICAgIG9uRW50ZXI6ICgpID0+IHtcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAnZ2FtZSc7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBtYXRjaDogJ2Fib3V0JyxcclxuICAgICAgICBvbkVudGVyOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNoYW5nZUFjdGl2ZVBhZ2UoJ2Fib3V0Jyk7XHJcbiAgICAgICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MID1cclxuICAgICAgICAgICAgIGA8aDE+XHJcbiAgICAgICAgICAgICA8c3Bhbj5TdXBlciBhcmNhZGUgZ2FtZTwvc3Bhbj5cclxuICAgICAgICAgPC9oMT5cclxuICAgICAgICAgPGRpdiBjbGFzcz1cInctMTAwXCI+PC9kaXY+XHJcbiAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICA8aDI+QXV0aG9yXHJcbiAgICAgICAgICAgICAgICAgPGEgaHJlZj1cImh0dHBzOi8vZ2l0aHViLmNvbS9jaXRyaW5pblwiPkthdGUgS3V6a2luYTwvYT5cclxuICAgICAgICAgICAgIDwvaDI+XHJcbiAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICA8ZGl2IGNsYXNzPVwiYWJvdXRcIj5cclxuXHJcbiAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgIFRoaXMgaXMgYW4gYXJjYWRlIGdhbWUgd2hlcmUgWW91IHdpbGwgcGxheSBhcyBrbmlnaHQuXHJcbiAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICA8aW1nIHNyYz1cImtuaWdodC9rbmlnaHRfcnVuX2Rvd25fMDAwLnBuZ1wiIC8+IDxici8+XHJcbiAgICAgICAgICAgICA8c3Bhbj5Zb3UgY2FuIGNvbnRyb2wga25pZ2h0IHdpdGggYXJyb3cga2V5cyBvciBpZiB5b3UgcGxheSBvbiBtb2JpbGUgcGhvbmUgd2l0aCBidXR0b25zIG9uIHNjcmVlbi48L3NwYW4+XHJcbiAgICAgICAgICAgICA8YnIvPiBcclxuICAgICAgICAgICAgIDxzcGFuPllvdXIgZ29hbCBpcyB0byBzdGF5IGFsaXZlIGFzIGxvbmcgYXMgcG9zc2libGUgZGVzcGl0ZSB0aGUgZW5lbWllcyB0aGF0IHdhbnQgdG8ga2lsbCBZb3UuIDwvc3Bhbj5cclxuICAgICAgICAgICAgIDxici8+XHJcbiAgICAgICAgICAgICA8c3Bhbj5UaGlzIGlzIEdvYmxpbiDigJMgZHVtbXkgZW5lbXkuIDxpbWcgc3JjPVwiZ29ibGluL2dvYmxpbl9ydW5fZG93bl8wMDAucG5nXCIgd2lkdGg9XCIzNVwiIC8+IFxyXG4gICAgICAgICAgICAgSGUgd2lsbCBydW4gaW4gcmFuZG9tIGRpcmVjdGlvbiBhbGwgdGhlIHRpbWUuIDwvc3Bhbj5cclxuICAgICAgICAgICAgIDxici8+XHJcbiAgICAgICAgICAgICA8c3Bhbj5UaGlzIGlzIFJvZ3VlIOKAkyBzbWFydCBlbmVteS4gIDxpbWcgc3JjPVwicm9ndWUvcm9ndWVfcnVuX2Rvd25fMDAwLnBuZ1wiIHdpZHRoPVwiNDBcIiAvPkhlIHdpbGwgYWxzbyBydW4gaW4gcmFuZG9tIGRpcmVjdGlvblxyXG4gICAgICAgICAgICAgYnV0IGlmIGhlIHdpbGwgc2VlIFlvdSBhcm91bmQg4oCTIGhlIHdpbGwgY2hhc2UgeW91IHRpbGwgeW91IHJhbiBhd2F5Ljwvc3Bhbj5cclxuICAgICAgICAgICAgIDxici8+XHJcbiAgICAgICAgICAgICA8c3Bhbj4gU29tZXRpbWVzIG9uIHRoZSBzY3JlZW4gY2FuIGFwcGVhciBmcnVpdHMuXHJcbiAgICAgICAgICAgICAgPGltZyBzcmM9XCJmb29kL0FwcGxlLnBuZ1wiPlxyXG4gICAgICAgICAgICAgIDxpbWcgc3JjPVwiZm9vZC9Bdm9jYWRvLnBuZ1wiPlxyXG4gICAgICAgICAgICAgIDxpbWcgc3JjPVwiZm9vZC9DaGVycnkucG5nXCI+XHJcbiAgICAgICAgICAgICAgPGltZyBzcmM9XCJmb29kL0xlbW9uLnBuZ1wiPlxyXG4gICAgICAgICAgICAgIDxpbWcgc3JjPVwiZm9vZC9NZWxvbldhdGVyLnBuZ1wiPlxyXG4gICAgICAgICAgICAgIDxpbWcgc3JjPVwiZm9vZC9QZWFjaC5wbmdcIj5cclxuICAgICAgICAgICAgICA8aW1nIHNyYz1cImZvb2QvU3RyYXdiZXJyeS5wbmdcIj5cclxuICAgICAgICAgICAgICBUaGV5IHdpbGwgZ2l2ZSB5b3UgcG93ZXIgdG8gZmlnaHQgd2l0aCBlbmVtaWVzLCBidXQgb25seSBmb3IgMyBzZWNvbmRzLjxzcGFuPjxici8+XHJcbiAgICAgICAgICAgICAgPHNwYW4+R29vZCBsdWNrITwvc3Bhbj5cclxuICAgICAgICAgPC9kaXY+YDtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG1hdGNoOiAnZ2FtZScsXHJcbiAgICAgICAgb25FbnRlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICBjaGFuZ2VBY3RpdmVQYWdlKCdnYW1lJyk7XHJcbiAgICAgICAgICAgIGdhbWUuc2V0VXBHYW1lKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbkxlYXZlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGdhbWUuZW5kR2FtZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbWF0Y2g6ICdzY29yZXMnLFxyXG4gICAgICAgIG9uRW50ZXI6ICgpID0+IHtcclxuICAgICAgICAgICAgY2hhbmdlQWN0aXZlUGFnZSgnc2NvcmVzJyk7XHJcblxyXG4gICAgICAgICAgICBGaXJlU3RvcmUuZ2V0U2NvcmVzKCkudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSAnPGgxIGNsYXNzPVwiYWJvdXRcIj48c3Bhbj5TY29yZXM8L3NwYW4+PC9oMT4nO1xyXG4gICAgICAgICAgICAgICAgbGV0IG9sID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb2wnKTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGkuaW5uZXJIVE1MID0gYCR7aXRlbS5uYW1lfSAtICR7aXRlbS5zY29yZX1gO1xyXG4gICAgICAgICAgICAgICAgICAgIG9sLmFwcGVuZENoaWxkKGxpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBkaXZGb3JEaXZpc2lvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgZGl2Rm9yRGl2aXNpb24uY2xhc3NMaXN0LmFkZCgndy0xMDAnKTtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZGl2Rm9yRGl2aXNpb24pO1xyXG4gICAgICAgICAgICAgICAgbGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKG9sKTtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZGl2KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBtYXRjaDogJ3JlcGxheScsXHJcbiAgICAgICAgb25FbnRlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoKGdhbWUucmVwbGF5RGF0YSB8fCBbXSkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICdnYW1lJztcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBnYW1lLnJlcGxheUdhbWUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBtYXRjaDogJ3dhdGNocmVwbGF5JyxcclxuICAgICAgICBvbkVudGVyOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJ3JlcGxheSc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0sIHtcclxuICAgICAgICBtYXRjaDogJ25ld2dhbWUnLFxyXG4gICAgICAgIG9uRW50ZXI6ICgpID0+IHtcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAnZ2FtZSc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXTtcclxuXHJcbmZ1bmN0aW9uIGNoYW5nZUFjdGl2ZVBhZ2UobmV3UGFnZSkge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGl2ZScpLmNsYXNzTmFtZSA9ICcnO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2hyZWY9XCIjJHtuZXdQYWdlfVwiXWApLnBhcmVudEVsZW1lbnQuY2xhc3NOYW1lID0gJ2FjdGl2ZSc7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCByb3V0ZXM7XHJcbiIsImltcG9ydCBkZXRlY3RNb2JpbGUgZnJvbSAnLi9kZXRlY3RNb2JpbGUnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYWRkQnV0dG9uc0Zvck1vYmlsZSgpIHtcclxuICAgIGlmIChkZXRlY3RNb2JpbGUoKSkge1xyXG5cclxuICAgICAgICB2YXIgZGl2Rm9yQnV0dG9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGRpdkZvckJ1dHRvbnMuY2xhc3NMaXN0LmFkZCgnYnV0dG9ucycpO1xyXG5cclxuICAgICAgICB2YXIgYnV0dG9uTGVmdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgIGJ1dHRvbkxlZnQuaW5uZXJIVE1MID0gJzwnO1xyXG4gICAgICAgIGJ1dHRvbkxlZnQuY2xhc3NMaXN0LmFkZCgnbGVmdCcpO1xyXG5cclxuICAgICAgICB2YXIgYnV0dG9uVXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICBidXR0b25VcC5pbm5lckhUTUwgPSAnXic7XHJcbiAgICAgICAgYnV0dG9uVXAuY2xhc3NMaXN0LmFkZCgndXAnKTtcclxuXHJcbiAgICAgICAgdmFyIGJ1dHRvblJpZ2h0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgYnV0dG9uUmlnaHQuaW5uZXJIVE1MID0gJz4nO1xyXG4gICAgICAgIGJ1dHRvblJpZ2h0LmNsYXNzTGlzdC5hZGQoJ3JpZ2h0Jyk7XHJcblxyXG4gICAgICAgIHZhciBidXR0b25Eb3duID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgYnV0dG9uRG93bi5pbm5lckhUTUwgPSAndic7XHJcbiAgICAgICAgYnV0dG9uRG93bi5jbGFzc0xpc3QuYWRkKCdkb3duJyk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgZGl2Rm9yQnV0dG9ucy5hcHBlbmRDaGlsZChidXR0b25MZWZ0KTtcclxuICAgICAgICBkaXZGb3JCdXR0b25zLmFwcGVuZENoaWxkKGJ1dHRvblVwKTtcclxuICAgICAgICBkaXZGb3JCdXR0b25zLmFwcGVuZENoaWxkKGJ1dHRvblJpZ2h0KTtcclxuICAgICAgICBkaXZGb3JCdXR0b25zLmFwcGVuZENoaWxkKGJ1dHRvbkRvd24pO1xyXG5cclxuICAgICAgICBkaXZGb3JCdXR0b25zLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQubWF0Y2hlcygnLnJpZ2h0JykpIHtcclxuICAgICAgICAgICAgICAgIGxldCBlID0gbmV3IEV2ZW50KCdrZXlkb3duJyk7XHJcbiAgICAgICAgICAgICAgICBlLmtleUNvZGUgPSAzOTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5tYXRjaGVzKCcubGVmdCcpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZSA9IG5ldyBFdmVudCgna2V5ZG93bicpO1xyXG4gICAgICAgICAgICAgICAgZS5rZXlDb2RlID0gMzc7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQubWF0Y2hlcygnLnVwJykpIHtcclxuICAgICAgICAgICAgICAgIGxldCBlID0gbmV3IEV2ZW50KCdrZXlkb3duJyk7XHJcbiAgICAgICAgICAgICAgICBlLmtleUNvZGUgPSAzODtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5tYXRjaGVzKCcuZG93bicpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZSA9IG5ldyBFdmVudCgna2V5ZG93bicpO1xyXG4gICAgICAgICAgICAgICAgZS5rZXlDb2RlID0gNDA7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2Rm9yQnV0dG9ucyk7XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZGV0ZWN0bW9iaWxlKCkge1xyXG4gICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FuZHJvaWQvaSlcclxuICAgICAgICB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC93ZWJPUy9pKVxyXG4gICAgICAgIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQaG9uZS9pKVxyXG4gICAgICAgIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQYWQvaSlcclxuICAgICAgICB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUG9kL2kpXHJcbiAgICAgICAgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQmxhY2tCZXJyeS9pKVxyXG4gICAgICAgIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1dpbmRvd3MgUGhvbmUvaSlcclxuICAgICkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59IiwibGV0IHVybCA9ICdodHRwczovL2thdGUtYXJjYWRlLWdhbWUuZmlyZWJhc2Vpby5jb20vLmpzb24nO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmlyZVN0b3JlIHtcclxuICAgIHN0YXRpYyBnZXRTY29yZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHVybCkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIHNhdmVTY29yZShpbmZvVG9TYXZlKSB7XHJcblxyXG4gICAgICAgIHRoaXMuZ2V0U2NvcmVzKCkudGhlbihzY29yZXMgPT4ge1xyXG4gICAgICAgICAgICBsZXQgbmV3U2NvcmVzID0gWy4uLnNjb3JlcyB8fCBbXSwgaW5mb1RvU2F2ZV07XHJcbiAgICAgICAgICAgIG5ld1Njb3Jlcy5zb3J0KChpdGVtMSwgaXRlbTIpID0+IGl0ZW0xLnNjb3JlID4gaXRlbTIuc2NvcmUgPyAtMSA6IGl0ZW0xLnNjb3JlIDwgaXRlbTIuc2NvcmUgPyAxIDogMCk7XHJcbiAgICAgICAgICAgIG5ld1Njb3Jlcy5zcGxpY2UoMTApO1xyXG4gICAgICAgICAgICBmZXRjaCh1cmwsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShuZXdTY29yZXMpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiLyoqXHJcbiAqINCk0YPQvdC60YbQuNGPINC00LvRjyDQtNC+0LHQsNCy0LvQtdC90LjRjyDQuCDQvtCx0YDQsNCx0L7RgtC60Lgg0YDQvtGD0YLQvtCyINC90LAg0YHRgtGA0LDQvdC40YbQtVxyXG4gKiBAcGFyYW0geyp9IHJvdXRlUGFyYW1zINC80LDRgdGB0LjQsiDQv9Cw0YDQsNC80LXRgtGA0L7QsiDQtNC70Y8g0L7QsdGA0LDQsdC+0YLQutC4INGA0L7Rg9GC0L7QslxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUm91dGVyKHJvdXRlUGFyYW1zKSB7XHJcbiAgICB0aGlzLnJvdXRlcyA9IHJvdXRlUGFyYW1zIHx8IFtdO1xyXG4gICAgdGhpcy5jdXJyZW50Um91dGU7XHJcbiAgICB0aGlzLnByZXZpb3VzUm91dGU7XHJcbiAgICB0aGlzLmN1cnJlbnRQYXJhbXM7XHJcbiAgICB0aGlzLnByZXZpb3VzUGFyYW1zO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVyKHdpbmRvdy5sb2NhdGlvbi5oYXNoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5oYW5kbGVyKHdpbmRvdy5sb2NhdGlvbi5oYXNoKTtcclxufVxyXG5cclxuUm91dGVyLnByb3RvdHlwZSA9IHtcclxuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChoYXNoKSB7XHJcbiAgICAgICAgdGhpcy5wcmV2aW91c1JvdXRlID0gdGhpcy5jdXJyZW50Um91dGU7XHJcbiAgICAgICAgdGhpcy5wcmV2aW91c1BhcmFtcyA9IHRoaXMuY3VycmVudFBhcmFtcztcclxuICAgICAgICB0aGlzLmN1cnJlbnRSb3V0ZSA9IHRoaXMuZmluZE5ld1JvdXRlKGhhc2gpO1xyXG4gICAgICAgIHRoaXMubGF1bmNoSGFuZGxlcnMoKTtcclxuICAgIH0sXHJcbiAgICBmaW5kTmV3Um91dGU6IGZ1bmN0aW9uIChoYXNoKSB7XHJcbiAgICAgICAgaGFzaCA9IGhhc2guc2xpY2UoMSk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5yb3V0ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLnJvdXRlc1tpXTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiAoZWxlbWVudC5tYXRjaCkgPT0gJ3N0cmluZycgJiYgZWxlbWVudC5tYXRjaCA9PT0gaGFzaCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFyYW1zID0gJyc7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIChlbGVtZW50Lm1hdGNoKSA9PSAnZnVuY3Rpb24nICYmIGVsZW1lbnQubWF0Y2goaGFzaCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhcmFtcyA9ICcnO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKChlbGVtZW50Lm1hdGNoIGluc3RhbmNlb2YgUmVnRXhwKSAmJiBlbGVtZW50Lm1hdGNoLnRlc3QoaGFzaCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhcmFtcyA9IGhhc2gubWF0Y2goZWxlbWVudC5tYXRjaCkgfHwgW107XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYXJhbXMuc3BsaWNlKDAsIDEpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgbGF1bmNoSGFuZGxlcnMoKSB7XHJcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKClcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4geyB0aGlzLnByZXZpb3VzUm91dGUgJiYgdGhpcy5wcmV2aW91c1JvdXRlLm9uTGVhdmUgJiYgdGhpcy5wcmV2aW91c1JvdXRlLm9uTGVhdmUodGhpcy5wcmV2aW91c1BhcmFtcyk7IH0pXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHsgdGhpcy5jdXJyZW50Um91dGUgJiYgdGhpcy5jdXJyZW50Um91dGUub25CZWZvcmVFbnRlciAmJiB0aGlzLmN1cnJlbnRSb3V0ZS5vbkJlZm9yZUVudGVyKHRoaXMuY3VycmVudFBhcmFtcyk7IH0pXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHsgdGhpcy5jdXJyZW50Um91dGUgJiYgdGhpcy5jdXJyZW50Um91dGUub25FbnRlciAmJiB0aGlzLmN1cnJlbnRSb3V0ZS5vbkVudGVyKHRoaXMuY3VycmVudFBhcmFtcyk7IH0pO1xyXG4gICAgfVxyXG59OyJdfQ==
