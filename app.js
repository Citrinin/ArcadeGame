!function o(a,s,u){function h(e,t){if(!s[e]){if(!a[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(l)return l(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var r=s[e]={exports:{}};a[e][0].call(r.exports,function(t){return h(a[e][1][t]||t)},r,r.exports,o,a,s,u)}return s[e].exports}for(var l="function"==typeof require&&require,t=0;t<u.length;t++)h(u[t]);return h}({1:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(n,"__esModule",{value:!0});var r,o=t("./enemy"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":i(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,"goblin"))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":i(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),e}();n.default=s},{"./enemy":2}],2:[function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(n,"__esModule",{value:!0});var i,o=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),a=t("./person"),s=(i=a)&&i.__esModule?i:{default:i};var u=function(t){function i(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e));return n.width=0,n.height=0,n.generatePosition(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,s.default),o(i,[{key:"generatePosition",value:function(){for(;this.position={x:Math.abs(this.width-this.game.width*Math.random()),y:this.game.height/2*Math.random()},this.getDistanceToHero()<200;);}},{key:"getDistanceToHero",value:function(){var t=this.game.hero;return Math.sqrt(Math.pow(t.position.x-this.position.x,2)+Math.pow(t.position.y-this.position.y,2))}}]),i}();n.default=u},{"./person":6}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),o=t("../utils/imagesSource"),a=(i=o)&&i.__esModule?i:{default:i};var s=function(){function n(t){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.width=0,this.height=0,this.sprite=this.generateSptite(),this.sprite.onload=function(t){e.width=t.target.width,e.height=t.target.height},this.game=t,this.position={x:Math.abs(this.width-this.game.width*Math.random()),y:this.game.height/2*Math.random()}}return r(n,[{key:"getNextSprite",value:function(){return this.sprite}},{key:"generateSptite",value:function(){var t=a.default.fruits.map(function(t){var e=new Image;return e.src=t,e});return t[Math.round(Math.random()*(t.length-1))]}},{key:"personState",get:function(){return{x:this.position.x,y:this.position.y}},set:function(t){this.position.x=t.x,this.position.y=t.y}}]),n}();n.default=s},{"../utils/imagesSource":13}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),r=h(t("./hero")),o=h(t("./dummyEnemy")),a=h(t("./smartEnemy")),s=h(t("../utils/firebase")),u=h(t("./fruit"));function h(t){return t&&t.__esModule?t:{default:t}}var l=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.gameOnScreen=!1,this.width=1e3<=window.innerWidth?1e3:window.innerWidth,this.height=(document.documentElement.clientHeight||document.body.clientHeight)-160,this.containter=t,this.setUpHero()}return i(e,[{key:"setUpGame",value:function(){var t=this;this.setUpCanvas(),this.hero=new r.default(this),this.replayData=[],this.characters=new Array(2).fill(0).map(function(){return new o.default(t)}),this.characters.push(new a.default(this)),this.fruits=[],this.level=1,this.baseSpeed=0,this.gamePlays=!1,this.gameTimer=0,this.timerHandler=setInterval(function(){return t.gameStep()},100)}},{key:"gameStep",value:function(){var e=this;this.context.clearRect(0,0,this.width,this.height),this.context.font="20px Segoe UI",this.context.fillText("Scores "+(this.gameTimer?this.getScore():0),this.width-150,30),this.context.fillText("Level "+this.level,this.width-150,55);var n=[];this.drawCharacter(this.hero),this.characters.forEach(function(t){e.drawCharacter(t),n.push({character:t,state:t.personState})}),this.fruits.forEach(function(t){e.drawCharacter(t),n.push({character:t,state:t.personState})}),this.fruits=this.fruits.filter(function(t){return!e.checkCharactersIntersection(e.hero,t)||(e.hero.enableRage(),!1)}),n.push({character:this.hero,state:this.hero.personState}),this.gamePlays&&this.replayData.push(n),this.hero.rageMode?this.characters=this.characters.filter(function(t){return!e.checkCharactersIntersection(e.hero,t)}):this.characters.some(function(t){return e.checkCharactersIntersection(e.hero,t)})&&this.loseGame()}},{key:"drawCharacter",value:function(t){this.context.drawImage(t.getNextSprite(),t.position.x,t.position.y,t.width,t.height)}},{key:"getScore",value:function(){return Math.round(((new Date).getTime()-this.gameTimer)/100)/10}},{key:"checkCharactersIntersection",value:function(t,e){if(t.position.x+20<=e.position.x+e.width&&t.position.x+t.width>=e.position.x+20&&t.position.y+20<=e.position.y+e.height&&t.position.y+t.height>=e.position.y+20)return!0}},{key:"runGame",value:function(){this.gameTimer=(new Date).getTime(),this.gamePlays=!0,this.baseSpeed=5,this.setLevel()}},{key:"loseGame",value:function(){var n=this;setTimeout(function(){n.endGame();var t=n.getScore(),e=prompt("Your score is "+t+" seconds.\n Enter your name","I'm Batman");e&&s.default.saveScore({name:e,score:t}),n.addEndGameButtons()},0)}},{key:"endGame",value:function(){clearInterval(this.timerHandler),clearInterval(this.levelTimer),this.gamePlays=!1,this.baseSpeed=0,this.gameOnScreen=!1}},{key:"setLevel",value:function(){var e=this;this.levelTimer=setInterval(function(){e.level+=1,e.characters.push(new o.default(e)),e.level%2==1&&e.characters.push(new a.default(e)),3<=e.level&&e.fruits.push(new u.default(e));var t=document.createElement("div");t.classList.add("level-up"),t.innerHTML="Level Up! Current level - "+e.level,e.containter.appendChild(t),setTimeout(function(){e.containter.removeChild(t)},1e3)},1e4)}},{key:"addEndGameButtons",value:function(){var t=document.createElement("div");t.classList.add("end-buttons");var e=document.createElement("button");e.innerHTML="Watch replay",e.addEventListener("click",function(){window.location.hash="watchreplay"});var n=document.createElement("button");n.innerHTML="Start new game",n.addEventListener("click",function(){window.location.hash="newgame"}),t.appendChild(e),t.appendChild(n),this.containter.appendChild(t)}},{key:"setUpHero",value:function(){var e=this;document.addEventListener("keydown",function(t){if(e.gameOnScreen){switch(t.keyCode){case 37:e.hero.directionAngle=Math.PI;break;case 38:e.hero.directionAngle=Math.PI/2;break;case 39:e.hero.directionAngle=0;break;case 40:e.hero.directionAngle=Math.PI/2*3;break;default:return}e.gamePlays||e.runGame()}})}},{key:"setUpCanvas",value:function(){this.gameOnScreen=!0,this.canvas=document.createElement("canvas"),this.containter.innerHTML="",this.containter.appendChild(this.canvas),this.canvas.width=this.width,this.canvas.height=this.height,this.context=this.canvas.getContext("2d")}},{key:"replayGame",value:function(){var e=this;clearInterval(this.replayTimer);var t=0;this.replayTimer=setInterval(function(){t>=(e.replayData||[]).length?clearInterval(e.replayTimer):(e.context.clearRect(0,0,e.width,e.height),e.replayData[t].forEach(function(t){t.character.personState=t.state,e.drawCharacter(t.character)}),t++)},20)}}]),e}();n.default=l},{"../utils/firebase":12,"./dummyEnemy":1,"./fruit":3,"./hero":5,"./smartEnemy":7}],5:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),o=s(t("./person")),a=s(t("../utils/imagesSource"));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":i(e))&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,"knight"));return e.position={x:(e.game.width-50)/2,y:e.game.height-100},e.rageMode=!1,e.sprites=e.spritesCollection.down,e.directionAngle=Math.PI/2,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":i(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,o.default),r(n,[{key:"getSpeed",value:function(){this.speed=this.game.baseSpeed*this.game.level}},{key:"enableRage",value:function(){var t=this;this.rageMode=!0,this.selectSpritesCollection(),this.game.canvas.classList.add("rage-canvas"),setTimeout(function(){return t.game.canvas.classList.remove("rage-canvas")},3e3),setTimeout(function(){t.rageMode=!1,t.selectSpritesCollection()},3500)}},{key:"selectSpritesCollection",value:function(){!0===this.rageMode?this.spritesCollection=this.furySpritesCollection:this.spritesCollection=this.normalSpritesColletcion,this.width=this.spritesCollection.up[0].width,this.selectSprites()}},{key:"getAllSprites",value:function(){var e=this;this.normalSpritesColletcion={left:this.getSprites(a.default[this.selector].normal.left),right:this.getSprites(a.default[this.selector].normal.right),up:this.getSprites(a.default[this.selector].normal.up),down:this.getSprites(a.default[this.selector].normal.down)},this.spritesCollection=this.normalSpritesColletcion,this.furySpritesCollection={left:this.getSprites(a.default[this.selector].rage.left),right:this.getSprites(a.default[this.selector].rage.right),up:this.getSprites(a.default[this.selector].rage.up),down:this.getSprites(a.default[this.selector].rage.down)},this.spritesCollection.up[0].onload=function(t){e.width=t.target.width,e.height=t.target.height}}},{key:"personState",get:function(){return{x:this.position.x,y:this.position.y,directionAngle:this.directionAngle,rageMode:this.rageMode}},set:function(t){this.directionAngle=t.directionAngle,this.position.x=t.x,this.position.y=t.y,this.rageMode!==t.rageMode&&(this.rageMode=t.rageMode,this.spritesCollection=this.rageMode?this.furySpritesCollection:this.normalSpritesColletcion,this.selectSprites())}}]),n}();n.default=u},{"../utils/imagesSource":13,"./person":6}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),o=t("../utils/imagesSource"),a=(i=o)&&i.__esModule?i:{default:i};var s=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.width=0,this.height=0,this.selector=e,this.getAllSprites(),this.game=t,this.directionAngle=2*Math.PI*Math.random(),this.speed=t.level*t.baseSpeed/2,this.currentImg=0}return r(n,[{key:"selectSprites",value:function(){this.directionAngle>=5*Math.PI/4&&this.directionAngle<=7*Math.PI/4?this.sprites=this.spritesCollection.down:this.directionAngle>=Math.PI/4&&this.directionAngle<=3*Math.PI/4?this.sprites=this.spritesCollection.up:this.directionAngle>=3*Math.PI/4&&this.directionAngle<=5*Math.PI/4?this.sprites=this.spritesCollection.left:this.sprites=this.spritesCollection.right}},{key:"getAllSprites",value:function(){var e=this;this.spritesCollection={left:this.getSprites(a.default[this.selector].left),right:this.getSprites(a.default[this.selector].right),up:this.getSprites(a.default[this.selector].up),down:this.getSprites(a.default[this.selector].down)},this.spritesCollection.up[0].onload=function(t){e.width=t.target.width,e.height=t.target.height}}},{key:"getSprites",value:function(t){return t.map(function(t){var e=new Image;return e.src=t,e})}},{key:"getNextSprite",value:function(){return this.step(),this.currentImg>=this.sprites.length&&(this.currentImg=0),this.sprites[this.currentImg++]}},{key:"step",value:function(){this.getSpeed(),this.position.x+=Math.cos(this.directionAngle)*this.speed,this.position.x+this.width/2>this.game.width&&(this.position.x=-this.width/2),this.position.x+this.width/2<0&&(this.position.x=this.game.width-this.width/2),this.position.y-=Math.sin(this.directionAngle)*this.speed,this.position.y+this.height/2>this.game.height&&(this.position.y=-this.height/2),this.position.y+this.height/2<0&&(this.position.y=this.game.height-this.height/2)}},{key:"getSpeed",value:function(){this.speed=this.game.baseSpeed*this.game.level/2}},{key:"directionAngle",get:function(){return this._directionAngle},set:function(t){this._directionAngle=t,this.selectSprites()}},{key:"personState",get:function(){return{x:this.position.x,y:this.position.y,directionAngle:this.directionAngle}},set:function(t){this.directionAngle=t.directionAngle,this.position.x=t.x,this.position.y=t.y}}]),n}();n.default=s},{"../utils/imagesSource":13}],7:[function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(n,"__esModule",{value:!0});var i,o=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),a=t("./enemy"),s=(i=a)&&i.__esModule?i:{default:i};var u=function(t){function i(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,"rogue"));return e.range=300,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":r(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,s.default),o(i,[{key:"step",value:function(){var t=this.game.hero.position,e=this.position;if(this.getDistanceToHero()<=this.range&&t.x!==e.x){var n=Math.atan((t.y-e.y)/(t.x-e.x));t.x>e.x&&t.y<e.y||t.x>e.x&&t.y>e.y?this.directionAngle=2*Math.PI-n:this.directionAngle=Math.PI-n}(function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0})(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"step",this).call(this)}}]),i}();n.default=u},{"./enemy":2}],8:[function(t,e,n){"use strict";var i=o(t("./utils/router")),r=o(t("./routes"));function o(t){return t&&t.__esModule?t:{default:t}}(0,o(t("./utils/addButtonsForMobile")).default)(),new i.default(r.default)},{"./routes":9,"./utils/addButtonsForMobile":10,"./utils/router":14}],9:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=o(t("./gameObjects/gameState")),r=o(t("./utils/firebase"));function o(t){return t&&t.__esModule?t:{default:t}}var a=document.querySelector(".content"),s=new i.default(a),u=[{match:"",onEnter:function(){window.location.hash="game"}},{match:"about",onEnter:function(){h("about"),a.innerHTML='<h1>\n             <span>Super arcade game</span>\n            </h1>\n            <div class="w-100"></div>\n            <div>\n                <h2>Author\n                    <a href="https://github.com/citrinin">Kate Kuzkina</a>\n                </h2>\n            </div>\n            <div class="about">\n                <span>This is an arcade game where You will play as knight.</span>\n                <img src="knight/knight_run_down_000.png" /> <br/>\n                <span>You can control knight with arrow keys or if you play on mobile phone with buttons on screen.</span>\n                <br/> \n                <span>Your goal is to stay alive as long as possible despite the enemies that want to kill You. </span>\n                <br/>\n                <span>This is Goblin – dummy enemy. <img src="goblin/goblin_run_down_000.png" width="35" /> \n                He will run in random direction all the time. </span>\n                <br/>\n                <span>This is Rogue – smart enemy.  <img src="rogue/rogue_run_down_000.png" width="40" />He will also run in random direction\n                but if he will see You around – he will chase you till you ran away.</span>\n                <br/>\n                <span> Sometimes on the screen can appear fruits.\n                <img src="food/Apple.png">\n                <img src="food/Avocado.png">\n                <img src="food/Cherry.png">\n                <img src="food/Lemon.png">\n                <img src="food/MelonWater.png">\n                <img src="food/Peach.png">\n                <img src="food/Strawberry.png">\n                They will give you power to fight with enemies, but only for 3 seconds.<span><br/>\n                <span>Good luck!</span>\n            </div>'}},{match:"game",onEnter:function(){h("game"),s.setUpGame()},onLeave:function(){s.endGame()}},{match:"scores",onEnter:function(){h("scores"),r.default.getScores().then(function(t){a.innerHTML='<h1 class="about"><span>Scores</span></h1>';var n=document.createElement("ol");t.forEach(function(t){var e=document.createElement("li");e.innerHTML=t.name+" - "+t.score,n.appendChild(e)});var e=document.createElement("div");e.classList.add("w-100"),a.appendChild(e);var i=document.createElement("div");i.appendChild(n),a.appendChild(i)})}},{match:"replay",onEnter:function(){0!==(s.replayData||[]).length?s.replayGame():window.location.hash="game"}},{match:"watchreplay",onEnter:function(){window.location.hash="replay"}},{match:"newgame",onEnter:function(){window.location.hash="game"}}];function h(t){document.querySelector(".active").className="",document.querySelector('[href="#'+t+'"]').parentElement.className="active"}n.default=u},{"./gameObjects/gameState":4,"./utils/firebase":12}],10:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){if((0,o.default)()){var t=document.createElement("div");t.classList.add("buttons");var e=document.createElement("button");e.innerHTML="<",e.classList.add("left");var n=document.createElement("button");n.innerHTML="^",n.classList.add("up");var i=document.createElement("button");i.innerHTML=">",i.classList.add("right");var r=document.createElement("button");r.innerHTML="v",r.classList.add("down"),t.appendChild(e),t.appendChild(n),t.appendChild(i),t.appendChild(r),t.addEventListener("click",function(t){if(t.target.matches(".right")){var e=new Event("keydown");return e.keyCode=39,void document.dispatchEvent(e)}if(t.target.matches(".left")){var n=new Event("keydown");return n.keyCode=37,void document.dispatchEvent(n)}if(t.target.matches(".up")){var i=new Event("keydown");return i.keyCode=38,void document.dispatchEvent(i)}if(t.target.matches(".down")){var r=new Event("keydown");return r.keyCode=40,void document.dispatchEvent(r)}}),document.body.appendChild(t)}};var i,r=t("./detectMobile"),o=(i=r)&&i.__esModule?i:{default:i}},{"./detectMobile":11}],11:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))}},{}],12:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();var r="https://kate-arcade-game.firebaseio.com/.json",o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,null,[{key:"getScores",value:function(){return fetch(r).then(function(t){return t.json()})}},{key:"saveScore",value:function(n){this.getScores().then(function(t){var e=[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t||[]),[n]);e.sort(function(t,e){return t.score>e.score?-1:t.score<e.score?1:0}),e.splice(10),fetch(r,{method:"PUT",body:JSON.stringify(e)})})}}]),t}();n.default=o},{}],13:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default={knight:{normal:{up:[" knight/knight_run_up_000.png","knight/knight_run_up_001.png","knight/knight_run_up_002.png","knight/knight_run_up_003.png","knight/knight_run_up_004.png"],right:["knight/knight_run_right_000.png","knight/knight_run_right_001.png","knight/knight_run_right_002.png","knight/knight_run_right_003.png","knight/knight_run_right_004.png","knight/knight_run_right_005.png"],down:["knight/knight_run_down_000.png","knight/knight_run_down_001.png","knight/knight_run_down_002.png","knight/knight_run_down_003.png","knight/knight_run_down_004.png"],left:["knight/knight_run_left_000.png","knight/knight_run_left_001.png","knight/knight_run_left_002.png","knight/knight_run_left_003.png","knight/knight_run_left_004.png","knight/knight_run_left_005.png"]},rage:{up:["knight/knight_kills_up_000.png","knight/knight_kills_up_001.png","knight/knight_kills_up_002.png"],right:["knight/knight_kills_right_000.png","knight/knight_kills_right_001.png","knight/knight_kills_right_002.png"],down:["knight/knight_kills_down_000.png","knight/knight_kills_down_001.png","knight/knight_kills_down_002.png"],left:["knight/knight_kills_left_000.png","knight/knight_kills_left_001.png","knight/knight_kills_left_002.png"]}},rogue:{up:["rogue/rogue_run_up_000.png","rogue/rogue_run_up_001.png","rogue/rogue_run_up_002.png","rogue/rogue_run_up_003.png"],right:["rogue/rogue_run_right_000.png","rogue/rogue_run_right_001.png","rogue/rogue_run_right_002.png","rogue/rogue_run_right_003.png","rogue/rogue_run_right_004.png","rogue/rogue_run_right_005.png"],down:["rogue/rogue_run_down_000.png","rogue/rogue_run_down_001.png","rogue/rogue_run_down_002.png","rogue/rogue_run_down_003.png"],left:["rogue/rogue_run_left_000.png","rogue/rogue_run_left_001.png","rogue/rogue_run_left_002.png","rogue/rogue_run_left_003.png","rogue/rogue_run_left_004.png","rogue/rogue_run_left_005.png"]},goblin:{up:["goblin/goblin_run_up_000.png","goblin/goblin_run_up_001.png","goblin/goblin_run_up_002.png","goblin/goblin_run_up_003.png"],right:["goblin/goblin_run_right_000.png","goblin/goblin_run_right_001.png","goblin/goblin_run_right_002.png","goblin/goblin_run_right_003.png","goblin/goblin_run_right_004.png","goblin/goblin_run_right_005.png"],down:["goblin/goblin_run_down_000.png","goblin/goblin_run_down_001.png","goblin/goblin_run_down_002.png","goblin/goblin_run_down_003.png"],left:["goblin/goblin_run_left_000.png","goblin/goblin_run_left_001.png","goblin/goblin_run_left_002.png","goblin/goblin_run_left_003.png","goblin/goblin_run_left_004.png","goblin/goblin_run_left_005.png"]},fruits:["food/Apple.png","food/Avocado.png","food/Cherry.png","food/Lemon.png","food/MelonWater.png","food/Peach.png","food/Strawberry.png"]}},{}],14:[function(t,e,n){"use strict";function i(t){var e=this;this.routes=t||[],this.currentRoute,this.previousRoute,this.currentParams,this.previousParams,window.addEventListener("hashchange",function(){e.handler(window.location.hash)}),this.handler(window.location.hash)}Object.defineProperty(n,"__esModule",{value:!0}),(n.default=i).prototype={handler:function(t){this.previousRoute=this.currentRoute,this.previousParams=this.currentParams,this.currentRoute=this.findNewRoute(t),this.launchHandlers()},findNewRoute:function(t){t=t.slice(1);for(var e=0;e<this.routes.length;e++){var n=this.routes[e];if("string"==typeof n.match&&n.match===t)return this.currentParams="",n;if("function"==typeof n.match&&n.match(t))return this.currentParams="",n;if(n.match instanceof RegExp&&n.match.test(t))return this.currentParams=t.match(n.match)||[],this.currentParams.splice(0,1),n}},launchHandlers:function(){var t=this;Promise.resolve().then(function(){t.previousRoute&&t.previousRoute.onLeave&&t.previousRoute.onLeave(t.previousParams)}).then(function(){t.currentRoute&&t.currentRoute.onBeforeEnter&&t.currentRoute.onBeforeEnter(t.currentParams)}).then(function(){t.currentRoute&&t.currentRoute.onEnter&&t.currentRoute.onEnter(t.currentParams)})}}},{}]},{},[8]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvZ2FtZU9iamVjdHMvZHVtbXlFbmVteS5qcyIsInNyYy9qcy9nYW1lT2JqZWN0cy9lbmVteS5qcyIsInNyYy9qcy9nYW1lT2JqZWN0cy9mcnVpdC5qcyIsInNyYy9qcy9nYW1lT2JqZWN0cy9nYW1lU3RhdGUuanMiLCJzcmMvanMvZ2FtZU9iamVjdHMvaGVyby5qcyIsInNyYy9qcy9nYW1lT2JqZWN0cy9wZXJzb24uanMiLCJzcmMvanMvZ2FtZU9iamVjdHMvc21hcnRFbmVteS5qcyIsInNyYy9qcy9tYWluLmpzIiwic3JjL2pzL3JvdXRlcy5qcyIsInNyYy9qcy91dGlscy9hZGRCdXR0b25zRm9yTW9iaWxlLmpzIiwic3JjL2pzL3V0aWxzL2RldGVjdE1vYmlsZS5qcyIsInNyYy9qcy91dGlscy9maXJlYmFzZS5qcyIsInNyYy9qcy91dGlscy9pbWFnZXNTb3VyY2UuanMiLCJzcmMvanMvdXRpbHMvcm91dGVyLmpzIl0sIm5hbWVzIjpbInIiLCJlIiwibiIsInQiLCJvIiwiaSIsImYiLCJjIiwicmVxdWlyZSIsInUiLCJhIiwiRXJyb3IiLCJjb2RlIiwicCIsImV4cG9ydHMiLCJjYWxsIiwibGVuZ3RoIiwiMSIsIm1vZHVsZSIsIl9lbmVteSIsIkR1bW15RW5lbXkiLCJnYW1lU3RhdGUiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJfX3Byb3RvX18iLCJPYmplY3QiLCJnZXRQcm90b3R5cGVPZiIsIl9lbmVteTIiLCJkZWZhdWx0IiwiX3BlcnNvbiIsIkVuZW15Iiwic2VsZWN0b3IiLCJfdGhpcyIsIndpZHRoIiwiaGVpZ2h0IiwiZ2VuZXJhdGVQb3NpdGlvbiIsIl9wZXJzb24yIiwicG9zaXRpb24iLCJ4IiwiTWF0aCIsImFicyIsImdhbWUiLCJyYW5kb20iLCJ5IiwiZ2V0RGlzdGFuY2VUb0hlcm8iLCJoZXJvIiwic3FydCIsInBvdyIsIl9pbWFnZXNTb3VyY2UiLCJGcnVpdCIsInNwcml0ZSIsImdlbmVyYXRlU3B0aXRlIiwib25sb2FkIiwiZXYiLCJ0YXJnZXQiLCJzcHJpdGVzIiwiX2ltYWdlc1NvdXJjZTIiLCJmcnVpdHMiLCJtYXAiLCJzcmMiLCJpbWciLCJJbWFnZSIsInJvdW5kIiwibmV3UG9zaXRpb24iLCJHYW1lU3RhdGUiLCJlbGVtZW50VG9EcmF3IiwiZ2FtZU9uU2NyZWVuIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImRvY3VtZW50IiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50SGVpZ2h0IiwiYm9keSIsImNvbnRhaW50ZXIiLCJzZXRVcEhlcm8iLCJzZXRVcENhbnZhcyIsIl9oZXJvMiIsInJlcGxheURhdGEiLCJjaGFyYWN0ZXJzIiwiQXJyYXkiLCJmaWxsIiwiX2R1bW15RW5lbXkyIiwicHVzaCIsIl9zbWFydEVuZW15MiIsImxldmVsIiwiYmFzZVNwZWVkIiwiZ2FtZVBsYXlzIiwiZ2FtZVRpbWVyIiwidGltZXJIYW5kbGVyIiwic2V0SW50ZXJ2YWwiLCJnYW1lU3RlcCIsIl90aGlzMiIsImNvbnRleHQiLCJjbGVhclJlY3QiLCJmb250IiwiZmlsbFRleHQiLCJnZXRTY29yZSIsInN0ZXBEYXRhIiwiZHJhd0NoYXJhY3RlciIsImZvckVhY2giLCJjaGFyYWN0ZXIiLCJzdGF0ZSIsInBlcnNvblN0YXRlIiwiZnJ1aXQiLCJmaWx0ZXIiLCJjaGVja0NoYXJhY3RlcnNJbnRlcnNlY3Rpb24iLCJlbmFibGVSYWdlIiwicmFnZU1vZGUiLCJzb21lIiwibG9zZUdhbWUiLCJkcmF3SW1hZ2UiLCJnZXROZXh0U3ByaXRlIiwiRGF0ZSIsImdldFRpbWUiLCJlbmVteSIsInNldExldmVsIiwiX3RoaXMzIiwic2V0VGltZW91dCIsImVuZEdhbWUiLCJzY29yZSIsIm5hbWUiLCJwcm9tcHQiLCJfZmlyZWJhc2UyIiwic2F2ZVNjb3JlIiwiYWRkRW5kR2FtZUJ1dHRvbnMiLCJjbGVhckludGVydmFsIiwibGV2ZWxUaW1lciIsIl90aGlzNCIsIl9mcnVpdDIiLCJtZXNzYWdlIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImlubmVySFRNTCIsImFwcGVuZENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJkaXZGb3JCdXR0b25zIiwicmVwbGF5QnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImxvY2F0aW9uIiwiaGFzaCIsInN0YXJ0TmV3R2FtZUJ1dHRvbiIsIl90aGlzNSIsImV2ZW50Iiwia2V5Q29kZSIsImRpcmVjdGlvbkFuZ2xlIiwiUEkiLCJydW5HYW1lIiwiY2FudmFzIiwiZ2V0Q29udGV4dCIsIl90aGlzNiIsInJlcGxheVRpbWVyIiwiY3VycmVudFN0YXRlIiwiZGF0YSIsIkhlcm8iLCJzcHJpdGVzQ29sbGVjdGlvbiIsImRvd24iLCJzcGVlZCIsInNlbGVjdFNwcml0ZXNDb2xsZWN0aW9uIiwicmVtb3ZlIiwiZnVyeVNwcml0ZXNDb2xsZWN0aW9uIiwibm9ybWFsU3ByaXRlc0NvbGxldGNpb24iLCJ1cCIsInNlbGVjdFNwcml0ZXMiLCJsZWZ0IiwiZ2V0U3ByaXRlcyIsIm5vcm1hbCIsInJpZ2h0IiwicmFnZSIsIlBlcnNvbiIsImdldEFsbFNwcml0ZXMiLCJjdXJyZW50SW1nIiwiaW1hZ2VzIiwic3RlcCIsImdldFNwZWVkIiwiY29zIiwic2luIiwiX2RpcmVjdGlvbkFuZ2xlIiwibmV3VmFsdWUiLCJTbWFydEVuZW15IiwicmFuZ2UiLCJoZXJvUG9zaXRpb24iLCJlbmVteVBvc2l0aW9uIiwiYXRhbiIsIl9nZXQiLCJwcm90b3R5cGUiLCJfcm91dGVyMiIsIl9yb3V0ZXMyIiwiY29udGVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfZ2FtZVN0YXRlMiIsInJvdXRlcyIsIm1hdGNoIiwib25FbnRlciIsImNoYW5nZUFjdGl2ZVBhZ2UiLCJzZXRVcEdhbWUiLCJvbkxlYXZlIiwiZ2V0U2NvcmVzIiwidGhlbiIsInJlc3VsdCIsIm9sIiwiaXRlbSIsImxpIiwiZGl2Rm9yRGl2aXNpb24iLCJkaXYiLCJyZXBsYXlHYW1lIiwibmV3UGFnZSIsImNsYXNzTmFtZSIsInBhcmVudEVsZW1lbnQiLCJfZGV0ZWN0TW9iaWxlMiIsImJ1dHRvbkxlZnQiLCJidXR0b25VcCIsImJ1dHRvblJpZ2h0IiwiYnV0dG9uRG93biIsIm1hdGNoZXMiLCJFdmVudCIsImRpc3BhdGNoRXZlbnQiLCJfZSIsIl9lMiIsIl9lMyIsIl9kZXRlY3RNb2JpbGUiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ1cmwiLCJGaXJlU3RvcmUiLCJmZXRjaCIsInJlc3BvbnNlIiwianNvbiIsImluZm9Ub1NhdmUiLCJzY29yZXMiLCJuZXdTY29yZXMiLCJjb25jYXQiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJzb3J0IiwiaXRlbTEiLCJpdGVtMiIsInNwbGljZSIsIm1ldGhvZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJrbmlnaHQiLCJyb2d1ZSIsImdvYmxpbiIsIlJvdXRlciIsInJvdXRlUGFyYW1zIiwiY3VycmVudFJvdXRlIiwicHJldmlvdXNSb3V0ZSIsImN1cnJlbnRQYXJhbXMiLCJwcmV2aW91c1BhcmFtcyIsImhhbmRsZXIiLCJmaW5kTmV3Um91dGUiLCJsYXVuY2hIYW5kbGVycyIsInNsaWNlIiwiZWxlbWVudCIsIlJlZ0V4cCIsInRlc3QiLCJQcm9taXNlIiwicmVzb2x2ZSIsIm9uQmVmb3JlRW50ZXIiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEVBQUFDLEVBQUFDLEdBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0FBQSxJQUFBSixFQUFBRyxHQUFBLENBQUEsSUFBQUosRUFBQUksR0FBQSxDQUFBLElBQUFFLEVBQUEsbUJBQUFDLFNBQUFBLFFBQUEsSUFBQUYsR0FBQUMsRUFBQSxPQUFBQSxFQUFBRixHQUFBLEdBQUEsR0FBQUksRUFBQSxPQUFBQSxFQUFBSixHQUFBLEdBQUEsSUFBQUssRUFBQSxJQUFBQyxNQUFBLHVCQUFBTixFQUFBLEtBQUEsTUFBQUssRUFBQUUsS0FBQSxtQkFBQUYsRUFBQSxJQUFBRyxFQUFBWCxF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Q0FNLEVBRUYsR0FBSUEsRUFBQTdELGlCQUFBOEQsUUFBbUNELEVBQUE3RCxNQUFBK0QsS0FBdkNuSCxHQUdFLE9BRkF0SCxLQUFBaU8sY0FBcUIzRyxFQUFBb0QsTUFBVzZELEVBQVg3RCxRQUFyQixHQUNBMUssS0FBQWlPLGNBQUFYLE9BQUEsRUFBQSxHQUNBaUIsSUF2QldGLGVBQUEsV0EyQkEsSUFBQWhLLEVBQUFyRSxLQUNmME8sUUFBQUMsVUFBQTNELEtBQ1EsV0FDSjNHLEVBQUEySixlQUNFM0osRUFBQTJKLGNBREZsRCxTQUVFekcsRUFBQTJKLGNBQUFsRCxRQUEyQnpHLEVBRjdCNkosa0JBRkpsRCxLQU1RLFdBQ0ozRyxFQUFBMEosY0FDRTFKLEVBQUEwSixhQURGYSxlQUVFdkssRUFBQTBKLGFBQUFhLGNBQWdDdkssRUFGbEM0SixpQkFQSmpELEtBV1EsV0FDSjNHLEVBQUEwSixjQUNFMUosRUFBQTBKLGFBREZwRCxTQUVFdEcsRUFBQTBKLGFBQUFwRCxRQUEwQnRHLEVBRjVCNEoiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImltcG9ydCBFbmVteSBmcm9tICcuL2VuZW15JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIER1bW15RW5lbXkgZXh0ZW5kcyBFbmVteSB7XHJcbiAgY29uc3RydWN0b3IoZ2FtZVN0YXRlKSB7XHJcbiAgICBzdXBlcihnYW1lU3RhdGUsICdnb2JsaW4nKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBlcnNvbiBmcm9tICcuL3BlcnNvbic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbmVteSBleHRlbmRzIFBlcnNvbiB7XHJcbiAgY29uc3RydWN0b3IoZ2FtZVN0YXRlLCBzZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoZ2FtZVN0YXRlLCBzZWxlY3Rvcik7XHJcbiAgICB0aGlzLndpZHRoID0gMDtcclxuICAgIHRoaXMuaGVpZ2h0ID0gMDtcclxuICAgIHRoaXMuZ2VuZXJhdGVQb3NpdGlvbigpO1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVQb3NpdGlvbigpIHtcclxuICAgIGRvIHtcclxuICAgICAgdGhpcy5wb3NpdGlvbiA9IHtcclxuICAgICAgICB4OiBNYXRoLmFicyh0aGlzLndpZHRoIC0gdGhpcy5nYW1lLndpZHRoICogTWF0aC5yYW5kb20oKSksXHJcbiAgICAgICAgeTogKHRoaXMuZ2FtZS5oZWlnaHQgLyAyKSAqIE1hdGgucmFuZG9tKClcclxuICAgICAgfTtcclxuICAgIH0gd2hpbGUgKHRoaXMuZ2V0RGlzdGFuY2VUb0hlcm8oKSA8IDIwMCk7XHJcbiAgfVxyXG4gIGdldERpc3RhbmNlVG9IZXJvKCkge1xyXG4gICAgbGV0IGhlcm8gPSB0aGlzLmdhbWUuaGVybztcclxuICAgIHJldHVybiBNYXRoLnNxcnQoXHJcbiAgICAgIE1hdGgucG93KGhlcm8ucG9zaXRpb24ueCAtIHRoaXMucG9zaXRpb24ueCwgMikgK1xyXG4gICAgICAgIE1hdGgucG93KGhlcm8ucG9zaXRpb24ueSAtIHRoaXMucG9zaXRpb24ueSwgMilcclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBpbWFnZVNvdXJjZSBmcm9tICcuLi91dGlscy9pbWFnZXNTb3VyY2UnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRnJ1aXQge1xyXG4gIGNvbnN0cnVjdG9yKGdhbWVTdGF0ZSkge1xyXG4gICAgdGhpcy53aWR0aCA9IDA7XHJcbiAgICB0aGlzLmhlaWdodCA9IDA7XHJcbiAgICB0aGlzLnNwcml0ZSA9IHRoaXMuZ2VuZXJhdGVTcHRpdGUoKTtcclxuICAgIHRoaXMuc3ByaXRlLm9ubG9hZCA9IGV2ID0+IHtcclxuICAgICAgdGhpcy53aWR0aCA9IGV2LnRhcmdldC53aWR0aDtcclxuICAgICAgdGhpcy5oZWlnaHQgPSBldi50YXJnZXQuaGVpZ2h0O1xyXG4gICAgfTtcclxuICAgIHRoaXMuZ2FtZSA9IGdhbWVTdGF0ZTtcclxuICAgIHRoaXMucG9zaXRpb24gPSB7XHJcbiAgICAgIHg6IE1hdGguYWJzKHRoaXMud2lkdGggLSB0aGlzLmdhbWUud2lkdGggKiBNYXRoLnJhbmRvbSgpKSxcclxuICAgICAgeTogKHRoaXMuZ2FtZS5oZWlnaHQgLyAyKSAqIE1hdGgucmFuZG9tKClcclxuICAgIH07XHJcbiAgfVxyXG4gIGdldE5leHRTcHJpdGUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zcHJpdGU7XHJcbiAgfVxyXG5cclxuICBnZXQgcGVyc29uU3RhdGUoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB4OiB0aGlzLnBvc2l0aW9uLngsXHJcbiAgICAgIHk6IHRoaXMucG9zaXRpb24ueVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldCBwZXJzb25TdGF0ZShuZXdQb3NpdGlvbikge1xyXG4gICAgdGhpcy5wb3NpdGlvbi54ID0gbmV3UG9zaXRpb24ueDtcclxuICAgIHRoaXMucG9zaXRpb24ueSA9IG5ld1Bvc2l0aW9uLnk7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZVNwdGl0ZSgpIHtcclxuICAgIGxldCBzcHJpdGVzID0gaW1hZ2VTb3VyY2UuZnJ1aXRzLm1hcChzcmMgPT4ge1xyXG4gICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XHJcbiAgICAgIGltZy5zcmMgPSBzcmM7XHJcbiAgICAgIHJldHVybiBpbWc7XHJcbiAgICB9KTtcclxuICAgIGxldCBmcnVpdE51bWJlciA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIChzcHJpdGVzLmxlbmd0aCAtIDEpKTtcclxuICAgIHJldHVybiBzcHJpdGVzW2ZydWl0TnVtYmVyXTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IEhlcm8gZnJvbSAnLi9oZXJvJztcclxuaW1wb3J0IER1bW15RW5lbXkgZnJvbSAnLi9kdW1teUVuZW15JztcclxuaW1wb3J0IFNtYXJ0RW5lbXkgZnJvbSAnLi9zbWFydEVuZW15JztcclxuaW1wb3J0IEZpcmVTdG9yZSBmcm9tICcuLi91dGlscy9maXJlYmFzZSc7XHJcbmltcG9ydCBGcnVpdCBmcm9tICcuL2ZydWl0JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVTdGF0ZSB7XHJcbiAgY29uc3RydWN0b3IoZWxlbWVudFRvRHJhdykge1xyXG4gICAgdGhpcy5nYW1lT25TY3JlZW4gPSBmYWxzZTtcclxuICAgIHRoaXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aCA+PSAxMDAwID8gMTAwMCA6IHdpbmRvdy5pbm5lcldpZHRoO1xyXG5cclxuICAgIHRoaXMuaGVpZ2h0ID1cclxuICAgICAgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgfHwgZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQpIC1cclxuICAgICAgMTYwO1xyXG5cclxuICAgIHRoaXMuY29udGFpbnRlciA9IGVsZW1lbnRUb0RyYXc7XHJcbiAgICB0aGlzLnNldFVwSGVybygpO1xyXG4gIH1cclxuXHJcbiAgc2V0VXBHYW1lKCkge1xyXG4gICAgdGhpcy5zZXRVcENhbnZhcygpO1xyXG5cclxuICAgIHRoaXMuaGVybyA9IG5ldyBIZXJvKHRoaXMpO1xyXG5cclxuICAgIHRoaXMucmVwbGF5RGF0YSA9IFtdO1xyXG4gICAgdGhpcy5jaGFyYWN0ZXJzID0gbmV3IEFycmF5KDIpLmZpbGwoMCkubWFwKCgpID0+IG5ldyBEdW1teUVuZW15KHRoaXMpKTtcclxuICAgIHRoaXMuY2hhcmFjdGVycy5wdXNoKG5ldyBTbWFydEVuZW15KHRoaXMpKTtcclxuICAgIHRoaXMuZnJ1aXRzID0gW107XHJcblxyXG4gICAgdGhpcy5sZXZlbCA9IDE7XHJcbiAgICB0aGlzLmJhc2VTcGVlZCA9IDA7XHJcbiAgICB0aGlzLmdhbWVQbGF5cyA9IGZhbHNlO1xyXG4gICAgdGhpcy5nYW1lVGltZXIgPSAwO1xyXG5cclxuICAgIHRoaXMudGltZXJIYW5kbGVyID0gc2V0SW50ZXJ2YWwoKCkgPT4gdGhpcy5nYW1lU3RlcCgpLCAxMDApO1xyXG4gIH1cclxuXHJcbiAgZ2FtZVN0ZXAoKSB7XHJcbiAgICB0aGlzLmNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcclxuXHJcbiAgICB0aGlzLmNvbnRleHQuZm9udCA9ICcyMHB4IFNlZ29lIFVJJztcclxuICAgIHRoaXMuY29udGV4dC5maWxsVGV4dChcclxuICAgICAgYFNjb3JlcyAke3RoaXMuZ2FtZVRpbWVyID8gdGhpcy5nZXRTY29yZSgpIDogMH1gLFxyXG4gICAgICB0aGlzLndpZHRoIC0gMTUwLFxyXG4gICAgICAzMFxyXG4gICAgKTtcclxuICAgIHRoaXMuY29udGV4dC5maWxsVGV4dChgTGV2ZWwgJHt0aGlzLmxldmVsfWAsIHRoaXMud2lkdGggLSAxNTAsIDU1KTtcclxuXHJcbiAgICBsZXQgc3RlcERhdGEgPSBbXTtcclxuICAgIHRoaXMuZHJhd0NoYXJhY3Rlcih0aGlzLmhlcm8pO1xyXG5cclxuICAgIHRoaXMuY2hhcmFjdGVycy5mb3JFYWNoKGNoYXJhY3RlciA9PiB7XHJcbiAgICAgIHRoaXMuZHJhd0NoYXJhY3RlcihjaGFyYWN0ZXIpO1xyXG4gICAgICBzdGVwRGF0YS5wdXNoKHtcclxuICAgICAgICBjaGFyYWN0ZXI6IGNoYXJhY3RlcixcclxuICAgICAgICBzdGF0ZTogY2hhcmFjdGVyLnBlcnNvblN0YXRlXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5mcnVpdHMuZm9yRWFjaChmcnVpdCA9PiB7XHJcbiAgICAgIHRoaXMuZHJhd0NoYXJhY3RlcihmcnVpdCk7XHJcbiAgICAgIHN0ZXBEYXRhLnB1c2goe1xyXG4gICAgICAgIGNoYXJhY3RlcjogZnJ1aXQsXHJcbiAgICAgICAgc3RhdGU6IGZydWl0LnBlcnNvblN0YXRlXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLmZydWl0cyA9IHRoaXMuZnJ1aXRzLmZpbHRlcihmcnVpdCA9PiB7XHJcbiAgICAgIHZhciByZXN1bHQgPSB0aGlzLmNoZWNrQ2hhcmFjdGVyc0ludGVyc2VjdGlvbih0aGlzLmhlcm8sIGZydWl0KTtcclxuICAgICAgaWYgKHJlc3VsdCkge1xyXG4gICAgICAgIHRoaXMuaGVyby5lbmFibGVSYWdlKCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc3RlcERhdGEucHVzaCh7XHJcbiAgICAgIGNoYXJhY3RlcjogdGhpcy5oZXJvLFxyXG4gICAgICBzdGF0ZTogdGhpcy5oZXJvLnBlcnNvblN0YXRlXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmdhbWVQbGF5cyAmJiB0aGlzLnJlcGxheURhdGEucHVzaChzdGVwRGF0YSk7XHJcblxyXG4gICAgaWYgKHRoaXMuaGVyby5yYWdlTW9kZSkge1xyXG4gICAgICB0aGlzLmNoYXJhY3RlcnMgPSB0aGlzLmNoYXJhY3RlcnMuZmlsdGVyKFxyXG4gICAgICAgIGNoYXJhY3RlciA9PiAhdGhpcy5jaGVja0NoYXJhY3RlcnNJbnRlcnNlY3Rpb24odGhpcy5oZXJvLCBjaGFyYWN0ZXIpXHJcbiAgICAgICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgdGhpcy5jaGFyYWN0ZXJzLnNvbWUoY2hhcmFjdGVyID0+XHJcbiAgICAgICAgICB0aGlzLmNoZWNrQ2hhcmFjdGVyc0ludGVyc2VjdGlvbih0aGlzLmhlcm8sIGNoYXJhY3RlcilcclxuICAgICAgICApXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMubG9zZUdhbWUoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZHJhd0NoYXJhY3RlcihjaGFyYWN0ZXIpIHtcclxuICAgIHRoaXMuY29udGV4dC5kcmF3SW1hZ2UoXHJcbiAgICAgIGNoYXJhY3Rlci5nZXROZXh0U3ByaXRlKCksXHJcbiAgICAgIGNoYXJhY3Rlci5wb3NpdGlvbi54LFxyXG4gICAgICBjaGFyYWN0ZXIucG9zaXRpb24ueSxcclxuICAgICAgY2hhcmFjdGVyLndpZHRoLFxyXG4gICAgICBjaGFyYWN0ZXIuaGVpZ2h0XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZ2V0U2NvcmUoKSB7XHJcbiAgICByZXR1cm4gTWF0aC5yb3VuZCgobmV3IERhdGUoKS5nZXRUaW1lKCkgLSB0aGlzLmdhbWVUaW1lcikgLyAxMDApIC8gMTA7XHJcbiAgfVxyXG5cclxuICBjaGVja0NoYXJhY3RlcnNJbnRlcnNlY3Rpb24oaGVybywgZW5lbXkpIHtcclxuICAgIGxldCBkZWx0YVggPSAyMDtcclxuICAgIGxldCBkZWx0YVkgPSAyMDtcclxuICAgIGlmIChcclxuICAgICAgaGVyby5wb3NpdGlvbi54ICsgZGVsdGFYIDw9IGVuZW15LnBvc2l0aW9uLnggKyBlbmVteS53aWR0aCAmJlxyXG4gICAgICBoZXJvLnBvc2l0aW9uLnggKyBoZXJvLndpZHRoID49IGVuZW15LnBvc2l0aW9uLnggKyBkZWx0YVggJiZcclxuICAgICAgKGhlcm8ucG9zaXRpb24ueSArIGRlbHRhWSA8PSBlbmVteS5wb3NpdGlvbi55ICsgZW5lbXkuaGVpZ2h0ICYmXHJcbiAgICAgICAgaGVyby5wb3NpdGlvbi55ICsgaGVyby5oZWlnaHQgPj0gZW5lbXkucG9zaXRpb24ueSArIGRlbHRhWSlcclxuICAgICkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJ1bkdhbWUoKSB7XHJcbiAgICB0aGlzLmdhbWVUaW1lciA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgdGhpcy5nYW1lUGxheXMgPSB0cnVlO1xyXG4gICAgdGhpcy5iYXNlU3BlZWQgPSA1O1xyXG4gICAgdGhpcy5zZXRMZXZlbCgpO1xyXG4gIH1cclxuXHJcbiAgbG9zZUdhbWUoKSB7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy5lbmRHYW1lKCk7XHJcbiAgICAgIGxldCBzY29yZSA9IHRoaXMuZ2V0U2NvcmUoKTtcclxuICAgICAgbGV0IG5hbWUgPSBwcm9tcHQoXHJcbiAgICAgICAgYFlvdXIgc2NvcmUgaXMgJHtzY29yZX0gc2Vjb25kcy5cXG4gRW50ZXIgeW91ciBuYW1lYCxcclxuICAgICAgICAnSVxcJ20gQmF0bWFuJ1xyXG4gICAgICApO1xyXG4gICAgICBuYW1lICYmXHJcbiAgICAgICAgRmlyZVN0b3JlLnNhdmVTY29yZSh7XHJcbiAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgc2NvcmVcclxuICAgICAgICB9KTtcclxuICAgICAgdGhpcy5hZGRFbmRHYW1lQnV0dG9ucygpO1xyXG4gICAgfSwgMCk7XHJcbiAgfVxyXG5cclxuICBlbmRHYW1lKCkge1xyXG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVySGFuZGxlcik7XHJcbiAgICBjbGVhckludGVydmFsKHRoaXMubGV2ZWxUaW1lcik7XHJcbiAgICB0aGlzLmdhbWVQbGF5cyA9IGZhbHNlO1xyXG4gICAgdGhpcy5iYXNlU3BlZWQgPSAwO1xyXG4gICAgdGhpcy5nYW1lT25TY3JlZW4gPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIHNldExldmVsKCkge1xyXG4gICAgdGhpcy5sZXZlbFRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICB0aGlzLmxldmVsICs9IDE7XHJcblxyXG4gICAgICB0aGlzLmNoYXJhY3RlcnMucHVzaChuZXcgRHVtbXlFbmVteSh0aGlzKSk7XHJcbiAgICAgIGlmICh0aGlzLmxldmVsICUgMiA9PT0gMSkge1xyXG4gICAgICAgIHRoaXMuY2hhcmFjdGVycy5wdXNoKG5ldyBTbWFydEVuZW15KHRoaXMpKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5sZXZlbCA+PSAzKSB7XHJcbiAgICAgICAgdGhpcy5mcnVpdHMucHVzaChuZXcgRnJ1aXQodGhpcykpO1xyXG4gICAgICB9XHJcbiAgICAgIGxldCBtZXNzYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIG1lc3NhZ2UuY2xhc3NMaXN0LmFkZCgnbGV2ZWwtdXAnKTtcclxuICAgICAgbWVzc2FnZS5pbm5lckhUTUwgPSBgTGV2ZWwgVXAhIEN1cnJlbnQgbGV2ZWwgLSAke3RoaXMubGV2ZWx9YDtcclxuXHJcbiAgICAgIHRoaXMuY29udGFpbnRlci5hcHBlbmRDaGlsZChtZXNzYWdlKTtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jb250YWludGVyLnJlbW92ZUNoaWxkKG1lc3NhZ2UpO1xyXG4gICAgICB9LCAxMDAwKTtcclxuICAgIH0sIDEwMDAwKTtcclxuICB9XHJcblxyXG4gIGFkZEVuZEdhbWVCdXR0b25zKCkge1xyXG4gICAgbGV0IGRpdkZvckJ1dHRvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGRpdkZvckJ1dHRvbnMuY2xhc3NMaXN0LmFkZCgnZW5kLWJ1dHRvbnMnKTtcclxuXHJcbiAgICBsZXQgcmVwbGF5QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICByZXBsYXlCdXR0b24uaW5uZXJIVE1MID0gJ1dhdGNoIHJlcGxheSc7XHJcbiAgICByZXBsYXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJ3dhdGNocmVwbGF5JztcclxuICAgIH0pO1xyXG5cclxuICAgIGxldCBzdGFydE5ld0dhbWVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgIHN0YXJ0TmV3R2FtZUJ1dHRvbi5pbm5lckhUTUwgPSAnU3RhcnQgbmV3IGdhbWUnO1xyXG4gICAgc3RhcnROZXdHYW1lQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICduZXdnYW1lJztcclxuICAgIH0pO1xyXG5cclxuICAgIGRpdkZvckJ1dHRvbnMuYXBwZW5kQ2hpbGQocmVwbGF5QnV0dG9uKTtcclxuICAgIGRpdkZvckJ1dHRvbnMuYXBwZW5kQ2hpbGQoc3RhcnROZXdHYW1lQnV0dG9uKTtcclxuXHJcbiAgICB0aGlzLmNvbnRhaW50ZXIuYXBwZW5kQ2hpbGQoZGl2Rm9yQnV0dG9ucyk7XHJcbiAgfVxyXG4gIHNldFVwSGVybygpIHtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBldmVudCA9PiB7XHJcbiAgICAgIGlmICh0aGlzLmdhbWVPblNjcmVlbikge1xyXG4gICAgICAgIHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xyXG4gICAgICAgICAgY2FzZSAzNzoge1xyXG4gICAgICAgICAgICB0aGlzLmhlcm8uZGlyZWN0aW9uQW5nbGUgPSBNYXRoLlBJO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNhc2UgMzg6IHtcclxuICAgICAgICAgICAgdGhpcy5oZXJvLmRpcmVjdGlvbkFuZ2xlID0gTWF0aC5QSSAvIDI7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY2FzZSAzOToge1xyXG4gICAgICAgICAgICB0aGlzLmhlcm8uZGlyZWN0aW9uQW5nbGUgPSAwO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNhc2UgNDA6IHtcclxuICAgICAgICAgICAgdGhpcy5oZXJvLmRpcmVjdGlvbkFuZ2xlID0gKE1hdGguUEkgLyAyKSAqIDM7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5nYW1lUGxheXMpIHtcclxuICAgICAgICAgIHRoaXMucnVuR2FtZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRVcENhbnZhcygpIHtcclxuICAgIHRoaXMuZ2FtZU9uU2NyZWVuID0gdHJ1ZTtcclxuICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICB0aGlzLmNvbnRhaW50ZXIuaW5uZXJIVE1MID0gJyc7XHJcbiAgICB0aGlzLmNvbnRhaW50ZXIuYXBwZW5kQ2hpbGQodGhpcy5jYW52YXMpO1xyXG4gICAgdGhpcy5jYW52YXMud2lkdGggPSB0aGlzLndpZHRoO1xyXG4gICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XHJcbiAgICB0aGlzLmNvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gIH1cclxuXHJcbiAgcmVwbGF5R2FtZSgpIHtcclxuICAgIGNsZWFySW50ZXJ2YWwodGhpcy5yZXBsYXlUaW1lcik7XHJcbiAgICBsZXQgY3VycmVudFN0YXRlID0gMDtcclxuICAgIHRoaXMucmVwbGF5VGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgIGlmIChjdXJyZW50U3RhdGUgPj0gKHRoaXMucmVwbGF5RGF0YSB8fCBbXSkubGVuZ3RoKSB7XHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnJlcGxheVRpbWVyKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XHJcblxyXG4gICAgICBsZXQgc3RhdGUgPSB0aGlzLnJlcGxheURhdGFbY3VycmVudFN0YXRlXTtcclxuICAgICAgc3RhdGUuZm9yRWFjaChkYXRhID0+IHtcclxuICAgICAgICBkYXRhLmNoYXJhY3Rlci5wZXJzb25TdGF0ZSA9IGRhdGEuc3RhdGU7XHJcbiAgICAgICAgdGhpcy5kcmF3Q2hhcmFjdGVyKGRhdGEuY2hhcmFjdGVyKTtcclxuICAgICAgfSk7XHJcbiAgICAgIGN1cnJlbnRTdGF0ZSsrO1xyXG4gICAgfSwgMjApO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUGVyc29uIGZyb20gJy4vcGVyc29uJztcclxuaW1wb3J0IGltYWdlU291cmNlIGZyb20gJy4uL3V0aWxzL2ltYWdlc1NvdXJjZSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIZXJvIGV4dGVuZHMgUGVyc29uIHtcclxuICBjb25zdHJ1Y3RvcihnYW1lU3RhdGUpIHtcclxuICAgIHN1cGVyKGdhbWVTdGF0ZSwgJ2tuaWdodCcpO1xyXG5cclxuICAgIHRoaXMucG9zaXRpb24gPSB7XHJcbiAgICAgIHg6ICh0aGlzLmdhbWUud2lkdGggLSA1MCkgLyAyLFxyXG4gICAgICB5OiB0aGlzLmdhbWUuaGVpZ2h0IC0gMTAwXHJcbiAgICB9O1xyXG4gICAgdGhpcy5yYWdlTW9kZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5zcHJpdGVzID0gdGhpcy5zcHJpdGVzQ29sbGVjdGlvbi5kb3duO1xyXG4gICAgdGhpcy5kaXJlY3Rpb25BbmdsZSA9IE1hdGguUEkgLyAyO1xyXG4gIH1cclxuXHJcbiAgZ2V0U3BlZWQoKSB7XHJcbiAgICB0aGlzLnNwZWVkID0gdGhpcy5nYW1lLmJhc2VTcGVlZCAqIHRoaXMuZ2FtZS5sZXZlbDtcclxuICB9XHJcbiAgZW5hYmxlUmFnZSgpIHtcclxuICAgIHRoaXMucmFnZU1vZGUgPSB0cnVlO1xyXG4gICAgdGhpcy5zZWxlY3RTcHJpdGVzQ29sbGVjdGlvbigpO1xyXG4gICAgdGhpcy5nYW1lLmNhbnZhcy5jbGFzc0xpc3QuYWRkKCdyYWdlLWNhbnZhcycpO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmdhbWUuY2FudmFzLmNsYXNzTGlzdC5yZW1vdmUoJ3JhZ2UtY2FudmFzJyksIDMwMDApO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMucmFnZU1vZGUgPSBmYWxzZTtcclxuICAgICAgdGhpcy5zZWxlY3RTcHJpdGVzQ29sbGVjdGlvbigpO1xyXG4gICAgfSwgMzUwMCk7XHJcbiAgfVxyXG5cclxuICBnZXQgcGVyc29uU3RhdGUoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB4OiB0aGlzLnBvc2l0aW9uLngsXHJcbiAgICAgIHk6IHRoaXMucG9zaXRpb24ueSxcclxuICAgICAgZGlyZWN0aW9uQW5nbGU6IHRoaXMuZGlyZWN0aW9uQW5nbGUsXHJcbiAgICAgIHJhZ2VNb2RlOiB0aGlzLnJhZ2VNb2RlXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0IHBlcnNvblN0YXRlKG5ld1Bvc2l0aW9uKSB7XHJcbiAgICB0aGlzLmRpcmVjdGlvbkFuZ2xlID0gbmV3UG9zaXRpb24uZGlyZWN0aW9uQW5nbGU7XHJcbiAgICB0aGlzLnBvc2l0aW9uLnggPSBuZXdQb3NpdGlvbi54O1xyXG4gICAgdGhpcy5wb3NpdGlvbi55ID0gbmV3UG9zaXRpb24ueTtcclxuICAgIGlmICh0aGlzLnJhZ2VNb2RlICE9PSBuZXdQb3NpdGlvbi5yYWdlTW9kZSkge1xyXG4gICAgICB0aGlzLnJhZ2VNb2RlID0gbmV3UG9zaXRpb24ucmFnZU1vZGU7XHJcbiAgICAgIHRoaXMuc3ByaXRlc0NvbGxlY3Rpb24gPSB0aGlzLnJhZ2VNb2RlXHJcbiAgICAgICAgPyB0aGlzLmZ1cnlTcHJpdGVzQ29sbGVjdGlvblxyXG4gICAgICAgIDogdGhpcy5ub3JtYWxTcHJpdGVzQ29sbGV0Y2lvbjtcclxuICAgICAgdGhpcy5zZWxlY3RTcHJpdGVzKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZWxlY3RTcHJpdGVzQ29sbGVjdGlvbigpIHtcclxuICAgIGlmICh0aGlzLnJhZ2VNb2RlID09PSB0cnVlKSB7XHJcbiAgICAgIHRoaXMuc3ByaXRlc0NvbGxlY3Rpb24gPSB0aGlzLmZ1cnlTcHJpdGVzQ29sbGVjdGlvbjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc3ByaXRlc0NvbGxlY3Rpb24gPSB0aGlzLm5vcm1hbFNwcml0ZXNDb2xsZXRjaW9uO1xyXG4gICAgfVxyXG4gICAgdGhpcy53aWR0aCA9IHRoaXMuc3ByaXRlc0NvbGxlY3Rpb24udXBbMF0ud2lkdGg7XHJcbiAgICB0aGlzLnNlbGVjdFNwcml0ZXMoKTtcclxuICB9XHJcblxyXG4gIGdldEFsbFNwcml0ZXMoKSB7XHJcbiAgICB0aGlzLm5vcm1hbFNwcml0ZXNDb2xsZXRjaW9uID0ge1xyXG4gICAgICBsZWZ0OiB0aGlzLmdldFNwcml0ZXMoaW1hZ2VTb3VyY2VbdGhpcy5zZWxlY3Rvcl0ubm9ybWFsLmxlZnQpLFxyXG4gICAgICByaWdodDogdGhpcy5nZXRTcHJpdGVzKGltYWdlU291cmNlW3RoaXMuc2VsZWN0b3JdLm5vcm1hbC5yaWdodCksXHJcbiAgICAgIHVwOiB0aGlzLmdldFNwcml0ZXMoaW1hZ2VTb3VyY2VbdGhpcy5zZWxlY3Rvcl0ubm9ybWFsLnVwKSxcclxuICAgICAgZG93bjogdGhpcy5nZXRTcHJpdGVzKGltYWdlU291cmNlW3RoaXMuc2VsZWN0b3JdLm5vcm1hbC5kb3duKVxyXG4gICAgfTtcclxuICAgIHRoaXMuc3ByaXRlc0NvbGxlY3Rpb24gPSB0aGlzLm5vcm1hbFNwcml0ZXNDb2xsZXRjaW9uO1xyXG4gICAgdGhpcy5mdXJ5U3ByaXRlc0NvbGxlY3Rpb24gPSB7XHJcbiAgICAgIGxlZnQ6IHRoaXMuZ2V0U3ByaXRlcyhpbWFnZVNvdXJjZVt0aGlzLnNlbGVjdG9yXS5yYWdlLmxlZnQpLFxyXG4gICAgICByaWdodDogdGhpcy5nZXRTcHJpdGVzKGltYWdlU291cmNlW3RoaXMuc2VsZWN0b3JdLnJhZ2UucmlnaHQpLFxyXG4gICAgICB1cDogdGhpcy5nZXRTcHJpdGVzKGltYWdlU291cmNlW3RoaXMuc2VsZWN0b3JdLnJhZ2UudXApLFxyXG4gICAgICBkb3duOiB0aGlzLmdldFNwcml0ZXMoaW1hZ2VTb3VyY2VbdGhpcy5zZWxlY3Rvcl0ucmFnZS5kb3duKVxyXG4gICAgfTtcclxuICAgIHRoaXMuc3ByaXRlc0NvbGxlY3Rpb24udXBbMF0ub25sb2FkID0gZXYgPT4ge1xyXG4gICAgICB0aGlzLndpZHRoID0gZXYudGFyZ2V0LndpZHRoO1xyXG4gICAgICB0aGlzLmhlaWdodCA9IGV2LnRhcmdldC5oZWlnaHQ7XHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgaW1hZ2VTb3VyY2UgZnJvbSAnLi4vdXRpbHMvaW1hZ2VzU291cmNlJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGVyc29uIHtcclxuICBjb25zdHJ1Y3RvcihnYW1lU3RhdGUsIHNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLndpZHRoID0gMDtcclxuICAgIHRoaXMuaGVpZ2h0ID0gMDtcclxuICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3RvcjtcclxuICAgIHRoaXMuZ2V0QWxsU3ByaXRlcygpO1xyXG4gICAgdGhpcy5nYW1lID0gZ2FtZVN0YXRlO1xyXG4gICAgdGhpcy5kaXJlY3Rpb25BbmdsZSA9IDIgKiBNYXRoLlBJICogTWF0aC5yYW5kb20oKTtcclxuICAgIHRoaXMuc3BlZWQgPSAoZ2FtZVN0YXRlLmxldmVsICogZ2FtZVN0YXRlLmJhc2VTcGVlZCkgLyAyO1xyXG4gICAgdGhpcy5jdXJyZW50SW1nID0gMDtcclxuICB9XHJcbiAgc2VsZWN0U3ByaXRlcygpIHtcclxuICAgIGlmIChcclxuICAgICAgdGhpcy5kaXJlY3Rpb25BbmdsZSA+PSAoTWF0aC5QSSAqIDUpIC8gNCAmJlxyXG4gICAgICB0aGlzLmRpcmVjdGlvbkFuZ2xlIDw9IChNYXRoLlBJICogNykgLyA0XHJcbiAgICApIHtcclxuICAgICAgdGhpcy5zcHJpdGVzID0gdGhpcy5zcHJpdGVzQ29sbGVjdGlvbi5kb3duO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMuZGlyZWN0aW9uQW5nbGUgPj0gTWF0aC5QSSAvIDQgJiZcclxuICAgICAgdGhpcy5kaXJlY3Rpb25BbmdsZSA8PSAoTWF0aC5QSSAqIDMpIC8gNFxyXG4gICAgKSB7XHJcbiAgICAgIHRoaXMuc3ByaXRlcyA9IHRoaXMuc3ByaXRlc0NvbGxlY3Rpb24udXA7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChcclxuICAgICAgdGhpcy5kaXJlY3Rpb25BbmdsZSA+PSAoTWF0aC5QSSAqIDMpIC8gNCAmJlxyXG4gICAgICB0aGlzLmRpcmVjdGlvbkFuZ2xlIDw9IChNYXRoLlBJICogNSkgLyA0XHJcbiAgICApIHtcclxuICAgICAgdGhpcy5zcHJpdGVzID0gdGhpcy5zcHJpdGVzQ29sbGVjdGlvbi5sZWZ0O1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLnNwcml0ZXMgPSB0aGlzLnNwcml0ZXNDb2xsZWN0aW9uLnJpZ2h0O1xyXG4gIH1cclxuXHJcbiAgZ2V0IGRpcmVjdGlvbkFuZ2xlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2RpcmVjdGlvbkFuZ2xlO1xyXG4gIH1cclxuXHJcbiAgc2V0IGRpcmVjdGlvbkFuZ2xlKG5ld1ZhbHVlKSB7XHJcbiAgICB0aGlzLl9kaXJlY3Rpb25BbmdsZSA9IG5ld1ZhbHVlO1xyXG4gICAgdGhpcy5zZWxlY3RTcHJpdGVzKCk7XHJcbiAgfVxyXG5cclxuICBnZXQgcGVyc29uU3RhdGUoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB4OiB0aGlzLnBvc2l0aW9uLngsXHJcbiAgICAgIHk6IHRoaXMucG9zaXRpb24ueSxcclxuICAgICAgZGlyZWN0aW9uQW5nbGU6IHRoaXMuZGlyZWN0aW9uQW5nbGVcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXQgcGVyc29uU3RhdGUobmV3UG9zaXRpb24pIHtcclxuICAgIHRoaXMuZGlyZWN0aW9uQW5nbGUgPSBuZXdQb3NpdGlvbi5kaXJlY3Rpb25BbmdsZTtcclxuICAgIHRoaXMucG9zaXRpb24ueCA9IG5ld1Bvc2l0aW9uLng7XHJcbiAgICB0aGlzLnBvc2l0aW9uLnkgPSBuZXdQb3NpdGlvbi55O1xyXG4gIH1cclxuXHJcbiAgZ2V0QWxsU3ByaXRlcygpIHtcclxuICAgIHRoaXMuc3ByaXRlc0NvbGxlY3Rpb24gPSB7XHJcbiAgICAgIGxlZnQ6IHRoaXMuZ2V0U3ByaXRlcyhpbWFnZVNvdXJjZVt0aGlzLnNlbGVjdG9yXS5sZWZ0KSxcclxuICAgICAgcmlnaHQ6IHRoaXMuZ2V0U3ByaXRlcyhpbWFnZVNvdXJjZVt0aGlzLnNlbGVjdG9yXS5yaWdodCksXHJcbiAgICAgIHVwOiB0aGlzLmdldFNwcml0ZXMoaW1hZ2VTb3VyY2VbdGhpcy5zZWxlY3Rvcl0udXApLFxyXG4gICAgICBkb3duOiB0aGlzLmdldFNwcml0ZXMoaW1hZ2VTb3VyY2VbdGhpcy5zZWxlY3Rvcl0uZG93bilcclxuICAgIH07XHJcbiAgICB0aGlzLnNwcml0ZXNDb2xsZWN0aW9uLnVwWzBdLm9ubG9hZCA9IGV2ID0+IHtcclxuICAgICAgdGhpcy53aWR0aCA9IGV2LnRhcmdldC53aWR0aDtcclxuICAgICAgdGhpcy5oZWlnaHQgPSBldi50YXJnZXQuaGVpZ2h0O1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGdldFNwcml0ZXMoaW1hZ2VzKSB7XHJcbiAgICByZXR1cm4gaW1hZ2VzLm1hcChzcmMgPT4ge1xyXG4gICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XHJcbiAgICAgIGltZy5zcmMgPSBzcmM7XHJcbiAgICAgIHJldHVybiBpbWc7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgZ2V0TmV4dFNwcml0ZSgpIHtcclxuICAgIHRoaXMuc3RlcCgpO1xyXG4gICAgaWYgKHRoaXMuY3VycmVudEltZyA+PSB0aGlzLnNwcml0ZXMubGVuZ3RoKSB7XHJcbiAgICAgIHRoaXMuY3VycmVudEltZyA9IDA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5zcHJpdGVzW3RoaXMuY3VycmVudEltZysrXTtcclxuICB9XHJcblxyXG4gIHN0ZXAoKSB7XHJcbiAgICB0aGlzLmdldFNwZWVkKCk7XHJcbiAgICB0aGlzLnBvc2l0aW9uLnggKz0gTWF0aC5jb3ModGhpcy5kaXJlY3Rpb25BbmdsZSkgKiB0aGlzLnNwZWVkO1xyXG4gICAgaWYgKHRoaXMucG9zaXRpb24ueCArIHRoaXMud2lkdGggLyAyID4gdGhpcy5nYW1lLndpZHRoKSB7XHJcbiAgICAgIHRoaXMucG9zaXRpb24ueCA9IC10aGlzLndpZHRoIC8gMjtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnBvc2l0aW9uLnggKyB0aGlzLndpZHRoIC8gMiA8IDApIHtcclxuICAgICAgdGhpcy5wb3NpdGlvbi54ID0gdGhpcy5nYW1lLndpZHRoIC0gdGhpcy53aWR0aCAvIDI7XHJcbiAgICB9XHJcbiAgICB0aGlzLnBvc2l0aW9uLnkgLT0gTWF0aC5zaW4odGhpcy5kaXJlY3Rpb25BbmdsZSkgKiB0aGlzLnNwZWVkO1xyXG4gICAgaWYgKHRoaXMucG9zaXRpb24ueSArIHRoaXMuaGVpZ2h0IC8gMiA+IHRoaXMuZ2FtZS5oZWlnaHQpIHtcclxuICAgICAgdGhpcy5wb3NpdGlvbi55ID0gLXRoaXMuaGVpZ2h0IC8gMjtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnBvc2l0aW9uLnkgKyB0aGlzLmhlaWdodCAvIDIgPCAwKSB7XHJcbiAgICAgIHRoaXMucG9zaXRpb24ueSA9IHRoaXMuZ2FtZS5oZWlnaHQgLSB0aGlzLmhlaWdodCAvIDI7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldFNwZWVkKCkge1xyXG4gICAgdGhpcy5zcGVlZCA9ICh0aGlzLmdhbWUuYmFzZVNwZWVkICogdGhpcy5nYW1lLmxldmVsKSAvIDI7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBFbmVteSBmcm9tICcuL2VuZW15JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNtYXJ0RW5lbXkgZXh0ZW5kcyBFbmVteSB7XHJcbiAgY29uc3RydWN0b3IoZ2FtZVN0YXRlKSB7XHJcbiAgICBzdXBlcihnYW1lU3RhdGUsICdyb2d1ZScpO1xyXG4gICAgdGhpcy5yYW5nZSA9IDMwMDtcclxuICB9XHJcbiAgc3RlcCgpIHtcclxuICAgIGxldCBoZXJvUG9zaXRpb24gPSB0aGlzLmdhbWUuaGVyby5wb3NpdGlvbjtcclxuICAgIGxldCBlbmVteVBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbjtcclxuICAgIGlmIChcclxuICAgICAgdGhpcy5nZXREaXN0YW5jZVRvSGVybygpIDw9IHRoaXMucmFuZ2UgJiZcclxuICAgICAgaGVyb1Bvc2l0aW9uLnggIT09IGVuZW15UG9zaXRpb24ueFxyXG4gICAgKSB7XHJcbiAgICAgIGxldCBhdGFuID0gTWF0aC5hdGFuKFxyXG4gICAgICAgIChoZXJvUG9zaXRpb24ueSAtIGVuZW15UG9zaXRpb24ueSkgLyAoaGVyb1Bvc2l0aW9uLnggLSBlbmVteVBvc2l0aW9uLngpXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgKGhlcm9Qb3NpdGlvbi54ID4gZW5lbXlQb3NpdGlvbi54ICYmXHJcbiAgICAgICAgICBoZXJvUG9zaXRpb24ueSA8IGVuZW15UG9zaXRpb24ueSkgfHxcclxuICAgICAgICAoaGVyb1Bvc2l0aW9uLnggPiBlbmVteVBvc2l0aW9uLnggJiYgaGVyb1Bvc2l0aW9uLnkgPiBlbmVteVBvc2l0aW9uLnkpXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uQW5nbGUgPSAyICogTWF0aC5QSSAtIGF0YW47XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb25BbmdsZSA9IE1hdGguUEkgLSBhdGFuO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBzdXBlci5zdGVwKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBSb3V0ZXIgZnJvbSAnLi91dGlscy9yb3V0ZXInO1xyXG5pbXBvcnQgcm91dGVzIGZyb20gJy4vcm91dGVzJztcclxuaW1wb3J0IGFkZEJ1dHRvbnNGb3JNb2JpbGUgZnJvbSAnLi91dGlscy9hZGRCdXR0b25zRm9yTW9iaWxlJztcclxuXHJcbmFkZEJ1dHRvbnNGb3JNb2JpbGUoKTtcclxubmV3IFJvdXRlcihyb3V0ZXMpO1xyXG4iLCJpbXBvcnQgR2FtZVN0YXRlIGZyb20gJy4vZ2FtZU9iamVjdHMvZ2FtZVN0YXRlJztcclxuaW1wb3J0IEZpcmVTdG9yZSBmcm9tICcuL3V0aWxzL2ZpcmViYXNlJztcclxuXHJcbmxldCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQnKTtcclxubGV0IGdhbWUgPSBuZXcgR2FtZVN0YXRlKGNvbnRlbnQpO1xyXG5cclxuY29uc3Qgcm91dGVzID0gW1xyXG4gIHtcclxuICAgIG1hdGNoOiAnJyxcclxuICAgIG9uRW50ZXI6ICgpID0+IHtcclxuICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAnZ2FtZSc7XHJcbiAgICB9XHJcbiAgfSxcclxuICB7XHJcbiAgICBtYXRjaDogJ2Fib3V0JyxcclxuICAgIG9uRW50ZXI6ICgpID0+IHtcclxuICAgICAgY2hhbmdlQWN0aXZlUGFnZSgnYWJvdXQnKTtcclxuICAgICAgY29udGVudC5pbm5lckhUTUwgPSBgPGgxPlxyXG4gICAgICAgICAgICAgPHNwYW4+U3VwZXIgYXJjYWRlIGdhbWU8L3NwYW4+XHJcbiAgICAgICAgICAgIDwvaDE+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ3LTEwMFwiPjwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgPGgyPkF1dGhvclxyXG4gICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20vY2l0cmluaW5cIj5LYXRlIEt1emtpbmE8L2E+XHJcbiAgICAgICAgICAgICAgICA8L2gyPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFib3V0XCI+XHJcbiAgICAgICAgICAgICAgICA8c3Bhbj5UaGlzIGlzIGFuIGFyY2FkZSBnYW1lIHdoZXJlIFlvdSB3aWxsIHBsYXkgYXMga25pZ2h0Ljwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwia25pZ2h0L2tuaWdodF9ydW5fZG93bl8wMDAucG5nXCIgLz4gPGJyLz5cclxuICAgICAgICAgICAgICAgIDxzcGFuPllvdSBjYW4gY29udHJvbCBrbmlnaHQgd2l0aCBhcnJvdyBrZXlzIG9yIGlmIHlvdSBwbGF5IG9uIG1vYmlsZSBwaG9uZSB3aXRoIGJ1dHRvbnMgb24gc2NyZWVuLjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDxici8+IFxyXG4gICAgICAgICAgICAgICAgPHNwYW4+WW91ciBnb2FsIGlzIHRvIHN0YXkgYWxpdmUgYXMgbG9uZyBhcyBwb3NzaWJsZSBkZXNwaXRlIHRoZSBlbmVtaWVzIHRoYXQgd2FudCB0byBraWxsIFlvdS4gPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPGJyLz5cclxuICAgICAgICAgICAgICAgIDxzcGFuPlRoaXMgaXMgR29ibGluIOKAkyBkdW1teSBlbmVteS4gPGltZyBzcmM9XCJnb2JsaW4vZ29ibGluX3J1bl9kb3duXzAwMC5wbmdcIiB3aWR0aD1cIjM1XCIgLz4gXHJcbiAgICAgICAgICAgICAgICBIZSB3aWxsIHJ1biBpbiByYW5kb20gZGlyZWN0aW9uIGFsbCB0aGUgdGltZS4gPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPGJyLz5cclxuICAgICAgICAgICAgICAgIDxzcGFuPlRoaXMgaXMgUm9ndWUg4oCTIHNtYXJ0IGVuZW15LiAgPGltZyBzcmM9XCJyb2d1ZS9yb2d1ZV9ydW5fZG93bl8wMDAucG5nXCIgd2lkdGg9XCI0MFwiIC8+SGUgd2lsbCBhbHNvIHJ1biBpbiByYW5kb20gZGlyZWN0aW9uXHJcbiAgICAgICAgICAgICAgICBidXQgaWYgaGUgd2lsbCBzZWUgWW91IGFyb3VuZCDigJMgaGUgd2lsbCBjaGFzZSB5b3UgdGlsbCB5b3UgcmFuIGF3YXkuPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPGJyLz5cclxuICAgICAgICAgICAgICAgIDxzcGFuPiBTb21ldGltZXMgb24gdGhlIHNjcmVlbiBjYW4gYXBwZWFyIGZydWl0cy5cclxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiZm9vZC9BcHBsZS5wbmdcIj5cclxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiZm9vZC9Bdm9jYWRvLnBuZ1wiPlxyXG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJmb29kL0NoZXJyeS5wbmdcIj5cclxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiZm9vZC9MZW1vbi5wbmdcIj5cclxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiZm9vZC9NZWxvbldhdGVyLnBuZ1wiPlxyXG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJmb29kL1BlYWNoLnBuZ1wiPlxyXG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJmb29kL1N0cmF3YmVycnkucG5nXCI+XHJcbiAgICAgICAgICAgICAgICBUaGV5IHdpbGwgZ2l2ZSB5b3UgcG93ZXIgdG8gZmlnaHQgd2l0aCBlbmVtaWVzLCBidXQgb25seSBmb3IgMyBzZWNvbmRzLjxzcGFuPjxici8+XHJcbiAgICAgICAgICAgICAgICA8c3Bhbj5Hb29kIGx1Y2shPC9zcGFuPlxyXG4gICAgICAgICAgICA8L2Rpdj5gO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAge1xyXG4gICAgbWF0Y2g6ICdnYW1lJyxcclxuICAgIG9uRW50ZXI6ICgpID0+IHtcclxuICAgICAgY2hhbmdlQWN0aXZlUGFnZSgnZ2FtZScpO1xyXG4gICAgICBnYW1lLnNldFVwR2FtZSgpO1xyXG4gICAgfSxcclxuICAgIG9uTGVhdmU6ICgpID0+IHtcclxuICAgICAgZ2FtZS5lbmRHYW1lKCk7XHJcbiAgICB9XHJcbiAgfSxcclxuICB7XHJcbiAgICBtYXRjaDogJ3Njb3JlcycsXHJcbiAgICBvbkVudGVyOiAoKSA9PiB7XHJcbiAgICAgIGNoYW5nZUFjdGl2ZVBhZ2UoJ3Njb3JlcycpO1xyXG5cclxuICAgICAgRmlyZVN0b3JlLmdldFNjb3JlcygpLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICBjb250ZW50LmlubmVySFRNTCA9ICc8aDEgY2xhc3M9XCJhYm91dFwiPjxzcGFuPlNjb3Jlczwvc3Bhbj48L2gxPic7XHJcbiAgICAgICAgbGV0IG9sID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb2wnKTtcclxuICAgICAgICByZXN1bHQuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgIGxldCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICAgICAgICBsaS5pbm5lckhUTUwgPSBgJHtpdGVtLm5hbWV9IC0gJHtpdGVtLnNjb3JlfWA7XHJcbiAgICAgICAgICBvbC5hcHBlbmRDaGlsZChsaSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBkaXZGb3JEaXZpc2lvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGRpdkZvckRpdmlzaW9uLmNsYXNzTGlzdC5hZGQoJ3ctMTAwJyk7XHJcbiAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChkaXZGb3JEaXZpc2lvbik7XHJcbiAgICAgICAgbGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChvbCk7XHJcbiAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChkaXYpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9LFxyXG4gIHtcclxuICAgIG1hdGNoOiAncmVwbGF5JyxcclxuICAgIG9uRW50ZXI6ICgpID0+IHtcclxuICAgICAgaWYgKChnYW1lLnJlcGxheURhdGEgfHwgW10pLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJ2dhbWUnO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBnYW1lLnJlcGxheUdhbWUoKTtcclxuICAgIH1cclxuICB9LFxyXG4gIHtcclxuICAgIG1hdGNoOiAnd2F0Y2hyZXBsYXknLFxyXG4gICAgb25FbnRlcjogKCkgPT4ge1xyXG4gICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICdyZXBsYXknO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAge1xyXG4gICAgbWF0Y2g6ICduZXdnYW1lJyxcclxuICAgIG9uRW50ZXI6ICgpID0+IHtcclxuICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAnZ2FtZSc7XHJcbiAgICB9XHJcbiAgfVxyXG5dO1xyXG5cclxuZnVuY3Rpb24gY2hhbmdlQWN0aXZlUGFnZShuZXdQYWdlKSB7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGl2ZScpLmNsYXNzTmFtZSA9ICcnO1xyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtocmVmPVwiIyR7bmV3UGFnZX1cIl1gKS5wYXJlbnRFbGVtZW50LmNsYXNzTmFtZSA9XHJcbiAgICAnYWN0aXZlJztcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgcm91dGVzO1xyXG4iLCJpbXBvcnQgZGV0ZWN0TW9iaWxlIGZyb20gJy4vZGV0ZWN0TW9iaWxlJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGFkZEJ1dHRvbnNGb3JNb2JpbGUoKSB7XHJcbiAgaWYgKGRldGVjdE1vYmlsZSgpKSB7XHJcbiAgICB2YXIgZGl2Rm9yQnV0dG9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgZGl2Rm9yQnV0dG9ucy5jbGFzc0xpc3QuYWRkKCdidXR0b25zJyk7XHJcblxyXG4gICAgdmFyIGJ1dHRvbkxlZnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgIGJ1dHRvbkxlZnQuaW5uZXJIVE1MID0gJzwnO1xyXG4gICAgYnV0dG9uTGVmdC5jbGFzc0xpc3QuYWRkKCdsZWZ0Jyk7XHJcblxyXG4gICAgdmFyIGJ1dHRvblVwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICBidXR0b25VcC5pbm5lckhUTUwgPSAnXic7XHJcbiAgICBidXR0b25VcC5jbGFzc0xpc3QuYWRkKCd1cCcpO1xyXG5cclxuICAgIHZhciBidXR0b25SaWdodCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgYnV0dG9uUmlnaHQuaW5uZXJIVE1MID0gJz4nO1xyXG4gICAgYnV0dG9uUmlnaHQuY2xhc3NMaXN0LmFkZCgncmlnaHQnKTtcclxuXHJcbiAgICB2YXIgYnV0dG9uRG93biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgYnV0dG9uRG93bi5pbm5lckhUTUwgPSAndic7XHJcbiAgICBidXR0b25Eb3duLmNsYXNzTGlzdC5hZGQoJ2Rvd24nKTtcclxuXHJcbiAgICBkaXZGb3JCdXR0b25zLmFwcGVuZENoaWxkKGJ1dHRvbkxlZnQpO1xyXG4gICAgZGl2Rm9yQnV0dG9ucy5hcHBlbmRDaGlsZChidXR0b25VcCk7XHJcbiAgICBkaXZGb3JCdXR0b25zLmFwcGVuZENoaWxkKGJ1dHRvblJpZ2h0KTtcclxuICAgIGRpdkZvckJ1dHRvbnMuYXBwZW5kQ2hpbGQoYnV0dG9uRG93bik7XHJcblxyXG4gICAgZGl2Rm9yQnV0dG9ucy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHtcclxuICAgICAgaWYgKGV2ZW50LnRhcmdldC5tYXRjaGVzKCcucmlnaHQnKSkge1xyXG4gICAgICAgIGxldCBlID0gbmV3IEV2ZW50KCdrZXlkb3duJyk7XHJcbiAgICAgICAgZS5rZXlDb2RlID0gMzk7XHJcbiAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChlKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGV2ZW50LnRhcmdldC5tYXRjaGVzKCcubGVmdCcpKSB7XHJcbiAgICAgICAgbGV0IGUgPSBuZXcgRXZlbnQoJ2tleWRvd24nKTtcclxuICAgICAgICBlLmtleUNvZGUgPSAzNztcclxuICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGUpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZXZlbnQudGFyZ2V0Lm1hdGNoZXMoJy51cCcpKSB7XHJcbiAgICAgICAgbGV0IGUgPSBuZXcgRXZlbnQoJ2tleWRvd24nKTtcclxuICAgICAgICBlLmtleUNvZGUgPSAzODtcclxuICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGUpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZXZlbnQudGFyZ2V0Lm1hdGNoZXMoJy5kb3duJykpIHtcclxuICAgICAgICBsZXQgZSA9IG5ldyBFdmVudCgna2V5ZG93bicpO1xyXG4gICAgICAgIGUua2V5Q29kZSA9IDQwO1xyXG4gICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpdkZvckJ1dHRvbnMpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkZXRlY3Rtb2JpbGUoKSB7XHJcbiAgaWYgKFxyXG4gICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQW5kcm9pZC9pKSB8fFxyXG4gICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvd2ViT1MvaSkgfHxcclxuICAgIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQaG9uZS9pKSB8fFxyXG4gICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBhZC9pKSB8fFxyXG4gICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBvZC9pKSB8fFxyXG4gICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQmxhY2tCZXJyeS9pKSB8fFxyXG4gICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvV2luZG93cyBQaG9uZS9pKVxyXG4gICkge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn1cclxuIiwibGV0IHVybCA9ICdodHRwczovL2thdGUtYXJjYWRlLWdhbWUuZmlyZWJhc2Vpby5jb20vLmpzb24nO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmlyZVN0b3JlIHtcclxuICBzdGF0aWMgZ2V0U2NvcmVzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKHVybCkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpO1xyXG4gIH1cclxuICBzdGF0aWMgc2F2ZVNjb3JlKGluZm9Ub1NhdmUpIHtcclxuICAgIHRoaXMuZ2V0U2NvcmVzKCkudGhlbihzY29yZXMgPT4ge1xyXG4gICAgICBsZXQgbmV3U2NvcmVzID0gWy4uLihzY29yZXMgfHwgW10pLCBpbmZvVG9TYXZlXTtcclxuICAgICAgbmV3U2NvcmVzLnNvcnQoXHJcbiAgICAgICAgKGl0ZW0xLCBpdGVtMikgPT5cclxuICAgICAgICAgIGl0ZW0xLnNjb3JlID4gaXRlbTIuc2NvcmUgPyAtMSA6IGl0ZW0xLnNjb3JlIDwgaXRlbTIuc2NvcmUgPyAxIDogMFxyXG4gICAgICApO1xyXG4gICAgICBuZXdTY29yZXMuc3BsaWNlKDEwKTtcclxuICAgICAgZmV0Y2godXJsLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShuZXdTY29yZXMpXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImNvbnN0IGltYWdlc1NvdXJjZSA9IHtcclxuICBrbmlnaHQ6IHtcclxuICAgIG5vcm1hbDoge1xyXG4gICAgICB1cDogW1xyXG4gICAgICAgICcga25pZ2h0L2tuaWdodF9ydW5fdXBfMDAwLnBuZycsXHJcbiAgICAgICAgJ2tuaWdodC9rbmlnaHRfcnVuX3VwXzAwMS5wbmcnLFxyXG4gICAgICAgICdrbmlnaHQva25pZ2h0X3J1bl91cF8wMDIucG5nJyxcclxuICAgICAgICAna25pZ2h0L2tuaWdodF9ydW5fdXBfMDAzLnBuZycsXHJcbiAgICAgICAgJ2tuaWdodC9rbmlnaHRfcnVuX3VwXzAwNC5wbmcnXHJcbiAgICAgIF0sXHJcbiAgICAgIHJpZ2h0OiBbXHJcbiAgICAgICAgJ2tuaWdodC9rbmlnaHRfcnVuX3JpZ2h0XzAwMC5wbmcnLFxyXG4gICAgICAgICdrbmlnaHQva25pZ2h0X3J1bl9yaWdodF8wMDEucG5nJyxcclxuICAgICAgICAna25pZ2h0L2tuaWdodF9ydW5fcmlnaHRfMDAyLnBuZycsXHJcbiAgICAgICAgJ2tuaWdodC9rbmlnaHRfcnVuX3JpZ2h0XzAwMy5wbmcnLFxyXG4gICAgICAgICdrbmlnaHQva25pZ2h0X3J1bl9yaWdodF8wMDQucG5nJyxcclxuICAgICAgICAna25pZ2h0L2tuaWdodF9ydW5fcmlnaHRfMDA1LnBuZydcclxuICAgICAgXSxcclxuICAgICAgZG93bjogW1xyXG4gICAgICAgICdrbmlnaHQva25pZ2h0X3J1bl9kb3duXzAwMC5wbmcnLFxyXG4gICAgICAgICdrbmlnaHQva25pZ2h0X3J1bl9kb3duXzAwMS5wbmcnLFxyXG4gICAgICAgICdrbmlnaHQva25pZ2h0X3J1bl9kb3duXzAwMi5wbmcnLFxyXG4gICAgICAgICdrbmlnaHQva25pZ2h0X3J1bl9kb3duXzAwMy5wbmcnLFxyXG4gICAgICAgICdrbmlnaHQva25pZ2h0X3J1bl9kb3duXzAwNC5wbmcnXHJcbiAgICAgIF0sXHJcbiAgICAgIGxlZnQ6IFtcclxuICAgICAgICAna25pZ2h0L2tuaWdodF9ydW5fbGVmdF8wMDAucG5nJyxcclxuICAgICAgICAna25pZ2h0L2tuaWdodF9ydW5fbGVmdF8wMDEucG5nJyxcclxuICAgICAgICAna25pZ2h0L2tuaWdodF9ydW5fbGVmdF8wMDIucG5nJyxcclxuICAgICAgICAna25pZ2h0L2tuaWdodF9ydW5fbGVmdF8wMDMucG5nJyxcclxuICAgICAgICAna25pZ2h0L2tuaWdodF9ydW5fbGVmdF8wMDQucG5nJyxcclxuICAgICAgICAna25pZ2h0L2tuaWdodF9ydW5fbGVmdF8wMDUucG5nJ1xyXG4gICAgICBdXHJcbiAgICB9LFxyXG4gICAgcmFnZToge1xyXG4gICAgICB1cDogW1xyXG4gICAgICAgICdrbmlnaHQva25pZ2h0X2tpbGxzX3VwXzAwMC5wbmcnLFxyXG4gICAgICAgICdrbmlnaHQva25pZ2h0X2tpbGxzX3VwXzAwMS5wbmcnLFxyXG4gICAgICAgICdrbmlnaHQva25pZ2h0X2tpbGxzX3VwXzAwMi5wbmcnXHJcbiAgICAgIF0sXHJcbiAgICAgIHJpZ2h0OiBbXHJcbiAgICAgICAgJ2tuaWdodC9rbmlnaHRfa2lsbHNfcmlnaHRfMDAwLnBuZycsXHJcbiAgICAgICAgJ2tuaWdodC9rbmlnaHRfa2lsbHNfcmlnaHRfMDAxLnBuZycsXHJcbiAgICAgICAgJ2tuaWdodC9rbmlnaHRfa2lsbHNfcmlnaHRfMDAyLnBuZydcclxuICAgICAgXSxcclxuICAgICAgZG93bjogW1xyXG4gICAgICAgICdrbmlnaHQva25pZ2h0X2tpbGxzX2Rvd25fMDAwLnBuZycsXHJcbiAgICAgICAgJ2tuaWdodC9rbmlnaHRfa2lsbHNfZG93bl8wMDEucG5nJyxcclxuICAgICAgICAna25pZ2h0L2tuaWdodF9raWxsc19kb3duXzAwMi5wbmcnXHJcbiAgICAgIF0sXHJcbiAgICAgIGxlZnQ6IFtcclxuICAgICAgICAna25pZ2h0L2tuaWdodF9raWxsc19sZWZ0XzAwMC5wbmcnLFxyXG4gICAgICAgICdrbmlnaHQva25pZ2h0X2tpbGxzX2xlZnRfMDAxLnBuZycsXHJcbiAgICAgICAgJ2tuaWdodC9rbmlnaHRfa2lsbHNfbGVmdF8wMDIucG5nJ1xyXG4gICAgICBdXHJcbiAgICB9XHJcbiAgfSxcclxuICByb2d1ZToge1xyXG4gICAgdXA6IFtcclxuICAgICAgJ3JvZ3VlL3JvZ3VlX3J1bl91cF8wMDAucG5nJyxcclxuICAgICAgJ3JvZ3VlL3JvZ3VlX3J1bl91cF8wMDEucG5nJyxcclxuICAgICAgJ3JvZ3VlL3JvZ3VlX3J1bl91cF8wMDIucG5nJyxcclxuICAgICAgJ3JvZ3VlL3JvZ3VlX3J1bl91cF8wMDMucG5nJ1xyXG4gICAgXSxcclxuICAgIHJpZ2h0OiBbXHJcbiAgICAgICdyb2d1ZS9yb2d1ZV9ydW5fcmlnaHRfMDAwLnBuZycsXHJcbiAgICAgICdyb2d1ZS9yb2d1ZV9ydW5fcmlnaHRfMDAxLnBuZycsXHJcbiAgICAgICdyb2d1ZS9yb2d1ZV9ydW5fcmlnaHRfMDAyLnBuZycsXHJcbiAgICAgICdyb2d1ZS9yb2d1ZV9ydW5fcmlnaHRfMDAzLnBuZycsXHJcbiAgICAgICdyb2d1ZS9yb2d1ZV9ydW5fcmlnaHRfMDA0LnBuZycsXHJcbiAgICAgICdyb2d1ZS9yb2d1ZV9ydW5fcmlnaHRfMDA1LnBuZydcclxuICAgIF0sXHJcbiAgICBkb3duOiBbXHJcbiAgICAgICdyb2d1ZS9yb2d1ZV9ydW5fZG93bl8wMDAucG5nJyxcclxuICAgICAgJ3JvZ3VlL3JvZ3VlX3J1bl9kb3duXzAwMS5wbmcnLFxyXG4gICAgICAncm9ndWUvcm9ndWVfcnVuX2Rvd25fMDAyLnBuZycsXHJcbiAgICAgICdyb2d1ZS9yb2d1ZV9ydW5fZG93bl8wMDMucG5nJ1xyXG4gICAgXSxcclxuICAgIGxlZnQ6IFtcclxuICAgICAgJ3JvZ3VlL3JvZ3VlX3J1bl9sZWZ0XzAwMC5wbmcnLFxyXG4gICAgICAncm9ndWUvcm9ndWVfcnVuX2xlZnRfMDAxLnBuZycsXHJcbiAgICAgICdyb2d1ZS9yb2d1ZV9ydW5fbGVmdF8wMDIucG5nJyxcclxuICAgICAgJ3JvZ3VlL3JvZ3VlX3J1bl9sZWZ0XzAwMy5wbmcnLFxyXG4gICAgICAncm9ndWUvcm9ndWVfcnVuX2xlZnRfMDA0LnBuZycsXHJcbiAgICAgICdyb2d1ZS9yb2d1ZV9ydW5fbGVmdF8wMDUucG5nJ1xyXG4gICAgXVxyXG4gIH0sXHJcbiAgZ29ibGluOiB7XHJcbiAgICB1cDogW1xyXG4gICAgICAnZ29ibGluL2dvYmxpbl9ydW5fdXBfMDAwLnBuZycsXHJcbiAgICAgICdnb2JsaW4vZ29ibGluX3J1bl91cF8wMDEucG5nJyxcclxuICAgICAgJ2dvYmxpbi9nb2JsaW5fcnVuX3VwXzAwMi5wbmcnLFxyXG4gICAgICAnZ29ibGluL2dvYmxpbl9ydW5fdXBfMDAzLnBuZydcclxuICAgIF0sXHJcbiAgICByaWdodDogW1xyXG4gICAgICAnZ29ibGluL2dvYmxpbl9ydW5fcmlnaHRfMDAwLnBuZycsXHJcbiAgICAgICdnb2JsaW4vZ29ibGluX3J1bl9yaWdodF8wMDEucG5nJyxcclxuICAgICAgJ2dvYmxpbi9nb2JsaW5fcnVuX3JpZ2h0XzAwMi5wbmcnLFxyXG4gICAgICAnZ29ibGluL2dvYmxpbl9ydW5fcmlnaHRfMDAzLnBuZycsXHJcbiAgICAgICdnb2JsaW4vZ29ibGluX3J1bl9yaWdodF8wMDQucG5nJyxcclxuICAgICAgJ2dvYmxpbi9nb2JsaW5fcnVuX3JpZ2h0XzAwNS5wbmcnXHJcbiAgICBdLFxyXG4gICAgZG93bjogW1xyXG4gICAgICAnZ29ibGluL2dvYmxpbl9ydW5fZG93bl8wMDAucG5nJyxcclxuICAgICAgJ2dvYmxpbi9nb2JsaW5fcnVuX2Rvd25fMDAxLnBuZycsXHJcbiAgICAgICdnb2JsaW4vZ29ibGluX3J1bl9kb3duXzAwMi5wbmcnLFxyXG4gICAgICAnZ29ibGluL2dvYmxpbl9ydW5fZG93bl8wMDMucG5nJ1xyXG4gICAgXSxcclxuICAgIGxlZnQ6IFtcclxuICAgICAgJ2dvYmxpbi9nb2JsaW5fcnVuX2xlZnRfMDAwLnBuZycsXHJcbiAgICAgICdnb2JsaW4vZ29ibGluX3J1bl9sZWZ0XzAwMS5wbmcnLFxyXG4gICAgICAnZ29ibGluL2dvYmxpbl9ydW5fbGVmdF8wMDIucG5nJyxcclxuICAgICAgJ2dvYmxpbi9nb2JsaW5fcnVuX2xlZnRfMDAzLnBuZycsXHJcbiAgICAgICdnb2JsaW4vZ29ibGluX3J1bl9sZWZ0XzAwNC5wbmcnLFxyXG4gICAgICAnZ29ibGluL2dvYmxpbl9ydW5fbGVmdF8wMDUucG5nJ1xyXG4gICAgXVxyXG4gIH0sXHJcbiAgZnJ1aXRzOiBbXHJcbiAgICAnZm9vZC9BcHBsZS5wbmcnLFxyXG4gICAgJ2Zvb2QvQXZvY2Fkby5wbmcnLFxyXG4gICAgJ2Zvb2QvQ2hlcnJ5LnBuZycsXHJcbiAgICAnZm9vZC9MZW1vbi5wbmcnLFxyXG4gICAgJ2Zvb2QvTWVsb25XYXRlci5wbmcnLFxyXG4gICAgJ2Zvb2QvUGVhY2gucG5nJyxcclxuICAgICdmb29kL1N0cmF3YmVycnkucG5nJ1xyXG4gIF1cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGltYWdlc1NvdXJjZTtcclxuIiwiLyoqXHJcbiAqINCk0YPQvdC60YbQuNGPINC00LvRjyDQtNC+0LHQsNCy0LvQtdC90LjRjyDQuCDQvtCx0YDQsNCx0L7RgtC60Lgg0YDQvtGD0YLQvtCyINC90LAg0YHRgtGA0LDQvdC40YbQtVxyXG4gKiBAcGFyYW0geyp9IHJvdXRlUGFyYW1zINC80LDRgdGB0LjQsiDQv9Cw0YDQsNC80LXRgtGA0L7QsiDQtNC70Y8g0L7QsdGA0LDQsdC+0YLQutC4INGA0L7Rg9GC0L7QslxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUm91dGVyKHJvdXRlUGFyYW1zKSB7XHJcbiAgdGhpcy5yb3V0ZXMgPSByb3V0ZVBhcmFtcyB8fCBbXTtcclxuICB0aGlzLmN1cnJlbnRSb3V0ZTtcclxuICB0aGlzLnByZXZpb3VzUm91dGU7XHJcbiAgdGhpcy5jdXJyZW50UGFyYW1zO1xyXG4gIHRoaXMucHJldmlvdXNQYXJhbXM7XHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCAoKSA9PiB7XHJcbiAgICB0aGlzLmhhbmRsZXIod2luZG93LmxvY2F0aW9uLmhhc2gpO1xyXG4gIH0pO1xyXG4gIHRoaXMuaGFuZGxlcih3aW5kb3cubG9jYXRpb24uaGFzaCk7XHJcbn1cclxuXHJcblJvdXRlci5wcm90b3R5cGUgPSB7XHJcbiAgaGFuZGxlcjogZnVuY3Rpb24oaGFzaCkge1xyXG4gICAgdGhpcy5wcmV2aW91c1JvdXRlID0gdGhpcy5jdXJyZW50Um91dGU7XHJcbiAgICB0aGlzLnByZXZpb3VzUGFyYW1zID0gdGhpcy5jdXJyZW50UGFyYW1zO1xyXG4gICAgdGhpcy5jdXJyZW50Um91dGUgPSB0aGlzLmZpbmROZXdSb3V0ZShoYXNoKTtcclxuICAgIHRoaXMubGF1bmNoSGFuZGxlcnMoKTtcclxuICB9LFxyXG4gIGZpbmROZXdSb3V0ZTogZnVuY3Rpb24oaGFzaCkge1xyXG4gICAgaGFzaCA9IGhhc2guc2xpY2UoMSk7XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnJvdXRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICB2YXIgZWxlbWVudCA9IHRoaXMucm91dGVzW2ldO1xyXG4gICAgICBpZiAodHlwZW9mIGVsZW1lbnQubWF0Y2ggPT0gJ3N0cmluZycgJiYgZWxlbWVudC5tYXRjaCA9PT0gaGFzaCkge1xyXG4gICAgICAgIHRoaXMuY3VycmVudFBhcmFtcyA9ICcnO1xyXG4gICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0eXBlb2YgZWxlbWVudC5tYXRjaCA9PSAnZnVuY3Rpb24nICYmIGVsZW1lbnQubWF0Y2goaGFzaCkpIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRQYXJhbXMgPSAnJztcclxuICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZWxlbWVudC5tYXRjaCBpbnN0YW5jZW9mIFJlZ0V4cCAmJiBlbGVtZW50Lm1hdGNoLnRlc3QoaGFzaCkpIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRQYXJhbXMgPSBoYXNoLm1hdGNoKGVsZW1lbnQubWF0Y2gpIHx8IFtdO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFBhcmFtcy5zcGxpY2UoMCwgMSk7XHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIGxhdW5jaEhhbmRsZXJzKCkge1xyXG4gICAgUHJvbWlzZS5yZXNvbHZlKClcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIHRoaXMucHJldmlvdXNSb3V0ZSAmJlxyXG4gICAgICAgICAgdGhpcy5wcmV2aW91c1JvdXRlLm9uTGVhdmUgJiZcclxuICAgICAgICAgIHRoaXMucHJldmlvdXNSb3V0ZS5vbkxlYXZlKHRoaXMucHJldmlvdXNQYXJhbXMpO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50Um91dGUgJiZcclxuICAgICAgICAgIHRoaXMuY3VycmVudFJvdXRlLm9uQmVmb3JlRW50ZXIgJiZcclxuICAgICAgICAgIHRoaXMuY3VycmVudFJvdXRlLm9uQmVmb3JlRW50ZXIodGhpcy5jdXJyZW50UGFyYW1zKTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuY3VycmVudFJvdXRlICYmXHJcbiAgICAgICAgICB0aGlzLmN1cnJlbnRSb3V0ZS5vbkVudGVyICYmXHJcbiAgICAgICAgICB0aGlzLmN1cnJlbnRSb3V0ZS5vbkVudGVyKHRoaXMuY3VycmVudFBhcmFtcyk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxufTtcclxuIl19
