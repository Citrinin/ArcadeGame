!function o(a,s,u){function c(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(h)return h(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[t]={exports:{}};a[t][0].call(i.exports,function(e){return c(a[t][1][e]||e)},i,i.exports,o,a,s,u)}return s[t].exports}for(var h="function"==typeof require&&require,e=0;e<u.length;e++)c(u[e]);return c}({1:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var i,o=e("./person"),a=(i=o)&&i.__esModule?i:{default:i};var s=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,".dummy-enemy-img"));return t.width=75,t.height=95,t.position={x:Math.abs(t.width-t.game.width*Math.random()),y:t.game.height/2*Math.random()},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.default),n}();n.default=s},{"./person":4}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=u(e("./hero")),o=u(e("./dummyEnemy")),a=u(e("./smartEnemy")),s=u(e("../utils/firebase"));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=1e3<=window.innerWidth?1e3:window.innerWidth,this.height=(document.documentElement.clientHeight||document.body.clientHeight)-160,this.containter=e,window.gamestate=[]}return r(t,[{key:"setUpGame",value:function(){var t=this;this.level=1,this.baseSpeed=0,this.canvas=document.createElement("canvas"),this.containter.innerHTML="",this.containter.appendChild(this.canvas),this.canvas.width=this.width,this.canvas.height=this.height,this.context=this.canvas.getContext("2d"),this.characters=new Array(2).fill(0).map(function(){return new o.default(t)}),this.characters.push(new a.default(this)),this.hero=new i.default(this),this.gamePlays=!1,this.gameTimer=0,this.timerHandler=setInterval(function(){t.context.clearRect(0,0,t.width,t.height),t.characters.forEach(function(e){return t.checkCharactersIntersection(t.hero,e)}),t.drawCharacter(t.hero),t.characters.forEach(function(e){return t.drawCharacter(e)})},30),window.gamestate.push(this.timerHandler)}},{key:"drawCharacter",value:function(e){e.imageOrientation()?(this.context.save(),this.context.scale(-1,1),this.context.drawImage(e.getNextSprite(),-1*e.position.x,e.position.y,-1*e.width,e.height),this.context.restore()):this.context.drawImage(e.getNextSprite(),e.position.x,e.position.y,e.width,e.height)}},{key:"runGame",value:function(){this.gameTimer=(new Date).getTime(),this.gamePlays=!0,this.baseSpeed=5,this.setLevel()}},{key:"endGame",value:function(){var t=this;clearInterval(this.timerHandler),clearInterval(this.levelTimer),window.gamestate=window.gamestate.filter(function(e){return e!==t.timerHandler}),this.gamePlays=!1,this.baseSpeed=0}},{key:"loseGame",value:function(){this.endGame();var e=((new Date).getTime()-this.gameTimer)/1e3,t=prompt("Your score is "+e+" seconds.\n Enter your name","Ninja");t&&s.default.saveScore({name:t,score:e})}},{key:"checkCharactersIntersection",value:function(e,t){e.position.x+30<=t.position.x+t.width&&e.position.x+e.width>=t.position.x+30&&e.position.y+5<=t.position.y+t.height&&e.position.y+e.height>=t.position.y+5&&(e.die(),this.loseGame())}},{key:"setLevel",value:function(){var t=this;this.levelTimer=setInterval(function(){t.level+=1,t.characters.push(new o.default(t)),t.level%2==1&&t.characters.push(new a.default(t));var e=document.createElement("div");e.classList.add("level-up"),e.innerHTML="Level Up! Current level - "+t.level,t.containter.appendChild(e),setTimeout(function(){t.containter.removeChild(e)},1e3)},1e4)}}]),t}();n.default=c},{"../utils/firebase":9,"./dummyEnemy":1,"./hero":3,"./smartEnemy":5}],3:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var i,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=e("./person"),s=(i=a)&&i.__esModule?i:{default:i};var u=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,".cat-img"));return t.setUpHero(),t.width=85,t.height=75,t.position={x:(t.game.width-t.width)/2,y:t.game.height-t.height},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.default),o(n,[{key:"setUpHero",value:function(){var t=this;document.addEventListener("keydown",function(e){e.keyCode<37||40<e.keyCode||(t.game.gamePlays||(t.game.runGame(),t.speed=t.game.baseSpeed*t.game.level),37===e.keyCode&&(t.directionAngle=Math.PI),38===e.keyCode&&(t.directionAngle=Math.PI/2*3),39===e.keyCode&&(t.directionAngle=0),40===e.keyCode&&(t.directionAngle=Math.PI/2))})}},{key:"die",value:function(){this.sprites=[].slice.call(document.querySelectorAll(".cat-dead-img"))}}]),n}();n.default=u},{"./person":4}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.game=e,this.directionAngle=2*Math.PI*Math.random(),this.position={x:0,y:0},this.sprites=[].slice.call(document.querySelectorAll(t)),this.speed=e.level*e.baseSpeed/2,this.currentImg=0}return r(n,[{key:"getNextSprite",value:function(){return this.step(),this.currentImg>=this.sprites.length&&(this.currentImg=0),this.sprites[this.currentImg++]}},{key:"step",value:function(){this.speed=this.game.baseSpeed*this.game.level/2,this.position.x+=Math.cos(this.directionAngle)*this.speed,this.position.x+this.width/2>this.game.width&&(this.position.x=-this.width/2),this.position.x+this.width/2<0&&(this.position.x=this.game.width-this.width/2),this.position.y+=Math.sin(this.directionAngle)*this.speed,this.position.y+this.height/2>this.game.height&&(this.position.y=-this.height/2),this.position.y+this.height/2<0&&(this.position.y=this.game.height-this.height/2)}},{key:"imageOrientation",value:function(){return this.directionAngle>=Math.PI/2&&this.directionAngle<=3*Math.PI/2}}]),n}();n.default=i},{}],5:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=e("./person"),s=(r=a)&&r.__esModule?r:{default:r};var u=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,".smart-enemy-img"));return t.range=400,t.width=75,t.height=95,t.position={x:Math.abs(t.width-t.game.width*Math.random()),y:t.game.height/2*Math.random()},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,s.default),o(r,[{key:"step",value:function(){var e=this.game.hero.position,t=this.position;if(this.getDistanceToHero()<=this.range&&e.x!==t.x){var n=Math.atan((e.y-t.y)/(e.x-t.x));0<e.x-t.x&&e.y-t.y<0||0<e.x-t.x&&0<e.y-t.y?this.directionAngle=Math.PI+n:0<e.x-t.x&&0<e.y-t.y?this.directionAngle=n:this.directionAngle=Math.PI+n}(function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"step",this).call(this)}},{key:"getDistanceToHero",value:function(){var e=this.game.hero;return Math.sqrt(Math.pow(e.position.x-this.position.x,2)+Math.pow(e.position.y-this.position.y,2))}}]),r}();n.default=u},{"./person":4}],6:[function(e,t,n){"use strict";var r=o(e("./utils/router")),i=o(e("./routes"));function o(e){return e&&e.__esModule?e:{default:e}}new r.default(i.default)},{"./routes":7,"./utils/router":10}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=a(e("./gameObjects/gameState")),o=a(e("./utils/detectMobile")),i=a(e("./utils/firebase"));function a(e){return e&&e.__esModule?e:{default:e}}var s=document.querySelector(".content"),u=new r.default(s);!function(){if((0,o.default)()){var e=document.createElement("div");e.classList.add("buttons");var t=document.createElement("button");t.innerHTML="<",t.classList.add("left");var n=document.createElement("button");n.innerHTML="^",n.classList.add("up");var r=document.createElement("button");r.innerHTML=">",r.classList.add("right");var i=document.createElement("button");i.innerHTML="v",i.classList.add("down"),e.appendChild(t),e.appendChild(n),e.appendChild(r),e.appendChild(i),e.addEventListener("click",function(e){if(e.target.matches(".right")){var t=new Event("keydown");return t.keyCode=39,void document.dispatchEvent(t)}if(e.target.matches(".left")){var n=new Event("keydown");return n.keyCode=37,void document.dispatchEvent(n)}if(e.target.matches(".up")){var r=new Event("keydown");return r.keyCode=38,void document.dispatchEvent(r)}if(e.target.matches(".down")){var i=new Event("keydown");return i.keyCode=40,void document.dispatchEvent(i)}}),document.body.appendChild(e)}}();var c=[{match:"",onEnter:function(){window.location.hash="game"}},{match:"about",onEnter:function(){h("about"),s.innerHTML='<h1 class="about"><span>Super game Cat vs Ninjas</span><h1>'}},{match:"game",onEnter:function(){h("game"),u.setUpGame()},onLeave:function(){u.endGame()}},{match:"scores",onEnter:function(){h("scores"),i.default.getScores().then(function(e){s.innerHTML='<h1 class="about"><span>Scores</span></h1>';var n=document.createElement("ol");e.forEach(function(e){var t=document.createElement("li");t.innerHTML=e.name+" - "+e.score,n.appendChild(t)});var t=document.createElement("div");t.classList.add("w-100"),s.appendChild(t);var r=document.createElement("div");r.appendChild(n),s.appendChild(r)})}}];function h(e){document.querySelector(".active").className="",document.querySelector('[href="#'+e+'"]').parentElement.className="active"}n.default=c},{"./gameObjects/gameState":2,"./utils/detectMobile":8,"./utils/firebase":9}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))}},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i="https://kate-arcade-game.firebaseio.com/.json",o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"getScores",value:function(){return fetch(i).then(function(e){return e.json()})}},{key:"saveScore",value:function(n){this.getScores().then(function(e){var t=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e||[]),[n]);t.sort(function(e,t){return e.score>t.score?-1:e.score<t.score?1:0}),t.splice(10),fetch(i,{method:"PUT",body:JSON.stringify(t)})})}}]),e}();n.default=o},{}],10:[function(e,t,n){"use strict";function r(e){var t=this;this.routes=e||[],this.currentRoute,this.previousRoute,this.currentParams,this.previousParams,window.addEventListener("hashchange",function(){t.handler(window.location.hash)}),this.handler(window.location.hash)}Object.defineProperty(n,"__esModule",{value:!0}),(n.default=r).prototype={handler:function(e){this.previousRoute=this.currentRoute,this.previousParams=this.currentParams,this.currentRoute=this.findNewRoute(e),this.launchHandlers()},findNewRoute:function(e){e=e.slice(1);for(var t=0;t<this.routes.length;t++){var n=this.routes[t];if("string"==typeof n.match&&n.match===e)return this.currentParams="",n;if("function"==typeof n.match&&n.match(e))return this.currentParams="",n;if(n.match instanceof RegExp&&n.match.test(e))return this.currentParams=e.match(n.match)||[],this.currentParams.splice(0,1),n}},launchHandlers:function(){var e=this;Promise.resolve().then(function(){e.previousRoute&&e.previousRoute.onLeave&&e.previousRoute.onLeave(e.previousParams)}).then(function(){e.currentRoute&&e.currentRoute.onBeforeEnter&&e.currentRoute.onBeforeEnter(e.currentParams)}).then(function(){e.currentRoute&&e.currentRoute.onEnter&&e.currentRoute.onEnter(e.currentParams)})}}},{}]},{},[6]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvZ2FtZU9iamVjdHMvZHVtbXlFbmVteS5qcyIsInNyYy9qcy9nYW1lT2JqZWN0cy9nYW1lU3RhdGUuanMiLCJzcmMvanMvZ2FtZU9iamVjdHMvaGVyby5qcyIsInNyYy9qcy9nYW1lT2JqZWN0cy9wZXJzb24uanMiLCJzcmMvanMvZ2FtZU9iamVjdHMvc21hcnRFbmVteS5qcyIsInNyYy9qcy9tYWluLmpzIiwic3JjL2pzL3JvdXRlcy5qcyIsInNyYy9qcy91dGlscy9kZXRlY3RNb2JpbGUuanMiLCJzcmMvanMvdXRpbHMvZmlyZWJhc2UuanMiLCJzcmMvanMvdXRpbHMvcm91dGVyLmpzIl0sIm5hbWVzIjpbInIiLCJlIiwibiIsInQiLCJvIiwiaSIsImYiLCJjIiwicmVxdWlyZSIsInUiLCJhIiwiRXJyb3IiLCJjb2RlIiwicCIsImV4cG9ydHMiLCJjYWxsIiwibGVuZ3RoIiwiMSIsIm1vZHVsZSIsIl9wZXJzb24iLCJEdW1teUVuZW15IiwiZ2FtZVN0YXRlIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl90aGlzIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJfX3Byb3RvX18iLCJPYmplY3QiLCJnZXRQcm90b3R5cGVPZiIsIndpZHRoIiwiaGVpZ2h0IiwicG9zaXRpb24iLCJ4IiwiTWF0aCIsImFicyIsImdhbWUiLCJyYW5kb20iLCJ5IiwiX3BlcnNvbjIiLCJkZWZhdWx0IiwiR2FtZVN0YXRlIiwiZWxlbWVudFRvRHJhdyIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsImNsaWVudEhlaWdodCIsImJvZHkiLCJjb250YWludGVyIiwiZ2FtZXN0YXRlIiwibGV2ZWwiLCJiYXNlU3BlZWQiLCJjYW52YXMiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsImNoYXJhY3RlcnMiLCJBcnJheSIsImZpbGwiLCJtYXAiLCJfZHVtbXlFbmVteTIiLCJwdXNoIiwiX3NtYXJ0RW5lbXkyIiwiaGVybyIsIl9oZXJvMiIsImdhbWVQbGF5cyIsImdhbWVUaW1lciIsInRpbWVySGFuZGxlciIsInNldEludGVydmFsIiwiY2xlYXJSZWN0IiwiZm9yRWFjaCIsImNoYXJhY3RlciIsImNoZWNrQ2hhcmFjdGVyc0ludGVyc2VjdGlvbiIsImRyYXdDaGFyYWN0ZXIiLCJpbWFnZU9yaWVudGF0aW9uIiwic2F2ZSIsInNjYWxlIiwiZHJhd0ltYWdlIiwiZ2V0TmV4dFNwcml0ZSIsInJlc3RvcmUiLCJEYXRlIiwiZ2V0VGltZSIsInNldExldmVsIiwiX3RoaXMyIiwiY2xlYXJJbnRlcnZhbCIsImxldmVsVGltZXIiLCJmaWx0ZXIiLCJpdGVtIiwiZW5kR2FtZSIsInNjb3JlIiwibmFtZSIsInByb21wdCIsIl9maXJlYmFzZTIiLCJzYXZlU2NvcmUiLCJlbmVteSIsImRpZSIsImxvc2VHYW1lIiwiX3RoaXMzIiwibWVzc2FnZSIsImNsYXNzTGlzdCIsImFkZCIsInNldFRpbWVvdXQiLCJyZW1vdmVDaGlsZCIsIkhlcm8iLCJzZXRVcEhlcm8iLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJrZXlDb2RlIiwicnVuR2FtZSIsInNwZWVkIiwiZGlyZWN0aW9uQW5nbGUiLCJQSSIsInNwcml0ZXMiLCJzbGljZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJQZXJzb24iLCJzZWxlY3RvciIsImN1cnJlbnRJbWciLCJzdGVwIiwiY29zIiwic2luIiwiU21hcnRFbmVteSIsInJhbmdlIiwiaGVyb1Bvc2l0aW9uIiwiZW5lbXlQb3NpdGlvbiIsImdldERpc3RhbmNlVG9IZXJvIiwiYXRhbiIsIl9nZXQiLCJwcm90b3R5cGUiLCJzcXJ0IiwicG93IiwiX3JvdXRlcjIiLCJfcm91dGVzMiIsImNvbnRlbnQiLCJxdWVyeVNlbGVjdG9yIiwiX2dhbWVTdGF0ZTIiLCJfZGV0ZWN0TW9iaWxlMiIsImRpdkZvckJ1dHRvbnMiLCJidXR0b25MZWZ0IiwiYnV0dG9uVXAiLCJidXR0b25SaWdodCIsImJ1dHRvbkRvd24iLCJ0YXJnZXQiLCJtYXRjaGVzIiwiRXZlbnQiLCJkaXNwYXRjaEV2ZW50IiwiX2UiLCJfZTIiLCJfZTMiLCJhZGRCdXR0b25zRm9yTW9iaWxlIiwicm91dGVzIiwibWF0Y2giLCJvbkVudGVyIiwibG9jYXRpb24iLCJoYXNoIiwiY2hhbmdlQWN0aXZlUGFnZSIsInNldFVwR2FtZSIsIm9uTGVhdmUiLCJnZXRTY29yZXMiLCJ0aGVuIiwicmVzdWx0Iiwib2wiLCJsaSIsImRpdkZvckRpdmlzaW9uIiwiZGl2IiwibmV3UGFnZSIsImNsYXNzTmFtZSIsInBhcmVudEVsZW1lbnQiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ1cmwiLCJGaXJlU3RvcmUiLCJmZXRjaCIsInJlc3BvbnNlIiwianNvbiIsImluZm9Ub1NhdmUiLCJzY29yZXMiLCJuZXdTY29yZXMiLCJjb25jYXQiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJzb3J0IiwiaXRlbTEiLCJpdGVtMiIsInNwbGljZSIsIm1ldGhvZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJSb3V0ZXIiLCJyb3V0ZVBhcmFtcyIsImN1cnJlbnRSb3V0ZSIsInByZXZpb3VzUm91dGUiLCJjdXJyZW50UGFyYW1zIiwicHJldmlvdXNQYXJhbXMiLCJoYW5kbGVyIiwiZmluZE5ld1JvdXRlIiwibGF1bmNoSGFuZGxlcnMiLCJlbGVtZW50IiwiUmVnRXhwIiwidGVzdCIsIlByb21pc2UiLCJyZXNvbHZlIiwib25CZWZvcmVFbnRlciJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsRUFBQUMsRUFBQUMsR0FBQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUFBLElBQUFKLEVBQUFHLEdBQUEsQ0FBQSxJQUFBSixFQUFBSSxHQUFBLENBQUEsSUFBQUUsRUFBQSxtQkFBQUMsU0FBQUEsUUFBQSxJQUFBRixHQUFBQyxFQUFBLE9BQUFBLEVBQUFGLEdBQUEsR0FB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ZG5KLEdBQ0EsR0FBSSxpQkFBUWlNLEVBQVI3QyxPQUFzQzZDLEVBQUE3QyxRQUExQ0csRUFFSSxPQURBckksS0FBQTBLLGNBQUEsR0FDQUssRUFFSixHQUFJLG1CQUFRQSxFQUFSN0MsT0FBd0M2QyxFQUFBN0MsTUFBNUNHLEdBRUksT0FEQXJJLEtBQUEwSyxjQUFBLEdBQ0FLLEVBRUosR0FBS0EsRUFBQTdDLGlCQUFEOEMsUUFBcUNELEVBQUE3QyxNQUFBK0MsS0FBekM1QyxHQUdJLE9BRkFySSxLQUFBMEssY0FBcUJyQyxFQUFBSCxNQUFXNkMsRUFBWDdDLFFBQXJCLEdBQ0FsSSxLQUFBMEssY0FBQVIsT0FBQSxFQUFBLEdBQ0FhLElBdkJHRCxlQUFBLFdBMkJFLElBQUFoSCxFQUFBOUQsS0FDYmtMLFFBQUFDLFVBQUF6QyxLQUNVLFdBQVE1RSxFQUFBMkcsZUFBc0IzRyxFQUFBMkcsY0FBdEJqQyxTQUFvRDFFLEVBQUEyRyxjQUFBakMsUUFBMkIxRSxFQUEvRTZHLGtCQURsQmpDLEtBRVUsV0FBUTVFLEVBQUEwRyxjQUFxQjFHLEVBQUEwRyxhQUFyQlksZUFBd0R0SCxFQUFBMEcsYUFBQVksY0FBZ0N0SCxFQUF4RjRHLGlCQUZsQmhDLEtBR1UsV0FBUTVFLEVBQUEwRyxjQUFxQjFHLEVBQUEwRyxhQUFyQnJDLFNBQWtEckUsRUFBQTBHLGFBQUFyQyxRQUEwQnJFLEVBQTVFNEciLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImltcG9ydCBQZXJzb24gZnJvbSAnLi9wZXJzb24nO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHVtbXlFbmVteSBleHRlbmRzIFBlcnNvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihnYW1lU3RhdGUpIHtcclxuICAgICAgICBzdXBlcihnYW1lU3RhdGUsICcuZHVtbXktZW5lbXktaW1nJyk7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IDc1O1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gOTU7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHtcclxuICAgICAgICAgICAgeDogTWF0aC5hYnModGhpcy53aWR0aCAtIHRoaXMuZ2FtZS53aWR0aCAqIE1hdGgucmFuZG9tKCkpLFxyXG4gICAgICAgICAgICB5OiB0aGlzLmdhbWUuaGVpZ2h0IC8gMiAqIE1hdGgucmFuZG9tKClcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IEhlcm8gZnJvbSAnLi9oZXJvJztcclxuaW1wb3J0IER1bW15RW5lbXkgZnJvbSAnLi9kdW1teUVuZW15JztcclxuaW1wb3J0IFNtYXJ0RW5lbXkgZnJvbSAnLi9zbWFydEVuZW15JztcclxuaW1wb3J0IEZpcmVTdG9yZSBmcm9tICcuLi91dGlscy9maXJlYmFzZSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lU3RhdGUge1xyXG5cdGNvbnN0cnVjdG9yKGVsZW1lbnRUb0RyYXcpIHtcclxuXHRcdC8vIHRoaXMud2lkdGggPSA4MDA7XHJcblx0XHQvLyB0aGlzLmhlaWdodCA9IDgwMDtcclxuXHJcblx0XHR0aGlzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGggPj0gMTAwMCA/IDEwMDAgOiB3aW5kb3cuaW5uZXJXaWR0aDtcclxuXHJcblx0XHR0aGlzLmhlaWdodCA9IChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0XHJcblx0XHRcdHx8IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0KSAtIDE2MDtcclxuXHJcblx0XHR0aGlzLmNvbnRhaW50ZXIgPSBlbGVtZW50VG9EcmF3O1xyXG5cdFx0d2luZG93LmdhbWVzdGF0ZSA9IFtdO1xyXG5cdH1cclxuXHJcblx0c2V0VXBHYW1lKCkge1xyXG5cdFx0dGhpcy5sZXZlbCA9IDE7XHJcblx0XHR0aGlzLmJhc2VTcGVlZCA9IDA7XHJcblxyXG5cdFx0dGhpcy5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuXHRcdHRoaXMuY29udGFpbnRlci5pbm5lckhUTUwgPSAnJztcclxuXHRcdHRoaXMuY29udGFpbnRlci5hcHBlbmRDaGlsZCh0aGlzLmNhbnZhcyk7XHJcblxyXG5cclxuXHJcblx0XHR0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMud2lkdGg7XHJcblx0XHR0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLmhlaWdodDtcclxuXHJcblx0XHR0aGlzLmNvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG5cclxuXHRcdHRoaXMuY2hhcmFjdGVycyA9IG5ldyBBcnJheSgyKS5maWxsKDApLm1hcCgoKSA9PiBuZXcgRHVtbXlFbmVteSh0aGlzKSk7XHJcblx0XHR0aGlzLmNoYXJhY3RlcnMucHVzaChuZXcgU21hcnRFbmVteSh0aGlzKSk7XHJcblx0XHR0aGlzLmhlcm8gPSBuZXcgSGVybyh0aGlzKTtcclxuXHJcblx0XHR0aGlzLmdhbWVQbGF5cyA9IGZhbHNlO1xyXG5cclxuXHRcdHRoaXMuZ2FtZVRpbWVyID0gMDtcclxuXHJcblx0XHR0aGlzLnRpbWVySGFuZGxlciA9IHNldEludGVydmFsKCgpID0+IHtcclxuXHRcdFx0dGhpcy5jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XHJcblxyXG5cdFx0XHR0aGlzLmNoYXJhY3RlcnMuZm9yRWFjaChjaGFyYWN0ZXIgPT4gdGhpcy5jaGVja0NoYXJhY3RlcnNJbnRlcnNlY3Rpb24odGhpcy5oZXJvLCBjaGFyYWN0ZXIpKTtcclxuXHJcblx0XHRcdHRoaXMuZHJhd0NoYXJhY3Rlcih0aGlzLmhlcm8pO1xyXG5cdFx0XHR0aGlzLmNoYXJhY3RlcnMuZm9yRWFjaChjaGFyYWN0ZXIgPT4gdGhpcy5kcmF3Q2hhcmFjdGVyKGNoYXJhY3RlcikpO1xyXG5cdFx0fSwgMzApO1xyXG5cdFx0d2luZG93LmdhbWVzdGF0ZS5wdXNoKHRoaXMudGltZXJIYW5kbGVyKTtcclxuXHR9XHJcblxyXG5cdGRyYXdDaGFyYWN0ZXIoY2hhcmFjdGVyKSB7XHJcblx0XHRpZiAoY2hhcmFjdGVyLmltYWdlT3JpZW50YXRpb24oKSkge1xyXG5cdFx0XHR0aGlzLmNvbnRleHQuc2F2ZSgpO1xyXG5cdFx0XHR0aGlzLmNvbnRleHQuc2NhbGUoLTEsIDEpO1xyXG5cdFx0XHR0aGlzLmNvbnRleHQuZHJhd0ltYWdlKGNoYXJhY3Rlci5nZXROZXh0U3ByaXRlKCksIGNoYXJhY3Rlci5wb3NpdGlvbi54ICogLTEsIGNoYXJhY3Rlci5wb3NpdGlvbi55LCBjaGFyYWN0ZXIud2lkdGggKiAtMSwgY2hhcmFjdGVyLmhlaWdodCk7XHJcblx0XHRcdHRoaXMuY29udGV4dC5yZXN0b3JlKCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmNvbnRleHQuZHJhd0ltYWdlKGNoYXJhY3Rlci5nZXROZXh0U3ByaXRlKCksIGNoYXJhY3Rlci5wb3NpdGlvbi54LCBjaGFyYWN0ZXIucG9zaXRpb24ueSwgY2hhcmFjdGVyLndpZHRoLCBjaGFyYWN0ZXIuaGVpZ2h0KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJ1bkdhbWUoKSB7XHJcblx0XHR0aGlzLmdhbWVUaW1lciA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG5cdFx0dGhpcy5nYW1lUGxheXMgPSB0cnVlO1xyXG5cdFx0dGhpcy5iYXNlU3BlZWQgPSA1O1xyXG5cdFx0dGhpcy5zZXRMZXZlbCgpO1xyXG5cdH1cclxuXHJcblx0ZW5kR2FtZSgpIHtcclxuXHRcdGNsZWFySW50ZXJ2YWwodGhpcy50aW1lckhhbmRsZXIpO1xyXG5cdFx0Y2xlYXJJbnRlcnZhbCh0aGlzLmxldmVsVGltZXIpO1xyXG5cdFx0d2luZG93LmdhbWVzdGF0ZSA9IHdpbmRvdy5nYW1lc3RhdGUuZmlsdGVyKGl0ZW0gPT4gaXRlbSAhPT0gdGhpcy50aW1lckhhbmRsZXIpO1xyXG5cdFx0dGhpcy5nYW1lUGxheXMgPSBmYWxzZTtcclxuXHRcdHRoaXMuYmFzZVNwZWVkID0gMDtcclxuXHJcblx0fVxyXG5cdGxvc2VHYW1lKCkge1xyXG5cdFx0dGhpcy5lbmRHYW1lKCk7XHJcblx0XHRsZXQgc2NvcmUgPSAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSB0aGlzLmdhbWVUaW1lcikgLyAxMDAwO1xyXG5cdFx0bGV0IG5hbWUgPSBwcm9tcHQoYFlvdXIgc2NvcmUgaXMgJHtzY29yZX0gc2Vjb25kcy5cXG4gRW50ZXIgeW91ciBuYW1lYCwgJ05pbmphJyk7XHJcblx0XHRuYW1lICYmIEZpcmVTdG9yZS5zYXZlU2NvcmUoe1xyXG5cdFx0XHRuYW1lLCBzY29yZVxyXG5cdFx0fSk7XHJcblx0XHQvLyBjb25zb2xlLmxvZyh3aW5kb3cuZ2FtZXN0YXRlKTtcclxuXHR9XHJcblx0Y2hlY2tDaGFyYWN0ZXJzSW50ZXJzZWN0aW9uKGhlcm8sIGVuZW15KSB7XHJcblx0XHRsZXQgZGVsdGFYID0gMzA7XHJcblx0XHRsZXQgZGVsdGFZID0gNTtcclxuXHRcdGlmICgoKGhlcm8ucG9zaXRpb24ueCArIGRlbHRhWCA8PSAoZW5lbXkucG9zaXRpb24ueCArIGVuZW15LndpZHRoKSkgJiYgKChoZXJvLnBvc2l0aW9uLnggKyBoZXJvLndpZHRoKSA+PSBlbmVteS5wb3NpdGlvbi54ICsgZGVsdGFYKSkgJiZcclxuXHRcdFx0KChoZXJvLnBvc2l0aW9uLnkgKyBkZWx0YVkgPD0gKGVuZW15LnBvc2l0aW9uLnkgKyBlbmVteS5oZWlnaHQpKSAmJiAoKGhlcm8ucG9zaXRpb24ueSArIGhlcm8uaGVpZ2h0KSA+PSBlbmVteS5wb3NpdGlvbi55ICsgZGVsdGFZKSkpIHtcclxuXHRcdFx0aGVyby5kaWUoKTtcclxuXHRcdFx0dGhpcy5sb3NlR2FtZSgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0c2V0TGV2ZWwoKSB7XHJcblx0XHR0aGlzLmxldmVsVGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcblx0XHRcdHRoaXMubGV2ZWwgKz0gMTtcclxuXHRcdFx0dGhpcy5jaGFyYWN0ZXJzLnB1c2gobmV3IER1bW15RW5lbXkodGhpcykpO1xyXG5cdFx0XHRpZiAodGhpcy5sZXZlbCAlIDIgPT0gMSkge1xyXG5cdFx0XHRcdHRoaXMuY2hhcmFjdGVycy5wdXNoKG5ldyBTbWFydEVuZW15KHRoaXMpKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0bGV0IG1lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0bWVzc2FnZS5jbGFzc0xpc3QuYWRkKCdsZXZlbC11cCcpO1xyXG5cdFx0XHRtZXNzYWdlLmlubmVySFRNTCA9IGBMZXZlbCBVcCEgQ3VycmVudCBsZXZlbCAtICR7dGhpcy5sZXZlbH1gO1xyXG5cclxuXHRcdFx0dGhpcy5jb250YWludGVyLmFwcGVuZENoaWxkKG1lc3NhZ2UpO1xyXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHR0aGlzLmNvbnRhaW50ZXIucmVtb3ZlQ2hpbGQobWVzc2FnZSk7XHJcblx0XHRcdH0sIDEwMDApO1xyXG5cdFx0fSwgMTAwMDApO1xyXG5cdH1cclxufVxyXG4iLCJpbXBvcnQgUGVyc29uIGZyb20gJy4vcGVyc29uJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhlcm8gZXh0ZW5kcyBQZXJzb24ge1xyXG4gICAgY29uc3RydWN0b3IoZ2FtZVN0YXRlKSB7XHJcbiAgICAgICAgc3VwZXIoZ2FtZVN0YXRlLCAnLmNhdC1pbWcnKTtcclxuICAgICAgICB0aGlzLnNldFVwSGVybygpO1xyXG4gICAgICAgIHRoaXMud2lkdGggPSA4NTtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IDc1O1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSB7XHJcbiAgICAgICAgICAgIHg6ICh0aGlzLmdhbWUud2lkdGggLSB0aGlzLndpZHRoKSAvIDIsXHJcbiAgICAgICAgICAgIHk6IHRoaXMuZ2FtZS5oZWlnaHQgLSB0aGlzLmhlaWdodFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHNldFVwSGVybygpIHtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlIDwgMzcgfHwgZXZlbnQua2V5Q29kZSA+IDQwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmdhbWUuZ2FtZVBsYXlzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWUucnVuR2FtZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zcGVlZCA9IHRoaXMuZ2FtZS5iYXNlU3BlZWQgKiB0aGlzLmdhbWUubGV2ZWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDM3KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpcmVjdGlvbkFuZ2xlID0gTWF0aC5QSTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMzgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uQW5nbGUgPSBNYXRoLlBJIC8gMiAqIDM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDM5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpcmVjdGlvbkFuZ2xlID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gNDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uQW5nbGUgPSBNYXRoLlBJIC8gMjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZGllKCkge1xyXG4gICAgICAgIHRoaXMuc3ByaXRlcyA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhdC1kZWFkLWltZycpKTtcclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQZXJzb24ge1xyXG4gICAgY29uc3RydWN0b3IoZ2FtZVN0YXRlLCBzZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuZ2FtZSA9IGdhbWVTdGF0ZTtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbkFuZ2xlID0gMiAqIE1hdGguUEkgKiBNYXRoLnJhbmRvbSgpO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSB7XHJcbiAgICAgICAgICAgIHg6IDAsXHJcbiAgICAgICAgICAgIHk6IDBcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc3ByaXRlcyA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpO1xyXG4gICAgICAgIHRoaXMuc3BlZWQgPSBnYW1lU3RhdGUubGV2ZWwgKiBnYW1lU3RhdGUuYmFzZVNwZWVkIC8gMjtcclxuICAgICAgICB0aGlzLmN1cnJlbnRJbWcgPSAwO1xyXG4gICAgfVxyXG4gICAgZ2V0TmV4dFNwcml0ZSgpIHtcclxuICAgICAgICB0aGlzLnN0ZXAoKTtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50SW1nID49IHRoaXMuc3ByaXRlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW1nID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ByaXRlc1t0aGlzLmN1cnJlbnRJbWcrK107XHJcbiAgICB9XHJcbiAgICBzdGVwKCkge1xyXG4gICAgICAgIHRoaXMuc3BlZWQgPSB0aGlzLmdhbWUuYmFzZVNwZWVkICogdGhpcy5nYW1lLmxldmVsIC8gMjtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uLnggKz0gTWF0aC5jb3ModGhpcy5kaXJlY3Rpb25BbmdsZSkgKiB0aGlzLnNwZWVkO1xyXG4gICAgICAgIGlmICh0aGlzLnBvc2l0aW9uLnggKyB0aGlzLndpZHRoIC8gMiA+IHRoaXMuZ2FtZS53aWR0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uLnggPSAtdGhpcy53aWR0aCAvIDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnBvc2l0aW9uLnggKyB0aGlzLndpZHRoIC8gMiA8IDApIHtcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi54ID0gdGhpcy5nYW1lLndpZHRoIC0gdGhpcy53aWR0aCAvIDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucG9zaXRpb24ueSArPSBNYXRoLnNpbih0aGlzLmRpcmVjdGlvbkFuZ2xlKSAqIHRoaXMuc3BlZWQ7XHJcbiAgICAgICAgaWYgKHRoaXMucG9zaXRpb24ueSArIHRoaXMuaGVpZ2h0IC8gMiA+IHRoaXMuZ2FtZS5oZWlnaHQpIHtcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi55ID0gLXRoaXMuaGVpZ2h0IC8gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucG9zaXRpb24ueSArIHRoaXMuaGVpZ2h0IC8gMiA8IDApIHtcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi55ID0gdGhpcy5nYW1lLmhlaWdodCAtIHRoaXMuaGVpZ2h0IC8gMjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpbWFnZU9yaWVudGF0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbkFuZ2xlID49IE1hdGguUEkgLyAyICYmIHRoaXMuZGlyZWN0aW9uQW5nbGUgPD0gTWF0aC5QSSAqIDMgLyAyO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBQZXJzb24gZnJvbSAnLi9wZXJzb24nO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU21hcnRFbmVteSBleHRlbmRzIFBlcnNvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihnYW1lU3RhdGUpIHtcclxuICAgICAgICBzdXBlcihnYW1lU3RhdGUsICcuc21hcnQtZW5lbXktaW1nJyk7XHJcbiAgICAgICAgdGhpcy5yYW5nZSA9IDQwMDtcclxuICAgICAgICB0aGlzLndpZHRoID0gNzU7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSA5NTtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICB4OiBNYXRoLmFicyh0aGlzLndpZHRoIC0gdGhpcy5nYW1lLndpZHRoICogTWF0aC5yYW5kb20oKSksXHJcbiAgICAgICAgICAgIHk6IHRoaXMuZ2FtZS5oZWlnaHQgLyAyICogTWF0aC5yYW5kb20oKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBzdGVwKCkge1xyXG4gICAgICAgIGxldCBoZXJvUG9zaXRpb24gPSB0aGlzLmdhbWUuaGVyby5wb3NpdGlvbjtcclxuICAgICAgICBsZXQgZW5lbXlQb3NpdGlvbiA9IHRoaXMucG9zaXRpb247XHJcbiAgICAgICAgaWYgKHRoaXMuZ2V0RGlzdGFuY2VUb0hlcm8oKSA8PSB0aGlzLnJhbmdlICYmIChoZXJvUG9zaXRpb24ueCAhPT0gZW5lbXlQb3NpdGlvbi54KSkge1xyXG4gICAgICAgICAgICBsZXQgYXRhbiA9IE1hdGguYXRhbigoaGVyb1Bvc2l0aW9uLnkgLSBlbmVteVBvc2l0aW9uLnkpIC8gKGhlcm9Qb3NpdGlvbi54IC0gZW5lbXlQb3NpdGlvbi54KSk7XHJcbiAgICAgICAgICAgIGlmICgoKGhlcm9Qb3NpdGlvbi54IC0gZW5lbXlQb3NpdGlvbi54ID4gMCkgJiYgKGhlcm9Qb3NpdGlvbi55IC0gZW5lbXlQb3NpdGlvbi55IDwgMCkpIHx8XHJcbiAgICAgICAgICAgICAgICAoKGhlcm9Qb3NpdGlvbi54IC0gZW5lbXlQb3NpdGlvbi54ID4gMCkgJiYgKGhlcm9Qb3NpdGlvbi55IC0gZW5lbXlQb3NpdGlvbi55ID4gMCkpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpcmVjdGlvbkFuZ2xlID0gTWF0aC5QSSArIGF0YW47XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKGhlcm9Qb3NpdGlvbi54IC0gZW5lbXlQb3NpdGlvbi54ID4gMCkgJiYgKGhlcm9Qb3NpdGlvbi55IC0gZW5lbXlQb3NpdGlvbi55ID4gMCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uQW5nbGUgPSBhdGFuO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb25BbmdsZSA9IE1hdGguUEkgKyBhdGFuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN1cGVyLnN0ZXAoKTtcclxuICAgIH1cclxuICAgIGdldERpc3RhbmNlVG9IZXJvKCkge1xyXG4gICAgICAgIGxldCBoZXJvID0gdGhpcy5nYW1lLmhlcm87XHJcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyhoZXJvLnBvc2l0aW9uLnggLSB0aGlzLnBvc2l0aW9uLngsIDIpICsgTWF0aC5wb3coaGVyby5wb3NpdGlvbi55IC0gdGhpcy5wb3NpdGlvbi55LCAyKSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgUm91dGVyIGZyb20gJy4vdXRpbHMvcm91dGVyJztcclxuaW1wb3J0IHJvdXRlcyBmcm9tICcuL3JvdXRlcyc7XHJcblxyXG5uZXcgUm91dGVyKHJvdXRlcyk7IiwiaW1wb3J0IEdhbWVTdGF0ZSBmcm9tICcuL2dhbWVPYmplY3RzL2dhbWVTdGF0ZSc7XHJcbmltcG9ydCBkZXRlY3RNb2JpbGUgZnJvbSAnLi91dGlscy9kZXRlY3RNb2JpbGUnO1xyXG5pbXBvcnQgRmlyZVN0b3JlIGZyb20gJy4vdXRpbHMvZmlyZWJhc2UnO1xyXG5cclxubGV0IGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpO1xyXG5sZXQgZ2FtZSA9IG5ldyBHYW1lU3RhdGUoY29udGVudCk7XHJcblxyXG5hZGRCdXR0b25zRm9yTW9iaWxlKCk7XHJcblxyXG5jb25zdCByb3V0ZXMgPSBbXHJcbiAgICB7XHJcbiAgICAgICAgbWF0Y2g6ICcnLFxyXG4gICAgICAgIG9uRW50ZXI6ICgpID0+IHtcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAnZ2FtZSc7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBtYXRjaDogJ2Fib3V0JyxcclxuICAgICAgICBvbkVudGVyOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNoYW5nZUFjdGl2ZVBhZ2UoJ2Fib3V0Jyk7XHJcbiAgICAgICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MID0gJzxoMSBjbGFzcz1cImFib3V0XCI+PHNwYW4+U3VwZXIgZ2FtZSBDYXQgdnMgTmluamFzPC9zcGFuPjxoMT4nO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbWF0Y2g6ICdnYW1lJyxcclxuICAgICAgICBvbkVudGVyOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNoYW5nZUFjdGl2ZVBhZ2UoJ2dhbWUnKTtcclxuICAgICAgICAgICAgZ2FtZS5zZXRVcEdhbWUoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uTGVhdmU6ICgpID0+IHtcclxuICAgICAgICAgICAgZ2FtZS5lbmRHYW1lKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBtYXRjaDogJ3Njb3JlcycsXHJcbiAgICAgICAgb25FbnRlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICBjaGFuZ2VBY3RpdmVQYWdlKCdzY29yZXMnKTtcclxuXHJcbiAgICAgICAgICAgIEZpcmVTdG9yZS5nZXRTY29yZXMoKS50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50LmlubmVySFRNTCA9ICc8aDEgY2xhc3M9XCJhYm91dFwiPjxzcGFuPlNjb3Jlczwvc3Bhbj48L2gxPic7XHJcbiAgICAgICAgICAgICAgICBsZXQgb2wgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvbCcpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuICAgICAgICAgICAgICAgICAgICBsaS5pbm5lckhUTUwgPSBgJHtpdGVtLm5hbWV9IC0gJHtpdGVtLnNjb3JlfWA7XHJcbiAgICAgICAgICAgICAgICAgICAgb2wuYXBwZW5kQ2hpbGQobGkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGRpdkZvckRpdmlzaW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBkaXZGb3JEaXZpc2lvbi5jbGFzc0xpc3QuYWRkKCd3LTEwMCcpO1xyXG4gICAgICAgICAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChkaXZGb3JEaXZpc2lvbik7XHJcbiAgICAgICAgICAgICAgICBsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQob2wpO1xyXG4gICAgICAgICAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChkaXYpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5dO1xyXG5cclxuZnVuY3Rpb24gY2hhbmdlQWN0aXZlUGFnZShuZXdQYWdlKSB7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWN0aXZlJykuY2xhc3NOYW1lID0gJyc7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbaHJlZj1cIiMke25ld1BhZ2V9XCJdYCkucGFyZW50RWxlbWVudC5jbGFzc05hbWUgPSAnYWN0aXZlJztcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkQnV0dG9uc0Zvck1vYmlsZSgpIHtcclxuICAgIGlmIChkZXRlY3RNb2JpbGUoKSkge1xyXG5cclxuICAgICAgICB2YXIgZGl2Rm9yQnV0dG9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGRpdkZvckJ1dHRvbnMuY2xhc3NMaXN0LmFkZCgnYnV0dG9ucycpO1xyXG5cclxuICAgICAgICB2YXIgYnV0dG9uTGVmdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgIGJ1dHRvbkxlZnQuaW5uZXJIVE1MID0gJzwnO1xyXG4gICAgICAgIGJ1dHRvbkxlZnQuY2xhc3NMaXN0LmFkZCgnbGVmdCcpO1xyXG5cclxuICAgICAgICB2YXIgYnV0dG9uVXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICBidXR0b25VcC5pbm5lckhUTUwgPSAnXic7XHJcbiAgICAgICAgYnV0dG9uVXAuY2xhc3NMaXN0LmFkZCgndXAnKTtcclxuXHJcbiAgICAgICAgdmFyIGJ1dHRvblJpZ2h0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgYnV0dG9uUmlnaHQuaW5uZXJIVE1MID0gJz4nO1xyXG4gICAgICAgIGJ1dHRvblJpZ2h0LmNsYXNzTGlzdC5hZGQoJ3JpZ2h0Jyk7XHJcblxyXG4gICAgICAgIHZhciBidXR0b25Eb3duID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgYnV0dG9uRG93bi5pbm5lckhUTUwgPSAndic7XHJcbiAgICAgICAgYnV0dG9uRG93bi5jbGFzc0xpc3QuYWRkKCdkb3duJyk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgZGl2Rm9yQnV0dG9ucy5hcHBlbmRDaGlsZChidXR0b25MZWZ0KTtcclxuICAgICAgICBkaXZGb3JCdXR0b25zLmFwcGVuZENoaWxkKGJ1dHRvblVwKTtcclxuICAgICAgICBkaXZGb3JCdXR0b25zLmFwcGVuZENoaWxkKGJ1dHRvblJpZ2h0KTtcclxuICAgICAgICBkaXZGb3JCdXR0b25zLmFwcGVuZENoaWxkKGJ1dHRvbkRvd24pO1xyXG5cclxuICAgICAgICBkaXZGb3JCdXR0b25zLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQubWF0Y2hlcygnLnJpZ2h0JykpIHtcclxuICAgICAgICAgICAgICAgIGxldCBlID0gbmV3IEV2ZW50KCdrZXlkb3duJyk7XHJcbiAgICAgICAgICAgICAgICBlLmtleUNvZGUgPSAzOTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5tYXRjaGVzKCcubGVmdCcpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZSA9IG5ldyBFdmVudCgna2V5ZG93bicpO1xyXG4gICAgICAgICAgICAgICAgZS5rZXlDb2RlID0gMzc7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQubWF0Y2hlcygnLnVwJykpIHtcclxuICAgICAgICAgICAgICAgIGxldCBlID0gbmV3IEV2ZW50KCdrZXlkb3duJyk7XHJcbiAgICAgICAgICAgICAgICBlLmtleUNvZGUgPSAzODtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5tYXRjaGVzKCcuZG93bicpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZSA9IG5ldyBFdmVudCgna2V5ZG93bicpO1xyXG4gICAgICAgICAgICAgICAgZS5rZXlDb2RlID0gNDA7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2Rm9yQnV0dG9ucyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcztcclxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZGV0ZWN0bW9iaWxlKCkge1xyXG4gICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FuZHJvaWQvaSlcclxuICAgICAgICB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC93ZWJPUy9pKVxyXG4gICAgICAgIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQaG9uZS9pKVxyXG4gICAgICAgIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQYWQvaSlcclxuICAgICAgICB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUG9kL2kpXHJcbiAgICAgICAgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQmxhY2tCZXJyeS9pKVxyXG4gICAgICAgIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1dpbmRvd3MgUGhvbmUvaSlcclxuICAgICkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59IiwibGV0IHVybCA9ICdodHRwczovL2thdGUtYXJjYWRlLWdhbWUuZmlyZWJhc2Vpby5jb20vLmpzb24nO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmlyZVN0b3JlIHtcclxuICAgIHN0YXRpYyBnZXRTY29yZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHVybCkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIHNhdmVTY29yZShpbmZvVG9TYXZlKSB7XHJcblxyXG4gICAgICAgIHRoaXMuZ2V0U2NvcmVzKCkudGhlbihzY29yZXMgPT4ge1xyXG4gICAgICAgICAgICBsZXQgbmV3U2NvcmVzID0gWy4uLnNjb3JlcyB8fCBbXSwgaW5mb1RvU2F2ZV07XHJcbiAgICAgICAgICAgIG5ld1Njb3Jlcy5zb3J0KChpdGVtMSwgaXRlbTIpID0+IGl0ZW0xLnNjb3JlID4gaXRlbTIuc2NvcmUgPyAtMSA6IGl0ZW0xLnNjb3JlIDwgaXRlbTIuc2NvcmUgPyAxIDogMCk7XHJcbiAgICAgICAgICAgIG5ld1Njb3Jlcy5zcGxpY2UoMTApO1xyXG4gICAgICAgICAgICBmZXRjaCh1cmwsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShuZXdTY29yZXMpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiLyoqXHJcbiAqINCk0YPQvdC60YbQuNGPINC00LvRjyDQtNC+0LHQsNCy0LvQtdC90LjRjyDQuCDQvtCx0YDQsNCx0L7RgtC60Lgg0YDQvtGD0YLQvtCyINC90LAg0YHRgtGA0LDQvdC40YbQtVxyXG4gKiBAcGFyYW0geyp9IHJvdXRlUGFyYW1zINC80LDRgdGB0LjQsiDQv9Cw0YDQsNC80LXRgtGA0L7QsiDQtNC70Y8g0L7QsdGA0LDQsdC+0YLQutC4INGA0L7Rg9GC0L7QslxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUm91dGVyKHJvdXRlUGFyYW1zKSB7XHJcbiAgICB0aGlzLnJvdXRlcyA9IHJvdXRlUGFyYW1zIHx8IFtdO1xyXG4gICAgdGhpcy5jdXJyZW50Um91dGU7XHJcbiAgICB0aGlzLnByZXZpb3VzUm91dGU7XHJcbiAgICB0aGlzLmN1cnJlbnRQYXJhbXM7XHJcbiAgICB0aGlzLnByZXZpb3VzUGFyYW1zO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVyKHdpbmRvdy5sb2NhdGlvbi5oYXNoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5oYW5kbGVyKHdpbmRvdy5sb2NhdGlvbi5oYXNoKTtcclxufVxyXG5cclxuUm91dGVyLnByb3RvdHlwZSA9IHtcclxuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChoYXNoKSB7XHJcbiAgICAgICAgdGhpcy5wcmV2aW91c1JvdXRlID0gdGhpcy5jdXJyZW50Um91dGU7XHJcbiAgICAgICAgdGhpcy5wcmV2aW91c1BhcmFtcyA9IHRoaXMuY3VycmVudFBhcmFtcztcclxuICAgICAgICB0aGlzLmN1cnJlbnRSb3V0ZSA9IHRoaXMuZmluZE5ld1JvdXRlKGhhc2gpO1xyXG4gICAgICAgIHRoaXMubGF1bmNoSGFuZGxlcnMoKTtcclxuICAgIH0sXHJcbiAgICBmaW5kTmV3Um91dGU6IGZ1bmN0aW9uIChoYXNoKSB7XHJcbiAgICAgICAgaGFzaCA9IGhhc2guc2xpY2UoMSk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5yb3V0ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLnJvdXRlc1tpXTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiAoZWxlbWVudC5tYXRjaCkgPT0gJ3N0cmluZycgJiYgZWxlbWVudC5tYXRjaCA9PT0gaGFzaCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFyYW1zID0gJyc7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIChlbGVtZW50Lm1hdGNoKSA9PSAnZnVuY3Rpb24nICYmIGVsZW1lbnQubWF0Y2goaGFzaCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhcmFtcyA9ICcnO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKChlbGVtZW50Lm1hdGNoIGluc3RhbmNlb2YgUmVnRXhwKSAmJiBlbGVtZW50Lm1hdGNoLnRlc3QoaGFzaCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhcmFtcyA9IGhhc2gubWF0Y2goZWxlbWVudC5tYXRjaCkgfHwgW107XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYXJhbXMuc3BsaWNlKDAsIDEpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgbGF1bmNoSGFuZGxlcnMoKSB7XHJcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKClcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4geyB0aGlzLnByZXZpb3VzUm91dGUgJiYgdGhpcy5wcmV2aW91c1JvdXRlLm9uTGVhdmUgJiYgdGhpcy5wcmV2aW91c1JvdXRlLm9uTGVhdmUodGhpcy5wcmV2aW91c1BhcmFtcyk7IH0pXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHsgdGhpcy5jdXJyZW50Um91dGUgJiYgdGhpcy5jdXJyZW50Um91dGUub25CZWZvcmVFbnRlciAmJiB0aGlzLmN1cnJlbnRSb3V0ZS5vbkJlZm9yZUVudGVyKHRoaXMuY3VycmVudFBhcmFtcyk7IH0pXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHsgdGhpcy5jdXJyZW50Um91dGUgJiYgdGhpcy5jdXJyZW50Um91dGUub25FbnRlciAmJiB0aGlzLmN1cnJlbnRSb3V0ZS5vbkVudGVyKHRoaXMuY3VycmVudFBhcmFtcyk7IH0pO1xyXG4gICAgfVxyXG59OyJdfQ==
