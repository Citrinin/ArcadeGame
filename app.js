!function i(a,u,c){function s(t,e){if(!u[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=u[t]={exports:{}};a[t][0].call(o.exports,function(e){return s(a[t][1][e]||e)},o,o.exports,i,a,u,c)}return u[t].exports}for(var l="function"==typeof require&&require,e=0;e<c.length;e++)s(c[e]);return s}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("./hero"),a=(r=i)&&r.__esModule?r:{default:r};var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.level=1,this.baseSpeed=20,this.canvas=document.querySelector("canvas"),this.canvas.width=800,this.canvas.height=800,this.context=this.canvas.getContext("2d"),this.hero=new a.default(this),this.runGame()}return o(e,[{key:"runGame",value:function(){var e=this;setInterval(function(){e.context.clearRect(0,0,e.canvas.width,e.canvas.height),e.context.drawImage(e.hero.getNextSprite(),e.hero.position.x,e.hero.position.y,115,100)},30)}}]),e}();n.default=u},{"./hero":2}],2:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var o,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=e("./person"),u=(o=a)&&o.__esModule?o:{default:o};var c=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,".cat-img"));return t.setUpHero(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,u.default),i(n,[{key:"getPosition",value:function(){}},{key:"setUpHero",value:function(){var t=this;document.addEventListener("keydown",function(e){37===e.keyCode&&(t.position.x-=5),38===e.keyCode&&(t.position.y-=5),39===e.keyCode&&(t.position.x+=5),40===e.keyCode&&(t.position.y+=5)})}}]),n}();n.default=c},{"./person":3}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.position={x:0,y:0},this.sprites=[].slice.call(document.querySelectorAll(t)),this.speed=e.level*e.baseSpeed,this.currentImg=0}return r(n,[{key:"getNextSprite",value:function(){return this.currentImg>=this.sprites.length&&(this.currentImg=0),this.sprites[this.currentImg++]}}]),n}();n.default=o},{}],4:[function(e,t,n){"use strict";var r=i(e("./utils/router")),o=i(e("./routes"));function i(e){return e&&e.__esModule?e:{default:e}}new r.default(o.default)},{"./routes":5,"./utils/router":7}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=i(e("./gameObjects/gameState")),o=i(e("./utils/detectMobile"));function i(e){return e&&e.__esModule?e:{default:e}}var a=document.querySelector(".content");if((0,o.default)()){var u=document.createElement("div");u.classList.add("buttons");var c=document.createElement("button");c.innerHTML="<-",c.classList.add("left");var s=document.createElement("button");s.innerHTML="^",s.classList.add("up");var l=document.createElement("button");l.innerHTML="->",l.classList.add("right");var f=document.createElement("button");f.innerHTML="v",f.classList.add("down"),u.appendChild(c),u.appendChild(s),u.appendChild(l),u.appendChild(f),u.addEventListener("click",function(e){if(e.target.matches(".right")){var t=new Event("keydown");return t.keyCode=39,void document.dispatchEvent(t)}if(e.target.matches(".left")){var n=new Event("keydown");return n.keyCode=37,void document.dispatchEvent(n)}if(e.target.matches(".up")){var r=new Event("keydown");return r.keyCode=38,void document.dispatchEvent(r)}if(e.target.matches(".down")){var o=new Event("keydown");return o.keyCode=40,void document.dispatchEvent(o)}}),document.body.appendChild(u)}var d=[{match:"",onEnter:function(){window.location.hash="game"}},{match:"about",onEnter:function(){h("about"),a.innerHTML='<h1 class="about"><span>Super game Cats vs Ninjas</span><h1>'}},{match:"game",onEnter:function(){h("game");var e=document.createElement("canvas");a.innerHTML="",a.appendChild(e),new r.default}},{match:"scores",onEnter:function(){h("scores"),a.innerHTML='<h1 class="about"><span>Scores</span><h1>'}}];function h(e){document.querySelector(".active").className="",document.querySelector('[href="#'+e+'"]').parentElement.className="active"}n.default=d},{"./gameObjects/gameState":1,"./utils/detectMobile":6}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))}},{}],7:[function(e,t,n){"use strict";function r(e){var t=this;this.routes=e||[],this.currentRoute,this.previousRoute,this.currentParams,this.previousParams,window.addEventListener("hashchange",function(){t.handler(window.location.hash)}),this.handler(window.location.hash)}Object.defineProperty(n,"__esModule",{value:!0}),(n.default=r).prototype={handler:function(e){this.previousRoute=this.currentRoute,this.previousParams=this.currentParams,this.currentRoute=this.findNewRoute(e),this.launchHandlers()},findNewRoute:function(e){e=e.slice(1);for(var t=0;t<this.routes.length;t++){var n=this.routes[t];if("string"==typeof n.match&&n.match===e)return this.currentParams="",n;if("function"==typeof n.match&&n.match(e))return this.currentParams="",n;if(n.match instanceof RegExp&&n.match.test(e))return this.currentParams=e.match(n.match)||[],this.currentParams.splice(0,1),n}},launchHandlers:function(){var e=this;Promise.resolve().then(function(){e.previousRoute&&e.previousRoute.onLeave&&e.previousRoute.onLeave(e.previousParams)}).then(function(){e.currentRoute&&e.currentRoute.onBeforeEnter&&e.currentRoute.onBeforeEnter(e.currentParams)}).then(function(){e.currentRoute&&e.currentRoute.onEnter&&e.currentRoute.onEnter(e.currentParams)})}}},{}]},{},[4]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvZ2FtZU9iamVjdHMvZ2FtZVN0YXRlLmpzIiwic3JjL2pzL2dhbWVPYmplY3RzL2hlcm8uanMiLCJzcmMvanMvZ2FtZU9iamVjdHMvcGVyc29uLmpzIiwic3JjL2pzL21haW4uanMiLCJzcmMvanMvcm91dGVzLmpzIiwic3JjL2pzL3V0aWxzL2RldGVjdE1vYmlsZS5qcyIsInNyYy9qcy91dGlscy9yb3V0ZXIuanMiXSwibmFtZXMiOlsiciIsImUiLCJuIiwidCIsIm8iLCJpIiwiZiIsImMiLCJyZXF1aXJlIiwidSIsImEiLCJFcnJvciIsImNvZGUiLCJwIiwiZXhwb3J0cyIsImNhbGwiLCJsZW5ndGgiLCIxIiwibW9kdWxlIiwiX2hlcm8iLCJHYW1lU3RhdGUiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwibGV2ZWwiLCJiYXNlU3BlZWQiLCJjYW52YXMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ3aWR0aCIsImhlaWdodCIsImNvbnRleHQiLCJnZXRDb250ZXh0IiwiaGVybyIsIl9oZXJvMiIsImRlZmF1bHQiLCJydW5HYW1lIiwiX3RoaXMiLCJzZXRJbnRlcnZhbCIsImNsZWFyUmVjdCIsImRyYXdJbWFnZSIsImdldE5leHRTcHJpdGUiLCJwb3NpdGlvbiIsIngiLCJ5IiwiX3BlcnNvbiIsIkhlcm8iLCJnYW1lU3RhdGUiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsIl9fcHJvdG9fXyIsIk9iamVjdCIsImdldFByb3RvdHlwZU9mIiwic2V0VXBIZXJvIiwiX3BlcnNvbjIiLCJfdGhpczIiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJrZXlDb2RlIiwiUGVyc29uIiwic2VsZWN0b3IiLCJzcHJpdGVzIiwic2xpY2UiLCJxdWVyeVNlbGVjdG9yQWxsIiwic3BlZWQiLCJjdXJyZW50SW1nIiwiX3JvdXRlcjIiLCJfcm91dGVzMiIsImNvbnRlbnQiLCJfZGV0ZWN0TW9iaWxlMiIsImRpdkZvckJ1dHRvbnMiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiYnV0dG9uTGVmdCIsImlubmVySFRNTCIsImJ1dHRvblVwIiwiYnV0dG9uUmlnaHQiLCJidXR0b25Eb3duIiwiYXBwZW5kQ2hpbGQiLCJ0YXJnZXQiLCJtYXRjaGVzIiwiRXZlbnQiLCJkaXNwYXRjaEV2ZW50IiwiX2UiLCJfZTIiLCJfZTMiLCJib2R5Iiwicm91dGVzIiwibWF0Y2giLCJvbkVudGVyIiwid2luZG93IiwibG9jYXRpb24iLCJoYXNoIiwiY2hhbmdlQWN0aXZlUGFnZSIsIl9nYW1lU3RhdGUyIiwibmV3UGFnZSIsImNsYXNzTmFtZSIsInBhcmVudEVsZW1lbnQiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJSb3V0ZXIiLCJyb3V0ZVBhcmFtcyIsImN1cnJlbnRSb3V0ZSIsInByZXZpb3VzUm91dGUiLCJjdXJyZW50UGFyYW1zIiwicHJldmlvdXNQYXJhbXMiLCJoYW5kbGVyIiwicHJvdG90eXBlIiwiZmluZE5ld1JvdXRlIiwibGF1bmNoSGFuZGxlcnMiLCJlbGVtZW50IiwiUmVnRXhwIiwidGVzdCIsInNwbGljZSIsIlByb21pc2UiLCJyZXNvbHZlIiwidGhlbiIsIm9uTGVhdmUiLCJvbkJlZm9yZUVudGVyIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxFQUFBQyxFQUFBQyxHQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEdBQUEsSUFBQUosRUFBQUcsR0FBQSxDQUFBLElBQUFKLEVBQUFJLEdBQUEsQ0FBQSxJQUFBRSxFQUFBLG1CQUFBQyxTQUFBQSxRQUFBLElBQUFGLEdBQUFDLEVBQUEsT0FBQUEsRUFBQUYsR0FBQSxHQUFBLEdBQUFJLEVBQUEsT0FBQUEsRUFBQUosR0FBQSxHQUFBLElBQUFLLEVBQUEsSUFBQUMsTUFBQSx1QkFBQU4sRUFBQSxLQUFBLE1BQUFLLEVBQUFFLEtBQUEsbUJBQUFGLEVBQUEsSUFBQUcsRUFBQVgsRUFBQUcsR0FBQSxDQUFB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dkYsS0FBQWdFLE9BQWRqRixHQUNBLEdBQUksaUJBQVF3RyxFQUFSdEIsT0FBc0NzQixFQUFBdEIsUUFBMUNJLEVBRUksT0FEQXJFLEtBQUFpRixjQUFBLEdBQ0FNLEVBRUosR0FBSSxtQkFBUUEsRUFBUnRCLE9BQXdDc0IsRUFBQXRCLE1BQTVDSSxHQUVJLE9BREFyRSxLQUFBaUYsY0FBQSxHQUNBTSxFQUVKLEdBQUtBLEVBQUF0QixpQkFBRHVCLFFBQXFDRCxFQUFBdEIsTUFBQXdCLEtBQXpDcEIsR0FHSSxPQUZBckUsS0FBQWlGLGNBQXFCWixFQUFBSixNQUFXc0IsRUFBWHRCLFFBQXJCLEdBQ0FqRSxLQUFBaUYsY0FBQVMsT0FBQSxFQUFBLEdBQ0FILElBdkJHRCxlQUFBLFdBMkJFLElBQUF2RCxFQUFBL0IsS0FDYjJGLFFBQUFDLFVBQUFDLEtBQ1UsV0FBUTlELEVBQUFpRCxlQUFzQmpELEVBQUFpRCxjQUF0QmMsU0FBb0QvRCxFQUFBaUQsY0FBQWMsUUFBMkIvRCxFQUEvRW1ELGtCQURsQlcsS0FFVSxXQUFROUQsRUFBQWdELGNBQXFCaEQsRUFBQWdELGFBQXJCZ0IsZUFBd0RoRSxFQUFBZ0QsYUFBQWdCLGNBQWdDaEUsRUFBeEZrRCxpQkFGbEJZLEtBR1UsV0FBUTlELEVBQUFnRCxjQUFxQmhELEVBQUFnRCxhQUFyQmIsU0FBa0RuQyxFQUFBZ0QsYUFBQWIsUUFBMEJuQyxFQUE1RWtEIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJpbXBvcnQgSGVybyBmcm9tICcuL2hlcm8nO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZVN0YXRlIHtcclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdHRoaXMubGV2ZWwgPSAxO1xyXG5cdFx0dGhpcy5iYXNlU3BlZWQgPSAyMDtcclxuXHRcdHRoaXMuY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignY2FudmFzJyk7XHJcblx0XHR0aGlzLmNhbnZhcy53aWR0aCA9IDgwMDtcclxuXHRcdHRoaXMuY2FudmFzLmhlaWdodCA9IDgwMDtcclxuXHJcblx0XHR0aGlzLmNvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG5cclxuXHRcdHRoaXMuaGVybyA9IG5ldyBIZXJvKHRoaXMpO1xyXG5cdFx0dGhpcy5ydW5HYW1lKCk7XHJcblx0fVxyXG5cclxuXHRydW5HYW1lKCkge1xyXG5cdFx0c2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG5cdFx0XHR0aGlzLmNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xyXG5cdFx0XHR0aGlzLmNvbnRleHQuZHJhd0ltYWdlKHRoaXMuaGVyby5nZXROZXh0U3ByaXRlKCksIHRoaXMuaGVyby5wb3NpdGlvbi54LCB0aGlzLmhlcm8ucG9zaXRpb24ueSwgMTE1LCAxMDApO1xyXG5cdFx0fSwgMzApO1xyXG5cdH1cclxufVxyXG4iLCJpbXBvcnQgUGVyc29uIGZyb20gJy4vcGVyc29uJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhlcm8gZXh0ZW5kcyBQZXJzb24ge1xyXG4gICAgY29uc3RydWN0b3IoZ2FtZVN0YXRlKSB7XHJcbiAgICAgICAgc3VwZXIoZ2FtZVN0YXRlLCAnLmNhdC1pbWcnKTtcclxuICAgICAgICB0aGlzLnNldFVwSGVybygpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBnZXRQb3NpdGlvbigpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXBIZXJvKCkge1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDM3KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBvc2l0aW9uLnggLT0gNTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMzgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueSAtPSA1O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSAzOSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi54ICs9IDU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDQwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBvc2l0aW9uLnkgKz0gNTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBlcnNvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihnYW1lU3RhdGUsIHNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHtcclxuICAgICAgICAgICAgeDogMCxcclxuICAgICAgICAgICAgeTogMFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zcHJpdGVzID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSk7XHJcbiAgICAgICAgdGhpcy5zcGVlZCA9IGdhbWVTdGF0ZS5sZXZlbCAqIGdhbWVTdGF0ZS5iYXNlU3BlZWQ7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50SW1nID0gMDtcclxuICAgIH1cclxuICAgIGdldE5leHRTcHJpdGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEltZyA+PSB0aGlzLnNwcml0ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEltZyA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnNwcml0ZXNbdGhpcy5jdXJyZW50SW1nKytdO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBjbGFzcyBEdW1teUVuZW15IGV4dGVuZHMgUGVyc29uIHtcclxuLy8gICAgIGNvbnN0cnVjdG9yKGdhbWVTdGF0ZSkge1xyXG4vLyAgICAgICAgIHN1cGVyKGdhbWVTdGF0ZSk7XHJcbi8vICAgICAgICAgc3ByaXRlcyA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5pbmphLWltZycpKTtcclxuLy8gICAgIH1cclxuLy8gICAgIHN0ZXAoKXtcclxuLy8gICAgICAgICB0aGlzLnBvc2l0aW9uXHJcbi8vICAgICB9XHJcbi8vIH0iLCJpbXBvcnQgUm91dGVyIGZyb20gJy4vdXRpbHMvcm91dGVyJztcclxuaW1wb3J0IHJvdXRlcyBmcm9tICcuL3JvdXRlcyc7XHJcblxyXG5uZXcgUm91dGVyKHJvdXRlcyk7IiwiaW1wb3J0IEdhbWVTdGF0ZSBmcm9tICcuL2dhbWVPYmplY3RzL2dhbWVTdGF0ZSc7XHJcbmltcG9ydCBkZXRlY3RNb2JpbGUgZnJvbSAnLi91dGlscy9kZXRlY3RNb2JpbGUnO1xyXG5cclxubGV0IGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpO1xyXG5cclxuaWYgKGRldGVjdE1vYmlsZSgpKSB7XHJcblxyXG4gICAgdmFyIGRpdkZvckJ1dHRvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGRpdkZvckJ1dHRvbnMuY2xhc3NMaXN0LmFkZCgnYnV0dG9ucycpO1xyXG5cclxuICAgIHZhciBidXR0b25MZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICBidXR0b25MZWZ0LmlubmVySFRNTCA9ICc8LSc7XHJcbiAgICBidXR0b25MZWZ0LmNsYXNzTGlzdC5hZGQoJ2xlZnQnKTtcclxuXHJcbiAgICB2YXIgYnV0dG9uVXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgIGJ1dHRvblVwLmlubmVySFRNTCA9ICdeJztcclxuICAgIGJ1dHRvblVwLmNsYXNzTGlzdC5hZGQoJ3VwJyk7XHJcblxyXG4gICAgdmFyIGJ1dHRvblJpZ2h0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICBidXR0b25SaWdodC5pbm5lckhUTUwgPSAnLT4nO1xyXG4gICAgYnV0dG9uUmlnaHQuY2xhc3NMaXN0LmFkZCgncmlnaHQnKTtcclxuXHJcbiAgICB2YXIgYnV0dG9uRG93biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgYnV0dG9uRG93bi5pbm5lckhUTUwgPSAndic7XHJcbiAgICBidXR0b25Eb3duLmNsYXNzTGlzdC5hZGQoJ2Rvd24nKTtcclxuXHJcblxyXG5cclxuICAgIGRpdkZvckJ1dHRvbnMuYXBwZW5kQ2hpbGQoYnV0dG9uTGVmdCk7XHJcbiAgICBkaXZGb3JCdXR0b25zLmFwcGVuZENoaWxkKGJ1dHRvblVwKTtcclxuICAgIGRpdkZvckJ1dHRvbnMuYXBwZW5kQ2hpbGQoYnV0dG9uUmlnaHQpO1xyXG4gICAgZGl2Rm9yQnV0dG9ucy5hcHBlbmRDaGlsZChidXR0b25Eb3duKTtcclxuXHJcblxyXG4gICAgZGl2Rm9yQnV0dG9ucy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xyXG4gICAgICAgIGlmIChldmVudC50YXJnZXQubWF0Y2hlcygnLnJpZ2h0JykpIHtcclxuICAgICAgICAgICAgbGV0IGUgPSBuZXcgRXZlbnQoJ2tleWRvd24nKTtcclxuICAgICAgICAgICAgZS5rZXlDb2RlID0gMzk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5tYXRjaGVzKCcubGVmdCcpKSB7XHJcbiAgICAgICAgICAgIGxldCBlID0gbmV3IEV2ZW50KCdrZXlkb3duJyk7XHJcbiAgICAgICAgICAgIGUua2V5Q29kZSA9IDM3O1xyXG4gICAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGUpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChldmVudC50YXJnZXQubWF0Y2hlcygnLnVwJykpIHtcclxuICAgICAgICAgICAgbGV0IGUgPSBuZXcgRXZlbnQoJ2tleWRvd24nKTtcclxuICAgICAgICAgICAgZS5rZXlDb2RlID0gMzg7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5tYXRjaGVzKCcuZG93bicpKSB7XHJcbiAgICAgICAgICAgIGxldCBlID0gbmV3IEV2ZW50KCdrZXlkb3duJyk7XHJcbiAgICAgICAgICAgIGUua2V5Q29kZSA9IDQwO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGUpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXZGb3JCdXR0b25zKTtcclxufVxyXG5cclxuY29uc3Qgcm91dGVzID0gW1xyXG4gICAge1xyXG4gICAgICAgIG1hdGNoOiAnJyxcclxuICAgICAgICBvbkVudGVyOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJ2dhbWUnO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbWF0Y2g6ICdhYm91dCcsXHJcbiAgICAgICAgb25FbnRlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICBjaGFuZ2VBY3RpdmVQYWdlKCdhYm91dCcpO1xyXG4gICAgICAgICAgICBjb250ZW50LmlubmVySFRNTCA9ICc8aDEgY2xhc3M9XCJhYm91dFwiPjxzcGFuPlN1cGVyIGdhbWUgQ2F0cyB2cyBOaW5qYXM8L3NwYW4+PGgxPic7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBtYXRjaDogJ2dhbWUnLFxyXG4gICAgICAgIG9uRW50ZXI6ICgpID0+IHtcclxuICAgICAgICAgICAgY2hhbmdlQWN0aXZlUGFnZSgnZ2FtZScpO1xyXG4gICAgICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICAgICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoY2FudmFzKTtcclxuICAgICAgICAgICAgbmV3IEdhbWVTdGF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbWF0Y2g6ICdzY29yZXMnLFxyXG4gICAgICAgIG9uRW50ZXI6ICgpID0+IHtcclxuICAgICAgICAgICAgY2hhbmdlQWN0aXZlUGFnZSgnc2NvcmVzJyk7XHJcbiAgICAgICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MID0gJzxoMSBjbGFzcz1cImFib3V0XCI+PHNwYW4+U2NvcmVzPC9zcGFuPjxoMT4nO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbl07XHJcblxyXG5mdW5jdGlvbiBjaGFuZ2VBY3RpdmVQYWdlKG5ld1BhZ2UpIHtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY3RpdmUnKS5jbGFzc05hbWUgPSAnJztcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtocmVmPVwiIyR7bmV3UGFnZX1cIl1gKS5wYXJlbnRFbGVtZW50LmNsYXNzTmFtZSA9ICdhY3RpdmUnO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCByb3V0ZXM7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRldGVjdG1vYmlsZSgpIHtcclxuICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9BbmRyb2lkL2kpXHJcbiAgICAgICAgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvd2ViT1MvaSlcclxuICAgICAgICB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUGhvbmUvaSlcclxuICAgICAgICB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUGFkL2kpXHJcbiAgICAgICAgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBvZC9pKVxyXG4gICAgICAgIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0JsYWNrQmVycnkvaSlcclxuICAgICAgICB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9XaW5kb3dzIFBob25lL2kpXHJcbiAgICApIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufSIsIi8qKlxyXG4gKiDQpNGD0L3QutGG0LjRjyDQtNC70Y8g0LTQvtCx0LDQstC70LXQvdC40Y8g0Lgg0L7QsdGA0LDQsdC+0YLQutC4INGA0L7Rg9GC0L7QsiDQvdCwINGB0YLRgNCw0L3QuNGG0LVcclxuICogQHBhcmFtIHsqfSByb3V0ZVBhcmFtcyDQvNCw0YHRgdC40LIg0L/QsNGA0LDQvNC10YLRgNC+0LIg0LTQu9GPINC+0LHRgNCw0LHQvtGC0LrQuCDRgNC+0YPRgtC+0LJcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJvdXRlcihyb3V0ZVBhcmFtcykge1xyXG4gICAgdGhpcy5yb3V0ZXMgPSByb3V0ZVBhcmFtcyB8fCBbXTtcclxuICAgIHRoaXMuY3VycmVudFJvdXRlO1xyXG4gICAgdGhpcy5wcmV2aW91c1JvdXRlO1xyXG4gICAgdGhpcy5jdXJyZW50UGFyYW1zO1xyXG4gICAgdGhpcy5wcmV2aW91c1BhcmFtcztcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlcih3aW5kb3cubG9jYXRpb24uaGFzaCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuaGFuZGxlcih3aW5kb3cubG9jYXRpb24uaGFzaCk7XHJcbn1cclxuXHJcblJvdXRlci5wcm90b3R5cGUgPSB7XHJcbiAgICBoYW5kbGVyOiBmdW5jdGlvbiAoaGFzaCkge1xyXG4gICAgICAgIHRoaXMucHJldmlvdXNSb3V0ZSA9IHRoaXMuY3VycmVudFJvdXRlO1xyXG4gICAgICAgIHRoaXMucHJldmlvdXNQYXJhbXMgPSB0aGlzLmN1cnJlbnRQYXJhbXM7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50Um91dGUgPSB0aGlzLmZpbmROZXdSb3V0ZShoYXNoKTtcclxuICAgICAgICB0aGlzLmxhdW5jaEhhbmRsZXJzKCk7XHJcbiAgICB9LFxyXG4gICAgZmluZE5ld1JvdXRlOiBmdW5jdGlvbiAoaGFzaCkge1xyXG4gICAgICAgIGhhc2ggPSBoYXNoLnNsaWNlKDEpO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucm91dGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5yb3V0ZXNbaV07XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgKGVsZW1lbnQubWF0Y2gpID09ICdzdHJpbmcnICYmIGVsZW1lbnQubWF0Y2ggPT09IGhhc2gpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhcmFtcyA9ICcnO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiAoZWxlbWVudC5tYXRjaCkgPT0gJ2Z1bmN0aW9uJyAmJiBlbGVtZW50Lm1hdGNoKGhhc2gpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYXJhbXMgPSAnJztcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgoZWxlbWVudC5tYXRjaCBpbnN0YW5jZW9mIFJlZ0V4cCkgJiYgZWxlbWVudC5tYXRjaC50ZXN0KGhhc2gpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYXJhbXMgPSBoYXNoLm1hdGNoKGVsZW1lbnQubWF0Y2gpIHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFyYW1zLnNwbGljZSgwLCAxKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGxhdW5jaEhhbmRsZXJzKCkge1xyXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHsgdGhpcy5wcmV2aW91c1JvdXRlICYmIHRoaXMucHJldmlvdXNSb3V0ZS5vbkxlYXZlICYmIHRoaXMucHJldmlvdXNSb3V0ZS5vbkxlYXZlKHRoaXMucHJldmlvdXNQYXJhbXMpOyB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7IHRoaXMuY3VycmVudFJvdXRlICYmIHRoaXMuY3VycmVudFJvdXRlLm9uQmVmb3JlRW50ZXIgJiYgdGhpcy5jdXJyZW50Um91dGUub25CZWZvcmVFbnRlcih0aGlzLmN1cnJlbnRQYXJhbXMpOyB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7IHRoaXMuY3VycmVudFJvdXRlICYmIHRoaXMuY3VycmVudFJvdXRlLm9uRW50ZXIgJiYgdGhpcy5jdXJyZW50Um91dGUub25FbnRlcih0aGlzLmN1cnJlbnRQYXJhbXMpOyB9KTtcclxuICAgIH1cclxufTsiXX0=
