!function o(a,s,u){function c(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var r=s[t]={exports:{}};a[t][0].call(r.exports,function(e){return c(a[t][1][e]||e)},r,r.exports,o,a,s,u)}return s[t].exports}for(var l="function"==typeof require&&require,e=0;e<u.length;e++)c(u[e]);return c}({1:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var i,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=e("./person"),s=(i=a)&&i.__esModule?i:{default:i};var u=function(e){function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return n.width=36,n.height=48,n.getSprites(),n.generatePosition(),n.game.originalGame?n.game.replayData.dummyEnemies.push({settings:{position:{x:n.position.x,y:n.position.y},directionAngle:n.directionAngle},time:(new Date).getTime()-n.game.gameTimer}):(n.position.x=t.position.x,n.position.y=t.position.y,n.directionAngle=t.directionAngle),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,s.default),o(i,[{key:"generatePosition",value:function(){for(;this.position={x:Math.abs(this.width-this.game.width*Math.random()),y:this.game.height/2*Math.random()},this.getDistanceToHero()<200;);}},{key:"getDistanceToHero",value:function(){var e=this.game.hero;return Math.sqrt(Math.pow(e.position.x-this.position.x,2)+Math.pow(e.position.y-this.position.y,2))}},{key:"getSprites",value:function(){this.sprites=[].slice.call(document.querySelectorAll(".goblin-img"))}}]),i}();n.default=u},{"./person":4}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=u(e("./hero")),o=u(e("./dummyEnemy")),a=u(e("./smartEnemy")),s=u(e("../utils/firebase"));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=1e3<=window.innerWidth?1e3:window.innerWidth,this.height=(document.documentElement.clientHeight||document.body.clientHeight)-160,this.containter=e}return i(t,[{key:"setUpGame",value:function(){var t=this,e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.originalGame=e,this.canvas=document.createElement("canvas"),this.containter.innerHTML="",this.containter.appendChild(this.canvas),this.canvas.width=this.width,this.canvas.height=this.height,this.context=this.canvas.getContext("2d"),this.hero=new r.default(this),this.originalGame?(this.replayData={heroMoves:[],smartEmenies:[],dummyEnemies:[]},this.characters=new Array(2).fill(0).map(function(){return new o.default(t)}),this.characters.push(new a.default(this))):(this.characters=[],this.replayData.heroMoves.forEach(function(e){setTimeout(function(){t.hero.directionAngle=e.directionAngle},e.time)}),this.replayData.smartEmenies.forEach(function(e){setTimeout(function(){t.characters.push(new a.default(t,e.settings))},e.time)}),this.replayData.dummyEnemies.forEach(function(e){setTimeout(function(){t.characters.push(new o.default(t,e.settings))},e.time)})),this.level=1,this.baseSpeed=0,this.gamePlays=!1,this.gameTimer=0,this.timerHandler=setInterval(function(){t.context.clearRect(0,0,t.width,t.height),t.characters.forEach(function(e){return t.checkCharactersIntersection(t.hero,e)}),t.drawCharacter(t.hero),t.characters.forEach(function(e){return t.drawCharacter(e)})},100)}},{key:"drawCharacter",value:function(e){this.context.drawImage(e.getNextSprite(),e.position.x,e.position.y,e.width,e.height)}},{key:"runGame",value:function(){this.gameTimer=(new Date).getTime(),this.gamePlays=!0,this.baseSpeed=5,this.setLevel()}},{key:"checkCharactersIntersection",value:function(e,t){e.position.x+20<=t.position.x+t.width&&e.position.x+e.width>=t.position.x+20&&e.position.y+20<=t.position.y+t.height&&e.position.y+e.height>=t.position.y+20&&(e.die(),this.loseGame())}},{key:"loseGame",value:function(){if(this.endGame(),this.originalGame){var e=((new Date).getTime()-this.gameTimer)/1e3,t=prompt("Your score is "+e+" seconds.\n Enter your name","Ninja");t&&s.default.saveScore({name:t,score:e})}this.addEndGameButtons()}},{key:"endGame",value:function(){clearInterval(this.timerHandler),clearInterval(this.levelTimer),this.gamePlays=!1,this.baseSpeed=0}},{key:"setLevel",value:function(){var t=this;this.levelTimer=setInterval(function(){if(t.level+=1,t.originalGame){t.characters.push(new o.default(t)),t.level%2==1&&t.characters.push(new a.default(t));var e=document.createElement("div");e.classList.add("level-up"),e.innerHTML="Level Up! Current level - "+t.level,t.containter.appendChild(e),setTimeout(function(){t.containter.removeChild(e)},1e3)}},1e4)}},{key:"addEndGameButtons",value:function(){var e=this,t=document.createElement("div");t.classList.add("end-buttons");var n=document.createElement("button");n.innerHTML="Watch replay "+(this.originalGame?"":"again"),n.addEventListener("click",function(){e.setUpGame(!1),e.runGame()});var i=document.createElement("button");i.innerHTML="Start new game",i.addEventListener("click",function(){e.setUpGame()}),t.appendChild(n),t.appendChild(i),this.containter.appendChild(t)}}]),t}();n.default=c},{"../utils/firebase":11,"./dummyEnemy":1,"./hero":3,"./smartEnemy":5}],3:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=e("./smartPerson"),s=(r=a)&&r.__esModule?r:{default:r};var u=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,"knight"));return t.game.originalGame&&t.setUpHero(),t.width=55,t.height=75,t.position={x:(t.game.width-t.width)/2,y:t.game.height-t.height},t.sprites=t.spritesCollection.down,t.directionAngle=Math.PI/2,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.default),o(n,[{key:"setUpHero",value:function(){var t=this;document.addEventListener("keydown",function(e){switch(e.keyCode){case 37:t.directionAngle=Math.PI;break;case 38:t.directionAngle=Math.PI/2;break;case 39:t.directionAngle=0;break;case 40:t.directionAngle=Math.PI/2*3;break;default:return}t.game.gamePlays||t.game.runGame(),t.game.originalGame&&t.game.replayData.heroMoves.push({directionAngle:t.directionAngle,time:(new Date).getTime()-t.game.gameTimer}),t.selectSprites()})}},{key:"getSpeed",value:function(){this.speed=this.game.baseSpeed*this.game.level}},{key:"die",value:function(){}}]),n}();n.default=u},{"./smartPerson":6}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var r=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=e,this.directionAngle=2*Math.PI*Math.random(),this.position={x:0,y:0},this.speed=e.level*e.baseSpeed/2,this.currentImg=0}return i(t,[{key:"getNextSprite",value:function(){return this.step(),this.currentImg>=this.sprites.length&&(this.currentImg=0),this.sprites[this.currentImg++]}},{key:"step",value:function(){this.getSpeed(),this.position.x+=Math.cos(this.directionAngle)*this.speed,this.position.x+this.width/2>this.game.width&&(this.position.x=-this.width/2),this.position.x+this.width/2<0&&(this.position.x=this.game.width-this.width/2),this.position.y-=Math.sin(this.directionAngle)*this.speed,this.position.y+this.height/2>this.game.height&&(this.position.y=-this.height/2),this.position.y+this.height/2<0&&(this.position.y=this.game.height-this.height/2)}},{key:"getSpeed",value:function(){this.speed=this.game.baseSpeed*this.game.level/2}}]),t}();n.default=r},{}],5:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var i,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=e("./smartPerson"),s=(i=a)&&i.__esModule?i:{default:i};var u=function(e){function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,"rogue"));return n.selectSprites(),n.range=300,n.width=40,n.height=45,n.generatePosition(),n.game.originalGame?n.game.replayData.smartEmenies.push({settings:{position:{x:n.position.x,y:n.position.y},directionAngle:n.directionAngle},time:(new Date).getTime()-n.game.gameTimer}):(n.position.x=t.position.x,n.position.y=t.position.y,n.directionAngle=t.directionAngle),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,s.default),o(i,[{key:"step",value:function(){var e=this.game.hero.position,t=this.position;if(this.getDistanceToHero()<=this.range&&e.x!==t.x){var n=Math.atan((e.y-t.y)/(e.x-t.x));e.x>t.x&&e.y<t.y||e.x>t.x&&e.y>t.y?this.directionAngle=2*Math.PI-n:this.directionAngle=Math.PI-n,this.selectSprites()}(function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0})(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"step",this).call(this)}},{key:"generatePosition",value:function(){for(;this.position={x:Math.abs(this.width-this.game.width*Math.random()),y:this.game.height/2*Math.random()},this.getDistanceToHero()<200;);}},{key:"getDistanceToHero",value:function(){var e=this.game.hero;return Math.sqrt(Math.pow(e.position.x-this.position.x,2)+Math.pow(e.position.y-this.position.y,2))}}]),i}();n.default=u},{"./smartPerson":6}],6:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var i,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=e("./person"),s=(i=a)&&i.__esModule?i:{default:i};var u=function(e){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return n.selector=t,n.getAllSprites(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,s.default),o(i,[{key:"selectSprites",value:function(){this.directionAngle>=5*Math.PI/4&&this.directionAngle<=7*Math.PI/4?this.sprites=this.spritesCollection.down:this.directionAngle>=Math.PI/4&&this.directionAngle<=3*Math.PI/4?this.sprites=this.spritesCollection.up:this.directionAngle>=3*Math.PI/4&&this.directionAngle<=5*Math.PI/4?this.sprites=this.spritesCollection.left:this.sprites=this.spritesCollection.right}},{key:"getAllSprites",value:function(){this.spritesCollection={left:this.getSprites("."+this.selector+"-left-img"),right:this.getSprites("."+this.selector+"-right-img"),up:this.getSprites("."+this.selector+"-up-img"),down:this.getSprites("."+this.selector+"-down-img")}}},{key:"getSprites",value:function(e){return[].slice.call(document.querySelectorAll(e))}}]),i}();n.default=u},{"./person":4}],7:[function(e,t,n){"use strict";var i=o(e("./utils/router")),r=o(e("./routes"));function o(e){return e&&e.__esModule?e:{default:e}}(0,o(e("./utils/addButtonsForMobile")).default)(),new i.default(r.default)},{"./routes":8,"./utils/addButtonsForMobile":9,"./utils/router":12}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=o(e("./gameObjects/gameState")),r=o(e("./utils/firebase"));function o(e){return e&&e.__esModule?e:{default:e}}var a=document.querySelector(".content"),s=new i.default(a),u=[{match:"",onEnter:function(){window.location.hash="game"}},{match:"about",onEnter:function(){c("about"),a.innerHTML='<h1 class="about"><span>Super game Cat vs Ninjas</span><h1>'}},{match:"game",onEnter:function(){c("game"),s.setUpGame()},onLeave:function(){s.endGame()}},{match:"scores",onEnter:function(){c("scores"),r.default.getScores().then(function(e){a.innerHTML='<h1 class="about"><span>Scores</span></h1>';var n=document.createElement("ol");e.forEach(function(e){var t=document.createElement("li");t.innerHTML=e.name+" - "+e.score,n.appendChild(t)});var t=document.createElement("div");t.classList.add("w-100"),a.appendChild(t);var i=document.createElement("div");i.appendChild(n),a.appendChild(i)})}}];function c(e){document.querySelector(".active").className="",document.querySelector('[href="#'+e+'"]').parentElement.className="active"}n.default=u},{"./gameObjects/gameState":2,"./utils/firebase":11}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){if((0,o.default)()){var e=document.createElement("div");e.classList.add("buttons");var t=document.createElement("button");t.innerHTML="<",t.classList.add("left");var n=document.createElement("button");n.innerHTML="^",n.classList.add("up");var i=document.createElement("button");i.innerHTML=">",i.classList.add("right");var r=document.createElement("button");r.innerHTML="v",r.classList.add("down"),e.appendChild(t),e.appendChild(n),e.appendChild(i),e.appendChild(r),e.addEventListener("click",function(e){if(e.target.matches(".right")){var t=new Event("keydown");return t.keyCode=39,void document.dispatchEvent(t)}if(e.target.matches(".left")){var n=new Event("keydown");return n.keyCode=37,void document.dispatchEvent(n)}if(e.target.matches(".up")){var i=new Event("keydown");return i.keyCode=38,void document.dispatchEvent(i)}if(e.target.matches(".down")){var r=new Event("keydown");return r.keyCode=40,void document.dispatchEvent(r)}}),document.body.appendChild(e)}};var i,r=e("./detectMobile"),o=(i=r)&&i.__esModule?i:{default:i}},{"./detectMobile":10}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))}},{}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var r="https://kate-arcade-game.firebaseio.com/.json",o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"getScores",value:function(){return fetch(r).then(function(e){return e.json()})}},{key:"saveScore",value:function(n){this.getScores().then(function(e){var t=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e||[]),[n]);t.sort(function(e,t){return e.score>t.score?-1:e.score<t.score?1:0}),t.splice(10),fetch(r,{method:"PUT",body:JSON.stringify(t)})})}}]),e}();n.default=o},{}],12:[function(e,t,n){"use strict";function i(e){var t=this;this.routes=e||[],this.currentRoute,this.previousRoute,this.currentParams,this.previousParams,window.addEventListener("hashchange",function(){t.handler(window.location.hash)}),this.handler(window.location.hash)}Object.defineProperty(n,"__esModule",{value:!0}),(n.default=i).prototype={handler:function(e){this.previousRoute=this.currentRoute,this.previousParams=this.currentParams,this.currentRoute=this.findNewRoute(e),this.launchHandlers()},findNewRoute:function(e){e=e.slice(1);for(var t=0;t<this.routes.length;t++){var n=this.routes[t];if("string"==typeof n.match&&n.match===e)return this.currentParams="",n;if("function"==typeof n.match&&n.match(e))return this.currentParams="",n;if(n.match instanceof RegExp&&n.match.test(e))return this.currentParams=e.match(n.match)||[],this.currentParams.splice(0,1),n}},launchHandlers:function(){var e=this;Promise.resolve().then(function(){e.previousRoute&&e.previousRoute.onLeave&&e.previousRoute.onLeave(e.previousParams)}).then(function(){e.currentRoute&&e.currentRoute.onBeforeEnter&&e.currentRoute.onBeforeEnter(e.currentParams)}).then(function(){e.currentRoute&&e.currentRoute.onEnter&&e.currentRoute.onEnter(e.currentParams)})}}},{}]},{},[7]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvZ2FtZU9iamVjdHMvZHVtbXlFbmVteS5qcyIsInNyYy9qcy9nYW1lT2JqZWN0cy9nYW1lU3RhdGUuanMiLCJzcmMvanMvZ2FtZU9iamVjdHMvaGVyby5qcyIsInNyYy9qcy9nYW1lT2JqZWN0cy9wZXJzb24uanMiLCJzcmMvanMvZ2FtZU9iamVjdHMvc21hcnRFbmVteS5qcyIsInNyYy9qcy9nYW1lT2JqZWN0cy9zbWFydFBlcnNvbi5qcyIsInNyYy9qcy9tYWluLmpzIiwic3JjL2pzL3JvdXRlcy5qcyIsInNyYy9qcy91dGlscy9hZGRCdXR0b25zRm9yTW9iaWxlLmpzIiwic3JjL2pzL3V0aWxzL2RldGVjdE1vYmlsZS5qcyIsInNyYy9qcy91dGlscy9maXJlYmFzZS5qcyIsInNyYy9qcy91dGlscy9yb3V0ZXIuanMiXSwibmFtZXMiOlsiciIsImUiLCJuIiwidCIsIm8iLCJpIiwiZiIsImMiLCJyZXF1aXJlIiwidSIsImEiLCJFcnJvciIsImNvZGUiLCJwIiwiZXhwb3J0cyIsImNhbGwiLCJsZW5ndGgiLCIxIiwibW9kdWxlIiwiX3BlcnNvbiIsIkR1bW15RW5lbXkiLCJnYW1lU3RhdGUiLCJzZXR0aW5ncyIsImFyZ3VtZW50cyIsInVuZGVmaW5lZCIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfdGhpcyIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwiX19wcm90b19fIiwiT2JqZWN0IiwiZ2V0UHJvdG90eXBlT2YiLCJ3aWR0aCIsImhlaWdodCIsImdldFNwcml0ZXMiLCJnZW5lcmF0ZVBvc2l0aW9uIiwiZ2FtZSIsIm9yaWdpbmFsR2FtZSIsInJlcGxheURhdGEiLCJkdW1teUVuZW1pZXMiLCJwdXNoIiwicG9zaXRpb24iLCJ4IiwieSIsImRpcmVjdGlvbkFuZ2xlIiwidGltZSIsIkRhdGUiLCJnZXRUaW1lIiwiZ2FtZVRpbWVyIiwiX3BlcnNvbjIiLCJkZWZhdWx0IiwiTWF0aCIsImFicyIsInJhbmRvbSIsImdldERpc3RhbmNlVG9IZXJvIiwiaGVybyIsInNxcnQiLCJwb3ciLCJzcHJpdGVzIiwic2xpY2UiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJHYW1lU3RhdGUiLCJlbGVtZW50VG9EcmF3Iiwid2luZG93IiwiaW5uZXJXaWR0aCIsImRvY3VtZW50RWxlbWVudCIsImNsaWVudEhlaWdodCIsImJvZHkiLCJjb250YWludGVyIiwiY2FudmFzIiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsImFwcGVuZENoaWxkIiwiY29udGV4dCIsImdldENvbnRleHQiLCJfaGVybzIiLCJoZXJvTW92ZXMiLCJzbWFydEVtZW5pZXMiLCJjaGFyYWN0ZXJzIiwiQXJyYXkiLCJmaWxsIiwibWFwIiwiX2R1bW15RW5lbXkyIiwiX3NtYXJ0RW5lbXkyIiwiZm9yRWFjaCIsImhlcm9JbmZvIiwic2V0VGltZW91dCIsImVuZW15SW5mbyIsImxldmVsIiwiYmFzZVNwZWVkIiwiZ2FtZVBsYXlzIiwidGltZXJIYW5kbGVyIiwic2V0SW50ZXJ2YWwiLCJjbGVhclJlY3QiLCJjaGFyYWN0ZXIiLCJjaGVja0NoYXJhY3RlcnNJbnRlcnNlY3Rpb24iLCJkcmF3Q2hhcmFjdGVyIiwiZHJhd0ltYWdlIiwiZ2V0TmV4dFNwcml0ZSIsInNldExldmVsIiwiZW5lbXkiLCJkaWUiLCJsb3NlR2FtZSIsImVuZEdhbWUiLCJzY29yZSIsIm5hbWUiLCJwcm9tcHQiLCJfZmlyZWJhc2UyIiwic2F2ZVNjb3JlIiwiYWRkRW5kR2FtZUJ1dHRvbnMiLCJjbGVhckludGVydmFsIiwibGV2ZWxUaW1lciIsIl90aGlzMiIsIm1lc3NhZ2UiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmVDaGlsZCIsIl90aGlzMyIsImRpdkZvckJ1dHRvbnMiLCJyZXBsYXlCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwic2V0VXBHYW1lIiwicnVuR2FtZSIsInN0YXJ0TmV3R2FtZUJ1dHRvbiIsIl9zbWFydFBlcnNvbiIsIkhlcm8iLCJzZXRVcEhlcm8iLCJzcHJpdGVzQ29sbGVjdGlvbiIsImRvd24iLCJQSSIsIl9zbWFydFBlcnNvbjIiLCJldmVudCIsImtleUNvZGUiLCJzZWxlY3RTcHJpdGVzIiwic3BlZWQiLCJQZXJzb24iLCJjdXJyZW50SW1nIiwic3RlcCIsImdldFNwZWVkIiwiY29zIiwic2luIiwiU21hcnRFbmVteSIsInJhbmdlIiwiaGVyb1Bvc2l0aW9uIiwiZW5lbXlQb3NpdGlvbiIsImF0YW4iLCJfZ2V0IiwicHJvdG90eXBlIiwiU21hcnRQZXJzb24iLCJzZWxlY3RvciIsImdldEFsbFNwcml0ZXMiLCJ1cCIsImxlZnQiLCJyaWdodCIsIl9yb3V0ZXIyIiwiX3JvdXRlczIiLCJjb250ZW50IiwicXVlcnlTZWxlY3RvciIsIl9nYW1lU3RhdGUyIiwicm91dGVzIiwibWF0Y2giLCJvbkVudGVyIiwibG9jYXRpb24iLCJoYXNoIiwiY2hhbmdlQWN0aXZlUGFnZSIsIm9uTGVhdmUiLCJnZXRTY29yZXMiLCJ0aGVuIiwicmVzdWx0Iiwib2wiLCJpdGVtIiwibGkiLCJkaXZGb3JEaXZpc2lvbiIsImRpdiIsIm5ld1BhZ2UiLCJjbGFzc05hbWUiLCJwYXJlbnRFbGVtZW50IiwiX2RldGVjdE1vYmlsZTIiLCJidXR0b25MZWZ0IiwiYnV0dG9uVXAiLCJidXR0b25SaWdodCIsImJ1dHRvbkRvd24iLCJ0YXJnZXQiLCJtYXRjaGVzIiwiRXZlbnQiLCJkaXNwYXRjaEV2ZW50IiwiX2UiLCJfZTIiLCJfZTMiLCJfZGV0ZWN0TW9iaWxlIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwidXJsIiwiRmlyZVN0b3JlIiwiZmV0Y2giLCJyZXNwb25zZSIsImpzb24iLCJpbmZvVG9TYXZlIiwic2NvcmVzIiwibmV3U2NvcmVzIiwiY29uY2F0IiwiX3RvQ29uc3VtYWJsZUFycmF5Iiwic29ydCIsIml0ZW0xIiwiaXRlbTIiLCJzcGxpY2UiLCJtZXRob2QiLCJKU09OIiwic3RyaW5naWZ5IiwiUm91dGVyIiwicm91dGVQYXJhbXMiLCJjdXJyZW50Um91dGUiLCJwcmV2aW91c1JvdXRlIiwiY3VycmVudFBhcmFtcyIsInByZXZpb3VzUGFyYW1zIiwiaGFuZGxlciIsImZpbmROZXdSb3V0ZSIsImxhdW5jaEhhbmRsZXJzIiwiZWxlbWVudCIsIlJlZ0V4cCIsInRlc3QiLCJQcm9taXNlIiwicmVzb2x2ZSIsIm9uQmVmb3JlRW50ZXIiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEVBQUFDLEVBQUFDLEdBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0FBQSxJQUFBSixFQUFBRyxHQUFBLENBQUEsSUFBQUosRUFBQUksR0FBQSxDQUFBLElBQUFFLEVBQUEsbUJBQUFDLFNBQUFBLFFBQUEsSUFBQUYsR0FBQUMsRUFBQSxPQUFBQSxFQUFBRixHQUFBLEdBQUEsR0FBQUksRUFBQSxPQUFBQSxFQUFBSixHQUFBLEdBQUEsSUFBQUssRUFBQSxJQUFBQyxNQUFBLHVCQUFBTixFQUFBLEtBQUEsTUFBQUssRUFBQUUsS0FBQSxtQkFBQUYsRUFBQSxJQUFBRyxFQUFBWCxFQUFBRyxHQUFBLENBQUFTLFFBQUEsSUFBQWIsRUFBQUksR0FBQSxHQUFBVSxLQUFBRixFQUFBQyxRQUFBLFNBQUFkLEdBQUEsT0FBQUksRUFBQUgsRUFBQUksR0FBQSxHQUFBTCxJQUFBQSxJQUFBYSxFQUFBQSxFQUFBQyxRQUFBZCxFQUFBQyxFQUFBQyxFQUFBQyxHQUFBLE9BQUFELEVBQUFHLEdBQUFTLFFBQUEsSUFBQSxJQUFBTCxFQUFBLG1CQUFBRCxTQUFBQSxRQUFBSCxFQUFBLEVBQUFBLEVBQUFGLEVBQUFhLE9BQUFYLElBQUFELEVBQUFELEVBQUFFLElBQUEsT0FBQUQsRUFBQSxDQUFBLENBQUFhLEVBQUEsQ0FBQSxTQUFBVCxFQUFBVSxFQUFBSiw0Z0JDQUFLLEVBQUFYLEVBQUEsb0RBRXFCWSxjQUNqQixTQUFBQSxFQUFBQyxHQUFzQyxJQUFmQyxFQUFlLEVBQUFDLFVBQUFQLGFBQUFRLElBQUFELFVBQUEsR0FBQUEsVUFBQSxHQUFKLGdHQUFJRSxDQUFBQyxLQUFBTixHQUFBLElBQUFPLHlMQUFBQyxDQUFBRixNQUFBTixFQUFBUyxXQUFBQyxPQUFBQyxlQUFBWCxJQUFBTCxLQUFBVyxLQUFBTCxJQUFBLE9BRWxDTSxFQUFBSyxNQUFBLEdBQ0FMLEVBQUFNLE9BQUEsR0FDQU4sRUFBQU8sYUFDQVAsRUFBQVEsbUJBRUlSLEVBQUFTLEtBQUpDLGFBQ0lWLEVBQUFTLEtBQUFFLFdBQUFDLGFBQUFDLEtBQXVDLENBQ25DbEIsU0FBVSxDQUNObUIsU0FBVSxDQUNOQyxFQUFHZixFQUFBYyxTQURHQyxFQUVOQyxFQUFHaEIsRUFBQWMsU0FBY0UsR0FFckJDLGVBQWdCakIsRUFBS2lCLGdCQUV6QkMsTUFBTSxJQUFBQyxNQUFBQyxVQUF1QnBCLEVBQUFTLEtBQVVZLGFBRzNDckIsRUFBQWMsU0FBQUMsRUFBa0JwQixFQUFBbUIsU0FBbEJDLEVBQ0FmLEVBQUFjLFNBQUFFLEVBQWtCckIsRUFBQW1CLFNBQWxCRSxFQUNBaEIsRUFBQWlCLGVBQXNCdEIsRUFBdEJzQixnQkFyQjhCakIsMFZBREZzQixFQUFBQyx1REEyQmhDLEtBQ0l4QixLQUFBZSxTQUFnQixDQUNaQyxFQUFHUyxLQUFBQyxJQUFTMUIsS0FBQU0sTUFBYU4sS0FBQVUsS0FBQUosTUFBa0JtQixLQUQvQkUsVUFFWlYsRUFBR2pCLEtBQUFVLEtBQUFILE9BQUEsRUFBdUJrQixLQUFBRSxVQUV6QjNCLEtBQUE0QixvQkFMVCxtREFRQSxJQUFJQyxFQUFPN0IsS0FBQVUsS0FBWG1CLEtBQ0EsT0FBT0osS0FBQUssS0FBVUwsS0FBQU0sSUFBU0YsRUFBQWQsU0FBQUMsRUFBa0JoQixLQUFBZSxTQUEzQkMsRUFBQSxHQUFpRFMsS0FBQU0sSUFBU0YsRUFBQWQsU0FBQUUsRUFBa0JqQixLQUFBZSxTQUEzQkUsRUFBbEUseUNBR0FqQixLQUFBZ0MsUUFBZSxHQUFBQyxNQUFBNUMsS0FBYzZDLFNBQUFDLGlCQUE3QixtQ0F2Q2F6QyxpV0NGckJaLEVBQUEsZUFDQUEsRUFBQSxxQkFDQUEsRUFBQSxxQkFDQUEsRUFBQSw2RUFFcUJzRCxhQUNwQixTQUFBQSxFQUFBQyxnR0FBMkJ0QyxDQUFBQyxLQUFBb0MsR0FDMUJwQyxLQUFBTSxNQUFhLEtBQUFnQyxPQUFBQyxXQUFBLElBQW1DRCxPQUFoREMsV0FFQXZDLEtBQUFPLFFBQWUyQixTQUFBTSxnQkFBQUMsY0FDWFAsU0FBQVEsS0FEVUQsY0FBZCxJQUdBekMsS0FBQTJDLFdBQUFOLGdEQUc4QixJQUFBcEMsRUFBQUQsS0FBckJXLElBQXFCLEVBQUFkLFVBQUFQLGFBQUFRLElBQUFELFVBQUEsS0FBQUEsVUFBQSxHQUM5QkcsS0FBQVcsYUFBQUEsRUFDQVgsS0FBQTRDLE9BQWNWLFNBQUFXLGNBQWQsVUFDQTdDLEtBQUEyQyxXQUFBRyxVQUFBLEdBQ0E5QyxLQUFBMkMsV0FBQUksWUFBNEIvQyxLQUE1QjRDLFFBQ0E1QyxLQUFBNEMsT0FBQXRDLE1BQW9CTixLQUFwQk0sTUFDQU4sS0FBQTRDLE9BQUFyQyxPQUFxQlAsS0FBckJPLE9BQ0FQLEtBQUFnRCxRQUFlaEQsS0FBQTRDLE9BQUFLLFdBQWYsTUFHQWpELEtBQUE2QixLQUFZLElBQUlxQixFQUFKMUIsUUFBWnhCLE1BSUlBLEtBQUpXLGNBQ0NYLEtBQUFZLFdBQWtCLENBQ2pCdUMsVUFEaUIsR0FFakJDLGFBRmlCLEdBR2pCdkMsYUFBYyxJQUVmYixLQUFBcUQsV0FBa0IsSUFBQUMsTUFBQSxHQUFBQyxLQUFBLEdBQUFDLElBQXlCLFdBQUEsT0FBTSxJQUFJQyxFQUFKakMsUUFBTnZCLEtBQzNDRCxLQUFBcUQsV0FBQXZDLEtBQXFCLElBQUk0QyxFQUFKbEMsUUFBckJ4QixTQUVBQSxLQUFBcUQsV0FBQSxHQUNBckQsS0FBQVksV0FBQXVDLFVBQUFRLFFBQWtDLFNBQUFDLEdBQ2pDQyxXQUFXLFdBQ1Y1RCxFQUFBNEIsS0FBQVgsZUFBMkIwQyxFQUEzQjFDLGdCQUNFMEMsRUFGSHpDLFFBSURuQixLQUFBWSxXQUFBd0MsYUFBQU8sUUFBcUMsU0FBQUcsR0FDcENELFdBQVcsV0FBUTVELEVBQUFvRCxXQUFBdkMsS0FBcUIsSUFBSTRDLEVBQUpsQyxRQUFBdkIsRUFBcUI2RCxFQUExQ2xFLFlBQW1Fa0UsRUFBdEYzQyxRQUVEbkIsS0FBQVksV0FBQUMsYUFBQThDLFFBQXFDLFNBQUFHLEdBQ3BDRCxXQUFXLFdBQVE1RCxFQUFBb0QsV0FBQXZDLEtBQXFCLElBQUkyQyxFQUFKakMsUUFBQXZCLEVBQXFCNkQsRUFBMUNsRSxZQUFtRWtFLEVBQXRGM0MsU0FNRm5CLEtBQUErRCxNQUFBLEVBQ0EvRCxLQUFBZ0UsVUFBQSxFQUNBaEUsS0FBQWlFLFdBQUEsRUFDQWpFLEtBQUFzQixVQUFBLEVBRUF0QixLQUFBa0UsYUFBb0JDLFlBQVksV0FDL0JsRSxFQUFBK0MsUUFBQW9CLFVBQUEsRUFBQSxFQUE2Qm5FLEVBQTdCSyxNQUF5Q0wsRUFBekNNLFFBRUFOLEVBQUFvRCxXQUFBTSxRQUF3QixTQUFBVSxHQUFBLE9BQWFwRSxFQUFBcUUsNEJBQWlDckUsRUFBakM0QixLQUFid0MsS0FFeEJwRSxFQUFBc0UsY0FBbUJ0RSxFQUFuQjRCLE1BQ0E1QixFQUFBb0QsV0FBQU0sUUFBd0IsU0FBQVUsR0FBQSxPQUFhcEUsRUFBQXNFLGNBQWJGLE1BTnpCLDJDQVVhQSxHQUNickUsS0FBQWdELFFBQUF3QixVQUF1QkgsRUFBdkJJLGdCQUFrREosRUFBQXRELFNBQWxEQyxFQUF3RXFELEVBQUF0RCxTQUF4RUUsRUFBOEZvRCxFQUE5Ri9ELE1BQStHK0QsRUFBL0c5RCwwQ0FJQVAsS0FBQXNCLFdBQWlCLElBQUFGLE1BQWpCQyxVQUNBckIsS0FBQWlFLFdBQUEsRUFDQWpFLEtBQUFnRSxVQUFBLEVBQ0FoRSxLQUFBMEUsK0RBRzJCN0MsRUFBTThDLEdBRzNCOUMsRUFBQWQsU0FBQUMsRUFGTixJQUVtQzJELEVBQUE1RCxTQUFBQyxFQUFtQjJELEVBQWpEckUsT0FBb0V1QixFQUFBZCxTQUFBQyxFQUFrQmEsRUFBbkJ2QixPQUFrQ3FFLEVBQUE1RCxTQUFBQyxFQUYxRyxJQUdHYSxFQUFBZCxTQUFBRSxFQUZILElBRWdDMEQsRUFBQTVELFNBQUFFLEVBQW1CMEQsRUFBakRwRSxRQUFxRXNCLEVBQUFkLFNBQUFFLEVBQWtCWSxFQUFuQnRCLFFBQW1Db0UsRUFBQTVELFNBQUFFLEVBRnpHLEtBR0NZLEVBQUErQyxNQUNBNUUsS0FBQTZFLCtDQU1ELEdBREE3RSxLQUFBOEUsVUFDSTlFLEtBQUpXLGFBQXVCLENBQ3RCLElBQUlvRSxJQUFTLElBQUEzRCxNQUFBQyxVQUF1QnJCLEtBQXhCc0IsV0FBWixJQUNJMEQsRUFBT0MsT0FBQSxpQkFBQUYsRUFBQSw4QkFBWCxTQUNBQyxHQUFRRSxFQUFBMUQsUUFBQTJELFVBQW9CLENBQzNCSCxLQUQyQkEsRUFDckJELE1BQUFBLElBR1IvRSxLQUFBb0Ysc0RBSUFDLGNBQWNyRixLQUFka0UsY0FDQW1CLGNBQWNyRixLQUFkc0YsWUFDQXRGLEtBQUFpRSxXQUFBLEVBQ0FqRSxLQUFBZ0UsVUFBQSxxQ0FHVSxJQUFBdUIsRUFBQXZGLEtBQ1ZBLEtBQUFzRixXQUFrQm5CLFlBQVksV0FFN0IsR0FEQW9CLEVBQUF4QixPQUFBLEVBQ0l3QixFQUFKNUUsYUFBdUIsQ0FDdEI0RSxFQUFBbEMsV0FBQXZDLEtBQXFCLElBQUkyQyxFQUFKakMsUUFBckIrRCxJQUNJQSxFQUFBeEIsTUFBQSxHQUFKLEdBQ0N3QixFQUFBbEMsV0FBQXZDLEtBQXFCLElBQUk0QyxFQUFKbEMsUUFBckIrRCxJQUVELElBQUlDLEVBQVV0RCxTQUFBVyxjQUFkLE9BQ0EyQyxFQUFBQyxVQUFBQyxJQUFBLFlBQ0FGLEVBQUExQyxVQUFBLDZCQUFpRHlDLEVBQWpEeEIsTUFFQXdCLEVBQUE1QyxXQUFBSSxZQUFBeUMsR0FDQTNCLFdBQVcsV0FDVjBCLEVBQUE1QyxXQUFBZ0QsWUFBQUgsSUFERCxPQVpGLGlEQW1CbUIsSUFBQUksRUFBQTVGLEtBQ2Y2RixFQUFnQjNELFNBQUFXLGNBQXBCLE9BQ0FnRCxFQUFBSixVQUFBQyxJQUFBLGVBRUEsSUFBSUksRUFBZTVELFNBQUFXLGNBQW5CLFVBQ0FpRCxFQUFBaEQsVUFBQSxpQkFBeUM5QyxLQUFBVyxhQUFBLEdBQXpDLFNBQ0FtRixFQUFBQyxpQkFBQSxRQUF1QyxXQUN0Q0gsRUFBQUksV0FBQSxHQUNBSixFQUFBSyxZQUdELElBQUlDLEVBQXFCaEUsU0FBQVcsY0FBekIsVUFDQXFELEVBQUFwRCxVQUFBLGlCQUNBb0QsRUFBQUgsaUJBQUEsUUFBNkMsV0FDNUNILEVBQUFJLGNBR0RILEVBQUE5QyxZQUFBK0MsR0FDQUQsRUFBQTlDLFlBQUFtRCxHQUVBbEcsS0FBQTJDLFdBQUFJLFlBQUE4QyxzQkFoSm1CekQsc21CQ0xyQitELEVBQUFySCxFQUFBLHlEQUVxQnNILGNBQ2pCLFNBQUFBLEVBQUF6RyxnR0FBdUJJLENBQUFDLEtBQUFvRyxHQUFBLElBQUFuRyx5TEFBQUMsQ0FBQUYsTUFBQW9HLEVBQUFqRyxXQUFBQyxPQUFBQyxlQUFBK0YsSUFBQS9HLEtBQUFXLEtBQUFMLEVBQUEsV0FBQSxPQUVmTSxFQUFBUyxLQUFKQyxjQUNJVixFQUFBb0csWUFFSnBHLEVBQUFLLE1BQUEsR0FDQUwsRUFBQU0sT0FBQSxHQUNBTixFQUFBYyxTQUFnQixDQUNaQyxHQUFJZixFQUFBUyxLQUFBSixNQUFrQkwsRUFBbkJLLE9BRFMsRUFFWlcsRUFBR2hCLEVBQUFTLEtBQUFILE9BQW1CTixFQUFLTSxRQUcvQk4sRUFBQStCLFFBQWUvQixFQUFBcUcsa0JBQWZDLEtBQ0F0RyxFQUFBaUIsZUFBc0JPLEtBQUErRSxHQUF0QixFQWJtQnZHLDBWQURPd0csRUFBQWpGLGdEQWlCbEIsSUFBQStELEVBQUF2RixLQUNSa0MsU0FBQTZELGlCQUFBLFVBQXFDLFNBQUFXLEdBQ2pDLE9BQVFBLEVBQVJDLFNBQ0ksS0FBQSxHQUNJcEIsRUFBQXJFLGVBQXNCTyxLQUF0QitFLEdBQ0EsTUFFSixLQUFBLEdBQ0lqQixFQUFBckUsZUFBc0JPLEtBQUErRSxHQUF0QixFQUNBLE1BRUosS0FBQSxHQUNJakIsRUFBQXJFLGVBQUEsRUFDQSxNQUVKLEtBQUEsR0FDSXFFLEVBQUFyRSxlQUFzQk8sS0FBQStFLEdBQUEsRUFBdEIsRUFDQSxNQUVKLFFBQ0ksT0FHSGpCLEVBQUE3RSxLQUFMdUQsV0FDSXNCLEVBQUE3RSxLQUFBdUYsVUFHQVYsRUFBQTdFLEtBQUpDLGNBQ0k0RSxFQUFBN0UsS0FBQUUsV0FBQXVDLFVBQUFyQyxLQUFvQyxDQUFFSSxlQUFnQnFFLEVBQWxCckUsZUFBdUNDLE1BQU0sSUFBQUMsTUFBQUMsVUFBdUJrRSxFQUFBN0UsS0FBeEdZLFlBRUppRSxFQUFBcUIscURBSUo1RyxLQUFBNkcsTUFBYTdHLEtBQUFVLEtBQUFzRCxVQUFzQmhFLEtBQUFVLEtBQW5DcUQsd0RBbkRhcUMsc1dDRkFVLGFBQ2pCLFNBQUFBLEVBQUFuSCxnR0FBdUJJLENBQUFDLEtBQUE4RyxHQUNuQjlHLEtBQUFVLEtBQUFmLEVBQ0FLLEtBQUFrQixlQUFzQixFQUFJTyxLQUFKK0UsR0FBYy9FLEtBQXBDRSxTQUNBM0IsS0FBQWUsU0FBZ0IsQ0FDWkMsRUFEWSxFQUVaQyxFQUFHLEdBRVBqQixLQUFBNkcsTUFBYWxILEVBQUFvRSxNQUFrQnBFLEVBQWxCcUUsVUFBYixFQUNBaEUsS0FBQStHLFdBQUEsb0RBT0EsT0FKQS9HLEtBQUFnSCxPQUNJaEgsS0FBQStHLFlBQW1CL0csS0FBQWdDLFFBQXZCMUMsU0FDSVUsS0FBQStHLFdBQUEsR0FFRy9HLEtBQUFnQyxRQUFhaEMsS0FBcEIrRyw2Q0FJQS9HLEtBQUFpSCxXQUNBakgsS0FBQWUsU0FBQUMsR0FBbUJTLEtBQUF5RixJQUFTbEgsS0FBVGtCLGdCQUFnQ2xCLEtBQW5ENkcsTUFDSTdHLEtBQUFlLFNBQUFDLEVBQWtCaEIsS0FBQU0sTUFBbEIsRUFBbUNOLEtBQUFVLEtBQXZDSixRQUNJTixLQUFBZSxTQUFBQyxHQUFtQmhCLEtBQURNLE1BQWxCLEdBRUFOLEtBQUFlLFNBQUFDLEVBQWtCaEIsS0FBQU0sTUFBbEIsRUFBSixJQUNJTixLQUFBZSxTQUFBQyxFQUFrQmhCLEtBQUFVLEtBQUFKLE1BQWtCTixLQUFBTSxNQUFwQyxHQUVKTixLQUFBZSxTQUFBRSxHQUFtQlEsS0FBQTBGLElBQVNuSCxLQUFUa0IsZ0JBQWdDbEIsS0FBbkQ2RyxNQUNJN0csS0FBQWUsU0FBQUUsRUFBa0JqQixLQUFBTyxPQUFsQixFQUFvQ1AsS0FBQVUsS0FBeENILFNBQ0lQLEtBQUFlLFNBQUFFLEdBQW1CakIsS0FBRE8sT0FBbEIsR0FFQVAsS0FBQWUsU0FBQUUsRUFBa0JqQixLQUFBTyxPQUFsQixFQUFKLElBQ0lQLEtBQUFlLFNBQUFFLEVBQWtCakIsS0FBQVUsS0FBQUgsT0FBbUJQLEtBQUFPLE9BQXJDLHNDQUlKUCxLQUFBNkcsTUFBYTdHLEtBQUFVLEtBQUFzRCxVQUFzQmhFLEtBQUFVLEtBQXRCcUQsTUFBYixxQkFyQ2ErQyxtaUJDQXJCWCxFQUFBckgsRUFBQSx5REFFcUJzSSxjQUNqQixTQUFBQSxFQUFBekgsR0FBc0MsSUFBZkMsRUFBZSxFQUFBQyxVQUFBUCxhQUFBUSxJQUFBRCxVQUFBLEdBQUFBLFVBQUEsR0FBSixnR0FBSUUsQ0FBQUMsS0FBQW9ILEdBQUEsSUFBQW5ILHlMQUFBQyxDQUFBRixNQUFBb0gsRUFBQWpILFdBQUFDLE9BQUFDLGVBQUErRyxJQUFBL0gsS0FBQVcsS0FBQUwsRUFBQSxVQUFBLE9BRWxDTSxFQUFBMkcsZ0JBQ0EzRyxFQUFBb0gsTUFBQSxJQUNBcEgsRUFBQUssTUFBQSxHQUNBTCxFQUFBTSxPQUFBLEdBQ0FOLEVBQUFRLG1CQUVJUixFQUFBUyxLQUFKQyxhQUNJVixFQUFBUyxLQUFBRSxXQUFBd0MsYUFBQXRDLEtBQXVDLENBQ25DbEIsU0FBVSxDQUNObUIsU0FBVSxDQUNOQyxFQUFHZixFQUFBYyxTQURHQyxFQUVOQyxFQUFHaEIsRUFBQWMsU0FBY0UsR0FFckJDLGVBQWdCakIsRUFBS2lCLGdCQUV6QkMsTUFBTSxJQUFBQyxNQUFBQyxVQUF1QnBCLEVBQUFTLEtBQVVZLGFBRzNDckIsRUFBQWMsU0FBQUMsRUFBa0JwQixFQUFBbUIsU0FBbEJDLEVBQ0FmLEVBQUFjLFNBQUFFLEVBQWtCckIsRUFBQW1CLFNBQWxCRSxFQUNBaEIsRUFBQWlCLGVBQXNCdEIsRUFBdEJzQixnQkF0QjhCakIsMFZBREZ3RyxFQUFBakYsMkNBMkJoQyxJQUFJOEYsRUFBZXRILEtBQUFVLEtBQUFtQixLQUFuQmQsU0FDSXdHLEVBQWdCdkgsS0FBcEJlLFNBQ0EsR0FBSWYsS0FBQTRCLHFCQUE0QjVCLEtBQTVCcUgsT0FBMkNDLEVBQUF0RyxJQUFtQnVHLEVBQWxFdkcsRUFBb0YsQ0FDaEYsSUFBSXdHLEVBQU8vRixLQUFBK0YsTUFBV0YsRUFBQXJHLEVBQWlCc0csRUFBbEJ0RyxJQUFzQ3FHLEVBQUF0RyxFQUFpQnVHLEVBQTVFdkcsSUFFTXNHLEVBQUF0RyxFQUFpQnVHLEVBQWxCdkcsR0FBdUNzRyxFQUFBckcsRUFBaUJzRyxFQUF6RHRHLEdBQ0VxRyxFQUFBdEcsRUFBaUJ1RyxFQUFsQnZHLEdBQXVDc0csRUFBQXJHLEVBQWlCc0csRUFEN0R0RyxFQUVJakIsS0FBQWtCLGVBQXNCLEVBQUlPLEtBQUorRSxHQUF0QmdCLEVBRUF4SCxLQUFBa0IsZUFBc0JPLEtBQUErRSxHQUF0QmdCLEVBRUp4SCxLQUFBNEcsMlFBRUphLENBQUFMLEVBQUFNLFVBQUF2SCxXQUFBQyxPQUFBQyxlQUFBK0csRUFBQU0sV0FBQSxPQUFBMUgsTUFBQVgsS0FBQVcsaURBSUEsS0FDSUEsS0FBQWUsU0FBZ0IsQ0FDWkMsRUFBR1MsS0FBQUMsSUFBUzFCLEtBQUFNLE1BQWFOLEtBQUFVLEtBQUFKLE1BQWtCbUIsS0FEL0JFLFVBRVpWLEVBQUdqQixLQUFBVSxLQUFBSCxPQUFBLEVBQXVCa0IsS0FBQUUsVUFFekIzQixLQUFBNEIsb0JBTFQsbURBU0EsSUFBSUMsRUFBTzdCLEtBQUFVLEtBQVhtQixLQUNBLE9BQU9KLEtBQUFLLEtBQVVMLEtBQUFNLElBQVNGLEVBQUFkLFNBQUFDLEVBQWtCaEIsS0FBQWUsU0FBM0JDLEVBQUEsR0FBaURTLEtBQUFNLElBQVNGLEVBQUFkLFNBQUFFLEVBQWtCakIsS0FBQWUsU0FBM0JFLEVBQWxFLHVCQXREYW1HLG9qQkNGckIzSCxFQUFBWCxFQUFBLG9EQUVxQjZJLGNBQ2pCLFNBQUFBLEVBQUFoSSxFQUFBaUksZ0dBQWlDN0gsQ0FBQUMsS0FBQTJILEdBQUEsSUFBQTFILHlMQUFBQyxDQUFBRixNQUFBMkgsRUFBQXhILFdBQUFDLE9BQUFDLGVBQUFzSCxJQUFBdEksS0FBQVcsS0FBQUwsSUFBQSxPQUU3Qk0sRUFBQTJILFNBQUFBLEVBQ0EzSCxFQUFBNEgsZ0JBSDZCNUgsMFZBRElzQixFQUFBQyxvREFPNUJ4QixLQUFBa0IsZ0JBQXVCLEVBQUFPLEtBQUErRSxHQUF4QixHQUE2Q3hHLEtBQUFrQixnQkFBdUIsRUFBQU8sS0FBQStFLEdBQXhFLEVBQ0l4RyxLQUFBZ0MsUUFBZWhDLEtBQUFzRyxrQkFBZkMsS0FHQ3ZHLEtBQUFrQixnQkFBdUJPLEtBQUErRSxHQUF4QixHQUF5Q3hHLEtBQUFrQixnQkFBdUIsRUFBQU8sS0FBQStFLEdBQXBFLEVBQ0l4RyxLQUFBZ0MsUUFBZWhDLEtBQUFzRyxrQkFBZndCLEdBR0M5SCxLQUFBa0IsZ0JBQXVCLEVBQUFPLEtBQUErRSxHQUF4QixHQUE2Q3hHLEtBQUFrQixnQkFBdUIsRUFBQU8sS0FBQStFLEdBQXhFLEVBQ0l4RyxLQUFBZ0MsUUFBZWhDLEtBQUFzRyxrQkFBZnlCLEtBR0ovSCxLQUFBZ0MsUUFBZWhDLEtBQUFzRyxrQkFBZjBCLDhDQUlBaEksS0FBQXNHLGtCQUF5QixDQUNyQnlCLEtBQU0vSCxLQUFBUSxXQUFBLElBQW9CUixLQUFwQjRILFNBRGUsYUFFckJJLE1BQU9oSSxLQUFBUSxXQUFBLElBQW9CUixLQUFwQjRILFNBRmMsY0FHckJFLEdBQUk5SCxLQUFBUSxXQUFBLElBQW9CUixLQUFwQjRILFNBSGlCLFdBSXJCckIsS0FBTXZHLEtBQUFRLFdBQUEsSUFBb0JSLEtBQXBCNEgsU0FBQSxpREFJSEEsR0FDUCxNQUFPLEdBQUEzRixNQUFBNUMsS0FBYzZDLFNBQUFDLGlCQUFyQnlGLHVCQWhDYUQsbURDRnJCLFFBQUE3SSxFQUFBLHVCQUNBQSxFQUFBLGlFQUdBLElBRkFBLEVBQUEsZ0NBRUEwQyxXQUNBLElBQUl5RyxFQUFKekcsUUFBVzBHLEVBQVgxRywrSkNMQSxRQUFBMUMsRUFBQSxnQ0FDQUEsRUFBQSx3RUFFQSxJQUFJcUosRUFBVWpHLFNBQUFrRyxjQUFkLFlBQ0kxSCxFQUFPLElBQUkySCxFQUFKN0csUUFBWDJHLEdBRU1HLEVBQVMsQ0FDWCxDQUNJQyxNQURKLEdBRUlDLFFBQVMsV0FDTGxHLE9BQUFtRyxTQUFBQyxLQUFBLFNBR1IsQ0FDSUgsTUFESixRQUVJQyxRQUFTLFdBQ0xHLEVBQUEsU0FDQVIsRUFBQXJGLFVBQUEsZ0VBR1IsQ0FDSXlGLE1BREosT0FFSUMsUUFBUyxXQUNMRyxFQUFBLFFBQ0FqSSxFQUFBc0YsYUFFSjRDLFFBQVMsV0FDTGxJLEVBQUFvRSxZQUdSLENBQ0l5RCxNQURKLFNBRUlDLFFBQVMsV0FDTEcsRUFBQSxVQUVBekQsRUFBQTFELFFBQUFxSCxZQUFBQyxLQUEyQixTQUFBQyxHQUN2QlosRUFBQXJGLFVBQUEsNkNBQ0EsSUFBSWtHLEVBQUs5RyxTQUFBVyxjQUFULE1BQ0FrRyxFQUFBcEYsUUFBZSxTQUFBc0YsR0FDWCxJQUFJQyxFQUFLaEgsU0FBQVcsY0FBVCxNQUNBcUcsRUFBQXBHLFVBQWtCbUcsRUFBbEJqRSxLQUFBLE1BQWlDaUUsRUFBakNsRSxNQUNBaUUsRUFBQWpHLFlBQUFtRyxLQUdKLElBQUlDLEVBQWlCakgsU0FBQVcsY0FBckIsT0FDQXNHLEVBQUExRCxVQUFBQyxJQUFBLFNBQ0F5QyxFQUFBcEYsWUFBQW9HLEdBQ0EsSUFBSUMsRUFBTWxILFNBQUFXLGNBQVYsT0FDQXVHLEVBQUFyRyxZQUFBaUcsR0FDQWIsRUFBQXBGLFlBQUFxRyxRQU1oQixTQUFBVCxFQUFBVSxHQUNJbkgsU0FBQWtHLGNBQUEsV0FBQWtCLFVBQUEsR0FDQXBILFNBQUFrRyxjQUFBLFdBQUFpQixFQUFBLE1BQUFFLGNBQUFELFVBQUEsbUJBSVdoQixtSkMzREEsV0FDWCxJQUFJLEVBQUFrQixFQUFKaEksV0FBb0IsQ0FFaEIsSUFBSXFFLEVBQWdCM0QsU0FBQVcsY0FBcEIsT0FDQWdELEVBQUFKLFVBQUFDLElBQUEsV0FFQSxJQUFJK0QsRUFBYXZILFNBQUFXLGNBQWpCLFVBQ0E0RyxFQUFBM0csVUFBQSxJQUNBMkcsRUFBQWhFLFVBQUFDLElBQUEsUUFFQSxJQUFJZ0UsRUFBV3hILFNBQUFXLGNBQWYsVUFDQTZHLEVBQUE1RyxVQUFBLElBQ0E0RyxFQUFBakUsVUFBQUMsSUFBQSxNQUVBLElBQUlpRSxFQUFjekgsU0FBQVcsY0FBbEIsVUFDQThHLEVBQUE3RyxVQUFBLElBQ0E2RyxFQUFBbEUsVUFBQUMsSUFBQSxTQUVBLElBQUlrRSxFQUFhMUgsU0FBQVcsY0FBakIsVUFDQStHLEVBQUE5RyxVQUFBLElBQ0E4RyxFQUFBbkUsVUFBQUMsSUFBQSxRQUlBRyxFQUFBOUMsWUFBQTBHLEdBQ0E1RCxFQUFBOUMsWUFBQTJHLEdBQ0E3RCxFQUFBOUMsWUFBQTRHLEdBQ0E5RCxFQUFBOUMsWUFBQTZHLEdBRUEvRCxFQUFBRSxpQkFBQSxRQUF3QyxTQUFBVyxHQUNwQyxHQUFJQSxFQUFBbUQsT0FBQUMsUUFBSixVQUFvQyxDQUNoQyxJQUFJdkwsRUFBSSxJQUFBd0wsTUFBUixXQUdBLE9BRkF4TCxFQUFBb0ksUUFBQSxRQUNBekUsU0FBQThILGNBQUF6TCxHQUdKLEdBQUltSSxFQUFBbUQsT0FBQUMsUUFBSixTQUFtQyxDQUMvQixJQUFJRyxFQUFJLElBQUFGLE1BQVIsV0FHQSxPQUZBRSxFQUFBdEQsUUFBQSxRQUNBekUsU0FBQThILGNBQUFDLEdBR0osR0FBSXZELEVBQUFtRCxPQUFBQyxRQUFKLE9BQWlDLENBQzdCLElBQUlJLEVBQUksSUFBQUgsTUFBUixXQUdBLE9BRkFHLEVBQUF2RCxRQUFBLFFBQ0F6RSxTQUFBOEgsY0FBQUUsR0FHSixHQUFJeEQsRUFBQW1ELE9BQUFDLFFBQUosU0FBbUMsQ0FDL0IsSUFBSUssRUFBSSxJQUFBSixNQUFSLFdBR0EsT0FGQUksRUFBQXhELFFBQUEsUUFDQXpFLFNBQUE4SCxjQUFBRyxNQUtSakksU0FBQVEsS0FBQUssWUFBQThDLEtBMURSLE1BQUF1RSxFQUFBdEwsRUFBQSwwS0NBZSxXQUNYLFNBQUl1TCxVQUFBQyxVQUFBL0IsTUFBQSxhQUNHOEIsVUFBQUMsVUFBQS9CLE1BREgsV0FFRzhCLFVBQUFDLFVBQUEvQixNQUZILFlBR0c4QixVQUFBQyxVQUFBL0IsTUFISCxVQUlHOEIsVUFBQUMsVUFBQS9CLE1BSkgsVUFLRzhCLFVBQUFDLFVBQUEvQixNQUxILGdCQU1HOEIsVUFBQUMsVUFBQS9CLE1BTlAsb1dDREosSUFBSWdDLEVBQUosZ0RBRXFCQyxtTEFFYixPQUFPQyxNQUFBRixHQUFBekIsS0FBZ0IsU0FBQTRCLEdBQUEsT0FBWUEsRUFBWkMsMkNBRVZDLEdBRWI1SyxLQUFBNkksWUFBQUMsS0FBc0IsU0FBQStCLEdBQ2xCLElBQUlDLEVBQUEsR0FBQUMsNkhBQUFDLENBQWdCSCxHQUFoQixJQUFBLENBQUpELElBQ0FFLEVBQUFHLEtBQWUsU0FBQUMsRUFBQUMsR0FBQSxPQUFrQkQsRUFBQW5HLE1BQWNvRyxFQUFkcEcsT0FBQSxFQUFpQ21HLEVBQUFuRyxNQUFjb0csRUFBZHBHLE1BQUEsRUFBbkQsSUFDZitGLEVBQUFNLE9BQUEsSUFDQVgsTUFBQUYsRUFBVyxDQUNQYyxPQURPLE1BRVAzSSxLQUFNNEksS0FBQUMsVUFBQVQsMEJBWkROLHdDQ0VOLFNBQUFnQixFQUFBQyxHQUE2QixJQUFBeEwsRUFBQUQsS0FDeENBLEtBQUFzSSxPQUFjbUQsR0FBZCxHQUNBekwsS0FBQTBMLGFBQ0ExTCxLQUFBMkwsY0FDQTNMLEtBQUE0TCxjQUNBNUwsS0FBQTZMLGVBQ0F2SixPQUFBeUQsaUJBQUEsYUFBc0MsV0FDbEM5RixFQUFBNkwsUUFBYXhKLE9BQUFtRyxTQUFiQyxRQUVKMUksS0FBQThMLFFBQWF4SixPQUFBbUcsU0FBYkMsa0VBVG9COEMsR0FZeEI5RCxVQUFtQixDQUNmb0UsUUFBUyxTQUFBcEQsR0FDTDFJLEtBQUEyTCxjQUFxQjNMLEtBQXJCMEwsYUFDQTFMLEtBQUE2TCxlQUFzQjdMLEtBQXRCNEwsY0FDQTVMLEtBQUEwTCxhQUFvQjFMLEtBQUErTCxhQUFwQnJELEdBQ0ExSSxLQUFBZ00sa0JBRUpELGFBQWMsU0FBQXJELEdBQ1ZBLEVBQU9BLEVBQUF6RyxNQUFQLEdBRUEsSUFBSyxJQUFJdEQsRUFBVCxFQUFnQkEsRUFBSXFCLEtBQUFzSSxPQUFwQmhKLE9BQUFYLElBQTZDLENBQ3pDLElBQUlzTixFQUFVak0sS0FBQXNJLE9BQWQzSixHQUNBLEdBQUksaUJBQVFzTixFQUFSMUQsT0FBc0MwRCxFQUFBMUQsUUFBMUNHLEVBRUksT0FEQTFJLEtBQUE0TCxjQUFBLEdBQ0FLLEVBRUosR0FBSSxtQkFBUUEsRUFBUjFELE9BQXdDMEQsRUFBQTFELE1BQTVDRyxHQUVJLE9BREExSSxLQUFBNEwsY0FBQSxHQUNBSyxFQUVKLEdBQUtBLEVBQUExRCxpQkFBRDJELFFBQXFDRCxFQUFBMUQsTUFBQTRELEtBQXpDekQsR0FHSSxPQUZBMUksS0FBQTRMLGNBQXFCbEQsRUFBQUgsTUFBVzBELEVBQVgxRCxRQUFyQixHQUNBdkksS0FBQTRMLGNBQUFSLE9BQUEsRUFBQSxHQUNBYSxJQXZCR0QsZUFBQSxXQTJCRSxJQUFBekcsRUFBQXZGLEtBQ2JvTSxRQUFBQyxVQUFBdkQsS0FDVSxXQUFRdkQsRUFBQW9HLGVBQXNCcEcsRUFBQW9HLGNBQXRCL0MsU0FBb0RyRCxFQUFBb0csY0FBQS9DLFFBQTJCckQsRUFBL0VzRyxrQkFEbEIvQyxLQUVVLFdBQVF2RCxFQUFBbUcsY0FBcUJuRyxFQUFBbUcsYUFBckJZLGVBQXdEL0csRUFBQW1HLGFBQUFZLGNBQWdDL0csRUFBeEZxRyxpQkFGbEI5QyxLQUdVLFdBQVF2RCxFQUFBbUcsY0FBcUJuRyxFQUFBbUcsYUFBckJsRCxTQUFrRGpELEVBQUFtRyxhQUFBbEQsUUFBMEJqRCxFQUE1RXFHIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJpbXBvcnQgUGVyc29uIGZyb20gJy4vcGVyc29uJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIER1bW15RW5lbXkgZXh0ZW5kcyBQZXJzb24ge1xyXG4gICAgY29uc3RydWN0b3IoZ2FtZVN0YXRlLCBzZXR0aW5ncyA9IHt9KSB7XHJcbiAgICAgICAgc3VwZXIoZ2FtZVN0YXRlKTtcclxuICAgICAgICB0aGlzLndpZHRoID0gMzY7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSA0ODtcclxuICAgICAgICB0aGlzLmdldFNwcml0ZXMoKTtcclxuICAgICAgICB0aGlzLmdlbmVyYXRlUG9zaXRpb24oKTtcclxuICAgICAgICAvL9C30LDQv9C+0LzQuNC90LDQtdC8INC/0L7Qt9C40YbQuNGOINC4INCy0YDQtdC80Y8g0L/QvtGP0LLQu9C10L3QuNGPINCy0YDQsNCz0LBcclxuICAgICAgICBpZiAodGhpcy5nYW1lLm9yaWdpbmFsR2FtZSkge1xyXG4gICAgICAgICAgICB0aGlzLmdhbWUucmVwbGF5RGF0YS5kdW1teUVuZW1pZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6IHRoaXMucG9zaXRpb24ueCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeTogdGhpcy5wb3NpdGlvbi55XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb25BbmdsZTogdGhpcy5kaXJlY3Rpb25BbmdsZVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gdGhpcy5nYW1lLmdhbWVUaW1lclxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uLnggPSBzZXR0aW5ncy5wb3NpdGlvbi54O1xyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uLnkgPSBzZXR0aW5ncy5wb3NpdGlvbi55O1xyXG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbkFuZ2xlID0gc2V0dGluZ3MuZGlyZWN0aW9uQW5nbGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlUG9zaXRpb24oKSB7XHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgeDogTWF0aC5hYnModGhpcy53aWR0aCAtIHRoaXMuZ2FtZS53aWR0aCAqIE1hdGgucmFuZG9tKCkpLFxyXG4gICAgICAgICAgICAgICAgeTogdGhpcy5nYW1lLmhlaWdodCAvIDIgKiBNYXRoLnJhbmRvbSgpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSB3aGlsZSAodGhpcy5nZXREaXN0YW5jZVRvSGVybygpIDwgMjAwKTtcclxuICAgIH1cclxuICAgIGdldERpc3RhbmNlVG9IZXJvKCkge1xyXG4gICAgICAgIGxldCBoZXJvID0gdGhpcy5nYW1lLmhlcm87XHJcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyhoZXJvLnBvc2l0aW9uLnggLSB0aGlzLnBvc2l0aW9uLngsIDIpICsgTWF0aC5wb3coaGVyby5wb3NpdGlvbi55IC0gdGhpcy5wb3NpdGlvbi55LCAyKSk7XHJcbiAgICB9XHJcbiAgICBnZXRTcHJpdGVzKCkge1xyXG4gICAgICAgIHRoaXMuc3ByaXRlcyA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmdvYmxpbi1pbWcnKSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgSGVybyBmcm9tICcuL2hlcm8nO1xyXG5pbXBvcnQgRHVtbXlFbmVteSBmcm9tICcuL2R1bW15RW5lbXknO1xyXG5pbXBvcnQgU21hcnRFbmVteSBmcm9tICcuL3NtYXJ0RW5lbXknO1xyXG5pbXBvcnQgRmlyZVN0b3JlIGZyb20gJy4uL3V0aWxzL2ZpcmViYXNlJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVTdGF0ZSB7XHJcblx0Y29uc3RydWN0b3IoZWxlbWVudFRvRHJhdykge1xyXG5cdFx0dGhpcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoID49IDEwMDAgPyAxMDAwIDogd2luZG93LmlubmVyV2lkdGg7XHJcblxyXG5cdFx0dGhpcy5oZWlnaHQgPSAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodFxyXG5cdFx0XHR8fCBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCkgLSAxNjA7XHJcblxyXG5cdFx0dGhpcy5jb250YWludGVyID0gZWxlbWVudFRvRHJhdztcclxuXHR9XHJcblxyXG5cdHNldFVwR2FtZShvcmlnaW5hbEdhbWUgPSB0cnVlKSB7XHJcblx0XHR0aGlzLm9yaWdpbmFsR2FtZSA9IG9yaWdpbmFsR2FtZTtcclxuXHRcdHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcblx0XHR0aGlzLmNvbnRhaW50ZXIuaW5uZXJIVE1MID0gJyc7XHJcblx0XHR0aGlzLmNvbnRhaW50ZXIuYXBwZW5kQ2hpbGQodGhpcy5jYW52YXMpO1xyXG5cdFx0dGhpcy5jYW52YXMud2lkdGggPSB0aGlzLndpZHRoO1xyXG5cdFx0dGhpcy5jYW52YXMuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XHJcblx0XHR0aGlzLmNvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG5cclxuXHJcblx0XHR0aGlzLmhlcm8gPSBuZXcgSGVybyh0aGlzKTtcclxuXHJcblxyXG5cdFx0Ly/QuNC00LXRgiDQvtGA0LjQs9C40L3QsNC70YzQvdCw0Y8g0LjQs9GA0LA/XHJcblx0XHRpZiAodGhpcy5vcmlnaW5hbEdhbWUpIHtcclxuXHRcdFx0dGhpcy5yZXBsYXlEYXRhID0ge1xyXG5cdFx0XHRcdGhlcm9Nb3ZlczogW10sXHJcblx0XHRcdFx0c21hcnRFbWVuaWVzOiBbXSxcclxuXHRcdFx0XHRkdW1teUVuZW1pZXM6IFtdXHJcblx0XHRcdH07XHJcblx0XHRcdHRoaXMuY2hhcmFjdGVycyA9IG5ldyBBcnJheSgyKS5maWxsKDApLm1hcCgoKSA9PiBuZXcgRHVtbXlFbmVteSh0aGlzKSk7XHJcblx0XHRcdHRoaXMuY2hhcmFjdGVycy5wdXNoKG5ldyBTbWFydEVuZW15KHRoaXMpKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuY2hhcmFjdGVycyA9IFtdO1xyXG5cdFx0XHR0aGlzLnJlcGxheURhdGEuaGVyb01vdmVzLmZvckVhY2goaGVyb0luZm8gPT4ge1xyXG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5oZXJvLmRpcmVjdGlvbkFuZ2xlID0gaGVyb0luZm8uZGlyZWN0aW9uQW5nbGU7XHJcblx0XHRcdFx0fSwgaGVyb0luZm8udGltZSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHR0aGlzLnJlcGxheURhdGEuc21hcnRFbWVuaWVzLmZvckVhY2goZW5lbXlJbmZvID0+IHtcclxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHsgdGhpcy5jaGFyYWN0ZXJzLnB1c2gobmV3IFNtYXJ0RW5lbXkodGhpcywgZW5lbXlJbmZvLnNldHRpbmdzKSk7IH0sIGVuZW15SW5mby50aW1lKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdHRoaXMucmVwbGF5RGF0YS5kdW1teUVuZW1pZXMuZm9yRWFjaChlbmVteUluZm8gPT4ge1xyXG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4geyB0aGlzLmNoYXJhY3RlcnMucHVzaChuZXcgRHVtbXlFbmVteSh0aGlzLCBlbmVteUluZm8uc2V0dGluZ3MpKTsgfSwgZW5lbXlJbmZvLnRpbWUpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblxyXG5cclxuXHRcdHRoaXMubGV2ZWwgPSAxO1xyXG5cdFx0dGhpcy5iYXNlU3BlZWQgPSAwO1xyXG5cdFx0dGhpcy5nYW1lUGxheXMgPSBmYWxzZTtcclxuXHRcdHRoaXMuZ2FtZVRpbWVyID0gMDtcclxuXHJcblx0XHR0aGlzLnRpbWVySGFuZGxlciA9IHNldEludGVydmFsKCgpID0+IHtcclxuXHRcdFx0dGhpcy5jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XHJcblxyXG5cdFx0XHR0aGlzLmNoYXJhY3RlcnMuZm9yRWFjaChjaGFyYWN0ZXIgPT4gdGhpcy5jaGVja0NoYXJhY3RlcnNJbnRlcnNlY3Rpb24odGhpcy5oZXJvLCBjaGFyYWN0ZXIpKTtcclxuXHJcblx0XHRcdHRoaXMuZHJhd0NoYXJhY3Rlcih0aGlzLmhlcm8pO1xyXG5cdFx0XHR0aGlzLmNoYXJhY3RlcnMuZm9yRWFjaChjaGFyYWN0ZXIgPT4gdGhpcy5kcmF3Q2hhcmFjdGVyKGNoYXJhY3RlcikpO1xyXG5cdFx0fSwgMTAwKTtcclxuXHR9XHJcblxyXG5cdGRyYXdDaGFyYWN0ZXIoY2hhcmFjdGVyKSB7XHJcblx0XHR0aGlzLmNvbnRleHQuZHJhd0ltYWdlKGNoYXJhY3Rlci5nZXROZXh0U3ByaXRlKCksIGNoYXJhY3Rlci5wb3NpdGlvbi54LCBjaGFyYWN0ZXIucG9zaXRpb24ueSwgY2hhcmFjdGVyLndpZHRoLCBjaGFyYWN0ZXIuaGVpZ2h0KTtcclxuXHR9XHJcblxyXG5cdHJ1bkdhbWUoKSB7XHJcblx0XHR0aGlzLmdhbWVUaW1lciA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG5cdFx0dGhpcy5nYW1lUGxheXMgPSB0cnVlO1xyXG5cdFx0dGhpcy5iYXNlU3BlZWQgPSA1O1xyXG5cdFx0dGhpcy5zZXRMZXZlbCgpO1xyXG5cdH1cclxuXHJcblx0Y2hlY2tDaGFyYWN0ZXJzSW50ZXJzZWN0aW9uKGhlcm8sIGVuZW15KSB7XHJcblx0XHRsZXQgZGVsdGFYID0gMjA7XHJcblx0XHRsZXQgZGVsdGFZID0gMjA7XHJcblx0XHRpZiAoKChoZXJvLnBvc2l0aW9uLnggKyBkZWx0YVggPD0gKGVuZW15LnBvc2l0aW9uLnggKyBlbmVteS53aWR0aCkpICYmICgoaGVyby5wb3NpdGlvbi54ICsgaGVyby53aWR0aCkgPj0gZW5lbXkucG9zaXRpb24ueCArIGRlbHRhWCkpICYmXHJcblx0XHRcdCgoaGVyby5wb3NpdGlvbi55ICsgZGVsdGFZIDw9IChlbmVteS5wb3NpdGlvbi55ICsgZW5lbXkuaGVpZ2h0KSkgJiYgKChoZXJvLnBvc2l0aW9uLnkgKyBoZXJvLmhlaWdodCkgPj0gZW5lbXkucG9zaXRpb24ueSArIGRlbHRhWSkpKSB7XHJcblx0XHRcdGhlcm8uZGllKCk7XHJcblx0XHRcdHRoaXMubG9zZUdhbWUoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGxvc2VHYW1lKCkge1xyXG5cdFx0dGhpcy5lbmRHYW1lKCk7XHJcblx0XHRpZiAodGhpcy5vcmlnaW5hbEdhbWUpIHtcclxuXHRcdFx0bGV0IHNjb3JlID0gKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gdGhpcy5nYW1lVGltZXIpIC8gMTAwMDtcclxuXHRcdFx0bGV0IG5hbWUgPSBwcm9tcHQoYFlvdXIgc2NvcmUgaXMgJHtzY29yZX0gc2Vjb25kcy5cXG4gRW50ZXIgeW91ciBuYW1lYCwgJ05pbmphJyk7XHJcblx0XHRcdG5hbWUgJiYgRmlyZVN0b3JlLnNhdmVTY29yZSh7XHJcblx0XHRcdFx0bmFtZSwgc2NvcmVcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0XHR0aGlzLmFkZEVuZEdhbWVCdXR0b25zKCk7XHJcblx0fVxyXG5cclxuXHRlbmRHYW1lKCkge1xyXG5cdFx0Y2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVySGFuZGxlcik7XHJcblx0XHRjbGVhckludGVydmFsKHRoaXMubGV2ZWxUaW1lcik7XHJcblx0XHR0aGlzLmdhbWVQbGF5cyA9IGZhbHNlO1xyXG5cdFx0dGhpcy5iYXNlU3BlZWQgPSAwO1xyXG5cdH1cclxuXHJcblx0c2V0TGV2ZWwoKSB7XHJcblx0XHR0aGlzLmxldmVsVGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcblx0XHRcdHRoaXMubGV2ZWwgKz0gMTtcclxuXHRcdFx0aWYgKHRoaXMub3JpZ2luYWxHYW1lKSB7XHJcblx0XHRcdFx0dGhpcy5jaGFyYWN0ZXJzLnB1c2gobmV3IER1bW15RW5lbXkodGhpcykpO1xyXG5cdFx0XHRcdGlmICh0aGlzLmxldmVsICUgMiA9PSAxKSB7XHJcblx0XHRcdFx0XHR0aGlzLmNoYXJhY3RlcnMucHVzaChuZXcgU21hcnRFbmVteSh0aGlzKSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGxldCBtZXNzYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdFx0bWVzc2FnZS5jbGFzc0xpc3QuYWRkKCdsZXZlbC11cCcpO1xyXG5cdFx0XHRcdG1lc3NhZ2UuaW5uZXJIVE1MID0gYExldmVsIFVwISBDdXJyZW50IGxldmVsIC0gJHt0aGlzLmxldmVsfWA7XHJcblxyXG5cdFx0XHRcdHRoaXMuY29udGFpbnRlci5hcHBlbmRDaGlsZChtZXNzYWdlKTtcclxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMuY29udGFpbnRlci5yZW1vdmVDaGlsZChtZXNzYWdlKTtcclxuXHRcdFx0XHR9LCAxMDAwKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdH0sIDEwMDAwKTtcclxuXHR9XHJcblx0YWRkRW5kR2FtZUJ1dHRvbnMoKSB7XHJcblx0XHRsZXQgZGl2Rm9yQnV0dG9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0ZGl2Rm9yQnV0dG9ucy5jbGFzc0xpc3QuYWRkKCdlbmQtYnV0dG9ucycpO1xyXG5cclxuXHRcdGxldCByZXBsYXlCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuXHRcdHJlcGxheUJ1dHRvbi5pbm5lckhUTUwgPSBgV2F0Y2ggcmVwbGF5ICR7dGhpcy5vcmlnaW5hbEdhbWUgPyAnJyA6ICdhZ2Fpbid9YDtcclxuXHRcdHJlcGxheUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRcdFx0dGhpcy5zZXRVcEdhbWUoZmFsc2UpO1xyXG5cdFx0XHR0aGlzLnJ1bkdhbWUoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGxldCBzdGFydE5ld0dhbWVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuXHRcdHN0YXJ0TmV3R2FtZUJ1dHRvbi5pbm5lckhUTUwgPSAnU3RhcnQgbmV3IGdhbWUnO1xyXG5cdFx0c3RhcnROZXdHYW1lQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLnNldFVwR2FtZSgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0ZGl2Rm9yQnV0dG9ucy5hcHBlbmRDaGlsZChyZXBsYXlCdXR0b24pO1xyXG5cdFx0ZGl2Rm9yQnV0dG9ucy5hcHBlbmRDaGlsZChzdGFydE5ld0dhbWVCdXR0b24pO1xyXG5cclxuXHRcdHRoaXMuY29udGFpbnRlci5hcHBlbmRDaGlsZChkaXZGb3JCdXR0b25zKTtcclxuXHR9XHJcbn1cclxuIiwiaW1wb3J0IFNtYXJ0UGVyc29uIGZyb20gJy4vc21hcnRQZXJzb24nO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSGVybyBleHRlbmRzIFNtYXJ0UGVyc29uIHtcclxuICAgIGNvbnN0cnVjdG9yKGdhbWVTdGF0ZSkge1xyXG4gICAgICAgIHN1cGVyKGdhbWVTdGF0ZSwgJ2tuaWdodCcpO1xyXG4gICAgICAgIGlmICh0aGlzLmdhbWUub3JpZ2luYWxHYW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VXBIZXJvKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMud2lkdGggPSA1NTtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IDc1O1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSB7XHJcbiAgICAgICAgICAgIHg6ICh0aGlzLmdhbWUud2lkdGggLSB0aGlzLndpZHRoKSAvIDIsXHJcbiAgICAgICAgICAgIHk6IHRoaXMuZ2FtZS5oZWlnaHQgLSB0aGlzLmhlaWdodFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuc3ByaXRlcyA9IHRoaXMuc3ByaXRlc0NvbGxlY3Rpb24uZG93bjtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbkFuZ2xlID0gTWF0aC5QSSAvIDI7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXBIZXJvKCkge1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgc3dpdGNoIChldmVudC5rZXlDb2RlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM3OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb25BbmdsZSA9IE1hdGguUEk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM4OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb25BbmdsZSA9IE1hdGguUEkgLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSAzOToge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uQW5nbGUgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSA0MDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uQW5nbGUgPSBNYXRoLlBJIC8gMiAqIDM7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5nYW1lLmdhbWVQbGF5cykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lLnJ1bkdhbWUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL9C30LDQv9C+0LzQuNC90LDQtdC8INC00LLQuNC20LXQvdC40Y8g0LPQtdGA0L7Rj1xyXG4gICAgICAgICAgICBpZiAodGhpcy5nYW1lLm9yaWdpbmFsR2FtZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lLnJlcGxheURhdGEuaGVyb01vdmVzLnB1c2goeyBkaXJlY3Rpb25BbmdsZTogdGhpcy5kaXJlY3Rpb25BbmdsZSwgdGltZTogbmV3IERhdGUoKS5nZXRUaW1lKCkgLSB0aGlzLmdhbWUuZ2FtZVRpbWVyIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0U3ByaXRlcygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZ2V0U3BlZWQoKSB7XHJcbiAgICAgICAgdGhpcy5zcGVlZCA9IHRoaXMuZ2FtZS5iYXNlU3BlZWQgKiB0aGlzLmdhbWUubGV2ZWw7XHJcbiAgICB9XHJcbiAgICBkaWUoKSB7XHJcbiAgICAgICAgLy8/ICAgdGhpcy5zcHJpdGVzID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0LWRlYWQtaW1nJykpO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBlcnNvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihnYW1lU3RhdGUpIHtcclxuICAgICAgICB0aGlzLmdhbWUgPSBnYW1lU3RhdGU7XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb25BbmdsZSA9IDIgKiBNYXRoLlBJICogTWF0aC5yYW5kb20oKTtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICB4OiAwLFxyXG4gICAgICAgICAgICB5OiAwXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnNwZWVkID0gZ2FtZVN0YXRlLmxldmVsICogZ2FtZVN0YXRlLmJhc2VTcGVlZCAvIDI7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50SW1nID0gMDtcclxuICAgIH1cclxuICAgIGdldE5leHRTcHJpdGUoKSB7XHJcbiAgICAgICAgdGhpcy5zdGVwKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEltZyA+PSB0aGlzLnNwcml0ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEltZyA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnNwcml0ZXNbdGhpcy5jdXJyZW50SW1nKytdO1xyXG4gICAgfVxyXG5cclxuICAgIHN0ZXAoKSB7XHJcbiAgICAgICAgdGhpcy5nZXRTcGVlZCgpO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24ueCArPSBNYXRoLmNvcyh0aGlzLmRpcmVjdGlvbkFuZ2xlKSAqIHRoaXMuc3BlZWQ7XHJcbiAgICAgICAgaWYgKHRoaXMucG9zaXRpb24ueCArIHRoaXMud2lkdGggLyAyID4gdGhpcy5nYW1lLndpZHRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueCA9IC10aGlzLndpZHRoIC8gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucG9zaXRpb24ueCArIHRoaXMud2lkdGggLyAyIDwgMCkge1xyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uLnggPSB0aGlzLmdhbWUud2lkdGggLSB0aGlzLndpZHRoIC8gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi55IC09IE1hdGguc2luKHRoaXMuZGlyZWN0aW9uQW5nbGUpICogdGhpcy5zcGVlZDtcclxuICAgICAgICBpZiAodGhpcy5wb3NpdGlvbi55ICsgdGhpcy5oZWlnaHQgLyAyID4gdGhpcy5nYW1lLmhlaWdodCkge1xyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uLnkgPSAtdGhpcy5oZWlnaHQgLyAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5wb3NpdGlvbi55ICsgdGhpcy5oZWlnaHQgLyAyIDwgMCkge1xyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uLnkgPSB0aGlzLmdhbWUuaGVpZ2h0IC0gdGhpcy5oZWlnaHQgLyAyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldFNwZWVkKCkge1xyXG4gICAgICAgIHRoaXMuc3BlZWQgPSB0aGlzLmdhbWUuYmFzZVNwZWVkICogdGhpcy5nYW1lLmxldmVsIC8gMjtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbiIsImltcG9ydCBTbWFydFBlcnNvbiBmcm9tICcuL3NtYXJ0UGVyc29uJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNtYXJ0RW5lbXkgZXh0ZW5kcyBTbWFydFBlcnNvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihnYW1lU3RhdGUsIHNldHRpbmdzID0ge30pIHtcclxuICAgICAgICBzdXBlcihnYW1lU3RhdGUsICdyb2d1ZScpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0U3ByaXRlcygpO1xyXG4gICAgICAgIHRoaXMucmFuZ2UgPSAzMDA7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IDQwO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gNDU7XHJcbiAgICAgICAgdGhpcy5nZW5lcmF0ZVBvc2l0aW9uKCk7XHJcbiAgICAgICAgLy/Qt9Cw0L/QvtC80LjQvdCw0LXQvCDQv9C+0LfQuNGG0LjRjiDQuCDQstGA0LXQvNGPINC/0L7Rj9Cy0LvQtdC90LjRjyDQstGA0LDQs9CwXHJcbiAgICAgICAgaWYgKHRoaXMuZ2FtZS5vcmlnaW5hbEdhbWUpIHtcclxuICAgICAgICAgICAgdGhpcy5nYW1lLnJlcGxheURhdGEuc21hcnRFbWVuaWVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4OiB0aGlzLnBvc2l0aW9uLngsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IHRoaXMucG9zaXRpb24ueVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uQW5nbGU6IHRoaXMuZGlyZWN0aW9uQW5nbGVcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHRoaXMuZ2FtZS5nYW1lVGltZXJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi54ID0gc2V0dGluZ3MucG9zaXRpb24ueDtcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi55ID0gc2V0dGluZ3MucG9zaXRpb24ueTtcclxuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb25BbmdsZSA9IHNldHRpbmdzLmRpcmVjdGlvbkFuZ2xlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHN0ZXAoKSB7XHJcbiAgICAgICAgbGV0IGhlcm9Qb3NpdGlvbiA9IHRoaXMuZ2FtZS5oZXJvLnBvc2l0aW9uO1xyXG4gICAgICAgIGxldCBlbmVteVBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbjtcclxuICAgICAgICBpZiAodGhpcy5nZXREaXN0YW5jZVRvSGVybygpIDw9IHRoaXMucmFuZ2UgJiYgKGhlcm9Qb3NpdGlvbi54ICE9PSBlbmVteVBvc2l0aW9uLngpKSB7XHJcbiAgICAgICAgICAgIGxldCBhdGFuID0gTWF0aC5hdGFuKChoZXJvUG9zaXRpb24ueSAtIGVuZW15UG9zaXRpb24ueSkgLyAoaGVyb1Bvc2l0aW9uLnggLSBlbmVteVBvc2l0aW9uLngpKTtcclxuXHJcbiAgICAgICAgICAgIGlmICgoKGhlcm9Qb3NpdGlvbi54ID4gZW5lbXlQb3NpdGlvbi54KSAmJiAoaGVyb1Bvc2l0aW9uLnkgPCBlbmVteVBvc2l0aW9uLnkpKSB8fFxyXG4gICAgICAgICAgICAgICAgKChoZXJvUG9zaXRpb24ueCA+IGVuZW15UG9zaXRpb24ueCkgJiYgKGhlcm9Qb3NpdGlvbi55ID4gZW5lbXlQb3NpdGlvbi55KSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uQW5nbGUgPSAyICogTWF0aC5QSSAtIGF0YW47XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpcmVjdGlvbkFuZ2xlID0gTWF0aC5QSSAtIGF0YW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RTcHJpdGVzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN1cGVyLnN0ZXAoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZVBvc2l0aW9uKCkge1xyXG4gICAgICAgIGRvIHtcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgIHg6IE1hdGguYWJzKHRoaXMud2lkdGggLSB0aGlzLmdhbWUud2lkdGggKiBNYXRoLnJhbmRvbSgpKSxcclxuICAgICAgICAgICAgICAgIHk6IHRoaXMuZ2FtZS5oZWlnaHQgLyAyICogTWF0aC5yYW5kb20oKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gd2hpbGUgKHRoaXMuZ2V0RGlzdGFuY2VUb0hlcm8oKSA8IDIwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGlzdGFuY2VUb0hlcm8oKSB7XHJcbiAgICAgICAgbGV0IGhlcm8gPSB0aGlzLmdhbWUuaGVybztcclxuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KGhlcm8ucG9zaXRpb24ueCAtIHRoaXMucG9zaXRpb24ueCwgMikgKyBNYXRoLnBvdyhoZXJvLnBvc2l0aW9uLnkgLSB0aGlzLnBvc2l0aW9uLnksIDIpKTtcclxuICAgIH1cclxufSIsImltcG9ydCBQZXJzb24gZnJvbSAnLi9wZXJzb24nO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU21hcnRQZXJzb24gZXh0ZW5kcyBQZXJzb24ge1xyXG4gICAgY29uc3RydWN0b3IoZ2FtZVN0YXRlLCBzZWxlY3Rvcikge1xyXG4gICAgICAgIHN1cGVyKGdhbWVTdGF0ZSk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuZ2V0QWxsU3ByaXRlcygpO1xyXG4gICAgfVxyXG4gICAgc2VsZWN0U3ByaXRlcygpIHtcclxuICAgICAgICBpZiAoKHRoaXMuZGlyZWN0aW9uQW5nbGUgPj0gTWF0aC5QSSAqIDUgLyA0KSAmJiAodGhpcy5kaXJlY3Rpb25BbmdsZSA8PSBNYXRoLlBJICogNyAvIDQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlcyA9IHRoaXMuc3ByaXRlc0NvbGxlY3Rpb24uZG93bjtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKHRoaXMuZGlyZWN0aW9uQW5nbGUgPj0gTWF0aC5QSSAvIDQpICYmICh0aGlzLmRpcmVjdGlvbkFuZ2xlIDw9IE1hdGguUEkgKiAzIC8gNCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zcHJpdGVzID0gdGhpcy5zcHJpdGVzQ29sbGVjdGlvbi51cDtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKHRoaXMuZGlyZWN0aW9uQW5nbGUgPj0gTWF0aC5QSSAqIDMgLyA0KSAmJiAodGhpcy5kaXJlY3Rpb25BbmdsZSA8PSBNYXRoLlBJICogNSAvIDQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlcyA9IHRoaXMuc3ByaXRlc0NvbGxlY3Rpb24ubGVmdDtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNwcml0ZXMgPSB0aGlzLnNwcml0ZXNDb2xsZWN0aW9uLnJpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFsbFNwcml0ZXMoKSB7XHJcbiAgICAgICAgdGhpcy5zcHJpdGVzQ29sbGVjdGlvbiA9IHtcclxuICAgICAgICAgICAgbGVmdDogdGhpcy5nZXRTcHJpdGVzKGAuJHt0aGlzLnNlbGVjdG9yfS1sZWZ0LWltZ2ApLFxyXG4gICAgICAgICAgICByaWdodDogdGhpcy5nZXRTcHJpdGVzKGAuJHt0aGlzLnNlbGVjdG9yfS1yaWdodC1pbWdgKSxcclxuICAgICAgICAgICAgdXA6IHRoaXMuZ2V0U3ByaXRlcyhgLiR7dGhpcy5zZWxlY3Rvcn0tdXAtaW1nYCksXHJcbiAgICAgICAgICAgIGRvd246IHRoaXMuZ2V0U3ByaXRlcyhgLiR7dGhpcy5zZWxlY3Rvcn0tZG93bi1pbWdgKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3ByaXRlcyhzZWxlY3Rvcikge1xyXG4gICAgICAgIHJldHVybiBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgUm91dGVyIGZyb20gJy4vdXRpbHMvcm91dGVyJztcclxuaW1wb3J0IHJvdXRlcyBmcm9tICcuL3JvdXRlcyc7XHJcbmltcG9ydCBhZGRCdXR0b25zRm9yTW9iaWxlIGZyb20gJy4vdXRpbHMvYWRkQnV0dG9uc0Zvck1vYmlsZSc7XHJcblxyXG5hZGRCdXR0b25zRm9yTW9iaWxlKCk7XHJcbm5ldyBSb3V0ZXIocm91dGVzKTsiLCJpbXBvcnQgR2FtZVN0YXRlIGZyb20gJy4vZ2FtZU9iamVjdHMvZ2FtZVN0YXRlJztcclxuaW1wb3J0IEZpcmVTdG9yZSBmcm9tICcuL3V0aWxzL2ZpcmViYXNlJztcclxuXHJcbmxldCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQnKTtcclxubGV0IGdhbWUgPSBuZXcgR2FtZVN0YXRlKGNvbnRlbnQpO1xyXG5cclxuY29uc3Qgcm91dGVzID0gW1xyXG4gICAge1xyXG4gICAgICAgIG1hdGNoOiAnJyxcclxuICAgICAgICBvbkVudGVyOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJ2dhbWUnO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbWF0Y2g6ICdhYm91dCcsXHJcbiAgICAgICAgb25FbnRlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICBjaGFuZ2VBY3RpdmVQYWdlKCdhYm91dCcpO1xyXG4gICAgICAgICAgICBjb250ZW50LmlubmVySFRNTCA9ICc8aDEgY2xhc3M9XCJhYm91dFwiPjxzcGFuPlN1cGVyIGdhbWUgQ2F0IHZzIE5pbmphczwvc3Bhbj48aDE+JztcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG1hdGNoOiAnZ2FtZScsXHJcbiAgICAgICAgb25FbnRlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICBjaGFuZ2VBY3RpdmVQYWdlKCdnYW1lJyk7XHJcbiAgICAgICAgICAgIGdhbWUuc2V0VXBHYW1lKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbkxlYXZlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGdhbWUuZW5kR2FtZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbWF0Y2g6ICdzY29yZXMnLFxyXG4gICAgICAgIG9uRW50ZXI6ICgpID0+IHtcclxuICAgICAgICAgICAgY2hhbmdlQWN0aXZlUGFnZSgnc2NvcmVzJyk7XHJcblxyXG4gICAgICAgICAgICBGaXJlU3RvcmUuZ2V0U2NvcmVzKCkudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSAnPGgxIGNsYXNzPVwiYWJvdXRcIj48c3Bhbj5TY29yZXM8L3NwYW4+PC9oMT4nO1xyXG4gICAgICAgICAgICAgICAgbGV0IG9sID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb2wnKTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGkuaW5uZXJIVE1MID0gYCR7aXRlbS5uYW1lfSAtICR7aXRlbS5zY29yZX1gO1xyXG4gICAgICAgICAgICAgICAgICAgIG9sLmFwcGVuZENoaWxkKGxpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBkaXZGb3JEaXZpc2lvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgZGl2Rm9yRGl2aXNpb24uY2xhc3NMaXN0LmFkZCgndy0xMDAnKTtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZGl2Rm9yRGl2aXNpb24pO1xyXG4gICAgICAgICAgICAgICAgbGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKG9sKTtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZGl2KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXTtcclxuXHJcbmZ1bmN0aW9uIGNoYW5nZUFjdGl2ZVBhZ2UobmV3UGFnZSkge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGl2ZScpLmNsYXNzTmFtZSA9ICcnO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2hyZWY9XCIjJHtuZXdQYWdlfVwiXWApLnBhcmVudEVsZW1lbnQuY2xhc3NOYW1lID0gJ2FjdGl2ZSc7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCByb3V0ZXM7XHJcbiIsImltcG9ydCBkZXRlY3RNb2JpbGUgZnJvbSAnLi9kZXRlY3RNb2JpbGUnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYWRkQnV0dG9uc0Zvck1vYmlsZSgpIHtcclxuICAgIGlmIChkZXRlY3RNb2JpbGUoKSkge1xyXG5cclxuICAgICAgICB2YXIgZGl2Rm9yQnV0dG9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGRpdkZvckJ1dHRvbnMuY2xhc3NMaXN0LmFkZCgnYnV0dG9ucycpO1xyXG5cclxuICAgICAgICB2YXIgYnV0dG9uTGVmdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgIGJ1dHRvbkxlZnQuaW5uZXJIVE1MID0gJzwnO1xyXG4gICAgICAgIGJ1dHRvbkxlZnQuY2xhc3NMaXN0LmFkZCgnbGVmdCcpO1xyXG5cclxuICAgICAgICB2YXIgYnV0dG9uVXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICBidXR0b25VcC5pbm5lckhUTUwgPSAnXic7XHJcbiAgICAgICAgYnV0dG9uVXAuY2xhc3NMaXN0LmFkZCgndXAnKTtcclxuXHJcbiAgICAgICAgdmFyIGJ1dHRvblJpZ2h0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgYnV0dG9uUmlnaHQuaW5uZXJIVE1MID0gJz4nO1xyXG4gICAgICAgIGJ1dHRvblJpZ2h0LmNsYXNzTGlzdC5hZGQoJ3JpZ2h0Jyk7XHJcblxyXG4gICAgICAgIHZhciBidXR0b25Eb3duID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgYnV0dG9uRG93bi5pbm5lckhUTUwgPSAndic7XHJcbiAgICAgICAgYnV0dG9uRG93bi5jbGFzc0xpc3QuYWRkKCdkb3duJyk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgZGl2Rm9yQnV0dG9ucy5hcHBlbmRDaGlsZChidXR0b25MZWZ0KTtcclxuICAgICAgICBkaXZGb3JCdXR0b25zLmFwcGVuZENoaWxkKGJ1dHRvblVwKTtcclxuICAgICAgICBkaXZGb3JCdXR0b25zLmFwcGVuZENoaWxkKGJ1dHRvblJpZ2h0KTtcclxuICAgICAgICBkaXZGb3JCdXR0b25zLmFwcGVuZENoaWxkKGJ1dHRvbkRvd24pO1xyXG5cclxuICAgICAgICBkaXZGb3JCdXR0b25zLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQubWF0Y2hlcygnLnJpZ2h0JykpIHtcclxuICAgICAgICAgICAgICAgIGxldCBlID0gbmV3IEV2ZW50KCdrZXlkb3duJyk7XHJcbiAgICAgICAgICAgICAgICBlLmtleUNvZGUgPSAzOTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5tYXRjaGVzKCcubGVmdCcpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZSA9IG5ldyBFdmVudCgna2V5ZG93bicpO1xyXG4gICAgICAgICAgICAgICAgZS5rZXlDb2RlID0gMzc7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQubWF0Y2hlcygnLnVwJykpIHtcclxuICAgICAgICAgICAgICAgIGxldCBlID0gbmV3IEV2ZW50KCdrZXlkb3duJyk7XHJcbiAgICAgICAgICAgICAgICBlLmtleUNvZGUgPSAzODtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5tYXRjaGVzKCcuZG93bicpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZSA9IG5ldyBFdmVudCgna2V5ZG93bicpO1xyXG4gICAgICAgICAgICAgICAgZS5rZXlDb2RlID0gNDA7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2Rm9yQnV0dG9ucyk7XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZGV0ZWN0bW9iaWxlKCkge1xyXG4gICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FuZHJvaWQvaSlcclxuICAgICAgICB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC93ZWJPUy9pKVxyXG4gICAgICAgIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQaG9uZS9pKVxyXG4gICAgICAgIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQYWQvaSlcclxuICAgICAgICB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUG9kL2kpXHJcbiAgICAgICAgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQmxhY2tCZXJyeS9pKVxyXG4gICAgICAgIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1dpbmRvd3MgUGhvbmUvaSlcclxuICAgICkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59IiwibGV0IHVybCA9ICdodHRwczovL2thdGUtYXJjYWRlLWdhbWUuZmlyZWJhc2Vpby5jb20vLmpzb24nO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmlyZVN0b3JlIHtcclxuICAgIHN0YXRpYyBnZXRTY29yZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHVybCkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIHNhdmVTY29yZShpbmZvVG9TYXZlKSB7XHJcblxyXG4gICAgICAgIHRoaXMuZ2V0U2NvcmVzKCkudGhlbihzY29yZXMgPT4ge1xyXG4gICAgICAgICAgICBsZXQgbmV3U2NvcmVzID0gWy4uLnNjb3JlcyB8fCBbXSwgaW5mb1RvU2F2ZV07XHJcbiAgICAgICAgICAgIG5ld1Njb3Jlcy5zb3J0KChpdGVtMSwgaXRlbTIpID0+IGl0ZW0xLnNjb3JlID4gaXRlbTIuc2NvcmUgPyAtMSA6IGl0ZW0xLnNjb3JlIDwgaXRlbTIuc2NvcmUgPyAxIDogMCk7XHJcbiAgICAgICAgICAgIG5ld1Njb3Jlcy5zcGxpY2UoMTApO1xyXG4gICAgICAgICAgICBmZXRjaCh1cmwsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShuZXdTY29yZXMpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiLyoqXHJcbiAqINCk0YPQvdC60YbQuNGPINC00LvRjyDQtNC+0LHQsNCy0LvQtdC90LjRjyDQuCDQvtCx0YDQsNCx0L7RgtC60Lgg0YDQvtGD0YLQvtCyINC90LAg0YHRgtGA0LDQvdC40YbQtVxyXG4gKiBAcGFyYW0geyp9IHJvdXRlUGFyYW1zINC80LDRgdGB0LjQsiDQv9Cw0YDQsNC80LXRgtGA0L7QsiDQtNC70Y8g0L7QsdGA0LDQsdC+0YLQutC4INGA0L7Rg9GC0L7QslxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUm91dGVyKHJvdXRlUGFyYW1zKSB7XHJcbiAgICB0aGlzLnJvdXRlcyA9IHJvdXRlUGFyYW1zIHx8IFtdO1xyXG4gICAgdGhpcy5jdXJyZW50Um91dGU7XHJcbiAgICB0aGlzLnByZXZpb3VzUm91dGU7XHJcbiAgICB0aGlzLmN1cnJlbnRQYXJhbXM7XHJcbiAgICB0aGlzLnByZXZpb3VzUGFyYW1zO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVyKHdpbmRvdy5sb2NhdGlvbi5oYXNoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5oYW5kbGVyKHdpbmRvdy5sb2NhdGlvbi5oYXNoKTtcclxufVxyXG5cclxuUm91dGVyLnByb3RvdHlwZSA9IHtcclxuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChoYXNoKSB7XHJcbiAgICAgICAgdGhpcy5wcmV2aW91c1JvdXRlID0gdGhpcy5jdXJyZW50Um91dGU7XHJcbiAgICAgICAgdGhpcy5wcmV2aW91c1BhcmFtcyA9IHRoaXMuY3VycmVudFBhcmFtcztcclxuICAgICAgICB0aGlzLmN1cnJlbnRSb3V0ZSA9IHRoaXMuZmluZE5ld1JvdXRlKGhhc2gpO1xyXG4gICAgICAgIHRoaXMubGF1bmNoSGFuZGxlcnMoKTtcclxuICAgIH0sXHJcbiAgICBmaW5kTmV3Um91dGU6IGZ1bmN0aW9uIChoYXNoKSB7XHJcbiAgICAgICAgaGFzaCA9IGhhc2guc2xpY2UoMSk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5yb3V0ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLnJvdXRlc1tpXTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiAoZWxlbWVudC5tYXRjaCkgPT0gJ3N0cmluZycgJiYgZWxlbWVudC5tYXRjaCA9PT0gaGFzaCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFyYW1zID0gJyc7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIChlbGVtZW50Lm1hdGNoKSA9PSAnZnVuY3Rpb24nICYmIGVsZW1lbnQubWF0Y2goaGFzaCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhcmFtcyA9ICcnO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKChlbGVtZW50Lm1hdGNoIGluc3RhbmNlb2YgUmVnRXhwKSAmJiBlbGVtZW50Lm1hdGNoLnRlc3QoaGFzaCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhcmFtcyA9IGhhc2gubWF0Y2goZWxlbWVudC5tYXRjaCkgfHwgW107XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYXJhbXMuc3BsaWNlKDAsIDEpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgbGF1bmNoSGFuZGxlcnMoKSB7XHJcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKClcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4geyB0aGlzLnByZXZpb3VzUm91dGUgJiYgdGhpcy5wcmV2aW91c1JvdXRlLm9uTGVhdmUgJiYgdGhpcy5wcmV2aW91c1JvdXRlLm9uTGVhdmUodGhpcy5wcmV2aW91c1BhcmFtcyk7IH0pXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHsgdGhpcy5jdXJyZW50Um91dGUgJiYgdGhpcy5jdXJyZW50Um91dGUub25CZWZvcmVFbnRlciAmJiB0aGlzLmN1cnJlbnRSb3V0ZS5vbkJlZm9yZUVudGVyKHRoaXMuY3VycmVudFBhcmFtcyk7IH0pXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHsgdGhpcy5jdXJyZW50Um91dGUgJiYgdGhpcy5jdXJyZW50Um91dGUub25FbnRlciAmJiB0aGlzLmN1cnJlbnRSb3V0ZS5vbkVudGVyKHRoaXMuY3VycmVudFBhcmFtcyk7IH0pO1xyXG4gICAgfVxyXG59OyJdfQ==
