!function o(a,s,c){function u(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(h)return h(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var r=s[t]={exports:{}};a[t][0].call(r.exports,function(e){return u(a[t][1][e]||e)},r,r.exports,o,a,s,c)}return s[t].exports}for(var h="function"==typeof require&&require,e=0;e<c.length;e++)u(c[e]);return u}({1:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=e("./person"),s=(r=a)&&r.__esModule?r:{default:r};var c=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,"goblin"));return t.width=36,t.height=48,t.generatePosition(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.default),o(n,[{key:"step",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"step",this).call(this)}},{key:"generatePosition",value:function(){for(;this.position={x:Math.abs(this.width-this.game.width*Math.random()),y:this.game.height/2*Math.random()},this.getDistanceToHero()<200;);}},{key:"getDistanceToHero",value:function(){var e=this.game.hero;return Math.sqrt(Math.pow(e.position.x-this.position.x,2)+Math.pow(e.position.y-this.position.y,2))}}]),n}();n.default=c},{"./person":4}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=c(e("./hero")),o=c(e("./dummyEnemy")),a=c(e("./smartEnemy")),s=c(e("../utils/firebase"));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.gameOnScreen=!1,this.width=1e3<=window.innerWidth?1e3:window.innerWidth,this.height=(document.documentElement.clientHeight||document.body.clientHeight)-160,this.containter=e,this.setUpHero()}return i(t,[{key:"setUpGame",value:function(){var n=this,e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.gameOnScreen=!0,this.originalGame=e,this.canvas=document.createElement("canvas"),this.containter.innerHTML="",this.containter.appendChild(this.canvas),this.canvas.width=this.width,this.canvas.height=this.height,this.context=this.canvas.getContext("2d"),this.hero=new r.default(this),this.replayData=[],this.characters=new Array(2).fill(0).map(function(){return new o.default(n)}),this.characters.push(new a.default(this)),this.level=1,this.baseSpeed=0,this.gamePlays=!1,this.gameTimer=0,this.timerHandler=setInterval(function(){n.context.clearRect(0,0,n.width,n.height);var t=[];n.drawCharacter(n.hero),t.push({character:n.hero,state:n.hero.personState}),n.characters.forEach(function(e){n.drawCharacter(e),t.push({character:e,state:e.personState})}),n.gamePlays&&n.replayData.push(t),n.characters.forEach(function(e){return n.checkCharactersIntersection(n.hero,e)})},100)}},{key:"drawCharacter",value:function(e){this.context.drawImage(e.getNextSprite(),e.position.x,e.position.y,e.width,e.height)}},{key:"runGame",value:function(){this.gameTimer=(new Date).getTime(),this.gamePlays=!0,this.baseSpeed=5,this.setLevel()}},{key:"checkCharactersIntersection",value:function(e,t){e.position.x+20<=t.position.x+t.width&&e.position.x+e.width>=t.position.x+20&&e.position.y+20<=t.position.y+t.height&&e.position.y+e.height>=t.position.y+20&&this.loseGame()}},{key:"loseGame",value:function(){if(this.endGame(),this.originalGame){var e=((new Date).getTime()-this.gameTimer)/1e3,t=prompt("Your score is "+e+" seconds.\n Enter your name","Ninja");t&&s.default.saveScore({name:t,score:e})}this.addEndGameButtons()}},{key:"endGame",value:function(){clearInterval(this.timerHandler),clearInterval(this.levelTimer),this.gamePlays=!1,this.baseSpeed=0,this.gameOnScreen=!1}},{key:"setLevel",value:function(){var t=this;this.levelTimer=setInterval(function(){t.level+=1,t.characters.push(new o.default(t)),t.level%2==1&&t.characters.push(new a.default(t));var e=document.createElement("div");e.classList.add("level-up"),e.innerHTML="Level Up! Current level - "+t.level,t.containter.appendChild(e),setTimeout(function(){t.containter.removeChild(e)},1e3)},1e4)}},{key:"addEndGameButtons",value:function(){var e=document.createElement("div");e.classList.add("end-buttons");var t=document.createElement("button");t.innerHTML="Watch replay "+(this.originalGame?"":"again"),t.addEventListener("click",function(){window.location.hash="watchreplay"});var n=document.createElement("button");n.innerHTML="Start new game",n.addEventListener("click",function(){window.location.hash="game"}),e.appendChild(t),e.appendChild(n),this.containter.appendChild(e)}},{key:"setUpHero",value:function(){var t=this;document.addEventListener("keydown",function(e){if(t.gameOnScreen){switch(e.keyCode){case 37:t.hero.directionAngle=Math.PI;break;case 38:t.hero.directionAngle=Math.PI/2;break;case 39:t.hero.directionAngle=0;break;case 40:t.hero.directionAngle=Math.PI/2*3;break;default:return}t.gamePlays||t.runGame()}})}},{key:"replayGame",value:function(){var t=this,e=0,n=setInterval(function(){e>=(t.replayData||[]).length?clearInterval(n):(t.context.clearRect(0,0,t.width,t.height),t.replayData[e].forEach(function(e){e.character.personState=e.state,t.drawCharacter(e.character)}),e++)},20)}}]),t}();n.default=u},{"../utils/firebase":10,"./dummyEnemy":1,"./hero":3,"./smartEnemy":5}],3:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=e("./person"),s=(r=a)&&r.__esModule?r:{default:r};var c=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,"knight"));return t.width=55,t.height=75,t.position={x:(t.game.width-t.width)/2,y:t.game.height-t.height},t.sprites=t.spritesCollection.down,t.directionAngle=Math.PI/2,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.default),o(n,[{key:"getSpeed",value:function(){this.speed=this.game.baseSpeed*this.game.level}}]),n}();n.default=c},{"./person":4}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var r=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.selector=t,this.getAllSprites(),this.game=e,this.directionAngle=2*Math.PI*Math.random(),this.speed=e.level*e.baseSpeed/2,this.currentImg=0}return i(n,[{key:"selectSprites",value:function(){this.directionAngle>=5*Math.PI/4&&this.directionAngle<=7*Math.PI/4?this.sprites=this.spritesCollection.down:this.directionAngle>=Math.PI/4&&this.directionAngle<=3*Math.PI/4?this.sprites=this.spritesCollection.up:this.directionAngle>=3*Math.PI/4&&this.directionAngle<=5*Math.PI/4?this.sprites=this.spritesCollection.left:this.sprites=this.spritesCollection.right}},{key:"getAllSprites",value:function(){this.spritesCollection={left:this.getSprites("."+this.selector+"-left-img"),right:this.getSprites("."+this.selector+"-right-img"),up:this.getSprites("."+this.selector+"-up-img"),down:this.getSprites("."+this.selector+"-down-img")}}},{key:"getSprites",value:function(e){return[].slice.call(document.querySelectorAll(e))}},{key:"getNextSprite",value:function(){return this.step(),this.currentImg>=this.sprites.length&&(this.currentImg=0),this.sprites[this.currentImg++]}},{key:"step",value:function(){this.getSpeed(),this.position.x+=Math.cos(this.directionAngle)*this.speed,this.position.x+this.width/2>this.game.width&&(this.position.x=-this.width/2),this.position.x+this.width/2<0&&(this.position.x=this.game.width-this.width/2),this.position.y-=Math.sin(this.directionAngle)*this.speed,this.position.y+this.height/2>this.game.height&&(this.position.y=-this.height/2),this.position.y+this.height/2<0&&(this.position.y=this.game.height-this.height/2)}},{key:"getSpeed",value:function(){this.speed=this.game.baseSpeed*this.game.level/2}},{key:"directionAngle",get:function(){return this._directionAngle},set:function(e){this._directionAngle=e,this.selectSprites()}},{key:"personState",get:function(){return{x:this.position.x,y:this.position.y,directionAngle:this.directionAngle}},set:function(e){this.directionAngle=e.directionAngle,this.position.x=e.x,this.position.y=e.y}}]),n}();n.default=r},{}],5:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var i,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=e("./person"),s=(i=a)&&i.__esModule?i:{default:i};var c=function(e){function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,"rogue"));return t.range=300,t.width=40,t.height=45,t.generatePosition(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,s.default),o(i,[{key:"step",value:function(){var e=this.game.hero.position,t=this.position;if(this.getDistanceToHero()<=this.range&&e.x!==t.x){var n=Math.atan((e.y-t.y)/(e.x-t.x));e.x>t.x&&e.y<t.y||e.x>t.x&&e.y>t.y?this.directionAngle=2*Math.PI-n:this.directionAngle=Math.PI-n}(function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0})(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"step",this).call(this)}},{key:"generatePosition",value:function(){for(;this.position={x:Math.abs(this.width-this.game.width*Math.random()),y:this.game.height/2*Math.random()},this.getDistanceToHero()<200;);}},{key:"getDistanceToHero",value:function(){var e=this.game.hero;return Math.sqrt(Math.pow(e.position.x-this.position.x,2)+Math.pow(e.position.y-this.position.y,2))}}]),i}();n.default=c},{"./person":4}],6:[function(e,t,n){"use strict";var i=o(e("./utils/router")),r=o(e("./routes"));function o(e){return e&&e.__esModule?e:{default:e}}(0,o(e("./utils/addButtonsForMobile")).default)(),new i.default(r.default)},{"./routes":7,"./utils/addButtonsForMobile":8,"./utils/router":11}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=o(e("./gameObjects/gameState")),r=o(e("./utils/firebase"));function o(e){return e&&e.__esModule?e:{default:e}}var a=document.querySelector(".content"),s=new i.default(a),c=[{match:"",onEnter:function(){window.location.hash="game"}},{match:"about",onEnter:function(){u("about"),a.innerHTML='<h1 class="about"><span>Super game Cat vs Ninjas</span><h1>'}},{match:"game",onEnter:function(){u("game"),s.setUpGame()},onLeave:function(){s.endGame()}},{match:"scores",onEnter:function(){u("scores"),r.default.getScores().then(function(e){a.innerHTML='<h1 class="about"><span>Scores</span></h1>';var n=document.createElement("ol");e.forEach(function(e){var t=document.createElement("li");t.innerHTML=e.name+" - "+e.score,n.appendChild(t)});var t=document.createElement("div");t.classList.add("w-100"),a.appendChild(t);var i=document.createElement("div");i.appendChild(n),a.appendChild(i)})}},{match:"replay",onEnter:function(){0!==(s.replayData||[]).length?s.replayGame():window.location.hash="game"}},{match:"watchreplay",onEnter:function(){window.location.hash="replay"}}];function u(e){document.querySelector(".active").className="",document.querySelector('[href="#'+e+'"]').parentElement.className="active"}n.default=c},{"./gameObjects/gameState":2,"./utils/firebase":10}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){if((0,o.default)()){var e=document.createElement("div");e.classList.add("buttons");var t=document.createElement("button");t.innerHTML="<",t.classList.add("left");var n=document.createElement("button");n.innerHTML="^",n.classList.add("up");var i=document.createElement("button");i.innerHTML=">",i.classList.add("right");var r=document.createElement("button");r.innerHTML="v",r.classList.add("down"),e.appendChild(t),e.appendChild(n),e.appendChild(i),e.appendChild(r),e.addEventListener("click",function(e){if(e.target.matches(".right")){var t=new Event("keydown");return t.keyCode=39,void document.dispatchEvent(t)}if(e.target.matches(".left")){var n=new Event("keydown");return n.keyCode=37,void document.dispatchEvent(n)}if(e.target.matches(".up")){var i=new Event("keydown");return i.keyCode=38,void document.dispatchEvent(i)}if(e.target.matches(".down")){var r=new Event("keydown");return r.keyCode=40,void document.dispatchEvent(r)}}),document.body.appendChild(e)}};var i,r=e("./detectMobile"),o=(i=r)&&i.__esModule?i:{default:i}},{"./detectMobile":9}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))}},{}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var r="https://kate-arcade-game.firebaseio.com/.json",o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"getScores",value:function(){return fetch(r).then(function(e){return e.json()})}},{key:"saveScore",value:function(n){this.getScores().then(function(e){var t=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e||[]),[n]);t.sort(function(e,t){return e.score>t.score?-1:e.score<t.score?1:0}),t.splice(10),fetch(r,{method:"PUT",body:JSON.stringify(t)})})}}]),e}();n.default=o},{}],11:[function(e,t,n){"use strict";function i(e){var t=this;this.routes=e||[],this.currentRoute,this.previousRoute,this.currentParams,this.previousParams,window.addEventListener("hashchange",function(){t.handler(window.location.hash)}),this.handler(window.location.hash)}Object.defineProperty(n,"__esModule",{value:!0}),(n.default=i).prototype={handler:function(e){this.previousRoute=this.currentRoute,this.previousParams=this.currentParams,this.currentRoute=this.findNewRoute(e),this.launchHandlers()},findNewRoute:function(e){e=e.slice(1);for(var t=0;t<this.routes.length;t++){var n=this.routes[t];if("string"==typeof n.match&&n.match===e)return this.currentParams="",n;if("function"==typeof n.match&&n.match(e))return this.currentParams="",n;if(n.match instanceof RegExp&&n.match.test(e))return this.currentParams=e.match(n.match)||[],this.currentParams.splice(0,1),n}},launchHandlers:function(){var e=this;Promise.resolve().then(function(){e.previousRoute&&e.previousRoute.onLeave&&e.previousRoute.onLeave(e.previousParams)}).then(function(){e.currentRoute&&e.currentRoute.onBeforeEnter&&e.currentRoute.onBeforeEnter(e.currentParams)}).then(function(){e.currentRoute&&e.currentRoute.onEnter&&e.currentRoute.onEnter(e.currentParams)})}}},{}]},{},[6]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvZ2FtZU9iamVjdHMvZHVtbXlFbmVteS5qcyIsInNyYy9qcy9nYW1lT2JqZWN0cy9nYW1lU3RhdGUuanMiLCJzcmMvanMvZ2FtZU9iamVjdHMvaGVyby5qcyIsInNyYy9qcy9nYW1lT2JqZWN0cy9wZXJzb24uanMiLCJzcmMvanMvZ2FtZU9iamVjdHMvc21hcnRFbmVteS5qcyIsInNyYy9qcy9tYWluLmpzIiwic3JjL2pzL3JvdXRlcy5qcyIsInNyYy9qcy91dGlscy9hZGRCdXR0b25zRm9yTW9iaWxlLmpzIiwic3JjL2pzL3V0aWxzL2RldGVjdE1vYmlsZS5qcyIsInNyYy9qcy91dGlscy9maXJlYmFzZS5qcyIsInNyYy9qcy91dGlscy9yb3V0ZXIuanMiXSwibmFtZXMiOlsiciIsImUiLCJuIiwidCIsIm8iLCJpIiwiZiIsImMiLCJyZXF1aXJlIiwidSIsImEiLCJFcnJvciIsImNvZGUiLCJwIiwiZXhwb3J0cyIsImNhbGwiLCJsZW5ndGgiLCIxIiwibW9kdWxlIiwiX3BlcnNvbiIsIkR1bW15RW5lbXkiLCJnYW1lU3RhdGUiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX3RoaXMiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsIl9fcHJvdG9fXyIsIk9iamVjdCIsImdldFByb3RvdHlwZU9mIiwid2lkdGgiLCJoZWlnaHQiLCJnZW5lcmF0ZVBvc2l0aW9uIiwiX3BlcnNvbjIiLCJkZWZhdWx0IiwiX2dldCIsInByb3RvdHlwZSIsInBvc2l0aW9uIiwieCIsIk1hdGgiLCJhYnMiLCJnYW1lIiwicmFuZG9tIiwieSIsImdldERpc3RhbmNlVG9IZXJvIiwiaGVybyIsInNxcnQiLCJwb3ciLCJHYW1lU3RhdGUiLCJlbGVtZW50VG9EcmF3IiwiZ2FtZU9uU2NyZWVuIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImRvY3VtZW50IiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50SGVpZ2h0IiwiYm9keSIsImNvbnRhaW50ZXIiLCJzZXRVcEhlcm8iLCJvcmlnaW5hbEdhbWUiLCJhcmd1bWVudHMiLCJ1bmRlZmluZWQiLCJjYW52YXMiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsIl9oZXJvMiIsInJlcGxheURhdGEiLCJjaGFyYWN0ZXJzIiwiQXJyYXkiLCJmaWxsIiwibWFwIiwiX2R1bW15RW5lbXkyIiwicHVzaCIsIl9zbWFydEVuZW15MiIsImxldmVsIiwiYmFzZVNwZWVkIiwiZ2FtZVBsYXlzIiwiZ2FtZVRpbWVyIiwidGltZXJIYW5kbGVyIiwic2V0SW50ZXJ2YWwiLCJjbGVhclJlY3QiLCJzdGVwRGF0YSIsImRyYXdDaGFyYWN0ZXIiLCJjaGFyYWN0ZXIiLCJzdGF0ZSIsInBlcnNvblN0YXRlIiwiZm9yRWFjaCIsImNoZWNrQ2hhcmFjdGVyc0ludGVyc2VjdGlvbiIsImRyYXdJbWFnZSIsImdldE5leHRTcHJpdGUiLCJEYXRlIiwiZ2V0VGltZSIsInNldExldmVsIiwiZW5lbXkiLCJsb3NlR2FtZSIsImVuZEdhbWUiLCJzY29yZSIsIm5hbWUiLCJwcm9tcHQiLCJfZmlyZWJhc2UyIiwic2F2ZVNjb3JlIiwiYWRkRW5kR2FtZUJ1dHRvbnMiLCJjbGVhckludGVydmFsIiwibGV2ZWxUaW1lciIsIl90aGlzMiIsIm1lc3NhZ2UiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRUaW1lb3V0IiwicmVtb3ZlQ2hpbGQiLCJkaXZGb3JCdXR0b25zIiwicmVwbGF5QnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImxvY2F0aW9uIiwiaGFzaCIsInN0YXJ0TmV3R2FtZUJ1dHRvbiIsIl90aGlzMyIsImV2ZW50Iiwia2V5Q29kZSIsImRpcmVjdGlvbkFuZ2xlIiwiUEkiLCJydW5HYW1lIiwiX3RoaXM0IiwiY3VycmVudFN0YXRlIiwicmVwbGF5VGltZXIiLCJkYXRhIiwiSGVybyIsInNwcml0ZXMiLCJzcHJpdGVzQ29sbGVjdGlvbiIsImRvd24iLCJzcGVlZCIsIlBlcnNvbiIsInNlbGVjdG9yIiwiZ2V0QWxsU3ByaXRlcyIsImN1cnJlbnRJbWciLCJ1cCIsImxlZnQiLCJyaWdodCIsImdldFNwcml0ZXMiLCJzbGljZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzdGVwIiwiZ2V0U3BlZWQiLCJjb3MiLCJzaW4iLCJfZGlyZWN0aW9uQW5nbGUiLCJuZXdWYWx1ZSIsInNlbGVjdFNwcml0ZXMiLCJuZXdQb3NpdGlvbiIsIlNtYXJ0RW5lbXkiLCJyYW5nZSIsImhlcm9Qb3NpdGlvbiIsImVuZW15UG9zaXRpb24iLCJhdGFuIiwiX3JvdXRlcjIiLCJfcm91dGVzMiIsImNvbnRlbnQiLCJxdWVyeVNlbGVjdG9yIiwiX2dhbWVTdGF0ZTIiLCJyb3V0ZXMiLCJtYXRjaCIsIm9uRW50ZXIiLCJjaGFuZ2VBY3RpdmVQYWdlIiwic2V0VXBHYW1lIiwib25MZWF2ZSIsImdldFNjb3JlcyIsInRoZW4iLCJyZXN1bHQiLCJvbCIsIml0ZW0iLCJsaSIsImRpdkZvckRpdmlzaW9uIiwiZGl2IiwicmVwbGF5R2FtZSIsIm5ld1BhZ2UiLCJjbGFzc05hbWUiLCJwYXJlbnRFbGVtZW50IiwiX2RldGVjdE1vYmlsZTIiLCJidXR0b25MZWZ0IiwiYnV0dG9uVXAiLCJidXR0b25SaWdodCIsImJ1dHRvbkRvd24iLCJ0YXJnZXQiLCJtYXRjaGVzIiwiRXZlbnQiLCJkaXNwYXRjaEV2ZW50IiwiX2UiLCJfZTIiLCJfZTMiLCJfZGV0ZWN0TW9iaWxlIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwidXJsIiwiRmlyZVN0b3JlIiwiZmV0Y2giLCJyZXNwb25zZSIsImpzb24iLCJpbmZvVG9TYXZlIiwic2NvcmVzIiwibmV3U2NvcmVzIiwiY29uY2F0IiwiX3RvQ29uc3VtYWJsZUFycmF5Iiwic29ydCIsIml0ZW0xIiwiaXRlbTIiLCJzcGxpY2UiLCJtZXRob2QiLCJKU09OIiwic3RyaW5naWZ5IiwiUm91dGVyIiwicm91dGVQYXJhbXMiLCJjdXJyZW50Um91dGUiLCJwcmV2aW91c1JvdXRlIiwiY3VycmVudFBhcmFtcyIsInByZXZpb3VzUGFyYW1zIiwiaGFuZGxlciIsImZpbmROZXdSb3V0ZSIsImxhdW5jaEhhbmRsZXJzIiwiZWxlbWVudCIsIlJlZ0V4cCIsInRlc3QiLCJQcm9taXNlIiwicmVzb2x2ZSIsIm9uQmVmb3JlRW50ZXIiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEVBQUFDLEVBQUFDLEdBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0FBQSxJQUFBSixFQUFBRyxHQUFBLENBQUEsSUFBQUosRUFBQUksR0FBQSxDQUFBLElBQUFFLEVBQUEsbUJBQUFDLFNBQUFBLFFBQUEsSUFBQUYsR0FBQUMsRUFBQSxPQUFBQSxFQUFBRixHQUFBLEdBQUEsR0FBQUksRUFBQSxPQUFBQSxFQUFBSixHQUFBLEdBQUEsSUFBQUssRUFBQSxJQUFBQyxNQUFBLHVCQUFBTixFQUFBLEtBQUEsTUFBQUssRUFBQUUsS0FBQSxtQkFBQUYsRUFBQSxJQUFBRyxFQUFBWCxFQUFBRyxHQUFBLENBQUFTLFFBQUEsSUFBQWIsRUFBQUksR0FBQSxHQUFBVSxLQUFBRixFQUFBQyxRQUFBLFNBQUFkLEdBQUEsT0FBQUksRUFBQUgsRUFBQUksR0FBQSxHQUFBTCxJQUFBQSxJQUFBYSxFQUFBQSxFQUFBQyxRQUFBZCxFQUFBQyxFQUFBQyxFQUFBQyxHQUFBLE9BQUFELEVBQUFHLEdBQUFTLFFBQUEsSUFBQSxJQUFBTCxFQUFBLG1CQUFBRCxTQUFBQSxRQUFBSCxFQUFBLEVBQUFBLEVBQUFGLEVBQUFhLE9BQUFYLElBQUFELEVBQUFELEVBQUFFLElBQUEsT0FBQUQsRUFBQSxDQUFBLENBQUFhLEVBQUEsQ0FBQSxTQUFBVCxFQUFBVSxFQUFBSiw0Z0JDQUFLLEVBQUFYLEVBQUEsb0RBRXFCWSxjQUNqQixTQUFBQSxFQUFBQyxnR0FBdUJDLENBQUFDLEtBQUFILEdBQUEsSUFBQUkseUxBQUFDLENBQUFGLE1BQUFILEVBQUFNLFdBQUFDLE9BQUFDLGVBQUFSLElBQUFMLEtBQUFR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SCxFQUF4RjZHLGlCQUZsQi9DLEtBR1UsV0FBUTlELEVBQUEyRyxjQUFxQjNHLEVBQUEyRyxhQUFyQmxELFNBQWtEekQsRUFBQTJHLGFBQUFsRCxRQUEwQnpELEVBQTVFNkciLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImltcG9ydCBQZXJzb24gZnJvbSAnLi9wZXJzb24nO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHVtbXlFbmVteSBleHRlbmRzIFBlcnNvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihnYW1lU3RhdGUpIHtcclxuICAgICAgICBzdXBlcihnYW1lU3RhdGUsICdnb2JsaW4nKTtcclxuICAgICAgICB0aGlzLndpZHRoID0gMzY7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSA0ODtcclxuXHJcbiAgICAgICAgdGhpcy5nZW5lcmF0ZVBvc2l0aW9uKCk7XHJcblxyXG5cclxuICAgIH1cclxuICAgIHN0ZXAoKSB7XHJcbiAgICAgICAgc3VwZXIuc3RlcCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlUG9zaXRpb24oKSB7XHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgeDogTWF0aC5hYnModGhpcy53aWR0aCAtIHRoaXMuZ2FtZS53aWR0aCAqIE1hdGgucmFuZG9tKCkpLFxyXG4gICAgICAgICAgICAgICAgeTogdGhpcy5nYW1lLmhlaWdodCAvIDIgKiBNYXRoLnJhbmRvbSgpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSB3aGlsZSAodGhpcy5nZXREaXN0YW5jZVRvSGVybygpIDwgMjAwKTtcclxuICAgIH1cclxuICAgIGdldERpc3RhbmNlVG9IZXJvKCkge1xyXG4gICAgICAgIGxldCBoZXJvID0gdGhpcy5nYW1lLmhlcm87XHJcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyhoZXJvLnBvc2l0aW9uLnggLSB0aGlzLnBvc2l0aW9uLngsIDIpICsgTWF0aC5wb3coaGVyby5wb3NpdGlvbi55IC0gdGhpcy5wb3NpdGlvbi55LCAyKSk7XHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IEhlcm8gZnJvbSAnLi9oZXJvJztcclxuaW1wb3J0IER1bW15RW5lbXkgZnJvbSAnLi9kdW1teUVuZW15JztcclxuaW1wb3J0IFNtYXJ0RW5lbXkgZnJvbSAnLi9zbWFydEVuZW15JztcclxuaW1wb3J0IEZpcmVTdG9yZSBmcm9tICcuLi91dGlscy9maXJlYmFzZSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lU3RhdGUge1xyXG5cdGNvbnN0cnVjdG9yKGVsZW1lbnRUb0RyYXcpIHtcclxuXHRcdHRoaXMuZ2FtZU9uU2NyZWVuID0gZmFsc2U7XHJcblx0XHR0aGlzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGggPj0gMTAwMCA/IDEwMDAgOiB3aW5kb3cuaW5uZXJXaWR0aDtcclxuXHJcblx0XHR0aGlzLmhlaWdodCA9IChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0XHJcblx0XHRcdHx8IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0KSAtIDE2MDtcclxuXHJcblx0XHR0aGlzLmNvbnRhaW50ZXIgPSBlbGVtZW50VG9EcmF3O1xyXG5cdFx0dGhpcy5zZXRVcEhlcm8oKTtcclxuXHR9XHJcblxyXG5cdHNldFVwR2FtZShvcmlnaW5hbEdhbWUgPSB0cnVlKSB7XHJcblx0XHR0aGlzLmdhbWVPblNjcmVlbiA9IHRydWU7XHJcblx0XHR0aGlzLm9yaWdpbmFsR2FtZSA9IG9yaWdpbmFsR2FtZTtcclxuXHRcdHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcblx0XHR0aGlzLmNvbnRhaW50ZXIuaW5uZXJIVE1MID0gJyc7XHJcblx0XHR0aGlzLmNvbnRhaW50ZXIuYXBwZW5kQ2hpbGQodGhpcy5jYW52YXMpO1xyXG5cdFx0dGhpcy5jYW52YXMud2lkdGggPSB0aGlzLndpZHRoO1xyXG5cdFx0dGhpcy5jYW52YXMuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XHJcblx0XHR0aGlzLmNvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG5cclxuXHJcblx0XHR0aGlzLmhlcm8gPSBuZXcgSGVybyh0aGlzKTtcclxuXHJcblx0XHR0aGlzLnJlcGxheURhdGEgPSBbXTtcclxuXHRcdHRoaXMuY2hhcmFjdGVycyA9IG5ldyBBcnJheSgyKS5maWxsKDApLm1hcCgoKSA9PiBuZXcgRHVtbXlFbmVteSh0aGlzKSk7XHJcblx0XHR0aGlzLmNoYXJhY3RlcnMucHVzaChuZXcgU21hcnRFbmVteSh0aGlzKSk7XHJcblxyXG5cdFx0dGhpcy5sZXZlbCA9IDE7XHJcblx0XHR0aGlzLmJhc2VTcGVlZCA9IDA7XHJcblx0XHR0aGlzLmdhbWVQbGF5cyA9IGZhbHNlO1xyXG5cdFx0dGhpcy5nYW1lVGltZXIgPSAwO1xyXG5cclxuXHRcdHRoaXMudGltZXJIYW5kbGVyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG5cdFx0XHR0aGlzLmNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcclxuXHJcblx0XHRcdGxldCBzdGVwRGF0YSA9IFtdO1xyXG5cdFx0XHR0aGlzLmRyYXdDaGFyYWN0ZXIodGhpcy5oZXJvKTtcclxuXHRcdFx0c3RlcERhdGEucHVzaCh7XHJcblx0XHRcdFx0Y2hhcmFjdGVyOiB0aGlzLmhlcm8sXHJcblx0XHRcdFx0c3RhdGU6IHRoaXMuaGVyby5wZXJzb25TdGF0ZVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0dGhpcy5jaGFyYWN0ZXJzLmZvckVhY2goY2hhcmFjdGVyID0+IHtcclxuXHRcdFx0XHR0aGlzLmRyYXdDaGFyYWN0ZXIoY2hhcmFjdGVyKTtcclxuXHRcdFx0XHRzdGVwRGF0YS5wdXNoKHtcclxuXHRcdFx0XHRcdGNoYXJhY3RlcjogY2hhcmFjdGVyLFxyXG5cdFx0XHRcdFx0c3RhdGU6IGNoYXJhY3Rlci5wZXJzb25TdGF0ZVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHRoaXMuZ2FtZVBsYXlzICYmIHRoaXMucmVwbGF5RGF0YS5wdXNoKHN0ZXBEYXRhKTtcclxuXHJcblx0XHRcdHRoaXMuY2hhcmFjdGVycy5mb3JFYWNoKGNoYXJhY3RlciA9PiB0aGlzLmNoZWNrQ2hhcmFjdGVyc0ludGVyc2VjdGlvbih0aGlzLmhlcm8sIGNoYXJhY3RlcikpO1xyXG5cclxuXHJcblx0XHR9LCAxMDApO1xyXG5cdH1cclxuXHJcblx0ZHJhd0NoYXJhY3RlcihjaGFyYWN0ZXIpIHtcclxuXHRcdHRoaXMuY29udGV4dC5kcmF3SW1hZ2UoY2hhcmFjdGVyLmdldE5leHRTcHJpdGUoKSwgY2hhcmFjdGVyLnBvc2l0aW9uLngsIGNoYXJhY3Rlci5wb3NpdGlvbi55LCBjaGFyYWN0ZXIud2lkdGgsIGNoYXJhY3Rlci5oZWlnaHQpO1xyXG5cdH1cclxuXHJcblx0cnVuR2FtZSgpIHtcclxuXHRcdHRoaXMuZ2FtZVRpbWVyID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcblx0XHR0aGlzLmdhbWVQbGF5cyA9IHRydWU7XHJcblx0XHR0aGlzLmJhc2VTcGVlZCA9IDU7XHJcblx0XHR0aGlzLnNldExldmVsKCk7XHJcblx0fVxyXG5cclxuXHRjaGVja0NoYXJhY3RlcnNJbnRlcnNlY3Rpb24oaGVybywgZW5lbXkpIHtcclxuXHRcdGxldCBkZWx0YVggPSAyMDtcclxuXHRcdGxldCBkZWx0YVkgPSAyMDtcclxuXHRcdGlmICgoKGhlcm8ucG9zaXRpb24ueCArIGRlbHRhWCA8PSAoZW5lbXkucG9zaXRpb24ueCArIGVuZW15LndpZHRoKSkgJiYgKChoZXJvLnBvc2l0aW9uLnggKyBoZXJvLndpZHRoKSA+PSBlbmVteS5wb3NpdGlvbi54ICsgZGVsdGFYKSkgJiZcclxuXHRcdFx0KChoZXJvLnBvc2l0aW9uLnkgKyBkZWx0YVkgPD0gKGVuZW15LnBvc2l0aW9uLnkgKyBlbmVteS5oZWlnaHQpKSAmJiAoKGhlcm8ucG9zaXRpb24ueSArIGhlcm8uaGVpZ2h0KSA+PSBlbmVteS5wb3NpdGlvbi55ICsgZGVsdGFZKSkpIHtcclxuXHRcdFx0dGhpcy5sb3NlR2FtZSgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0bG9zZUdhbWUoKSB7XHJcblx0XHR0aGlzLmVuZEdhbWUoKTtcclxuXHRcdGlmICh0aGlzLm9yaWdpbmFsR2FtZSkge1xyXG5cdFx0XHRsZXQgc2NvcmUgPSAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSB0aGlzLmdhbWVUaW1lcikgLyAxMDAwO1xyXG5cdFx0XHRsZXQgbmFtZSA9IHByb21wdChgWW91ciBzY29yZSBpcyAke3Njb3JlfSBzZWNvbmRzLlxcbiBFbnRlciB5b3VyIG5hbWVgLCAnTmluamEnKTtcclxuXHRcdFx0bmFtZSAmJiBGaXJlU3RvcmUuc2F2ZVNjb3JlKHtcclxuXHRcdFx0XHRuYW1lLCBzY29yZVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdHRoaXMuYWRkRW5kR2FtZUJ1dHRvbnMoKTtcclxuXHR9XHJcblxyXG5cdGVuZEdhbWUoKSB7XHJcblx0XHRjbGVhckludGVydmFsKHRoaXMudGltZXJIYW5kbGVyKTtcclxuXHRcdGNsZWFySW50ZXJ2YWwodGhpcy5sZXZlbFRpbWVyKTtcclxuXHRcdHRoaXMuZ2FtZVBsYXlzID0gZmFsc2U7XHJcblx0XHR0aGlzLmJhc2VTcGVlZCA9IDA7XHJcblx0XHR0aGlzLmdhbWVPblNjcmVlbiA9IGZhbHNlO1xyXG5cdH1cclxuXHJcblx0c2V0TGV2ZWwoKSB7XHJcblx0XHR0aGlzLmxldmVsVGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcblx0XHRcdHRoaXMubGV2ZWwgKz0gMTtcclxuXHJcblx0XHRcdHRoaXMuY2hhcmFjdGVycy5wdXNoKG5ldyBEdW1teUVuZW15KHRoaXMpKTtcclxuXHRcdFx0aWYgKHRoaXMubGV2ZWwgJSAyID09IDEpIHtcclxuXHRcdFx0XHR0aGlzLmNoYXJhY3RlcnMucHVzaChuZXcgU21hcnRFbmVteSh0aGlzKSk7XHJcblx0XHRcdH1cclxuXHRcdFx0bGV0IG1lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0bWVzc2FnZS5jbGFzc0xpc3QuYWRkKCdsZXZlbC11cCcpO1xyXG5cdFx0XHRtZXNzYWdlLmlubmVySFRNTCA9IGBMZXZlbCBVcCEgQ3VycmVudCBsZXZlbCAtICR7dGhpcy5sZXZlbH1gO1xyXG5cclxuXHRcdFx0dGhpcy5jb250YWludGVyLmFwcGVuZENoaWxkKG1lc3NhZ2UpO1xyXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHR0aGlzLmNvbnRhaW50ZXIucmVtb3ZlQ2hpbGQobWVzc2FnZSk7XHJcblx0XHRcdH0sIDEwMDApO1xyXG5cdFx0fSwgMTAwMDApO1xyXG5cdH1cclxuXHRhZGRFbmRHYW1lQnV0dG9ucygpIHtcclxuXHRcdGxldCBkaXZGb3JCdXR0b25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRkaXZGb3JCdXR0b25zLmNsYXNzTGlzdC5hZGQoJ2VuZC1idXR0b25zJyk7XHJcblxyXG5cdFx0bGV0IHJlcGxheUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG5cdFx0cmVwbGF5QnV0dG9uLmlubmVySFRNTCA9IGBXYXRjaCByZXBsYXkgJHt0aGlzLm9yaWdpbmFsR2FtZSA/ICcnIDogJ2FnYWluJ31gO1xyXG5cdFx0cmVwbGF5QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHR3aW5kb3cubG9jYXRpb24uaGFzaCA9ICd3YXRjaHJlcGxheSc7XHJcblx0XHR9KTtcclxuXHJcblx0XHRsZXQgc3RhcnROZXdHYW1lQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcblx0XHRzdGFydE5ld0dhbWVCdXR0b24uaW5uZXJIVE1MID0gJ1N0YXJ0IG5ldyBnYW1lJztcclxuXHRcdHN0YXJ0TmV3R2FtZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRcdFx0d2luZG93LmxvY2F0aW9uLmhhc2ggPSAnZ2FtZSc7XHJcblx0XHR9KTtcclxuXHJcblx0XHRkaXZGb3JCdXR0b25zLmFwcGVuZENoaWxkKHJlcGxheUJ1dHRvbik7XHJcblx0XHRkaXZGb3JCdXR0b25zLmFwcGVuZENoaWxkKHN0YXJ0TmV3R2FtZUJ1dHRvbik7XHJcblxyXG5cdFx0dGhpcy5jb250YWludGVyLmFwcGVuZENoaWxkKGRpdkZvckJ1dHRvbnMpO1xyXG5cdH1cclxuXHRzZXRVcEhlcm8oKSB7XHJcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2ZW50KSA9PiB7XHJcblx0XHRcdGlmICh0aGlzLmdhbWVPblNjcmVlbikge1xyXG5cdFx0XHRcdHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xyXG5cdFx0XHRcdFx0Y2FzZSAzNzoge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmhlcm8uZGlyZWN0aW9uQW5nbGUgPSBNYXRoLlBJO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGNhc2UgMzg6IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5oZXJvLmRpcmVjdGlvbkFuZ2xlID0gTWF0aC5QSSAvIDI7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Y2FzZSAzOToge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmhlcm8uZGlyZWN0aW9uQW5nbGUgPSAwO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGNhc2UgNDA6IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5oZXJvLmRpcmVjdGlvbkFuZ2xlID0gTWF0aC5QSSAvIDIgKiAzO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGRlZmF1bHQ6IHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoIXRoaXMuZ2FtZVBsYXlzKSB7XHJcblx0XHRcdFx0XHR0aGlzLnJ1bkdhbWUoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHRyZXBsYXlHYW1lKCkge1xyXG5cdFx0bGV0IGN1cnJlbnRTdGF0ZSA9IDA7XHJcblx0XHRsZXQgcmVwbGF5VGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcblx0XHRcdGlmIChjdXJyZW50U3RhdGUgPj0gKHRoaXMucmVwbGF5RGF0YSB8fCBbXSkubGVuZ3RoKSB7XHJcblx0XHRcdFx0Y2xlYXJJbnRlcnZhbChyZXBsYXlUaW1lcik7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuY29udGV4dC5jbGVhclJlY3QoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xyXG5cclxuXHRcdFx0bGV0IHN0YXRlID0gdGhpcy5yZXBsYXlEYXRhW2N1cnJlbnRTdGF0ZV07XHJcblx0XHRcdHN0YXRlLmZvckVhY2goZGF0YSA9PiB7XHJcblx0XHRcdFx0ZGF0YS5jaGFyYWN0ZXIucGVyc29uU3RhdGUgPSBkYXRhLnN0YXRlO1xyXG5cclxuXHRcdFx0XHR0aGlzLmRyYXdDaGFyYWN0ZXIoZGF0YS5jaGFyYWN0ZXIpO1xyXG5cclxuXHJcblx0XHRcdH0pO1xyXG5cdFx0XHRjdXJyZW50U3RhdGUrKztcclxuXHRcdH0sIDIwKTtcclxuXHR9XHJcblxyXG59XHJcbiIsImltcG9ydCBQZXJzb24gZnJvbSAnLi9wZXJzb24nO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSGVybyBleHRlbmRzIFBlcnNvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihnYW1lU3RhdGUpIHtcclxuICAgICAgICBzdXBlcihnYW1lU3RhdGUsICdrbmlnaHQnKTtcclxuICAgICAgICB0aGlzLndpZHRoID0gNTU7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSA3NTtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICB4OiAodGhpcy5nYW1lLndpZHRoIC0gdGhpcy53aWR0aCkgLyAyLFxyXG4gICAgICAgICAgICB5OiB0aGlzLmdhbWUuaGVpZ2h0IC0gdGhpcy5oZWlnaHRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnNwcml0ZXMgPSB0aGlzLnNwcml0ZXNDb2xsZWN0aW9uLmRvd247XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb25BbmdsZSA9IE1hdGguUEkgLyAyO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBnZXRTcGVlZCgpIHtcclxuICAgICAgICB0aGlzLnNwZWVkID0gdGhpcy5nYW1lLmJhc2VTcGVlZCAqIHRoaXMuZ2FtZS5sZXZlbDtcclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQZXJzb24ge1xyXG4gICAgY29uc3RydWN0b3IoZ2FtZVN0YXRlLCBzZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3RvcjtcclxuICAgICAgICB0aGlzLmdldEFsbFNwcml0ZXMoKTtcclxuICAgICAgICB0aGlzLmdhbWUgPSBnYW1lU3RhdGU7XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb25BbmdsZSA9IDIgKiBNYXRoLlBJICogTWF0aC5yYW5kb20oKTtcclxuICAgICAgICB0aGlzLnNwZWVkID0gZ2FtZVN0YXRlLmxldmVsICogZ2FtZVN0YXRlLmJhc2VTcGVlZCAvIDI7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50SW1nID0gMDtcclxuICAgIH1cclxuICAgIHNlbGVjdFNwcml0ZXMoKSB7XHJcbiAgICAgICAgaWYgKCh0aGlzLmRpcmVjdGlvbkFuZ2xlID49IE1hdGguUEkgKiA1IC8gNCkgJiYgKHRoaXMuZGlyZWN0aW9uQW5nbGUgPD0gTWF0aC5QSSAqIDcgLyA0KSkge1xyXG4gICAgICAgICAgICB0aGlzLnNwcml0ZXMgPSB0aGlzLnNwcml0ZXNDb2xsZWN0aW9uLmRvd247XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCh0aGlzLmRpcmVjdGlvbkFuZ2xlID49IE1hdGguUEkgLyA0KSAmJiAodGhpcy5kaXJlY3Rpb25BbmdsZSA8PSBNYXRoLlBJICogMyAvIDQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlcyA9IHRoaXMuc3ByaXRlc0NvbGxlY3Rpb24udXA7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCh0aGlzLmRpcmVjdGlvbkFuZ2xlID49IE1hdGguUEkgKiAzIC8gNCkgJiYgKHRoaXMuZGlyZWN0aW9uQW5nbGUgPD0gTWF0aC5QSSAqIDUgLyA0KSkge1xyXG4gICAgICAgICAgICB0aGlzLnNwcml0ZXMgPSB0aGlzLnNwcml0ZXNDb2xsZWN0aW9uLmxlZnQ7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zcHJpdGVzID0gdGhpcy5zcHJpdGVzQ29sbGVjdGlvbi5yaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZGlyZWN0aW9uQW5nbGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RpcmVjdGlvbkFuZ2xlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBkaXJlY3Rpb25BbmdsZShuZXdWYWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX2RpcmVjdGlvbkFuZ2xlID0gbmV3VmFsdWU7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RTcHJpdGVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHBlcnNvblN0YXRlKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHg6IHRoaXMucG9zaXRpb24ueCxcclxuICAgICAgICAgICAgeTogdGhpcy5wb3NpdGlvbi55LFxyXG4gICAgICAgICAgICBkaXJlY3Rpb25BbmdsZTogdGhpcy5kaXJlY3Rpb25BbmdsZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHBlcnNvblN0YXRlKG5ld1Bvc2l0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb25BbmdsZSA9IG5ld1Bvc2l0aW9uLmRpcmVjdGlvbkFuZ2xlO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24ueCA9IG5ld1Bvc2l0aW9uLng7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi55ID0gbmV3UG9zaXRpb24ueTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBbGxTcHJpdGVzKCkge1xyXG4gICAgICAgIHRoaXMuc3ByaXRlc0NvbGxlY3Rpb24gPSB7XHJcbiAgICAgICAgICAgIGxlZnQ6IHRoaXMuZ2V0U3ByaXRlcyhgLiR7dGhpcy5zZWxlY3Rvcn0tbGVmdC1pbWdgKSxcclxuICAgICAgICAgICAgcmlnaHQ6IHRoaXMuZ2V0U3ByaXRlcyhgLiR7dGhpcy5zZWxlY3Rvcn0tcmlnaHQtaW1nYCksXHJcbiAgICAgICAgICAgIHVwOiB0aGlzLmdldFNwcml0ZXMoYC4ke3RoaXMuc2VsZWN0b3J9LXVwLWltZ2ApLFxyXG4gICAgICAgICAgICBkb3duOiB0aGlzLmdldFNwcml0ZXMoYC4ke3RoaXMuc2VsZWN0b3J9LWRvd24taW1nYClcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNwcml0ZXMoc2VsZWN0b3IpIHtcclxuICAgICAgICByZXR1cm4gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSk7XHJcbiAgICB9XHJcbiAgICBnZXROZXh0U3ByaXRlKCkge1xyXG4gICAgICAgIHRoaXMuc3RlcCgpO1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRJbWcgPj0gdGhpcy5zcHJpdGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbWcgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5zcHJpdGVzW3RoaXMuY3VycmVudEltZysrXTtcclxuICAgIH1cclxuXHJcbiAgICBzdGVwKCkge1xyXG4gICAgICAgIHRoaXMuZ2V0U3BlZWQoKTtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uLnggKz0gTWF0aC5jb3ModGhpcy5kaXJlY3Rpb25BbmdsZSkgKiB0aGlzLnNwZWVkO1xyXG4gICAgICAgIGlmICh0aGlzLnBvc2l0aW9uLnggKyB0aGlzLndpZHRoIC8gMiA+IHRoaXMuZ2FtZS53aWR0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uLnggPSAtdGhpcy53aWR0aCAvIDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnBvc2l0aW9uLnggKyB0aGlzLndpZHRoIC8gMiA8IDApIHtcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi54ID0gdGhpcy5nYW1lLndpZHRoIC0gdGhpcy53aWR0aCAvIDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucG9zaXRpb24ueSAtPSBNYXRoLnNpbih0aGlzLmRpcmVjdGlvbkFuZ2xlKSAqIHRoaXMuc3BlZWQ7XHJcbiAgICAgICAgaWYgKHRoaXMucG9zaXRpb24ueSArIHRoaXMuaGVpZ2h0IC8gMiA+IHRoaXMuZ2FtZS5oZWlnaHQpIHtcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi55ID0gLXRoaXMuaGVpZ2h0IC8gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucG9zaXRpb24ueSArIHRoaXMuaGVpZ2h0IC8gMiA8IDApIHtcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi55ID0gdGhpcy5nYW1lLmhlaWdodCAtIHRoaXMuaGVpZ2h0IC8gMjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRTcGVlZCgpIHtcclxuICAgICAgICB0aGlzLnNwZWVkID0gdGhpcy5nYW1lLmJhc2VTcGVlZCAqIHRoaXMuZ2FtZS5sZXZlbCAvIDI7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IFBlcnNvbiBmcm9tICcuL3BlcnNvbic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTbWFydEVuZW15IGV4dGVuZHMgUGVyc29uIHtcclxuICAgIGNvbnN0cnVjdG9yKGdhbWVTdGF0ZSkge1xyXG4gICAgICAgIHN1cGVyKGdhbWVTdGF0ZSwgJ3JvZ3VlJyk7XHJcbiAgICAgICAgdGhpcy5yYW5nZSA9IDMwMDtcclxuICAgICAgICB0aGlzLndpZHRoID0gNDA7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSA0NTtcclxuXHJcbiAgICAgICAgdGhpcy5nZW5lcmF0ZVBvc2l0aW9uKCk7XHJcblxyXG5cclxuICAgIH1cclxuICAgIHN0ZXAoKSB7XHJcbiAgICAgICAgbGV0IGhlcm9Qb3NpdGlvbiA9IHRoaXMuZ2FtZS5oZXJvLnBvc2l0aW9uO1xyXG4gICAgICAgIGxldCBlbmVteVBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbjtcclxuICAgICAgICBpZiAodGhpcy5nZXREaXN0YW5jZVRvSGVybygpIDw9IHRoaXMucmFuZ2UgJiYgKGhlcm9Qb3NpdGlvbi54ICE9PSBlbmVteVBvc2l0aW9uLngpKSB7XHJcbiAgICAgICAgICAgIGxldCBhdGFuID0gTWF0aC5hdGFuKChoZXJvUG9zaXRpb24ueSAtIGVuZW15UG9zaXRpb24ueSkgLyAoaGVyb1Bvc2l0aW9uLnggLSBlbmVteVBvc2l0aW9uLngpKTtcclxuXHJcbiAgICAgICAgICAgIGlmICgoKGhlcm9Qb3NpdGlvbi54ID4gZW5lbXlQb3NpdGlvbi54KSAmJiAoaGVyb1Bvc2l0aW9uLnkgPCBlbmVteVBvc2l0aW9uLnkpKSB8fFxyXG4gICAgICAgICAgICAgICAgKChoZXJvUG9zaXRpb24ueCA+IGVuZW15UG9zaXRpb24ueCkgJiYgKGhlcm9Qb3NpdGlvbi55ID4gZW5lbXlQb3NpdGlvbi55KSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uQW5nbGUgPSAyICogTWF0aC5QSSAtIGF0YW47XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpcmVjdGlvbkFuZ2xlID0gTWF0aC5QSSAtIGF0YW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgc3VwZXIuc3RlcCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlUG9zaXRpb24oKSB7XHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgeDogTWF0aC5hYnModGhpcy53aWR0aCAtIHRoaXMuZ2FtZS53aWR0aCAqIE1hdGgucmFuZG9tKCkpLFxyXG4gICAgICAgICAgICAgICAgeTogdGhpcy5nYW1lLmhlaWdodCAvIDIgKiBNYXRoLnJhbmRvbSgpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSB3aGlsZSAodGhpcy5nZXREaXN0YW5jZVRvSGVybygpIDwgMjAwKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREaXN0YW5jZVRvSGVybygpIHtcclxuICAgICAgICBsZXQgaGVybyA9IHRoaXMuZ2FtZS5oZXJvO1xyXG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQoTWF0aC5wb3coaGVyby5wb3NpdGlvbi54IC0gdGhpcy5wb3NpdGlvbi54LCAyKSArIE1hdGgucG93KGhlcm8ucG9zaXRpb24ueSAtIHRoaXMucG9zaXRpb24ueSwgMikpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFJvdXRlciBmcm9tICcuL3V0aWxzL3JvdXRlcic7XHJcbmltcG9ydCByb3V0ZXMgZnJvbSAnLi9yb3V0ZXMnO1xyXG5pbXBvcnQgYWRkQnV0dG9uc0Zvck1vYmlsZSBmcm9tICcuL3V0aWxzL2FkZEJ1dHRvbnNGb3JNb2JpbGUnO1xyXG5cclxuYWRkQnV0dG9uc0Zvck1vYmlsZSgpO1xyXG5uZXcgUm91dGVyKHJvdXRlcyk7IiwiaW1wb3J0IEdhbWVTdGF0ZSBmcm9tICcuL2dhbWVPYmplY3RzL2dhbWVTdGF0ZSc7XHJcbmltcG9ydCBGaXJlU3RvcmUgZnJvbSAnLi91dGlscy9maXJlYmFzZSc7XHJcblxyXG5sZXQgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50Jyk7XHJcbmxldCBnYW1lID0gbmV3IEdhbWVTdGF0ZShjb250ZW50KTtcclxuXHJcbmNvbnN0IHJvdXRlcyA9IFtcclxuICAgIHtcclxuICAgICAgICBtYXRjaDogJycsXHJcbiAgICAgICAgb25FbnRlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICdnYW1lJztcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG1hdGNoOiAnYWJvdXQnLFxyXG4gICAgICAgIG9uRW50ZXI6ICgpID0+IHtcclxuICAgICAgICAgICAgY2hhbmdlQWN0aXZlUGFnZSgnYWJvdXQnKTtcclxuICAgICAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSAnPGgxIGNsYXNzPVwiYWJvdXRcIj48c3Bhbj5TdXBlciBnYW1lIENhdCB2cyBOaW5qYXM8L3NwYW4+PGgxPic7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBtYXRjaDogJ2dhbWUnLFxyXG4gICAgICAgIG9uRW50ZXI6ICgpID0+IHtcclxuICAgICAgICAgICAgY2hhbmdlQWN0aXZlUGFnZSgnZ2FtZScpO1xyXG4gICAgICAgICAgICBnYW1lLnNldFVwR2FtZSgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25MZWF2ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICBnYW1lLmVuZEdhbWUoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG1hdGNoOiAnc2NvcmVzJyxcclxuICAgICAgICBvbkVudGVyOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNoYW5nZUFjdGl2ZVBhZ2UoJ3Njb3JlcycpO1xyXG5cclxuICAgICAgICAgICAgRmlyZVN0b3JlLmdldFNjb3JlcygpLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MID0gJzxoMSBjbGFzcz1cImFib3V0XCI+PHNwYW4+U2NvcmVzPC9zcGFuPjwvaDE+JztcclxuICAgICAgICAgICAgICAgIGxldCBvbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29sJyk7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpLmlubmVySFRNTCA9IGAke2l0ZW0ubmFtZX0gLSAke2l0ZW0uc2NvcmV9YDtcclxuICAgICAgICAgICAgICAgICAgICBvbC5hcHBlbmRDaGlsZChsaSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgZGl2Rm9yRGl2aXNpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGRpdkZvckRpdmlzaW9uLmNsYXNzTGlzdC5hZGQoJ3ctMTAwJyk7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKGRpdkZvckRpdmlzaW9uKTtcclxuICAgICAgICAgICAgICAgIGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZChvbCk7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKGRpdik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbWF0Y2g6ICdyZXBsYXknLFxyXG4gICAgICAgIG9uRW50ZXI6ICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKChnYW1lLnJlcGxheURhdGEgfHwgW10pLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAnZ2FtZSc7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZ2FtZS5yZXBsYXlHYW1lKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbWF0Y2g6ICd3YXRjaHJlcGxheScsXHJcbiAgICAgICAgb25FbnRlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICdyZXBsYXknO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbl07XHJcblxyXG5mdW5jdGlvbiBjaGFuZ2VBY3RpdmVQYWdlKG5ld1BhZ2UpIHtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY3RpdmUnKS5jbGFzc05hbWUgPSAnJztcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtocmVmPVwiIyR7bmV3UGFnZX1cIl1gKS5wYXJlbnRFbGVtZW50LmNsYXNzTmFtZSA9ICdhY3RpdmUnO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgcm91dGVzO1xyXG4iLCJpbXBvcnQgZGV0ZWN0TW9iaWxlIGZyb20gJy4vZGV0ZWN0TW9iaWxlJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGFkZEJ1dHRvbnNGb3JNb2JpbGUoKSB7XHJcbiAgICBpZiAoZGV0ZWN0TW9iaWxlKCkpIHtcclxuXHJcbiAgICAgICAgdmFyIGRpdkZvckJ1dHRvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBkaXZGb3JCdXR0b25zLmNsYXNzTGlzdC5hZGQoJ2J1dHRvbnMnKTtcclxuXHJcbiAgICAgICAgdmFyIGJ1dHRvbkxlZnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICBidXR0b25MZWZ0LmlubmVySFRNTCA9ICc8JztcclxuICAgICAgICBidXR0b25MZWZ0LmNsYXNzTGlzdC5hZGQoJ2xlZnQnKTtcclxuXHJcbiAgICAgICAgdmFyIGJ1dHRvblVwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgYnV0dG9uVXAuaW5uZXJIVE1MID0gJ14nO1xyXG4gICAgICAgIGJ1dHRvblVwLmNsYXNzTGlzdC5hZGQoJ3VwJyk7XHJcblxyXG4gICAgICAgIHZhciBidXR0b25SaWdodCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgIGJ1dHRvblJpZ2h0LmlubmVySFRNTCA9ICc+JztcclxuICAgICAgICBidXR0b25SaWdodC5jbGFzc0xpc3QuYWRkKCdyaWdodCcpO1xyXG5cclxuICAgICAgICB2YXIgYnV0dG9uRG93biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgIGJ1dHRvbkRvd24uaW5uZXJIVE1MID0gJ3YnO1xyXG4gICAgICAgIGJ1dHRvbkRvd24uY2xhc3NMaXN0LmFkZCgnZG93bicpO1xyXG5cclxuXHJcblxyXG4gICAgICAgIGRpdkZvckJ1dHRvbnMuYXBwZW5kQ2hpbGQoYnV0dG9uTGVmdCk7XHJcbiAgICAgICAgZGl2Rm9yQnV0dG9ucy5hcHBlbmRDaGlsZChidXR0b25VcCk7XHJcbiAgICAgICAgZGl2Rm9yQnV0dG9ucy5hcHBlbmRDaGlsZChidXR0b25SaWdodCk7XHJcbiAgICAgICAgZGl2Rm9yQnV0dG9ucy5hcHBlbmRDaGlsZChidXR0b25Eb3duKTtcclxuXHJcbiAgICAgICAgZGl2Rm9yQnV0dG9ucy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0Lm1hdGNoZXMoJy5yaWdodCcpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZSA9IG5ldyBFdmVudCgna2V5ZG93bicpO1xyXG4gICAgICAgICAgICAgICAgZS5rZXlDb2RlID0gMzk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQubWF0Y2hlcygnLmxlZnQnKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGUgPSBuZXcgRXZlbnQoJ2tleWRvd24nKTtcclxuICAgICAgICAgICAgICAgIGUua2V5Q29kZSA9IDM3O1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0Lm1hdGNoZXMoJy51cCcpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZSA9IG5ldyBFdmVudCgna2V5ZG93bicpO1xyXG4gICAgICAgICAgICAgICAgZS5rZXlDb2RlID0gMzg7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQubWF0Y2hlcygnLmRvd24nKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGUgPSBuZXcgRXZlbnQoJ2tleWRvd24nKTtcclxuICAgICAgICAgICAgICAgIGUua2V5Q29kZSA9IDQwO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpdkZvckJ1dHRvbnMpO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRldGVjdG1vYmlsZSgpIHtcclxuICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9BbmRyb2lkL2kpXHJcbiAgICAgICAgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvd2ViT1MvaSlcclxuICAgICAgICB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUGhvbmUvaSlcclxuICAgICAgICB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUGFkL2kpXHJcbiAgICAgICAgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBvZC9pKVxyXG4gICAgICAgIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0JsYWNrQmVycnkvaSlcclxuICAgICAgICB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9XaW5kb3dzIFBob25lL2kpXHJcbiAgICApIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufSIsImxldCB1cmwgPSAnaHR0cHM6Ly9rYXRlLWFyY2FkZS1nYW1lLmZpcmViYXNlaW8uY29tLy5qc29uJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZpcmVTdG9yZSB7XHJcbiAgICBzdGF0aWMgZ2V0U2NvcmVzKCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh1cmwpLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBzYXZlU2NvcmUoaW5mb1RvU2F2ZSkge1xyXG5cclxuICAgICAgICB0aGlzLmdldFNjb3JlcygpLnRoZW4oc2NvcmVzID0+IHtcclxuICAgICAgICAgICAgbGV0IG5ld1Njb3JlcyA9IFsuLi5zY29yZXMgfHwgW10sIGluZm9Ub1NhdmVdO1xyXG4gICAgICAgICAgICBuZXdTY29yZXMuc29ydCgoaXRlbTEsIGl0ZW0yKSA9PiBpdGVtMS5zY29yZSA+IGl0ZW0yLnNjb3JlID8gLTEgOiBpdGVtMS5zY29yZSA8IGl0ZW0yLnNjb3JlID8gMSA6IDApO1xyXG4gICAgICAgICAgICBuZXdTY29yZXMuc3BsaWNlKDEwKTtcclxuICAgICAgICAgICAgZmV0Y2godXJsLCB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkobmV3U2NvcmVzKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsIi8qKlxyXG4gKiDQpNGD0L3QutGG0LjRjyDQtNC70Y8g0LTQvtCx0LDQstC70LXQvdC40Y8g0Lgg0L7QsdGA0LDQsdC+0YLQutC4INGA0L7Rg9GC0L7QsiDQvdCwINGB0YLRgNCw0L3QuNGG0LVcclxuICogQHBhcmFtIHsqfSByb3V0ZVBhcmFtcyDQvNCw0YHRgdC40LIg0L/QsNGA0LDQvNC10YLRgNC+0LIg0LTQu9GPINC+0LHRgNCw0LHQvtGC0LrQuCDRgNC+0YPRgtC+0LJcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJvdXRlcihyb3V0ZVBhcmFtcykge1xyXG4gICAgdGhpcy5yb3V0ZXMgPSByb3V0ZVBhcmFtcyB8fCBbXTtcclxuICAgIHRoaXMuY3VycmVudFJvdXRlO1xyXG4gICAgdGhpcy5wcmV2aW91c1JvdXRlO1xyXG4gICAgdGhpcy5jdXJyZW50UGFyYW1zO1xyXG4gICAgdGhpcy5wcmV2aW91c1BhcmFtcztcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlcih3aW5kb3cubG9jYXRpb24uaGFzaCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuaGFuZGxlcih3aW5kb3cubG9jYXRpb24uaGFzaCk7XHJcbn1cclxuXHJcblJvdXRlci5wcm90b3R5cGUgPSB7XHJcbiAgICBoYW5kbGVyOiBmdW5jdGlvbiAoaGFzaCkge1xyXG4gICAgICAgIHRoaXMucHJldmlvdXNSb3V0ZSA9IHRoaXMuY3VycmVudFJvdXRlO1xyXG4gICAgICAgIHRoaXMucHJldmlvdXNQYXJhbXMgPSB0aGlzLmN1cnJlbnRQYXJhbXM7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50Um91dGUgPSB0aGlzLmZpbmROZXdSb3V0ZShoYXNoKTtcclxuICAgICAgICB0aGlzLmxhdW5jaEhhbmRsZXJzKCk7XHJcbiAgICB9LFxyXG4gICAgZmluZE5ld1JvdXRlOiBmdW5jdGlvbiAoaGFzaCkge1xyXG4gICAgICAgIGhhc2ggPSBoYXNoLnNsaWNlKDEpO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucm91dGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5yb3V0ZXNbaV07XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgKGVsZW1lbnQubWF0Y2gpID09ICdzdHJpbmcnICYmIGVsZW1lbnQubWF0Y2ggPT09IGhhc2gpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhcmFtcyA9ICcnO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiAoZWxlbWVudC5tYXRjaCkgPT0gJ2Z1bmN0aW9uJyAmJiBlbGVtZW50Lm1hdGNoKGhhc2gpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYXJhbXMgPSAnJztcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgoZWxlbWVudC5tYXRjaCBpbnN0YW5jZW9mIFJlZ0V4cCkgJiYgZWxlbWVudC5tYXRjaC50ZXN0KGhhc2gpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYXJhbXMgPSBoYXNoLm1hdGNoKGVsZW1lbnQubWF0Y2gpIHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFyYW1zLnNwbGljZSgwLCAxKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGxhdW5jaEhhbmRsZXJzKCkge1xyXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHsgdGhpcy5wcmV2aW91c1JvdXRlICYmIHRoaXMucHJldmlvdXNSb3V0ZS5vbkxlYXZlICYmIHRoaXMucHJldmlvdXNSb3V0ZS5vbkxlYXZlKHRoaXMucHJldmlvdXNQYXJhbXMpOyB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7IHRoaXMuY3VycmVudFJvdXRlICYmIHRoaXMuY3VycmVudFJvdXRlLm9uQmVmb3JlRW50ZXIgJiYgdGhpcy5jdXJyZW50Um91dGUub25CZWZvcmVFbnRlcih0aGlzLmN1cnJlbnRQYXJhbXMpOyB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7IHRoaXMuY3VycmVudFJvdXRlICYmIHRoaXMuY3VycmVudFJvdXRlLm9uRW50ZXIgJiYgdGhpcy5jdXJyZW50Um91dGUub25FbnRlcih0aGlzLmN1cnJlbnRQYXJhbXMpOyB9KTtcclxuICAgIH1cclxufTsiXX0=
