!function o(a,s,u){function c(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[t]={exports:{}};a[t][0].call(i.exports,function(e){return c(a[t][1][e]||e)},i,i.exports,o,a,s,u)}return s[t].exports}for(var l="function"==typeof require&&require,e=0;e<u.length;e++)c(u[e]);return c}({1:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var i,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=e("./person"),s=(i=a)&&i.__esModule?i:{default:i};var u=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.width=36,t.height=48,t.getSprites(),t.generatePosition(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.default),o(n,[{key:"generatePosition",value:function(){for(;this.position={x:Math.abs(this.width-this.game.width*Math.random()),y:this.game.height/2*Math.random()},this.getDistanceToHero()<200;);}},{key:"getDistanceToHero",value:function(){var e=this.game.hero;return Math.sqrt(Math.pow(e.position.x-this.position.x,2)+Math.pow(e.position.y-this.position.y,2))}},{key:"getSprites",value:function(){this.sprites=[].slice.call(document.querySelectorAll(".goblin-img"))}}]),n}();n.default=u},{"./person":4}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=u(e("./hero")),o=u(e("./dummyEnemy")),a=u(e("./smartEnemy")),s=u(e("../utils/firebase"));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=1e3<=window.innerWidth?1e3:window.innerWidth,this.height=(document.documentElement.clientHeight||document.body.clientHeight)-160,this.containter=e}return r(t,[{key:"setUpGame",value:function(){var t=this;this.canvas=document.createElement("canvas"),this.containter.innerHTML="",this.containter.appendChild(this.canvas),this.canvas.width=this.width,this.canvas.height=this.height,this.context=this.canvas.getContext("2d"),this.hero=new i.default(this),this.characters=[],this.characters=new Array(2).fill(0).map(function(){return new o.default(t)}),this.characters.push(new a.default(this)),this.level=1,this.baseSpeed=0,this.gamePlays=!1,this.gameTimer=0,this.timerHandler=setInterval(function(){t.context.clearRect(0,0,t.width,t.height),t.characters.forEach(function(e){return t.checkCharactersIntersection(t.hero,e)}),t.drawCharacter(t.hero),t.characters.forEach(function(e){return t.drawCharacter(e)})},100)}},{key:"drawCharacter",value:function(e){this.context.drawImage(e.getNextSprite(),e.position.x,e.position.y,e.width,e.height)}},{key:"runGame",value:function(){this.gameTimer=(new Date).getTime(),this.gamePlays=!0,this.baseSpeed=5,this.setLevel()}},{key:"checkCharactersIntersection",value:function(e,t){e.position.x+35<=t.position.x+t.width&&e.position.x+e.width>=t.position.x+35&&e.position.y+10<=t.position.y+t.height&&e.position.y+e.height>=t.position.y+10&&(e.die(),this.loseGame())}},{key:"loseGame",value:function(){this.endGame();var e=((new Date).getTime()-this.gameTimer)/1e3,t=prompt("Your score is "+e+" seconds.\n Enter your name","Ninja");t&&s.default.saveScore({name:t,score:e})}},{key:"endGame",value:function(){clearInterval(this.timerHandler),clearInterval(this.levelTimer),this.gamePlays=!1,this.baseSpeed=0}},{key:"setLevel",value:function(){var t=this;this.levelTimer=setInterval(function(){t.level+=1,t.characters.push(new o.default(t)),t.level%2==1&&t.characters.push(new a.default(t));var e=document.createElement("div");e.classList.add("level-up"),e.innerHTML="Level Up! Current level - "+t.level,t.containter.appendChild(e),setTimeout(function(){t.containter.removeChild(e)},1e3)},1e4)}}]),t}();n.default=c},{"../utils/firebase":11,"./dummyEnemy":1,"./hero":3,"./smartEnemy":5}],3:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var i,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=e("./smartPerson"),s=(i=a)&&i.__esModule?i:{default:i};var u=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,"knight"));return t.setUpHero(),t.width=75,t.height=75,t.position={x:(t.game.width-t.width)/2,y:t.game.height-t.height},t.sprites=t.spritesCollection.down,t.directionAngle=Math.PI/2,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.default),o(n,[{key:"setUpHero",value:function(){var t=this;document.addEventListener("keydown",function(e){switch(e.keyCode){case 37:t.directionAngle=Math.PI;break;case 38:t.directionAngle=Math.PI/2;break;case 39:t.directionAngle=0;break;case 40:t.directionAngle=Math.PI/2*3;break;default:return}t.game.gamePlays||t.game.runGame(),t.selectSprites()})}},{key:"getSpeed",value:function(){this.speed=this.game.baseSpeed*this.game.level}},{key:"die",value:function(){}}]),n}();n.default=u},{"./smartPerson":6}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=e,this.directionAngle=2*Math.PI*Math.random(),this.position={x:0,y:0},this.speed=e.level*e.baseSpeed/2,this.currentImg=0}return r(t,[{key:"getNextSprite",value:function(){return this.step(),this.currentImg>=this.sprites.length&&(this.currentImg=0),this.sprites[this.currentImg++]}},{key:"step",value:function(){this.getSpeed(),this.position.x+=Math.cos(this.directionAngle)*this.speed,this.position.x+this.width/2>this.game.width&&(this.position.x=-this.width/2),this.position.x+this.width/2<0&&(this.position.x=this.game.width-this.width/2),this.position.y-=Math.sin(this.directionAngle)*this.speed,this.position.y+this.height/2>this.game.height&&(this.position.y=-this.height/2),this.position.y+this.height/2<0&&(this.position.y=this.game.height-this.height/2)}},{key:"getSpeed",value:function(){this.speed=this.game.baseSpeed*this.game.level/2}}]),t}();n.default=i},{}],5:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=e("./smartPerson"),s=(r=a)&&r.__esModule?r:{default:r};var u=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,"rogue"));return t.selectSprites(),t.range=300,t.width=60,t.height=60,t.generatePosition(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,s.default),o(r,[{key:"step",value:function(){var e=this.game.hero.position,t=this.position;if(this.getDistanceToHero()<=this.range&&e.x!==t.x){var n=Math.atan((e.y-t.y)/(e.x-t.x));e.x>t.x&&e.y<t.y||e.x>t.x&&e.y>t.y?this.directionAngle=2*Math.PI-n:this.directionAngle=Math.PI-n,this.selectSprites()}(function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"step",this).call(this)}},{key:"generatePosition",value:function(){for(;this.position={x:Math.abs(this.width-this.game.width*Math.random()),y:this.game.height/2*Math.random()},this.getDistanceToHero()<200;);}},{key:"getDistanceToHero",value:function(){var e=this.game.hero;return Math.sqrt(Math.pow(e.position.x-this.position.x,2)+Math.pow(e.position.y-this.position.y,2))}}]),r}();n.default=u},{"./smartPerson":6}],6:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=e("./person"),s=(r=a)&&r.__esModule?r:{default:r};var u=function(e){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return n.selector=t,n.getAllSprites(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,s.default),o(r,[{key:"selectSprites",value:function(){this.directionAngle>=5*Math.PI/4&&this.directionAngle<=7*Math.PI/4?this.sprites=this.spritesCollection.down:this.directionAngle>=Math.PI/4&&this.directionAngle<=3*Math.PI/4?this.sprites=this.spritesCollection.up:this.directionAngle>=3*Math.PI/4&&this.directionAngle<=5*Math.PI/4?this.sprites=this.spritesCollection.left:this.sprites=this.spritesCollection.right}},{key:"getAllSprites",value:function(){this.spritesCollection={left:this.getSprites("."+this.selector+"-left-img"),right:this.getSprites("."+this.selector+"-right-img"),up:this.getSprites("."+this.selector+"-up-img"),down:this.getSprites("."+this.selector+"-down-img")}}},{key:"getSprites",value:function(e){return[].slice.call(document.querySelectorAll(e))}}]),r}();n.default=u},{"./person":4}],7:[function(e,t,n){"use strict";var r=o(e("./utils/router")),i=o(e("./routes"));function o(e){return e&&e.__esModule?e:{default:e}}(0,o(e("./utils/addButtonsForMobile")).default)(),new r.default(i.default)},{"./routes":8,"./utils/addButtonsForMobile":9,"./utils/router":12}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=o(e("./gameObjects/gameState")),i=o(e("./utils/firebase"));function o(e){return e&&e.__esModule?e:{default:e}}var a=document.querySelector(".content"),s=new r.default(a),u=[{match:"",onEnter:function(){window.location.hash="game"}},{match:"about",onEnter:function(){c("about"),a.innerHTML='<h1 class="about"><span>Super game Cat vs Ninjas</span><h1>'}},{match:"game",onEnter:function(){c("game"),s.setUpGame()},onLeave:function(){s.endGame()}},{match:"scores",onEnter:function(){c("scores"),i.default.getScores().then(function(e){a.innerHTML='<h1 class="about"><span>Scores</span></h1>';var n=document.createElement("ol");e.forEach(function(e){var t=document.createElement("li");t.innerHTML=e.name+" - "+e.score,n.appendChild(t)});var t=document.createElement("div");t.classList.add("w-100"),a.appendChild(t);var r=document.createElement("div");r.appendChild(n),a.appendChild(r)})}}];function c(e){document.querySelector(".active").className="",document.querySelector('[href="#'+e+'"]').parentElement.className="active"}n.default=u},{"./gameObjects/gameState":2,"./utils/firebase":11}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){if((0,o.default)()){var e=document.createElement("div");e.classList.add("buttons");var t=document.createElement("button");t.innerHTML="<",t.classList.add("left");var n=document.createElement("button");n.innerHTML="^",n.classList.add("up");var r=document.createElement("button");r.innerHTML=">",r.classList.add("right");var i=document.createElement("button");i.innerHTML="v",i.classList.add("down"),e.appendChild(t),e.appendChild(n),e.appendChild(r),e.appendChild(i),e.addEventListener("click",function(e){if(e.target.matches(".right")){var t=new Event("keydown");return t.keyCode=39,void document.dispatchEvent(t)}if(e.target.matches(".left")){var n=new Event("keydown");return n.keyCode=37,void document.dispatchEvent(n)}if(e.target.matches(".up")){var r=new Event("keydown");return r.keyCode=38,void document.dispatchEvent(r)}if(e.target.matches(".down")){var i=new Event("keydown");return i.keyCode=40,void document.dispatchEvent(i)}}),document.body.appendChild(e)}};var r,i=e("./detectMobile"),o=(r=i)&&r.__esModule?r:{default:r}},{"./detectMobile":10}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))}},{}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i="https://kate-arcade-game.firebaseio.com/.json",o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"getScores",value:function(){return fetch(i).then(function(e){return e.json()})}},{key:"saveScore",value:function(n){this.getScores().then(function(e){var t=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e||[]),[n]);t.sort(function(e,t){return e.score>t.score?-1:e.score<t.score?1:0}),t.splice(10),fetch(i,{method:"PUT",body:JSON.stringify(t)})})}}]),e}();n.default=o},{}],12:[function(e,t,n){"use strict";function r(e){var t=this;this.routes=e||[],this.currentRoute,this.previousRoute,this.currentParams,this.previousParams,window.addEventListener("hashchange",function(){t.handler(window.location.hash)}),this.handler(window.location.hash)}Object.defineProperty(n,"__esModule",{value:!0}),(n.default=r).prototype={handler:function(e){this.previousRoute=this.currentRoute,this.previousParams=this.currentParams,this.currentRoute=this.findNewRoute(e),this.launchHandlers()},findNewRoute:function(e){e=e.slice(1);for(var t=0;t<this.routes.length;t++){var n=this.routes[t];if("string"==typeof n.match&&n.match===e)return this.currentParams="",n;if("function"==typeof n.match&&n.match(e))return this.currentParams="",n;if(n.match instanceof RegExp&&n.match.test(e))return this.currentParams=e.match(n.match)||[],this.currentParams.splice(0,1),n}},launchHandlers:function(){var e=this;Promise.resolve().then(function(){e.previousRoute&&e.previousRoute.onLeave&&e.previousRoute.onLeave(e.previousParams)}).then(function(){e.currentRoute&&e.currentRoute.onBeforeEnter&&e.currentRoute.onBeforeEnter(e.currentParams)}).then(function(){e.currentRoute&&e.currentRoute.onEnter&&e.currentRoute.onEnter(e.currentParams)})}}},{}]},{},[7]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvZ2FtZU9iamVjdHMvZHVtbXlFbmVteS5qcyIsInNyYy9qcy9nYW1lT2JqZWN0cy9nYW1lU3RhdGUuanMiLCJzcmMvanMvZ2FtZU9iamVjdHMvaGVyby5qcyIsInNyYy9qcy9nYW1lT2JqZWN0cy9wZXJzb24uanMiLCJzcmMvanMvZ2FtZU9iamVjdHMvc21hcnRFbmVteS5qcyIsInNyYy9qcy9nYW1lT2JqZWN0cy9zbWFydFBlcnNvbi5qcyIsInNyYy9qcy9tYWluLmpzIiwic3JjL2pzL3JvdXRlcy5qcyIsInNyYy9qcy91dGlscy9hZGRCdXR0b25zRm9yTW9iaWxlLmpzIiwic3JjL2pzL3V0aWxzL2RldGVjdE1vYmlsZS5qcyIsInNyYy9qcy91dGlscy9maXJlYmFzZS5qcyIsInNyYy9qcy91dGlscy9yb3V0ZXIuanMiXSwibmFtZXMiOlsiciIsImUiLCJuIiwidCIsIm8iLCJpIiwiZiIsImMiLCJyZXF1aXJlIiwidSIsImEiLCJFcnJvciIsImNvZGUiLCJwIiwiZXhwb3J0cyIsImNhbGwiLCJsZW5ndGgiLCIxIiwibW9kdWxlIiwiX3BlcnNvbiIsIkR1bW15RW5lbXkiLCJnYW1lU3RhdGUiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX3RoaXMiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsIl9fcHJvdG9fXyIsIk9iamVjdCIsImdldFByb3RvdHlwZU9mIiwid2lkdGgiLCJoZWlnaHQiLCJnZXRTcHJpdGVzIiwiZ2VuZXJhdGVQb3NpdGlvbiIsIl9wZXJzb24yIiwiZGVmYXVsdCIsInBvc2l0aW9uIiwieCIsIk1hdGgiLCJhYnMiLCJnYW1lIiwicmFuZG9tIiwieSIsImdldERpc3RhbmNlVG9IZXJvIiwiaGVybyIsInNxcnQiLCJwb3ciLCJzcHJpdGVzIiwic2xpY2UiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJHYW1lU3RhdGUiLCJlbGVtZW50VG9EcmF3Iiwid2luZG93IiwiaW5uZXJXaWR0aCIsImRvY3VtZW50RWxlbWVudCIsImNsaWVudEhlaWdodCIsImJvZHkiLCJjb250YWludGVyIiwiY2FudmFzIiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsImFwcGVuZENoaWxkIiwiY29udGV4dCIsImdldENvbnRleHQiLCJfaGVybzIiLCJjaGFyYWN0ZXJzIiwiQXJyYXkiLCJmaWxsIiwibWFwIiwiX2R1bW15RW5lbXkyIiwicHVzaCIsIl9zbWFydEVuZW15MiIsImxldmVsIiwiYmFzZVNwZWVkIiwiZ2FtZVBsYXlzIiwiZ2FtZVRpbWVyIiwidGltZXJIYW5kbGVyIiwic2V0SW50ZXJ2YWwiLCJjbGVhclJlY3QiLCJmb3JFYWNoIiwiY2hhcmFjdGVyIiwiY2hlY2tDaGFyYWN0ZXJzSW50ZXJzZWN0aW9uIiwiZHJhd0NoYXJhY3RlciIsImRyYXdJbWFnZSIsImdldE5leHRTcHJpdGUiLCJEYXRlIiwiZ2V0VGltZSIsInNldExldmVsIiwiZW5lbXkiLCJkaWUiLCJsb3NlR2FtZSIsImVuZEdhbWUiLCJzY29yZSIsIm5hbWUiLCJwcm9tcHQiLCJfZmlyZWJhc2UyIiwic2F2ZVNjb3JlIiwiY2xlYXJJbnRlcnZhbCIsImxldmVsVGltZXIiLCJfdGhpczIiLCJtZXNzYWdlIiwiY2xhc3NMaXN0IiwiYWRkIiwic2V0VGltZW91dCIsInJlbW92ZUNoaWxkIiwiX3NtYXJ0UGVyc29uIiwiSGVybyIsInNldFVwSGVybyIsInNwcml0ZXNDb2xsZWN0aW9uIiwiZG93biIsImRpcmVjdGlvbkFuZ2xlIiwiUEkiLCJfc21hcnRQZXJzb24yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwia2V5Q29kZSIsInJ1bkdhbWUiLCJzZWxlY3RTcHJpdGVzIiwic3BlZWQiLCJQZXJzb24iLCJjdXJyZW50SW1nIiwic3RlcCIsImdldFNwZWVkIiwiY29zIiwic2luIiwiU21hcnRFbmVteSIsInJhbmdlIiwiaGVyb1Bvc2l0aW9uIiwiZW5lbXlQb3NpdGlvbiIsImF0YW4iLCJfZ2V0IiwicHJvdG90eXBlIiwiU21hcnRQZXJzb24iLCJzZWxlY3RvciIsImdldEFsbFNwcml0ZXMiLCJ1cCIsImxlZnQiLCJyaWdodCIsIl9yb3V0ZXIyIiwiX3JvdXRlczIiLCJjb250ZW50IiwicXVlcnlTZWxlY3RvciIsIl9nYW1lU3RhdGUyIiwicm91dGVzIiwibWF0Y2giLCJvbkVudGVyIiwibG9jYXRpb24iLCJoYXNoIiwiY2hhbmdlQWN0aXZlUGFnZSIsInNldFVwR2FtZSIsIm9uTGVhdmUiLCJnZXRTY29yZXMiLCJ0aGVuIiwicmVzdWx0Iiwib2wiLCJpdGVtIiwibGkiLCJkaXZGb3JEaXZpc2lvbiIsImRpdiIsIm5ld1BhZ2UiLCJjbGFzc05hbWUiLCJwYXJlbnRFbGVtZW50IiwiX2RldGVjdE1vYmlsZTIiLCJkaXZGb3JCdXR0b25zIiwiYnV0dG9uTGVmdCIsImJ1dHRvblVwIiwiYnV0dG9uUmlnaHQiLCJidXR0b25Eb3duIiwidGFyZ2V0IiwibWF0Y2hlcyIsIkV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsIl9lIiwiX2UyIiwiX2UzIiwiX2RldGVjdE1vYmlsZSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInVybCIsIkZpcmVTdG9yZSIsImZldGNoIiwicmVzcG9uc2UiLCJqc29uIiwiaW5mb1RvU2F2ZSIsInNjb3JlcyIsIm5ld1Njb3JlcyIsImNvbmNhdCIsIl90b0NvbnN1bWFibGVBcnJheSIsInNvcnQiLCJpdGVtMSIsIml0ZW0yIiwic3BsaWNlIiwibWV0aG9kIiwiSlNPTiIsInN0cmluZ2lmeSIsIlJvdXRlciIsInJvdXRlUGFyYW1zIiwiY3VycmVudFJvdXRlIiwicHJldmlvdXNSb3V0ZSIsImN1cnJlbnRQYXJhbXMiLCJwcmV2aW91c1BhcmFtcyIsImhhbmRsZXIiLCJmaW5kTmV3Um91dGUiLCJsYXVuY2hIYW5kbGVycyIsImVsZW1lbnQiLCJSZWdFeHAiLCJ0ZXN0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJvbkJlZm9yZUVudGVyIl0sIm1hcHBpbmdzIjoiQ0FBQSxT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NUgsS0FBQWdMLGNBQUEsR0FDQUssRUFFSixHQUFJLG1CQUFRQSxFQUFSNUQsT0FBd0M0RCxFQUFBNUQsTUFBNUNHLEdBRUksT0FEQTVILEtBQUFnTCxjQUFBLEdBQ0FLLEVBRUosR0FBS0EsRUFBQTVELGlCQUFENkQsUUFBcUNELEVBQUE1RCxNQUFBOEQsS0FBekMzRCxHQUdJLE9BRkE1SCxLQUFBZ0wsY0FBcUJwRCxFQUFBSCxNQUFXNEQsRUFBWDVELFFBQXJCLEdBQ0F6SCxLQUFBZ0wsY0FBQVIsT0FBQSxFQUFBLEdBQ0FhLElBdkJHRCxlQUFBLFdBMkJFLElBQUF4RyxFQUFBNUUsS0FDYndMLFFBQUFDLFVBQUF4RCxLQUNVLFdBQVFyRCxFQUFBbUcsZUFBc0JuRyxFQUFBbUcsY0FBdEJoRCxTQUFvRG5ELEVBQUFtRyxjQUFBaEQsUUFBMkJuRCxFQUEvRXFHLGtCQURsQmhELEtBRVUsV0FBUXJELEVBQUFrRyxjQUFxQmxHLEVBQUFrRyxhQUFyQlksZUFBd0Q5RyxFQUFBa0csYUFBQVksY0FBZ0M5RyxFQUF4Rm9HLGlCQUZsQi9DLEtBR1UsV0FBUXJELEVBQUFrRyxjQUFxQmxHLEVBQUFrRyxhQUFyQnBELFNBQWtEOUMsRUFBQWtHLGFBQUFwRCxRQUEwQjlDLEVBQTVFb0ciLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImltcG9ydCBQZXJzb24gZnJvbSAnLi9wZXJzb24nO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHVtbXlFbmVteSBleHRlbmRzIFBlcnNvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihnYW1lU3RhdGUpIHtcclxuICAgICAgICBzdXBlcihnYW1lU3RhdGUpO1xyXG4gICAgICAgIHRoaXMud2lkdGggPSAzNjtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IDQ4O1xyXG4gICAgICAgIHRoaXMuZ2V0U3ByaXRlcygpO1xyXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVQb3NpdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlUG9zaXRpb24oKSB7XHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgeDogTWF0aC5hYnModGhpcy53aWR0aCAtIHRoaXMuZ2FtZS53aWR0aCAqIE1hdGgucmFuZG9tKCkpLFxyXG4gICAgICAgICAgICAgICAgeTogdGhpcy5nYW1lLmhlaWdodCAvIDIgKiBNYXRoLnJhbmRvbSgpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSB3aGlsZSAodGhpcy5nZXREaXN0YW5jZVRvSGVybygpIDwgMjAwKTtcclxuICAgIH1cclxuICAgIGdldERpc3RhbmNlVG9IZXJvKCkge1xyXG4gICAgICAgIGxldCBoZXJvID0gdGhpcy5nYW1lLmhlcm87XHJcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyhoZXJvLnBvc2l0aW9uLnggLSB0aGlzLnBvc2l0aW9uLngsIDIpICsgTWF0aC5wb3coaGVyby5wb3NpdGlvbi55IC0gdGhpcy5wb3NpdGlvbi55LCAyKSk7XHJcbiAgICB9XHJcbiAgICBnZXRTcHJpdGVzKCkge1xyXG4gICAgICAgIHRoaXMuc3ByaXRlcyA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmdvYmxpbi1pbWcnKSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgSGVybyBmcm9tICcuL2hlcm8nO1xyXG5pbXBvcnQgRHVtbXlFbmVteSBmcm9tICcuL2R1bW15RW5lbXknO1xyXG5pbXBvcnQgU21hcnRFbmVteSBmcm9tICcuL3NtYXJ0RW5lbXknO1xyXG5pbXBvcnQgRmlyZVN0b3JlIGZyb20gJy4uL3V0aWxzL2ZpcmViYXNlJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVTdGF0ZSB7XHJcblx0Y29uc3RydWN0b3IoZWxlbWVudFRvRHJhdykge1xyXG5cdFx0dGhpcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoID49IDEwMDAgPyAxMDAwIDogd2luZG93LmlubmVyV2lkdGg7XHJcblxyXG5cdFx0dGhpcy5oZWlnaHQgPSAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodFxyXG5cdFx0XHR8fCBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCkgLSAxNjA7XHJcblxyXG5cdFx0dGhpcy5jb250YWludGVyID0gZWxlbWVudFRvRHJhdztcclxuXHR9XHJcblxyXG5cdHNldFVwR2FtZSgpIHtcclxuXHRcdHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcblx0XHR0aGlzLmNvbnRhaW50ZXIuaW5uZXJIVE1MID0gJyc7XHJcblx0XHR0aGlzLmNvbnRhaW50ZXIuYXBwZW5kQ2hpbGQodGhpcy5jYW52YXMpO1xyXG5cdFx0dGhpcy5jYW52YXMud2lkdGggPSB0aGlzLndpZHRoO1xyXG5cdFx0dGhpcy5jYW52YXMuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XHJcblx0XHR0aGlzLmNvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG5cclxuXHRcdHRoaXMuaGVybyA9IG5ldyBIZXJvKHRoaXMpO1xyXG5cdFx0dGhpcy5jaGFyYWN0ZXJzID0gW107XHJcblx0XHR0aGlzLmNoYXJhY3RlcnMgPSBuZXcgQXJyYXkoMikuZmlsbCgwKS5tYXAoKCkgPT4gbmV3IER1bW15RW5lbXkodGhpcykpO1xyXG5cdFx0dGhpcy5jaGFyYWN0ZXJzLnB1c2gobmV3IFNtYXJ0RW5lbXkodGhpcykpO1xyXG5cclxuXHRcdHRoaXMubGV2ZWwgPSAxO1xyXG5cdFx0dGhpcy5iYXNlU3BlZWQgPSAwO1xyXG5cdFx0dGhpcy5nYW1lUGxheXMgPSBmYWxzZTtcclxuXHRcdHRoaXMuZ2FtZVRpbWVyID0gMDtcclxuXHJcblx0XHR0aGlzLnRpbWVySGFuZGxlciA9IHNldEludGVydmFsKCgpID0+IHtcclxuXHRcdFx0dGhpcy5jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XHJcblxyXG5cdFx0XHR0aGlzLmNoYXJhY3RlcnMuZm9yRWFjaChjaGFyYWN0ZXIgPT4gdGhpcy5jaGVja0NoYXJhY3RlcnNJbnRlcnNlY3Rpb24odGhpcy5oZXJvLCBjaGFyYWN0ZXIpKTtcclxuXHJcblx0XHRcdHRoaXMuZHJhd0NoYXJhY3Rlcih0aGlzLmhlcm8pO1xyXG5cdFx0XHR0aGlzLmNoYXJhY3RlcnMuZm9yRWFjaChjaGFyYWN0ZXIgPT4gdGhpcy5kcmF3Q2hhcmFjdGVyKGNoYXJhY3RlcikpO1xyXG5cdFx0fSwgMTAwKTtcclxuXHR9XHJcblxyXG5cdGRyYXdDaGFyYWN0ZXIoY2hhcmFjdGVyKSB7XHJcblx0XHR0aGlzLmNvbnRleHQuZHJhd0ltYWdlKGNoYXJhY3Rlci5nZXROZXh0U3ByaXRlKCksIGNoYXJhY3Rlci5wb3NpdGlvbi54LCBjaGFyYWN0ZXIucG9zaXRpb24ueSwgY2hhcmFjdGVyLndpZHRoLCBjaGFyYWN0ZXIuaGVpZ2h0KTtcclxuXHR9XHJcblxyXG5cdHJ1bkdhbWUoKSB7XHJcblx0XHR0aGlzLmdhbWVUaW1lciA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG5cdFx0dGhpcy5nYW1lUGxheXMgPSB0cnVlO1xyXG5cdFx0dGhpcy5iYXNlU3BlZWQgPSA1O1xyXG5cdFx0dGhpcy5zZXRMZXZlbCgpO1xyXG5cdH1cclxuXHJcblx0Y2hlY2tDaGFyYWN0ZXJzSW50ZXJzZWN0aW9uKGhlcm8sIGVuZW15KSB7XHJcblx0XHRsZXQgZGVsdGFYID0gMzU7XHJcblx0XHRsZXQgZGVsdGFZID0gMTA7XHJcblx0XHRpZiAoKChoZXJvLnBvc2l0aW9uLnggKyBkZWx0YVggPD0gKGVuZW15LnBvc2l0aW9uLnggKyBlbmVteS53aWR0aCkpICYmICgoaGVyby5wb3NpdGlvbi54ICsgaGVyby53aWR0aCkgPj0gZW5lbXkucG9zaXRpb24ueCArIGRlbHRhWCkpICYmXHJcblx0XHRcdCgoaGVyby5wb3NpdGlvbi55ICsgZGVsdGFZIDw9IChlbmVteS5wb3NpdGlvbi55ICsgZW5lbXkuaGVpZ2h0KSkgJiYgKChoZXJvLnBvc2l0aW9uLnkgKyBoZXJvLmhlaWdodCkgPj0gZW5lbXkucG9zaXRpb24ueSArIGRlbHRhWSkpKSB7XHJcblx0XHRcdGhlcm8uZGllKCk7XHJcblx0XHRcdHRoaXMubG9zZUdhbWUoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGxvc2VHYW1lKCkge1xyXG5cdFx0dGhpcy5lbmRHYW1lKCk7XHJcblx0XHRsZXQgc2NvcmUgPSAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSB0aGlzLmdhbWVUaW1lcikgLyAxMDAwO1xyXG5cdFx0bGV0IG5hbWUgPSBwcm9tcHQoYFlvdXIgc2NvcmUgaXMgJHtzY29yZX0gc2Vjb25kcy5cXG4gRW50ZXIgeW91ciBuYW1lYCwgJ05pbmphJyk7XHJcblx0XHRuYW1lICYmIEZpcmVTdG9yZS5zYXZlU2NvcmUoe1xyXG5cdFx0XHRuYW1lLCBzY29yZVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRlbmRHYW1lKCkge1xyXG5cdFx0Y2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVySGFuZGxlcik7XHJcblx0XHRjbGVhckludGVydmFsKHRoaXMubGV2ZWxUaW1lcik7XHJcblx0XHR0aGlzLmdhbWVQbGF5cyA9IGZhbHNlO1xyXG5cdFx0dGhpcy5iYXNlU3BlZWQgPSAwO1xyXG5cdH1cclxuXHJcblx0c2V0TGV2ZWwoKSB7XHJcblx0XHR0aGlzLmxldmVsVGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcblx0XHRcdHRoaXMubGV2ZWwgKz0gMTtcclxuXHRcdFx0dGhpcy5jaGFyYWN0ZXJzLnB1c2gobmV3IER1bW15RW5lbXkodGhpcykpO1xyXG5cdFx0XHRpZiAodGhpcy5sZXZlbCAlIDIgPT0gMSkge1xyXG5cdFx0XHRcdHRoaXMuY2hhcmFjdGVycy5wdXNoKG5ldyBTbWFydEVuZW15KHRoaXMpKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0bGV0IG1lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0bWVzc2FnZS5jbGFzc0xpc3QuYWRkKCdsZXZlbC11cCcpO1xyXG5cdFx0XHRtZXNzYWdlLmlubmVySFRNTCA9IGBMZXZlbCBVcCEgQ3VycmVudCBsZXZlbCAtICR7dGhpcy5sZXZlbH1gO1xyXG5cclxuXHRcdFx0dGhpcy5jb250YWludGVyLmFwcGVuZENoaWxkKG1lc3NhZ2UpO1xyXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHR0aGlzLmNvbnRhaW50ZXIucmVtb3ZlQ2hpbGQobWVzc2FnZSk7XHJcblx0XHRcdH0sIDEwMDApO1xyXG5cdFx0fSwgMTAwMDApO1xyXG5cdH1cclxufVxyXG4iLCJpbXBvcnQgU21hcnRQZXJzb24gZnJvbSAnLi9zbWFydFBlcnNvbic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIZXJvIGV4dGVuZHMgU21hcnRQZXJzb24ge1xyXG4gICAgY29uc3RydWN0b3IoZ2FtZVN0YXRlKSB7XHJcbiAgICAgICAgc3VwZXIoZ2FtZVN0YXRlLCAna25pZ2h0Jyk7XHJcbiAgICAgICAgdGhpcy5zZXRVcEhlcm8oKTtcclxuICAgICAgICB0aGlzLndpZHRoID0gNzU7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSA3NTtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICB4OiAodGhpcy5nYW1lLndpZHRoIC0gdGhpcy53aWR0aCkgLyAyLFxyXG4gICAgICAgICAgICB5OiB0aGlzLmdhbWUuaGVpZ2h0IC0gdGhpcy5oZWlnaHRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnNwcml0ZXMgPSB0aGlzLnNwcml0ZXNDb2xsZWN0aW9uLmRvd247XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb25BbmdsZSA9IE1hdGguUEkgLyAyO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFVwSGVybygpIHtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzNzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uQW5nbGUgPSBNYXRoLlBJO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSAzODoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uQW5nbGUgPSBNYXRoLlBJIC8gMjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgMzk6IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpcmVjdGlvbkFuZ2xlID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgNDA6IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpcmVjdGlvbkFuZ2xlID0gTWF0aC5QSSAvIDIgKiAzO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZ2FtZS5nYW1lUGxheXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZS5ydW5HYW1lKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RTcHJpdGVzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBnZXRTcGVlZCgpIHtcclxuICAgICAgICB0aGlzLnNwZWVkID0gdGhpcy5nYW1lLmJhc2VTcGVlZCAqIHRoaXMuZ2FtZS5sZXZlbDtcclxuICAgIH1cclxuICAgIGRpZSgpIHtcclxuICAgICAgICAvLz8gICB0aGlzLnNwcml0ZXMgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXQtZGVhZC1pbWcnKSk7XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGVyc29uIHtcclxuICAgIGNvbnN0cnVjdG9yKGdhbWVTdGF0ZSkge1xyXG4gICAgICAgIHRoaXMuZ2FtZSA9IGdhbWVTdGF0ZTtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbkFuZ2xlID0gMiAqIE1hdGguUEkgKiBNYXRoLnJhbmRvbSgpO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSB7XHJcbiAgICAgICAgICAgIHg6IDAsXHJcbiAgICAgICAgICAgIHk6IDBcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc3BlZWQgPSBnYW1lU3RhdGUubGV2ZWwgKiBnYW1lU3RhdGUuYmFzZVNwZWVkIC8gMjtcclxuICAgICAgICB0aGlzLmN1cnJlbnRJbWcgPSAwO1xyXG4gICAgfVxyXG4gICAgZ2V0TmV4dFNwcml0ZSgpIHtcclxuICAgICAgICB0aGlzLnN0ZXAoKTtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50SW1nID49IHRoaXMuc3ByaXRlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW1nID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ByaXRlc1t0aGlzLmN1cnJlbnRJbWcrK107XHJcbiAgICB9XHJcblxyXG4gICAgc3RlcCgpIHtcclxuICAgICAgICB0aGlzLmdldFNwZWVkKCk7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi54ICs9IE1hdGguY29zKHRoaXMuZGlyZWN0aW9uQW5nbGUpICogdGhpcy5zcGVlZDtcclxuICAgICAgICBpZiAodGhpcy5wb3NpdGlvbi54ICsgdGhpcy53aWR0aCAvIDIgPiB0aGlzLmdhbWUud2lkdGgpIHtcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi54ID0gLXRoaXMud2lkdGggLyAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5wb3NpdGlvbi54ICsgdGhpcy53aWR0aCAvIDIgPCAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueCA9IHRoaXMuZ2FtZS53aWR0aCAtIHRoaXMud2lkdGggLyAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBvc2l0aW9uLnkgLT0gTWF0aC5zaW4odGhpcy5kaXJlY3Rpb25BbmdsZSkgKiB0aGlzLnNwZWVkO1xyXG4gICAgICAgIGlmICh0aGlzLnBvc2l0aW9uLnkgKyB0aGlzLmhlaWdodCAvIDIgPiB0aGlzLmdhbWUuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueSA9IC10aGlzLmhlaWdodCAvIDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnBvc2l0aW9uLnkgKyB0aGlzLmhlaWdodCAvIDIgPCAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueSA9IHRoaXMuZ2FtZS5oZWlnaHQgLSB0aGlzLmhlaWdodCAvIDI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0U3BlZWQoKSB7XHJcbiAgICAgICAgdGhpcy5zcGVlZCA9IHRoaXMuZ2FtZS5iYXNlU3BlZWQgKiB0aGlzLmdhbWUubGV2ZWwgLyAyO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuIiwiaW1wb3J0IFNtYXJ0UGVyc29uIGZyb20gJy4vc21hcnRQZXJzb24nO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU21hcnRFbmVteSBleHRlbmRzIFNtYXJ0UGVyc29uIHtcclxuICAgIGNvbnN0cnVjdG9yKGdhbWVTdGF0ZSkge1xyXG4gICAgICAgIHN1cGVyKGdhbWVTdGF0ZSwgJ3JvZ3VlJyk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RTcHJpdGVzKCk7XHJcbiAgICAgICAgdGhpcy5yYW5nZSA9IDMwMDtcclxuICAgICAgICB0aGlzLndpZHRoID0gNjA7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSA2MDtcclxuICAgICAgICB0aGlzLmdlbmVyYXRlUG9zaXRpb24oKTtcclxuICAgIH1cclxuICAgIHN0ZXAoKSB7XHJcbiAgICAgICAgbGV0IGhlcm9Qb3NpdGlvbiA9IHRoaXMuZ2FtZS5oZXJvLnBvc2l0aW9uO1xyXG4gICAgICAgIGxldCBlbmVteVBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbjtcclxuICAgICAgICBpZiAodGhpcy5nZXREaXN0YW5jZVRvSGVybygpIDw9IHRoaXMucmFuZ2UgJiYgKGhlcm9Qb3NpdGlvbi54ICE9PSBlbmVteVBvc2l0aW9uLngpKSB7XHJcbiAgICAgICAgICAgIGxldCBhdGFuID0gTWF0aC5hdGFuKChoZXJvUG9zaXRpb24ueSAtIGVuZW15UG9zaXRpb24ueSkgLyAoaGVyb1Bvc2l0aW9uLnggLSBlbmVteVBvc2l0aW9uLngpKTtcclxuXHJcbiAgICAgICAgICAgIGlmICgoKGhlcm9Qb3NpdGlvbi54ID4gZW5lbXlQb3NpdGlvbi54KSAmJiAoaGVyb1Bvc2l0aW9uLnkgPCBlbmVteVBvc2l0aW9uLnkpKSB8fFxyXG4gICAgICAgICAgICAgICAgKChoZXJvUG9zaXRpb24ueCA+IGVuZW15UG9zaXRpb24ueCkgJiYgKGhlcm9Qb3NpdGlvbi55ID4gZW5lbXlQb3NpdGlvbi55KSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uQW5nbGUgPSAyICogTWF0aC5QSSAtIGF0YW47XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpcmVjdGlvbkFuZ2xlID0gTWF0aC5QSSAtIGF0YW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RTcHJpdGVzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN1cGVyLnN0ZXAoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZVBvc2l0aW9uKCkge1xyXG4gICAgICAgIGRvIHtcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgIHg6IE1hdGguYWJzKHRoaXMud2lkdGggLSB0aGlzLmdhbWUud2lkdGggKiBNYXRoLnJhbmRvbSgpKSxcclxuICAgICAgICAgICAgICAgIHk6IHRoaXMuZ2FtZS5oZWlnaHQgLyAyICogTWF0aC5yYW5kb20oKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gd2hpbGUgKHRoaXMuZ2V0RGlzdGFuY2VUb0hlcm8oKSA8IDIwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGlzdGFuY2VUb0hlcm8oKSB7XHJcbiAgICAgICAgbGV0IGhlcm8gPSB0aGlzLmdhbWUuaGVybztcclxuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KGhlcm8ucG9zaXRpb24ueCAtIHRoaXMucG9zaXRpb24ueCwgMikgKyBNYXRoLnBvdyhoZXJvLnBvc2l0aW9uLnkgLSB0aGlzLnBvc2l0aW9uLnksIDIpKTtcclxuICAgIH1cclxufSIsImltcG9ydCBQZXJzb24gZnJvbSAnLi9wZXJzb24nO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU21hcnRQZXJzb24gZXh0ZW5kcyBQZXJzb24ge1xyXG4gICAgY29uc3RydWN0b3IoZ2FtZVN0YXRlLCBzZWxlY3Rvcikge1xyXG4gICAgICAgIHN1cGVyKGdhbWVTdGF0ZSk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuZ2V0QWxsU3ByaXRlcygpO1xyXG4gICAgfVxyXG4gICAgc2VsZWN0U3ByaXRlcygpIHtcclxuICAgICAgICBpZiAoKHRoaXMuZGlyZWN0aW9uQW5nbGUgPj0gTWF0aC5QSSAqIDUgLyA0KSAmJiAodGhpcy5kaXJlY3Rpb25BbmdsZSA8PSBNYXRoLlBJICogNyAvIDQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlcyA9IHRoaXMuc3ByaXRlc0NvbGxlY3Rpb24uZG93bjtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKHRoaXMuZGlyZWN0aW9uQW5nbGUgPj0gTWF0aC5QSSAvIDQpICYmICh0aGlzLmRpcmVjdGlvbkFuZ2xlIDw9IE1hdGguUEkgKiAzIC8gNCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zcHJpdGVzID0gdGhpcy5zcHJpdGVzQ29sbGVjdGlvbi51cDtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKHRoaXMuZGlyZWN0aW9uQW5nbGUgPj0gTWF0aC5QSSAqIDMgLyA0KSAmJiAodGhpcy5kaXJlY3Rpb25BbmdsZSA8PSBNYXRoLlBJICogNSAvIDQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlcyA9IHRoaXMuc3ByaXRlc0NvbGxlY3Rpb24ubGVmdDtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNwcml0ZXMgPSB0aGlzLnNwcml0ZXNDb2xsZWN0aW9uLnJpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFsbFNwcml0ZXMoKSB7XHJcbiAgICAgICAgdGhpcy5zcHJpdGVzQ29sbGVjdGlvbiA9IHtcclxuICAgICAgICAgICAgbGVmdDogdGhpcy5nZXRTcHJpdGVzKGAuJHt0aGlzLnNlbGVjdG9yfS1sZWZ0LWltZ2ApLFxyXG4gICAgICAgICAgICByaWdodDogdGhpcy5nZXRTcHJpdGVzKGAuJHt0aGlzLnNlbGVjdG9yfS1yaWdodC1pbWdgKSxcclxuICAgICAgICAgICAgdXA6IHRoaXMuZ2V0U3ByaXRlcyhgLiR7dGhpcy5zZWxlY3Rvcn0tdXAtaW1nYCksXHJcbiAgICAgICAgICAgIGRvd246IHRoaXMuZ2V0U3ByaXRlcyhgLiR7dGhpcy5zZWxlY3Rvcn0tZG93bi1pbWdgKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3ByaXRlcyhzZWxlY3Rvcikge1xyXG4gICAgICAgIHJldHVybiBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgUm91dGVyIGZyb20gJy4vdXRpbHMvcm91dGVyJztcclxuaW1wb3J0IHJvdXRlcyBmcm9tICcuL3JvdXRlcyc7XHJcbmltcG9ydCBhZGRCdXR0b25zRm9yTW9iaWxlIGZyb20gJy4vdXRpbHMvYWRkQnV0dG9uc0Zvck1vYmlsZSc7XHJcblxyXG5hZGRCdXR0b25zRm9yTW9iaWxlKCk7XHJcbm5ldyBSb3V0ZXIocm91dGVzKTsiLCJpbXBvcnQgR2FtZVN0YXRlIGZyb20gJy4vZ2FtZU9iamVjdHMvZ2FtZVN0YXRlJztcclxuaW1wb3J0IEZpcmVTdG9yZSBmcm9tICcuL3V0aWxzL2ZpcmViYXNlJztcclxuXHJcbmxldCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQnKTtcclxubGV0IGdhbWUgPSBuZXcgR2FtZVN0YXRlKGNvbnRlbnQpO1xyXG5cclxuY29uc3Qgcm91dGVzID0gW1xyXG4gICAge1xyXG4gICAgICAgIG1hdGNoOiAnJyxcclxuICAgICAgICBvbkVudGVyOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJ2dhbWUnO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbWF0Y2g6ICdhYm91dCcsXHJcbiAgICAgICAgb25FbnRlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICBjaGFuZ2VBY3RpdmVQYWdlKCdhYm91dCcpO1xyXG4gICAgICAgICAgICBjb250ZW50LmlubmVySFRNTCA9ICc8aDEgY2xhc3M9XCJhYm91dFwiPjxzcGFuPlN1cGVyIGdhbWUgQ2F0IHZzIE5pbmphczwvc3Bhbj48aDE+JztcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG1hdGNoOiAnZ2FtZScsXHJcbiAgICAgICAgb25FbnRlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICBjaGFuZ2VBY3RpdmVQYWdlKCdnYW1lJyk7XHJcbiAgICAgICAgICAgIGdhbWUuc2V0VXBHYW1lKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbkxlYXZlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGdhbWUuZW5kR2FtZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbWF0Y2g6ICdzY29yZXMnLFxyXG4gICAgICAgIG9uRW50ZXI6ICgpID0+IHtcclxuICAgICAgICAgICAgY2hhbmdlQWN0aXZlUGFnZSgnc2NvcmVzJyk7XHJcblxyXG4gICAgICAgICAgICBGaXJlU3RvcmUuZ2V0U2NvcmVzKCkudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSAnPGgxIGNsYXNzPVwiYWJvdXRcIj48c3Bhbj5TY29yZXM8L3NwYW4+PC9oMT4nO1xyXG4gICAgICAgICAgICAgICAgbGV0IG9sID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb2wnKTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGkuaW5uZXJIVE1MID0gYCR7aXRlbS5uYW1lfSAtICR7aXRlbS5zY29yZX1gO1xyXG4gICAgICAgICAgICAgICAgICAgIG9sLmFwcGVuZENoaWxkKGxpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBkaXZGb3JEaXZpc2lvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgZGl2Rm9yRGl2aXNpb24uY2xhc3NMaXN0LmFkZCgndy0xMDAnKTtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZGl2Rm9yRGl2aXNpb24pO1xyXG4gICAgICAgICAgICAgICAgbGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKG9sKTtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZGl2KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXTtcclxuXHJcbmZ1bmN0aW9uIGNoYW5nZUFjdGl2ZVBhZ2UobmV3UGFnZSkge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGl2ZScpLmNsYXNzTmFtZSA9ICcnO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2hyZWY9XCIjJHtuZXdQYWdlfVwiXWApLnBhcmVudEVsZW1lbnQuY2xhc3NOYW1lID0gJ2FjdGl2ZSc7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCByb3V0ZXM7XHJcbiIsImltcG9ydCBkZXRlY3RNb2JpbGUgZnJvbSAnLi9kZXRlY3RNb2JpbGUnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYWRkQnV0dG9uc0Zvck1vYmlsZSgpIHtcclxuICAgIGlmIChkZXRlY3RNb2JpbGUoKSkge1xyXG5cclxuICAgICAgICB2YXIgZGl2Rm9yQnV0dG9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGRpdkZvckJ1dHRvbnMuY2xhc3NMaXN0LmFkZCgnYnV0dG9ucycpO1xyXG5cclxuICAgICAgICB2YXIgYnV0dG9uTGVmdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgIGJ1dHRvbkxlZnQuaW5uZXJIVE1MID0gJzwnO1xyXG4gICAgICAgIGJ1dHRvbkxlZnQuY2xhc3NMaXN0LmFkZCgnbGVmdCcpO1xyXG5cclxuICAgICAgICB2YXIgYnV0dG9uVXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICBidXR0b25VcC5pbm5lckhUTUwgPSAnXic7XHJcbiAgICAgICAgYnV0dG9uVXAuY2xhc3NMaXN0LmFkZCgndXAnKTtcclxuXHJcbiAgICAgICAgdmFyIGJ1dHRvblJpZ2h0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgYnV0dG9uUmlnaHQuaW5uZXJIVE1MID0gJz4nO1xyXG4gICAgICAgIGJ1dHRvblJpZ2h0LmNsYXNzTGlzdC5hZGQoJ3JpZ2h0Jyk7XHJcblxyXG4gICAgICAgIHZhciBidXR0b25Eb3duID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgYnV0dG9uRG93bi5pbm5lckhUTUwgPSAndic7XHJcbiAgICAgICAgYnV0dG9uRG93bi5jbGFzc0xpc3QuYWRkKCdkb3duJyk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgZGl2Rm9yQnV0dG9ucy5hcHBlbmRDaGlsZChidXR0b25MZWZ0KTtcclxuICAgICAgICBkaXZGb3JCdXR0b25zLmFwcGVuZENoaWxkKGJ1dHRvblVwKTtcclxuICAgICAgICBkaXZGb3JCdXR0b25zLmFwcGVuZENoaWxkKGJ1dHRvblJpZ2h0KTtcclxuICAgICAgICBkaXZGb3JCdXR0b25zLmFwcGVuZENoaWxkKGJ1dHRvbkRvd24pO1xyXG5cclxuICAgICAgICBkaXZGb3JCdXR0b25zLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQubWF0Y2hlcygnLnJpZ2h0JykpIHtcclxuICAgICAgICAgICAgICAgIGxldCBlID0gbmV3IEV2ZW50KCdrZXlkb3duJyk7XHJcbiAgICAgICAgICAgICAgICBlLmtleUNvZGUgPSAzOTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5tYXRjaGVzKCcubGVmdCcpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZSA9IG5ldyBFdmVudCgna2V5ZG93bicpO1xyXG4gICAgICAgICAgICAgICAgZS5rZXlDb2RlID0gMzc7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQubWF0Y2hlcygnLnVwJykpIHtcclxuICAgICAgICAgICAgICAgIGxldCBlID0gbmV3IEV2ZW50KCdrZXlkb3duJyk7XHJcbiAgICAgICAgICAgICAgICBlLmtleUNvZGUgPSAzODtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5tYXRjaGVzKCcuZG93bicpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZSA9IG5ldyBFdmVudCgna2V5ZG93bicpO1xyXG4gICAgICAgICAgICAgICAgZS5rZXlDb2RlID0gNDA7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2Rm9yQnV0dG9ucyk7XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZGV0ZWN0bW9iaWxlKCkge1xyXG4gICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FuZHJvaWQvaSlcclxuICAgICAgICB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC93ZWJPUy9pKVxyXG4gICAgICAgIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQaG9uZS9pKVxyXG4gICAgICAgIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQYWQvaSlcclxuICAgICAgICB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUG9kL2kpXHJcbiAgICAgICAgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQmxhY2tCZXJyeS9pKVxyXG4gICAgICAgIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1dpbmRvd3MgUGhvbmUvaSlcclxuICAgICkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59IiwibGV0IHVybCA9ICdodHRwczovL2thdGUtYXJjYWRlLWdhbWUuZmlyZWJhc2Vpby5jb20vLmpzb24nO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmlyZVN0b3JlIHtcclxuICAgIHN0YXRpYyBnZXRTY29yZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHVybCkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIHNhdmVTY29yZShpbmZvVG9TYXZlKSB7XHJcblxyXG4gICAgICAgIHRoaXMuZ2V0U2NvcmVzKCkudGhlbihzY29yZXMgPT4ge1xyXG4gICAgICAgICAgICBsZXQgbmV3U2NvcmVzID0gWy4uLnNjb3JlcyB8fCBbXSwgaW5mb1RvU2F2ZV07XHJcbiAgICAgICAgICAgIG5ld1Njb3Jlcy5zb3J0KChpdGVtMSwgaXRlbTIpID0+IGl0ZW0xLnNjb3JlID4gaXRlbTIuc2NvcmUgPyAtMSA6IGl0ZW0xLnNjb3JlIDwgaXRlbTIuc2NvcmUgPyAxIDogMCk7XHJcbiAgICAgICAgICAgIG5ld1Njb3Jlcy5zcGxpY2UoMTApO1xyXG4gICAgICAgICAgICBmZXRjaCh1cmwsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShuZXdTY29yZXMpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiLyoqXHJcbiAqINCk0YPQvdC60YbQuNGPINC00LvRjyDQtNC+0LHQsNCy0LvQtdC90LjRjyDQuCDQvtCx0YDQsNCx0L7RgtC60Lgg0YDQvtGD0YLQvtCyINC90LAg0YHRgtGA0LDQvdC40YbQtVxyXG4gKiBAcGFyYW0geyp9IHJvdXRlUGFyYW1zINC80LDRgdGB0LjQsiDQv9Cw0YDQsNC80LXRgtGA0L7QsiDQtNC70Y8g0L7QsdGA0LDQsdC+0YLQutC4INGA0L7Rg9GC0L7QslxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUm91dGVyKHJvdXRlUGFyYW1zKSB7XHJcbiAgICB0aGlzLnJvdXRlcyA9IHJvdXRlUGFyYW1zIHx8IFtdO1xyXG4gICAgdGhpcy5jdXJyZW50Um91dGU7XHJcbiAgICB0aGlzLnByZXZpb3VzUm91dGU7XHJcbiAgICB0aGlzLmN1cnJlbnRQYXJhbXM7XHJcbiAgICB0aGlzLnByZXZpb3VzUGFyYW1zO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVyKHdpbmRvdy5sb2NhdGlvbi5oYXNoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5oYW5kbGVyKHdpbmRvdy5sb2NhdGlvbi5oYXNoKTtcclxufVxyXG5cclxuUm91dGVyLnByb3RvdHlwZSA9IHtcclxuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChoYXNoKSB7XHJcbiAgICAgICAgdGhpcy5wcmV2aW91c1JvdXRlID0gdGhpcy5jdXJyZW50Um91dGU7XHJcbiAgICAgICAgdGhpcy5wcmV2aW91c1BhcmFtcyA9IHRoaXMuY3VycmVudFBhcmFtcztcclxuICAgICAgICB0aGlzLmN1cnJlbnRSb3V0ZSA9IHRoaXMuZmluZE5ld1JvdXRlKGhhc2gpO1xyXG4gICAgICAgIHRoaXMubGF1bmNoSGFuZGxlcnMoKTtcclxuICAgIH0sXHJcbiAgICBmaW5kTmV3Um91dGU6IGZ1bmN0aW9uIChoYXNoKSB7XHJcbiAgICAgICAgaGFzaCA9IGhhc2guc2xpY2UoMSk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5yb3V0ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLnJvdXRlc1tpXTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiAoZWxlbWVudC5tYXRjaCkgPT0gJ3N0cmluZycgJiYgZWxlbWVudC5tYXRjaCA9PT0gaGFzaCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFyYW1zID0gJyc7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIChlbGVtZW50Lm1hdGNoKSA9PSAnZnVuY3Rpb24nICYmIGVsZW1lbnQubWF0Y2goaGFzaCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhcmFtcyA9ICcnO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKChlbGVtZW50Lm1hdGNoIGluc3RhbmNlb2YgUmVnRXhwKSAmJiBlbGVtZW50Lm1hdGNoLnRlc3QoaGFzaCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhcmFtcyA9IGhhc2gubWF0Y2goZWxlbWVudC5tYXRjaCkgfHwgW107XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYXJhbXMuc3BsaWNlKDAsIDEpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgbGF1bmNoSGFuZGxlcnMoKSB7XHJcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKClcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4geyB0aGlzLnByZXZpb3VzUm91dGUgJiYgdGhpcy5wcmV2aW91c1JvdXRlLm9uTGVhdmUgJiYgdGhpcy5wcmV2aW91c1JvdXRlLm9uTGVhdmUodGhpcy5wcmV2aW91c1BhcmFtcyk7IH0pXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHsgdGhpcy5jdXJyZW50Um91dGUgJiYgdGhpcy5jdXJyZW50Um91dGUub25CZWZvcmVFbnRlciAmJiB0aGlzLmN1cnJlbnRSb3V0ZS5vbkJlZm9yZUVudGVyKHRoaXMuY3VycmVudFBhcmFtcyk7IH0pXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHsgdGhpcy5jdXJyZW50Um91dGUgJiYgdGhpcy5jdXJyZW50Um91dGUub25FbnRlciAmJiB0aGlzLmN1cnJlbnRSb3V0ZS5vbkVudGVyKHRoaXMuY3VycmVudFBhcmFtcyk7IH0pO1xyXG4gICAgfVxyXG59OyJdfQ==
